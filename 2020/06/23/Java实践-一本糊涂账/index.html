<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Java,编程,源代码,Java实践," />










<meta name="description" content="链接：https:&#x2F;&#x2F;how2j.cn&#x2F;k&#x2F;hutubill&#x2F;hutubill-tutorials&#x2F;710.html?p&#x3D;154642">
<meta property="og:type" content="article">
<meta property="og:title" content="Java实践-一本糊涂账">
<meta property="og:url" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/index.html">
<meta property="og:site_name" content="伶仃浩瀚">
<meta property="og:description" content="链接：https:&#x2F;&#x2F;how2j.cn&#x2F;k&#x2F;hutubill&#x2F;hutubill-tutorials&#x2F;710.html?p&#x3D;154642">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/3507.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/3508.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/3509.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/4474.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2742.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2743.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2744.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2745.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2746.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2747.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2748.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2751.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2887.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2762.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2767.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2771.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2770.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2772.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/3510.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2778.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2779.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2793.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2786.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2789.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2790.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2791.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2811.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2801.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2795.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2796.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2798.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2799.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2800.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2802.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2803.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2805.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2804.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2807.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2808.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2810.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2813.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2815.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2817.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2818.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2820.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2822.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2879.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2830.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2880.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2824.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2881.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2842.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2843.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2844.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2845.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2882.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2851.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2883.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2857.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2859.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2861.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2863.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2864.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2867.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2884.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2871.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2875.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2878.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2889.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2891.png">
<meta property="og:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2892.png">
<meta property="article:published_time" content="2020-06-23T14:24:53.000Z">
<meta property="article:modified_time" content="2020-07-25T09:21:01.188Z">
<meta property="article:author" content="潇 卟 甸">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="编程">
<meta property="article:tag" content="源代码">
<meta property="article:tag" content="Java实践">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/3507.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/06/23/Java实践-一本糊涂账/"/>







<script>
    (function(){
        if('224694'){
            if (prompt('请输入文章密码') !== '224694'){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>

  <title>Java实践-一本糊涂账 | 伶仃浩瀚</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://xbd224694.github.io" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">伶仃浩瀚</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潇 卟 甸">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/picture.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伶仃浩瀚">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java实践-一本糊涂账</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建时间" itemprop="dateCreated datePublished" datetime="2020-06-23T22:24:53+08:00">
                2020-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/How2j/" itemprop="url" rel="index">
                    <span itemprop="name">How2j</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/" class="leancloud_visitors" data-flag-title="Java实践-一本糊涂账">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">热度 </span>
               
                 <span class="leancloud-visitors-count"></span>
	 <span> ℃ </span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  27.9k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  132 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>链接：<a href="https://how2j.cn/k/hutubill/hutubill-tutorials/710.html?p=154642" target="_blank" rel="noopener">https://how2j.cn/k/hutubill/hutubill-tutorials/710.html?p=154642</a></strong></p>
<a id="more"></a>
<h1 id="一、基础"><a class="header-anchor" href="#一、基础">¶</a>一、基础</h1>
<h2 id="1、项目简介"><a class="header-anchor" href="#1、项目简介">¶</a>1、项目简介</h2>
<p>学习了这么多J2SE基础和中级的知识点，接下来就需要一个综合性的项目把这些的知识点都<strong>融会贯通</strong>。</p>
<p>本项目是基于Swing和JDBC开发的图形界面桌面应用，涵盖了J2SE的绝大部分基础知识，通过这个项目能运用和锻炼几乎大部分的J2SE知识和技能。</p>
<p>涉及到如下内容：<br>
<strong>基础内容：</strong><br>
面向对象 字符串数字 日期</p>
<p><strong>中级内容：</strong><br>
异常 ，集合，JDBC, 反射机制，I/O，Swing， 利用TableModel更新数据, 图形界面的皮肤</p>
<p><strong>高级内容：</strong><br>
图表chart动态生成，数据库的备份与恢复，自定义圆形进度条</p>
<p><strong>软件设计思想：</strong><br>
单例模式，面板类与监听器类松耦合，Entity层设计，DAO层设计，Service层设计</p>
<p><strong>业务常见处理手法：</strong><br>
CRUD操作，配置信息，配置信息初始化，报表生成，一对多关系，多对一关系</p>
<p>通过本项目，<strong>积累宝贵的项目经验</strong>，在面试的时候，<strong>多一项谈资</strong>，<strong>多一层砝码</strong>，<strong>多一些薪水</strong></p>
<h2 id="2、可执行文件"><a class="header-anchor" href="#2、可执行文件">¶</a>2、可执行文件</h2>
<h3 id="步骤-1-可执行文件"><a class="header-anchor" href="#步骤-1-可执行文件">¶</a>步骤 1 : 可执行文件</h3>
<p>为了便于同学们对这个项目有一个直观的认识，把本项目做成了一个exe文件。<br>
因为本项目需要基于mysql数据库才能运行，所以需要先安装mysql，并且把root账号密码设置为admin。<br>
参考[安装mysql-server]</p>
<p>**注：**要运行这个exe，需要java1.8或者更高版本以上环境</p>
<h3 id="步骤-2-执行exe文件"><a class="header-anchor" href="#步骤-2-执行exe文件">¶</a>步骤 2 : 执行exe文件</h3>
<p>下载右侧的rar文件，解压后得到exe文件，点击运行</p>
<p>**友情提示：**使用前记得先杀毒,杀木马</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/3507.png" alt></p>
<h3 id="步骤-3-情况一"><a class="header-anchor" href="#步骤-3-情况一">¶</a>步骤 3 : 情况一</h3>
<p>如果弹出这个对话框，表示没安装数据库，或者账号密码不正确<br>
账号密码应该按照如下设置：<br>
账号: root<br>
密码: admin</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/3508.png" alt></p>
<h3 id="步骤-4-情况二"><a class="header-anchor" href="#步骤-4-情况二">¶</a>步骤 4 : 情况二</h3>
<p>如果弹出这个对话框，表示能够连接上MYSQL，但是发现没有运行本项目的数据库hutubill。<br>
请点击是(Y)，自动配置数据库以及相关表，以支持本项目的运行</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/3509.png" alt></p>
<h3 id="步骤-5-关于exe不能执行"><a class="header-anchor" href="#步骤-5-关于exe不能执行">¶</a>步骤 5 : 关于exe不能执行</h3>
<p>exe文件是用exe4j这个软件做的，兼容性不好，有时候会出现如图所示的错误提示。<br>
如果依然想要自己运行起来看看效果，可以下载右侧的hutubill.rar，解压后点击run.bat即可运行（无需安装数据库）。<br>
<strong>注：</strong> 必须解压之后再打开，别直接在压缩包打开，那样会出现找不到jre8/bin/javaw的问题。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/4474.png" alt></p>
<h2 id="3、功能一览"><a class="header-anchor" href="#3、功能一览">¶</a>3、功能一览</h2>
<h3 id="步骤-1-消费一览"><a class="header-anchor" href="#步骤-1-消费一览">¶</a>步骤 1 : 消费一览</h3>
<p>统计本月的消费总数，今日消费，日均消费，本月剩余，日均可用，距离月末有多少天。</p>
<p>同时使用一个环形进度条，这个环形进度条不是JDK自带的，需要自己设计，并且随着消费用度，颜色从绿色渐变为红色。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2742.png" alt></p>
<h3 id="步骤-2-记一笔"><a class="header-anchor" href="#步骤-2-记一笔">¶</a>步骤 2 : 记一笔</h3>
<p>记录本日的消费额度， 分类下拉框从 消费分类数据中读取，并且把经常消费的分类放在前面。</p>
<p>日期默认选中今天，也可以手动指定日期。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2743.png" alt></p>
<h3 id="步骤-3-消费分类管理"><a class="header-anchor" href="#步骤-3-消费分类管理">¶</a>步骤 3 : 消费分类管理</h3>
<p>对消费进行经典的CRUD 增删改查管理，同时显示一个分类下的消费次数。<br>
这里涉及到多表关系：</p>
<p>消费记录和消费分类是多对一关系</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2744.png" alt></p>
<h3 id="步骤-4-月度消费报表"><a class="header-anchor" href="#步骤-4-月度消费报表">¶</a>步骤 4 : 月度消费报表</h3>
<p>使用第三方chart类生成柱状报表，显示本月的消费趋势</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2745.png" alt></p>
<h3 id="步骤-5-设置预算和数据库路径"><a class="header-anchor" href="#步骤-5-设置预算和数据库路径">¶</a>步骤 5 : 设置预算和数据库路径</h3>
<p>在消费一览中需要显示本月可用多少金额，都是建立在预算的基础上的。</p>
<p>在设置页面，设置本月的预算金额。</p>
<p>后续的还原和备份，都需要用到数据库的命令mysql和mysqldump，需要在这里配置mysql的安装目录</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2746.png" alt></p>
<h3 id="步骤-6-备份数据"><a class="header-anchor" href="#步骤-6-备份数据">¶</a>步骤 6 : 备份数据</h3>
<p>把数据库中的所有数据，备份到.sql文件中</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2747.png" alt></p>
<h3 id="步骤-7-恢复数据"><a class="header-anchor" href="#步骤-7-恢复数据">¶</a>步骤 7 : 恢复数据</h3>
<p>根据.sql文件还原数据库</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2748.png" alt></p>
<h2 id="4、开发流程"><a class="header-anchor" href="#4、开发流程">¶</a>4、开发流程</h2>
<p>做一个完整的项目开发，与自己随便写点功能不一样，需要按照严谨的流程来进行。</p>
<p>本章讲解，如何从无到有，安排整个项目开发流程</p>
<h3 id="步骤-1-表结构设计"><a class="header-anchor" href="#步骤-1-表结构设计">¶</a>步骤 1 : 表结构设计</h3>
<p>在开始整个软件开发之前，一定是事先进行表结构设计。</p>
<p>把表有哪些字段搞清楚，表与表之间的关系理顺。</p>
<p>同时还要校验这样的表结构，是否能够支撑功能上的需要。</p>
<p>比如在[消费一览]中需要的各种数据，应该以什么样的方式去设计这些表，才能够支撑页面上的数据显示。</p>
<p>在专门的表结构设计章节里，会把每张表列出来，<strong>每个字段的意义</strong>，类型，<strong>限制</strong>。 表与表之间的关系，<strong>一对多关系，多对一关系</strong>如何确定与设计。<strong>主键约束</strong>，<strong>外键约束</strong>等等信息。</p>
<h3 id="步骤-2-原型设计"><a class="header-anchor" href="#步骤-2-原型设计">¶</a>步骤 2 : 原型设计</h3>
<p>在开始正式的功能开发之前，要进行原型设计。</p>
<p>什么是原型设计呢？ 简单说，就是先把界面做出来。 界面上的数据，都是假数据，并不是从数据库中读取的真实数据。</p>
<p>为什么要这么做呢？ 有了界面，才直观，你才会更有感觉，也才能更清楚各个功能之间怎么实现。 更重要的是，有了界面，才能<strong>更有效的和客户沟通</strong>，哪些功能需要修改，哪些功能可以删减。</p>
<p>本项目学习中，原型分两个部分来讲解，一个是原型-基础，一个是原型-界面类</p>
<p>在原型-基础章节，会从最粗简的方式开始，然后演示如何<strong>从粗陋的直接new JFrame</strong>逐步<strong>演化</strong>到面板分离，监听器分离，模型分离，并且讲解<strong>为什么要这样做</strong>和<strong>这样做带来的好处。</strong>，并重构出各种工具类，供后续界面设计重用。</p>
<p>在原型-界面类章节，使用原型-基础中的设计思想，运用其中的工具类，把本项目设计到的各种界面原型，一一开发出来。</p>
<h3 id="步骤-3-实体类与DAO的设计"><a class="header-anchor" href="#步骤-3-实体类与DAO的设计">¶</a>步骤 3 : 实体类与DAO的设计</h3>
<p>在开始功能开发之前，首先要设计实体类与DAO。相关的数据库操作，都经由DAO来完成。</p>
<h3 id="步骤-4-功能开发"><a class="header-anchor" href="#步骤-4-功能开发">¶</a>步骤 4 : 功能开发</h3>
<p>接下来才开始功能开发。</p>
<p>首先是确定<strong>多层结构</strong>，基于事件驱动，规划DAO层，Service层。 并且在开发过程中，演示重构并解释重构的理由和好处。</p>
<p>接着是开发顺序。 各个模块之间是互相依赖的，有的需要先行开发，有的模块必须建立在其他模块的基础上才可以执行。</p>
<p>最后，引用第三方的包。 比如动态生成chart图片，演示如何使用这些API。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2751.png" alt></p>
<h2 id="5、学习方法"><a class="header-anchor" href="#5、学习方法">¶</a>5、学习方法</h2>
<h3 id="步骤-1-正向学习"><a class="header-anchor" href="#步骤-1-正向学习">¶</a>步骤 1 : 正向学习</h3>
<p>按照每个章节的思路和讲解，一一敲入相应的代码，并按照说明对项目进行配置，就可以把整个项目一点一点的展开。</p>
<p>这样做的好处是，可以从点滴开始，细嚼慢咽消化项目中的知识点和设计思想。</p>
<h3 id="步骤-2-反向学习"><a class="header-anchor" href="#步骤-2-反向学习">¶</a>步骤 2 : 反向学习</h3>
<p>每个有代码的章节，都打成了当前阶段的可以运行的项目压缩包:hutubill.rar，放在右侧供以下载。</p>
<p>所以也可以在每个章节都解压hutubill.rar，然后运行，观察效果。</p>
<p>看到了效果之后，再回过头来理解每个步骤的含义，这样目的性会更加明确，效率也比较高。 但是缺点是，很可能免去了自己敲代码的环节，直接看最后运行结果。 这是对学习不利的。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2887.png" alt></p>
<h3 id="步骤-3-两次学习"><a class="header-anchor" href="#步骤-3-两次学习">¶</a>步骤 3 : 两次学习</h3>
<p>所以，我建议的学习方式是，先按照<strong>反向学习</strong>的思路，把整个项目全部跑通，并做第一次的理解。</p>
<p>然后，再从头开始以<strong>正向学习</strong>的思路，从头开始，经历整个项目的构建步骤，把每个知识点和设计思路细嚼慢咽。</p>
<p>通过这种模式，就可以把本项目消化的非常到位，功力得到大大的提升。</p>
<h1 id="二、表结构设计"><a class="header-anchor" href="#二、表结构设计">¶</a>二、表结构设计</h1>
<h2 id="1、概述"><a class="header-anchor" href="#1、概述">¶</a>1、概述</h2>
<p>在确定了要开发的功能之后，第一步应该做的是进行表结构的设计。<br>
只有把表结构设计正确了，才能支撑软件后续的功能开发，这一步是非常重要的。<br>
为了便于大家理解表结构设计的过程，把设计过程分解成了</p>
<ol>
<li>
<p>[数据库和表的创建]</p>
</li>
<li>
<p>[表关系]</p>
</li>
<li>
<p>[约束]<br>
这么三个步骤进行，然后再把三个步骤[放在一起]做一遍。方便大家理解</p>
</li>
</ol>
<h2 id="2、数据库与表"><a class="header-anchor" href="#2、数据库与表">¶</a>2、数据库与表</h2>
<h3 id="步骤-1-首先创建数据库"><a class="header-anchor" href="#步骤-1-首先创建数据库">¶</a>步骤 1 : 首先创建数据库</h3>
<p>数据库名定为hutubill，在程序中的JDBC相关代码，都需要连接这个数据库名 hutubill</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database hutubill;</span><br><span class="line">use hutubill;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-确定需要哪些表"><a class="header-anchor" href="#步骤-2-确定需要哪些表">¶</a>步骤 2 : 确定需要哪些表</h3>
<p>根据业务上的需要，一共要3个表</p>
<ol>
<li>
<p>配置表信息 config<br>
用于保存每月预算和Mysql的安装路径( 用于备份还原用)</p>
</li>
<li>
<p>消费分类表 category<br>
用于保存消费分类，比如餐饮，交通，住宿</p>
</li>
<li>
<p>消费记录表 record<br>
用于存放每一笔的消费记录，并且会用到消费分类</p>
</li>
</ol>
<h3 id="步骤-3-配置信息表-config"><a class="header-anchor" href="#步骤-3-配置信息表-config">¶</a>步骤 3 : 配置信息表 config</h3>
<p>配置信息表 config有如下字段<br>
<strong>id</strong> 主键，每个表都有一个主键 类型是 int<br>
<strong>key_</strong> 配置信息按照键值对的形式出现 ，类型是varchar(255)<br>
<strong>value</strong>配置信息的值, 类型是 varchar(255)</p>
<p><strong>注:</strong></p>
<ol>
<li>
<p>键值对<br>
进一步解释一下键值对，比如要存放每个月的预算，则需要在config表中增加一条记录，key=“budget” value=“500”，就表示预算是500.</p>
</li>
<li>
<p>varchar(255) 表示变长字符，如果实际存放只有30个字符，那么在数据库中只占用30的空间，最多占用255</p>
</li>
<li>
<p>key 是关键字，不适合用于作为字段名，所以在key后面加了一个下划线 key_ 就不会有任何问题了，识别性一样很好，一眼就知道这个字段是干什么用的</p>
</li>
<li>
<p><strong>ENGINE=InnoDB</strong> MySQL有多种存储引擎，MyISAM和InnoDB是其中常用的两种， 他们之间的区别很多，如果要展开讲，就需要专门的章节了。 这里使用ENGINE=InnoDB 是因为后续要使用的外键约束只有在InnoDB中才生效。</p>
</li>
<li>
<p><strong>DEFAULT CHARSET=utf8;</strong> 表示该表按照UTF-8的编码存放中文</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE config (</span><br><span class="line">  id int ,</span><br><span class="line">  key_ varchar(255) ,</span><br><span class="line">  value varchar(255)</span><br><span class="line">)  ENGINE&#x3D;InnoDB  DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-消费分类表-category"><a class="header-anchor" href="#步骤-4-消费分类表-category">¶</a>步骤 4 : 消费分类表 category</h3>
<p>消费分类表 category 有如下字段<br>
<strong>id</strong> 主键，每个表都有一个主键 类型是 int<br>
<strong>name</strong>分类的名称，类型是varchar(255)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE category (</span><br><span class="line">  id int,</span><br><span class="line">  name varchar(255)</span><br><span class="line">)   ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-消费记录表-record"><a class="header-anchor" href="#步骤-5-消费记录表-record">¶</a>步骤 5 : 消费记录表 record</h3>
<p>消费记录表 record 有如下字段：<br>
<strong>id</strong> 主键，每个表都有一个主键 类型是 int<br>
<strong>spend</strong> 本次花费，类型是int<br>
<strong>cid</strong> 对应的消费分类表的中记录的id, 类型是int<br>
<strong>comment</strong> 备注，比如分类是娱乐，但是你希望记录更详细的内容，啪啪啪，那么就存放在这里。<br>
<strong>date</strong> 日期，本次记录发生的时间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE record (</span><br><span class="line">  id int,</span><br><span class="line">  spend int,</span><br><span class="line">  cid int,</span><br><span class="line">  comment varchar(255) ,</span><br><span class="line">  date Date</span><br><span class="line">)   ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<h2 id="3、表关系"><a class="header-anchor" href="#3、表关系">¶</a>3、表关系</h2>
<h3 id="步骤-1-如何分析表之间的关系"><a class="header-anchor" href="#步骤-1-如何分析表之间的关系">¶</a>步骤 1 : 如何分析表之间的关系</h3>
<p>表和表之间的关系，常见的有一对多，多对一，多对多</p>
<p>比如消费<strong>分类表</strong>和消费<strong>记录表</strong>之间是有关系的，那么如何分析他们之间的关系呢？</p>
<p>分类表有<strong>多条</strong>数据，记录表也有<strong>多条</strong>数据，那么他们之间的关系是<strong>多对多吗？</strong></p>
<p>其实不然，正确的分析办法是这样的:<br>
<strong>一条记录数据，只能对应一种分类</strong><br>
比如说这次消费是吃火锅，那么只能对应餐饮，不能同时又对应住宿。<br>
那么就在分类这边写下符号 <strong>一</strong></p>
<p><strong>一条分类数据，对应多条记录数据</strong><br>
比如餐饮下，有多次消费记录，火锅，冒菜，盒饭<br>
那么就在记录这边写下符号 <strong>多</strong></p>
<p>所以分类和记录之间的关系是 <strong>一对多</strong>，<br>
又叫<strong>ONE TO MANY</strong> <strong>1：M</strong></p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2762.png" alt></p>
<h3 id="步骤-2-确定外键"><a class="header-anchor" href="#步骤-2-确定外键">¶</a>步骤 2 : 确定外键</h3>
<p>确定好分类和记录之间的关系之后，就需要在数据库表结构中<strong>通过外键</strong>表现出来</p>
<p>外键是加在多表中的，也就是加在Record表中的，在这里就是cid<br>
record (<br>
id int,<br>
spend int,<br>
<strong>cid int</strong>,<br>
comment varchar(255) ,<br>
date Date<br>
)<br>
cid指向了category表的主键 id</p>
<h2 id="4、约束"><a class="header-anchor" href="#4、约束">¶</a>4、约束</h2>
<h3 id="步骤-1-主键"><a class="header-anchor" href="#步骤-1-主键">¶</a>步骤 1 : 主键</h3>
<p>所有的表都有一个主键id，但是这只是语意上的(我们认为的)，为了让数据库把id<strong>识别为主键</strong>，需要加上主键约束</p>
<p>主键约束自带非空和唯一属性，即不能插入空，也不能重复</p>
<p>分析这一条增加约束的SQL语句：</p>
<p>alter table category add constraint pk_category_id primary key (id);</p>
<p><strong>alter table category</strong> 表示修改表category<br>
<strong>add constraint</strong> 增加约束<br>
<strong>pk_category_id</strong> 约束名称 pk 是primary key的缩写，category是表名, id表示约束加在id字段上。约束名称是可以自己定义的，你可以写成abc，但是尽量使用好的命名，使得一眼就能够看出来这个约束是什么意思。 能够降低维护成本。<br>
<strong>primary key</strong> 约束类型是主键约束<br>
<strong>(id)</strong> 表示约束加在id字段上</p>
<p>以下是对三张表都加上主键约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table category add constraint pk_category_id primary key (id);</span><br><span class="line">alter table record add constraint pk_record_id primary key (id);</span><br><span class="line">alter table config add constraint pk_config_id primary key (id);</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-设置id为自增长"><a class="header-anchor" href="#步骤-2-设置id为自增长">¶</a>步骤 2 : 设置id为自增长</h3>
<p>设置id为自增长是常用的插入数据策略。 换句话说，插入消费分类数据的时候，只用提供分类名称即可，不需要自己提供id， id由数据库自己生成。<br>
不同的数据库采用的自增长方式是不一样的，比如Oracle使用[Sequence]来实现，而MySQL就使用AUTO_INCREMENT来实现</p>
<p>alter table category change id id int auto_increment;</p>
<p>分析这条SQL语句：<br>
<strong>alter table category</strong> 表示修改表category<br>
<strong>change id</strong> 表示修改字段 id<br>
<strong>id int auto_increment;</strong> 修改后的id是 int类型，并且是auto_increment(修改之前仅仅是int类型，没有auto_increment)</p>
<p>以下SQL语句，分别为不同的表设置自增长</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table category change id id int auto_increment;</span><br><span class="line">alter table record change id id int auto_increment;</span><br><span class="line">alter table config change id id int auto_increment;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-外键"><a class="header-anchor" href="#步骤-3-外键">¶</a>步骤 3 : 外键</h3>
<p>外键约束的作用是保持数据的一致性<br>
比如增加一条消费记录，金额是500，cid是5。<br>
但是cid=5在分类表category中找不到对应的数据，那么这就破坏了数据的一致性，会带来一系列的后续问题，比如根据分类进行统计，就会找不到这条数据。</p>
<p>增加外键约束之前首先确定record表的外键是cid，指向了category表的id主键。<br>
所以增加外键之前，必须把category的id字段设置为主键。从而保证cid=5的数据在category中只能找到一条，而不是找到多条。</p>
<p>以下是增加外键约束的SQL：</p>
<p>alter table record add constraint fk_record_category foreign key (cid) references category(id)</p>
<p><strong>alter table record</strong> 修改表record<br>
<strong>add constraint</strong> 增加约束<br>
<strong>fk_record_category</strong> 约束名称fk_record_category,fk是foreign key的缩写，record_category表示是从record表指向category表的约束。 与主键一样，约束名称也是可以自己定义的，比如写成abc. 不过依然建议使用可读性好的命名方式。<br>
<strong>foreign key</strong> 约束类型，外键<br>
<strong>(cid) references category(id)</strong> 本表record的字段 cid 指向category表的字段id</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table record add constraint fk_record_category foreign key (cid) references category(id);</span><br></pre></td></tr></table></figure>
<h2 id="5、放在一起"><a class="header-anchor" href="#5、放在一起">¶</a>5、放在一起</h2>
<h3 id="步骤-1-放在一起"><a class="header-anchor" href="#步骤-1-放在一起">¶</a>步骤 1 : 放在一起</h3>
<p>在实际工作环境，就不一定会把增加约束和创建表格分开进行了，一般都是放在一起的。</p>
<p>像这样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">create database hutubill;</span><br><span class="line"> </span><br><span class="line">use  hutubill;</span><br><span class="line">  </span><br><span class="line">CREATE TABLE config (</span><br><span class="line">  id int AUTO_INCREMENT,</span><br><span class="line">  key_ varchar(255) ,</span><br><span class="line">  value varchar(255) ,</span><br><span class="line">  PRIMARY KEY (id)</span><br><span class="line">)  DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line">  </span><br><span class="line">CREATE TABLE category (</span><br><span class="line">  id int AUTO_INCREMENT,</span><br><span class="line">  name varchar(255) ,</span><br><span class="line">  PRIMARY KEY (id)</span><br><span class="line">)  DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line">  </span><br><span class="line">CREATE TABLE record (</span><br><span class="line">  id int AUTO_INCREMENT,</span><br><span class="line">  spend int,</span><br><span class="line">  cid int,</span><br><span class="line">  comment varchar(255) ,</span><br><span class="line">  date Date,</span><br><span class="line">  PRIMARY KEY (id),</span><br><span class="line">  CONSTRAINT &#96;fk_record_category&#96; FOREIGN KEY (&#96;cid&#96;) REFERENCES &#96;category&#96; (&#96;id&#96;)</span><br><span class="line">)  DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<h1 id="三、原型-基础"><a class="header-anchor" href="#三、原型-基础">¶</a>三、原型-基础</h1>
<h2 id="1、概述-v2"><a class="header-anchor" href="#1、概述-v2">¶</a>1、概述</h2>
<p>原型这个章节将从最粗陋的new JFrame开始做起，并分析其弊端。 然后逐一<strong>演化和重构</strong>出不同形式的开发界面的设计方法和思路，以及阐述这样设计带来的好处。</p>
<p>虽然Swing界面设计在Java软件开发过程中用得比重并不高，但是通过学习这个<strong>演化和重构</strong>的过程，本身就是对Java 设计思想的一种学习。</p>
<p>设计思想是在各个层面都会用到，比如J2SE中也会用到一些类似的设计思想，都相通的。</p>
<p>原型这个模块涵盖包的设计与规划，工具类的抽象，自定义界面类，各种面板类等等。</p>
<h2 id="2、粗陋的JFRAME"><a class="header-anchor" href="#2、粗陋的JFRAME">¶</a>2、粗陋的JFRAME</h2>
<h3 id="步骤-1-原型概念"><a class="header-anchor" href="#步骤-1-原型概念">¶</a>步骤 1 : 原型概念</h3>
<p>接下来就开始<strong>原型设计</strong>。什么是原型设计呢？ 简单说，就是先把界面做出来。 界面上的数据，都是假数据，并不是从数据库中读取的真实数据。</p>
<p>为什么要这么做呢？ 有了界面，才直观，你才会更有感觉，也才能更清楚各个功能之间怎么实现。 更重要的是，有了界面，才能更有效的和客户沟通，哪些功能需要修改，哪些功能可以删减。</p>
<h3 id="步骤-2-直接在main方法中new-JFrame"><a class="header-anchor" href="#步骤-2-直接在main方法中new-JFrame">¶</a>步骤 2 : 直接在main方法中new JFrame</h3>
<p>最直接的方式，就是在main方法中从new JFrame开始撸起来</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2767.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JToolBar;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HutuMainFrame</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        JFrame f = <span class="keyword">new</span> JFrame();</span><br><span class="line">        f.setSize(<span class="number">500</span>, <span class="number">450</span>);</span><br><span class="line">        f.setTitle(<span class="string">"一本糊涂账"</span>);</span><br><span class="line">        f.setLocationRelativeTo(<span class="keyword">null</span>);</span><br><span class="line">        f.setResizable(<span class="keyword">false</span>);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        JToolBar tb = <span class="keyword">new</span> JToolBar();</span><br><span class="line">        JButton bSpend = <span class="keyword">new</span> JButton(<span class="string">"消费一览"</span>);</span><br><span class="line">        JButton bRecord = <span class="keyword">new</span> JButton(<span class="string">"记一笔"</span>);</span><br><span class="line">        JButton bCategory = <span class="keyword">new</span> JButton(<span class="string">"消费分类"</span>);</span><br><span class="line">        JButton bReport = <span class="keyword">new</span> JButton(<span class="string">"月消费报表"</span>);</span><br><span class="line">        JButton bConfig = <span class="keyword">new</span> JButton(<span class="string">"设置"</span>);</span><br><span class="line">        JButton bBackup = <span class="keyword">new</span> JButton(<span class="string">"备份"</span>);</span><br><span class="line">        JButton bRecover = <span class="keyword">new</span> JButton(<span class="string">"恢复"</span>);</span><br><span class="line"> </span><br><span class="line">        tb.add(bSpend);</span><br><span class="line">        tb.add(bRecord);</span><br><span class="line">        tb.add(bCategory);</span><br><span class="line">        tb.add(bReport);</span><br><span class="line">        tb.add(bConfig);</span><br><span class="line">        tb.add(bBackup);</span><br><span class="line">        tb.add(bRecover);</span><br><span class="line">        f.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        f.add(tb, BorderLayout.NORTH);</span><br><span class="line">        f.add(<span class="keyword">new</span> JPanel(), BorderLayout.CENTER);</span><br><span class="line">         </span><br><span class="line">        f.setVisible(<span class="keyword">true</span>);</span><br><span class="line">         </span><br><span class="line">        bSpend.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bRecord.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bCategory.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bConfig.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bBackup.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bRecover.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-问题"><a class="header-anchor" href="#步骤-3-问题">¶</a>步骤 3 : 问题</h3>
<p>当界面代码变得复杂之后，就出现这么一个问题。 仅仅用于编写界面的代码就会很长，可读性变差，难以维护，而且有各种匿名内部类，非常不好定位。</p>
<ol>
<li>
<p>注意看38行，这是下方用于显示各种功能界面的JPanel。 目前这是一个空白Panel, 为了将来显示各种功能，可以想象，这一块的代码会变得非常的复杂</p>
</li>
<li>
<p>再看42-71行，这是给各个按钮加监听器，目前都还是没有任何实际功能的空白监听器，一旦将来把各种功能都加上去之后，代码会变得非常冗长和难以阅读</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JToolBar;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HutuMainFrame</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        JFrame f = <span class="keyword">new</span> JFrame();</span><br><span class="line">        f.setSize(<span class="number">500</span>, <span class="number">450</span>);</span><br><span class="line">        f.setTitle(<span class="string">"一本糊涂账"</span>);</span><br><span class="line">        f.setLocationRelativeTo(<span class="keyword">null</span>);</span><br><span class="line">        f.setResizable(<span class="keyword">false</span>);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        JToolBar tb = <span class="keyword">new</span> JToolBar();</span><br><span class="line">        JButton bSpend = <span class="keyword">new</span> JButton(<span class="string">"消费一览"</span>);</span><br><span class="line">        JButton bRecord = <span class="keyword">new</span> JButton(<span class="string">"记一笔"</span>);</span><br><span class="line">        JButton bCategory = <span class="keyword">new</span> JButton(<span class="string">"消费分类"</span>);</span><br><span class="line">        JButton bReport = <span class="keyword">new</span> JButton(<span class="string">"月消费报表"</span>);</span><br><span class="line">        JButton bConfig = <span class="keyword">new</span> JButton(<span class="string">"设置"</span>);</span><br><span class="line">        JButton bBackup = <span class="keyword">new</span> JButton(<span class="string">"备份"</span>);</span><br><span class="line">        JButton bRecover = <span class="keyword">new</span> JButton(<span class="string">"恢复"</span>);</span><br><span class="line"> </span><br><span class="line">        tb.add(bSpend);</span><br><span class="line">        tb.add(bRecord);</span><br><span class="line">        tb.add(bCategory);</span><br><span class="line">        tb.add(bReport);</span><br><span class="line">        tb.add(bConfig);</span><br><span class="line">        tb.add(bBackup);</span><br><span class="line">        tb.add(bRecover);</span><br><span class="line">        f.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        f.add(tb, BorderLayout.NORTH);</span><br><span class="line">        f.add(<span class="keyword">new</span> JPanel(), BorderLayout.CENTER);</span><br><span class="line">         </span><br><span class="line">        f.setVisible(<span class="keyword">true</span>);</span><br><span class="line">         </span><br><span class="line">        bSpend.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bRecord.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bCategory.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bConfig.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bBackup.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bRecover.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-解决办法"><a class="header-anchor" href="#步骤-4-解决办法">¶</a>步骤 4 : 解决办法</h3>
<p>为了使得代码变得更加维护，避免陷入代码冗长的泥坑里，我们需要对代码进行科学的规划。 请翻到下一章节 [界面包的规划]</p>
<h2 id="3、界面包的规划"><a class="header-anchor" href="#3、界面包的规划">¶</a>3、界面包的规划</h2>
<h3 id="步骤-1-首先看界面包规划后的样子"><a class="header-anchor" href="#步骤-1-首先看界面包规划后的样子">¶</a>步骤 1 : 首先看界面包规划后的样子</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2771.png" alt></p>
<h3 id="步骤-2-界面包的规划"><a class="header-anchor" href="#步骤-2-界面包的规划">¶</a>步骤 2 : 界面包的规划</h3>
<p>由于预见到了直接在main中编写JFrame带来的代码的冗长和难以维护性的增加。 我们需要把界面相关的类，独立出来，并且放在不同的包下面进行管理和维护。</p>
<p><strong>首先是Frame</strong><br>
整个程序只有一个主Frame，所以把这个类规划到包<strong>gui.frame</strong>下</p>
<p><strong>然后是Panel</strong><br>
JFrame本身有一个Panel，然后每一个功能模块都有一个Panel，所以把这些Panel规划到<strong>gui.panel</strong>下面去</p>
<p><strong>接着是Listener</strong><br>
把所有的监听器，都做成独立的类，实现ActionListener接口，并放在<strong>gui.listener</strong>包下</p>
<p><strong>最后是Model</strong><br>
Model用于存放数据，在这个项目中会用到TableModel和ComboBoxModel，放在<strong>gui.model</strong>包下</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2770.png" alt></p>
<h3 id="步骤-3-项目完成后界面相关包的规划截图"><a class="header-anchor" href="#步骤-3-项目完成后界面相关包的规划截图">¶</a>步骤 3 : 项目完成后界面相关包的规划截图</h3>
<p>把不同的界面相关类，规划在不同的界面包下面</p>
<p>如图MainFrame 主窗体类，规划在<strong>gui.frame</strong>包下</p>
<p>SpendPanel 消费一览面板类，规划在<strong>gui.panel</strong>包下<br>
RecordPanel 记一笔面板类，规划在<strong>gui.panel</strong>包下<br>
等等</p>
<p>ToolBarListener 工具条监听器类，规划在<strong>gui.listener</strong>包下<br>
BackupListener 备份监听器类，规划在<strong>gui.listener</strong>包下<br>
等等</p>
<p>CategoryComboBoxModel 分类下拉框Model类，规划在<strong>gui.model</strong>包下<br>
CategoryTableModel 分类表格Model类，规划在<strong>gui.model</strong>包下</p>
<p><strong>注：</strong> 这个包截图不是马上完成的效果，是项目接近完成的时候的效果，所以并不要求马上做出这么多类，不要紧张~</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2772.png" alt></p>
<h3 id="步骤-4-项目涉及的所有包"><a class="header-anchor" href="#步骤-4-项目涉及的所有包">¶</a>步骤 4 : 项目涉及的所有包</h3>
<p>和界面包一样，这些包和类，都不需要现在马上就做出来。 通过观察这些包结构，大家可以建立一个整体项目的概念。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/3510.png" alt></p>
<h2 id="4、单例的面板类"><a class="header-anchor" href="#4、单例的面板类">¶</a>4、单例的面板类</h2>
<h3 id="步骤-1-监听器访问组件"><a class="header-anchor" href="#步骤-1-监听器访问组件">¶</a>步骤 1 : 监听器访问组件</h3>
<p>在本项目中，各种按钮监听器的主要作用是获取组件的值，和修改组件的值。<br>
这就涉及到了在Listener中如何访问组件的问题。</p>
<p>那么如何使得监听器可以方便得获取组件呢？ 这就需要用到两个设计手段</p>
<ol>
<li>
<p>在面板类中，把组件声明为public的属性</p>
</li>
<li>
<p>把面板类设计为单例模式</p>
</li>
</ol>
<h3 id="步骤-2-在面板类中，把组件声明为public的属性"><a class="header-anchor" href="#步骤-2-在面板类中，把组件声明为public的属性">¶</a>步骤 2 : 在面板类中，把组件声明为public的属性</h3>
<p>以SpendPanel为例子，其中有各种标签对象，把这些标签对象设计成public 的属性，那么只要能够获取SpendPanel实例，就能很方便的获取这些组件。<br>
像这样：</p>
<p>SpendPanel p=new SpendPanel();</p>
<p>p.vMonthSpend.setText(“￥3333”);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpendPanel</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    JLabel lMonthSpend = <span class="keyword">new</span> JLabel(<span class="string">"本月消费"</span>);</span><br><span class="line">    JLabel lTodaySpend = <span class="keyword">new</span> JLabel(<span class="string">"今日消费"</span>);</span><br><span class="line">    JLabel lAvgSpendPerDay = <span class="keyword">new</span> JLabel(<span class="string">"日均消费"</span>);</span><br><span class="line">    JLabel lMonthLeft = <span class="keyword">new</span> JLabel(<span class="string">"本月剩余"</span>);</span><br><span class="line">    JLabel lDayAvgAvailable = <span class="keyword">new</span> JLabel(<span class="string">"日均可用"</span>);</span><br><span class="line">    JLabel lMonthLeftDay = <span class="keyword">new</span> JLabel(<span class="string">"距离月末"</span>);</span><br><span class="line"> </span><br><span class="line">    JLabel vMonthSpend = <span class="keyword">new</span> JLabel(<span class="string">"￥2300"</span>);</span><br><span class="line">    JLabel vTodaySpend = <span class="keyword">new</span> JLabel(<span class="string">"￥25"</span>);</span><br><span class="line">    JLabel vAvgSpendPerDay = <span class="keyword">new</span> JLabel(<span class="string">"￥120"</span>);</span><br><span class="line">    JLabel vMonthAvailable = <span class="keyword">new</span> JLabel(<span class="string">"￥2084"</span>);</span><br><span class="line">    JLabel vDayAvgAvailable = <span class="keyword">new</span> JLabel(<span class="string">"￥389"</span>);</span><br><span class="line">    JLabel vMonthLeftDay = <span class="keyword">new</span> JLabel(<span class="string">"15天"</span>);</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-把面板类设计为单例模式"><a class="header-anchor" href="#步骤-3-把面板类设计为单例模式">¶</a>步骤 3 : 把面板类设计为单例模式</h3>
<p>接着就是如何获取这些面板类呢？ 通过分析，我们意识到，其实，面板类的实例只需要<strong>有一个</strong>就行了。</p>
<p>比如SpendPanel，只需要一个实例就可以了，不需要<strong>每次显示这个面板的时候都创建新的实例</strong>。 不仅是不需要，<strong>也不应该</strong>每一次都创建新的实例。</p>
<p>所以把SpendPanel设计成[单例模式]就能很好的解决这个问题。</p>
<p>而单例模式有很多种写法，像[饿汉式单例模式] [懒汉式单例模式] 等等，其不同的方式总计有八种，甚至更多，这里我们进一步简化，活学活用，使用最简单的单例模式<br>
直接声明一个SpendPanel类型的静态属性，并指向当前实例。</p>
<p>public static SpendPanel instance = new SpendPanel();</p>
<p>这样的写法虽然不常见，但是刚好满足我们的需要。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpendPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SpendPanel instance = <span class="keyword">new</span> SpendPanel();</span><br><span class="line"> </span><br><span class="line">    JLabel lMonthSpend = <span class="keyword">new</span> JLabel(<span class="string">"本月消费"</span>);</span><br><span class="line">    JLabel lTodaySpend = <span class="keyword">new</span> JLabel(<span class="string">"今日消费"</span>);</span><br><span class="line">    JLabel lAvgSpendPerDay = <span class="keyword">new</span> JLabel(<span class="string">"日均消费"</span>);</span><br><span class="line">    JLabel lMonthLeft = <span class="keyword">new</span> JLabel(<span class="string">"本月剩余"</span>);</span><br><span class="line">    JLabel lDayAvgAvailable = <span class="keyword">new</span> JLabel(<span class="string">"日均可用"</span>);</span><br><span class="line">    JLabel lMonthLeftDay = <span class="keyword">new</span> JLabel(<span class="string">"距离月末"</span>);</span><br><span class="line"> </span><br><span class="line">    JLabel vMonthSpend = <span class="keyword">new</span> JLabel(<span class="string">"￥2300"</span>);</span><br><span class="line">    JLabel vTodaySpend = <span class="keyword">new</span> JLabel(<span class="string">"￥25"</span>);</span><br><span class="line">    JLabel vAvgSpendPerDay = <span class="keyword">new</span> JLabel(<span class="string">"￥120"</span>);</span><br><span class="line">    JLabel vMonthAvailable = <span class="keyword">new</span> JLabel(<span class="string">"￥2084"</span>);</span><br><span class="line">    JLabel vDayAvgAvailable = <span class="keyword">new</span> JLabel(<span class="string">"￥389"</span>);</span><br><span class="line">    JLabel vMonthLeftDay = <span class="keyword">new</span> JLabel(<span class="string">"15天"</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SpendPanel</span><span class="params">()</span></span>&#123;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-监听器通过单例模式的面板访问组件"><a class="header-anchor" href="#步骤-4-监听器通过单例模式的面板访问组件">¶</a>步骤 4 : 监听器通过单例模式的面板访问组件</h3>
<p>监听器就可以通过单例模式的面板访问组件了</p>
<p>SpendPanel p=SpendPanel.instance;</p>
<p>p.vMonthSpend.setText(“￥3333”)</p>
<p>这样做就非常的方便。<br>
任何监听器，要访问任何面板上的任何组件，都会变得非常的便捷<br>
与[直接在main方法中new JFrame]中使用传统的内部类方式添加监听器，代码更容易维护。<br>
这一块的理解在大家接触到后面的功能模块的时候，会感觉更明显</p>
<h2 id="5、居中面板"><a class="header-anchor" href="#5、居中面板">¶</a>5、居中面板</h2>
<p>Swing并没有提供一种可以很简单就居中的布局器，但是这样的布局器又很常见，所以在这里就自己开发一个专门用于居中的面板</p>
<h3 id="步骤-1-先看效果-拉伸居中"><a class="header-anchor" href="#步骤-1-先看效果-拉伸居中">¶</a>步骤 1 : 先看效果-拉伸居中</h3>
<p>在面板上放一个按钮，这个按钮会自动拉伸居中。 拉伸的程度也可以控制</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2778.png" alt></p>
<h3 id="步骤-2-先看效果-非拉伸居中"><a class="header-anchor" href="#步骤-2-先看效果-非拉伸居中">¶</a>步骤 2 : 先看效果-非拉伸居中</h3>
<p>在面板上放一个按钮，这个按钮会使用默认大小，并且垂直方向和水平方向都居中</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2779.png" alt></p>
<h3 id="步骤-3-居中面板CenterPanel"><a class="header-anchor" href="#步骤-3-居中面板CenterPanel">¶</a>步骤 3 : 居中面板CenterPanel</h3>
<p>首先设计一个类，继承了JPanel<br>
<strong>有3个属性</strong></p>
<p>​	private double rate;//拉伸比例</p>
<p>​	private JComponent c; //显示的组件</p>
<p>​	private boolean strech; //是否拉伸</p>
<p><strong>show(JComponent c)</strong><br>
使用show方法显示组件,show方法中的思路是： 先把这个容器中的组件都移出，然后把新的组件加进来，并且调用updateUI进行界面渲染。<br>
updateUI会导致swing去调用repaint()方法。<br>
<strong>repaint()</strong><br>
在repaint方法中，就会使用绝对定位的方式把组件放在中间位置。<br>
如果strech是true，就会根据整个容器的大小，设置组件的大小，达到拉伸的效果<br>
如果strech是false, 就使用组件的preferredSize，即非拉伸效果。</p>
<p><strong>构造方法</strong></p>
<p>public CenterPanel(double rate,boolean strech)</p>
<p><strong>rate</strong> 表示拉伸比例，1就是填满，0.5就是填一半。<br>
<strong>strech</strong> 表示是否拉伸</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.awt.Component;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JComponent;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CenterPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> rate;<span class="comment">//拉伸比例</span></span><br><span class="line">    <span class="keyword">private</span> JComponent c; <span class="comment">//显示的组件</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> strech; <span class="comment">//是否拉伸</span></span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CenterPanel</span><span class="params">(<span class="keyword">double</span> rate,<span class="keyword">boolean</span> strech)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">this</span>.rate = rate;</span><br><span class="line">        <span class="keyword">this</span>.strech = strech;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CenterPanel</span><span class="params">(<span class="keyword">double</span> rate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(rate,<span class="keyword">true</span>);</span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">repaint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != c) &#123;</span><br><span class="line">            Dimension containerSize = <span class="keyword">this</span>.getSize();</span><br><span class="line">            Dimension componentSize= c.getPreferredSize();</span><br><span class="line">              </span><br><span class="line">            <span class="keyword">if</span>(strech)</span><br><span class="line">                c.setSize((<span class="keyword">int</span>) (containerSize.width * rate), (<span class="keyword">int</span>) (containerSize.height * rate));</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                c.setSize(componentSize);</span><br><span class="line">  </span><br><span class="line">            c.setLocation(containerSize.width / <span class="number">2</span> - c.getSize().width / <span class="number">2</span>, containerSize.height / <span class="number">2</span> - c.getSize().height / <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">super</span>.repaint();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(JComponent p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.c = p;</span><br><span class="line">        Component[] cs = getComponents();</span><br><span class="line">        <span class="keyword">for</span> (Component c : cs) &#123;</span><br><span class="line">            remove(c);</span><br><span class="line">        &#125;</span><br><span class="line">        add(p);</span><br><span class="line">        <span class="keyword">this</span>.updateUI();</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        JFrame f = <span class="keyword">new</span> JFrame();</span><br><span class="line">        f.setSize(<span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">        f.setLocationRelativeTo(<span class="keyword">null</span>);</span><br><span class="line">        CenterPanel cp = <span class="keyword">new</span> CenterPanel(<span class="number">0.85</span>,<span class="keyword">true</span>);</span><br><span class="line">        f.setContentPane(cp);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(<span class="keyword">true</span>);</span><br><span class="line">        JButton b  =<span class="keyword">new</span> JButton(<span class="string">"abc"</span>);</span><br><span class="line">        cp.show(b);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6、GUIUTIL"><a class="header-anchor" href="#6、GUIUTIL">¶</a>6、GUIUTIL</h2>
<p>在开发图形界面的过程中，有很多功能在各个地方都会用到，并且重复使用的概率比较高。 比如判断一个输入框是否是数字，是否是空，是否为0等等类似的，所以把这些使用比较普遍的功能，抽象到一个工具类里。 这样以后再用的时候，就直接调用就可以了，而不需要每次都单独再写一遍。</p>
<p>这样可以节约开发时间，提高效率，降低维护成本，代码看上去也更加简洁。</p>
<h3 id="步骤-1-GUIUtil"><a class="header-anchor" href="#步骤-1-GUIUtil">¶</a>步骤 1 : GUIUtil</h3>
<p>工具类的名字，往往都会以Util结尾，Util是Utility的缩写，Utility是工具的意思。</p>
<p>GUIUtil就表示专门用在图形界面上的工具类</p>
<p>下面是整个类的代码，后续会把每个方法拿出来讲解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.ImageIcon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JComponent;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JOptionPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GUIUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String imageFolder = <span class="string">"e:/project/hutubill/img"</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setImageIcon</span><span class="params">(JButton b, String fileName, String tip)</span> </span>&#123;</span><br><span class="line">        ImageIcon i = <span class="keyword">new</span> ImageIcon(<span class="keyword">new</span> File(imageFolder, fileName).getAbsolutePath());</span><br><span class="line">        b.setIcon(i);</span><br><span class="line">        b.setPreferredSize(<span class="keyword">new</span> Dimension(<span class="number">61</span>, <span class="number">81</span>));</span><br><span class="line">        b.setToolTipText(tip);</span><br><span class="line">        b.setVerticalTextPosition(JButton.BOTTOM);</span><br><span class="line">        b.setHorizontalTextPosition(JButton.CENTER);</span><br><span class="line">        b.setText(tip);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setColor</span><span class="params">(Color color, JComponent... cs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (JComponent c : cs) &#123;</span><br><span class="line">            c.setForeground(color);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> p</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> strechRate 拉伸比例1表示满屏幕</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showPanel</span><span class="params">(JPanel p,<span class="keyword">double</span> strechRate)</span> </span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">        JFrame f = <span class="keyword">new</span> JFrame();</span><br><span class="line">        f.setSize(<span class="number">500</span>, <span class="number">500</span>);</span><br><span class="line">        f.setLocationRelativeTo(<span class="keyword">null</span>);</span><br><span class="line">        CenterPanel cp = <span class="keyword">new</span> CenterPanel(strechRate);</span><br><span class="line">        f.setContentPane(cp);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(<span class="keyword">true</span>);</span><br><span class="line">        cp.show(p);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showPanel</span><span class="params">(JPanel p)</span> </span>&#123;</span><br><span class="line">        showPanel(p,<span class="number">0.85</span>);</span><br><span class="line">    &#125;  </span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkNumber</span><span class="params">(JTextField tf, String input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!checkEmpty(tf, input))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        String text = tf.getText().trim();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Integer.parseInt(text);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e1) &#123;</span><br><span class="line">            JOptionPane.showMessageDialog(<span class="keyword">null</span>, input + <span class="string">" 需要是整数"</span>);</span><br><span class="line">            tf.grabFocus();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkZero</span><span class="params">(JTextField tf, String input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!checkNumber(tf, input))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        String text = tf.getText().trim();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> == Integer.parseInt(text)) &#123;</span><br><span class="line">            JOptionPane.showMessageDialog(<span class="keyword">null</span>, input + <span class="string">" 不能为零"</span>);</span><br><span class="line">            tf.grabFocus();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkEmpty</span><span class="params">(JTextField tf, String input)</span> </span>&#123;</span><br><span class="line">        String text = tf.getText().trim();</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> == text.length()) &#123;</span><br><span class="line">            JOptionPane.showMessageDialog(<span class="keyword">null</span>, input + <span class="string">" 不能为空"</span>);</span><br><span class="line">            tf.grabFocus();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getInt</span><span class="params">(JTextField tf)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.parseInt(tf.getText());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">useLNF</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            javax.swing.UIManager.setLookAndFeel(<span class="string">"com.birosoft.liquid.LiquidLookAndFeel"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-checkEmpty"><a class="header-anchor" href="#步骤-2-checkEmpty">¶</a>步骤 2 : checkEmpty</h3>
<p>校验一个输入框内容是否是空</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkEmpty</span><span class="params">(JTextField tf, String input)</span> </span>&#123;</span><br><span class="line">    String text = tf.getText().trim();</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> == text.length()) &#123;</span><br><span class="line">        JOptionPane.showMessageDialog(<span class="keyword">null</span>, input + <span class="string">" 不能为空"</span>);</span><br><span class="line">        tf.grabFocus();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-checkNumber"><a class="header-anchor" href="#步骤-3-checkNumber">¶</a>步骤 3 : checkNumber</h3>
<p>校验一个组件内容是否是数字格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkNumber</span><span class="params">(JTextField tf, String input)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!checkEmpty(tf, input))</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    String text = tf.getText().trim();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Integer.parseInt(text);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NumberFormatException e1) &#123;</span><br><span class="line">        JOptionPane.showMessageDialog(<span class="keyword">null</span>, input + <span class="string">" 需要是整数"</span>);</span><br><span class="line">        tf.grabFocus();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-checkZero"><a class="header-anchor" href="#步骤-4-checkZero">¶</a>步骤 4 : checkZero</h3>
<p>校验一个组件的内容是否是零</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkZero</span><span class="params">(JTextField tf, String input)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!checkNumber(tf, input))</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    String text = tf.getText().trim();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(<span class="number">0</span>==Integer.parseInt(text))&#123;</span><br><span class="line">        JOptionPane.showMessageDialog(<span class="keyword">null</span>, input + <span class="string">" 不能为零"</span>);</span><br><span class="line">        tf.grabFocus();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-setColor"><a class="header-anchor" href="#步骤-5-setColor">¶</a>步骤 5 : setColor</h3>
<p>给多个组件设置前景色</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setColor</span><span class="params">(Color color, JComponent... cs)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (JComponent c : cs) &#123;</span><br><span class="line">        c.setForeground(color);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-setImageIcon"><a class="header-anchor" href="#步骤-6-setImageIcon">¶</a>步骤 6 : setImageIcon</h3>
<p>给按钮设置图标和文本以及提示文字</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setImageIcon</span><span class="params">(JButton b, String fileName, String tip)</span> </span>&#123;</span><br><span class="line">    ImageIcon i = <span class="keyword">new</span> ImageIcon(<span class="keyword">new</span> File(imageFolder, fileName).getAbsolutePath());</span><br><span class="line">    b.setIcon(i);</span><br><span class="line">    b.setPreferredSize(<span class="keyword">new</span> Dimension(<span class="number">61</span>, <span class="number">81</span>));</span><br><span class="line">    b.setToolTipText(tip);</span><br><span class="line">    b.setVerticalTextPosition(JButton.BOTTOM);</span><br><span class="line">    b.setHorizontalTextPosition(JButton.CENTER);</span><br><span class="line">    b.setText(tip);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-useLNF"><a class="header-anchor" href="#步骤-7-useLNF">¶</a>步骤 7 : useLNF</h3>
<p>使用水晶皮肤。 Java提供很多种[皮肤],但是大部分都比较难看，水晶皮肤还算是看得过去的一种<br>
<strong>注</strong>： 这句话必须加在第一行才能保证生效<br>
需要的jar包在右侧可以下载, 并放在lib目录下，然后导入到项目中<br>
把jar包导入到项目中，导包办法：右键 project-&gt;properties-&gt;java build path-&gt;libaries-&gt;add external jars</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2793.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">useLNF</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        javax.swing.UIManager.setLookAndFeel(<span class="string">"com.birosoft.liquid.LiquidLookAndFeel"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-8-showPanel"><a class="header-anchor" href="#步骤-8-showPanel">¶</a>步骤 8 : showPanel</h3>
<p>快速显示一个面板的内容，根据前面章节的学习，我们知道，本项目会规划一个一个的独立的面板Panel。 但是面板本身不能独立显示出来，所以准备这么一个<br>
showPanel方法，就可以很方便的显示这些面板了。<br>
显示的时候还用到了 [居中面板]</p>
<p>如图，准备了一个很简单的JPanel，直接调用GUIUtil.showPanel()就可以显示出来了，在后面设计界面类的时候，用这种方式就可以很方便的进行测试。</p>
<p>JPanel p = new JPanel();</p>
<p>p.add(new JButton(“按钮1”));</p>
<p>p.add(new JButton(“按钮2”));</p>
<p>GUIUtil.showPanel§;</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2786.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> p</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> strech 拉伸比例1表示满屏幕</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showPanel</span><span class="params">(JPanel p,<span class="keyword">double</span> strech)</span> </span>&#123;</span><br><span class="line">    GUIUtil.useLNF();</span><br><span class="line">    JFrame f = <span class="keyword">new</span> JFrame();</span><br><span class="line">    f.setSize(<span class="number">500</span>, <span class="number">500</span>);</span><br><span class="line">    f.setLocationRelativeTo(<span class="keyword">null</span>);</span><br><span class="line">    CenterPanel cp = <span class="keyword">new</span> CenterPanel(strech);</span><br><span class="line">    f.setContentPane(cp);</span><br><span class="line">    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    f.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    cp.show(p);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showPanel</span><span class="params">(JPanel p)</span> </span>&#123;</span><br><span class="line">    showPanel(p,<span class="number">0.85</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        p.add(<span class="keyword">new</span> JButton(<span class="string">"按钮1"</span>));</span><br><span class="line">        p.add(<span class="keyword">new</span> JButton(<span class="string">"按钮2"</span>));</span><br><span class="line">        GUIUtil.showPanel(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7、COLORUTIL"><a class="header-anchor" href="#7、COLORUTIL">¶</a>7、COLORUTIL</h2>
<p>与[GUIUtil]一样，关于颜色也有很多重用的地方，都会被抽象到一个类里面来，方便共用</p>
<h3 id="步骤-1-ColorUtil"><a class="header-anchor" href="#步骤-1-ColorUtil">¶</a>步骤 1 : ColorUtil</h3>
<p>定义了几种颜色<br>
<strong>blueColor</strong> 淡蓝色<br>
<strong>grayColor</strong> 灰色<br>
<strong>backgroundColor</strong> 背景色<br>
<strong>warningColor</strong> 警告红色</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Color blueColor = Color.decode(<span class="string">"#3399FF"</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Color grayColor = Color.decode(<span class="string">"#999999"</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Color backgroundColor = Color.decode(<span class="string">"#eeeeee"</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Color warningColor = Color.decode(<span class="string">"#FF3333"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Color <span class="title">getByPercentage</span><span class="params">(<span class="keyword">int</span> per)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (per &gt; <span class="number">100</span>)</span><br><span class="line">            per = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">int</span> r = <span class="number">51</span>;</span><br><span class="line">        <span class="keyword">int</span> g = <span class="number">255</span>;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">51</span>;</span><br><span class="line">        <span class="keyword">float</span> rate = per / <span class="number">100f</span>;</span><br><span class="line">        r = (<span class="keyword">int</span>) ((<span class="number">255</span> - <span class="number">51</span>) * rate + <span class="number">51</span>);</span><br><span class="line">        g = <span class="number">255</span> - r + <span class="number">51</span>;</span><br><span class="line">        Color color = <span class="keyword">new</span> Color(r, g, b);</span><br><span class="line">        <span class="keyword">return</span> color;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-getByPercentage"><a class="header-anchor" href="#步骤-2-getByPercentage">¶</a>步骤 2 : getByPercentage</h3>
<p>getByPercentage根据进度显示不同的颜色<br>
如图所示，当进度是接近0的时候，就会显示绿色<br>
当进度接近100的时候，就会显示红色<br>
并在不同的颜色间过渡</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2789.png" alt></p>
<h2 id="8、CIRCLEPROGRESSBAR"><a class="header-anchor" href="#8、CIRCLEPROGRESSBAR">¶</a>8、CIRCLEPROGRESSBAR</h2>
<p>在开发这个项目的时候，需要用到一个环形进度条。 但是Swing只有自带的，[横向条状进度条]，为了达到效果，就需要自己设计一个环形进度条</p>
<h3 id="步骤-1-环形进度条"><a class="header-anchor" href="#步骤-1-环形进度条">¶</a>步骤 1 : 环形进度条</h3>
<p>像这样，需要一个环形进度条。 因为Swing默认不提供，所以需要自己开发一个环形进度条的组件。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2790.png" alt></p>
<h3 id="步骤-2-CircleProgressBar"><a class="header-anchor" href="#步骤-2-CircleProgressBar">¶</a>步骤 2 : CircleProgressBar</h3>
<p>自己开发一个组件涉及比较多的内容，包括画笔Graphics2D，画不同的形状，对paint(Graphics g)方法的理解。 这些需要一定的基础才可以做到。</p>
<p>在本项目中，这个知识不是重点，所以就不展开了。 大家主要是掌握如何使用这个环形进度条。</p>
<p><strong>提示：</strong> 有兴趣的同学，我给一些提示，环形进度条，其实就是画一个有宽度的圆弧</p>
<p>这个理解不了也没关系，掌握如何使用就行了，比如[日期控件]，大家也是主要掌握如何使用，而不是怎么去开发一个日期控件。 等以后功力上升了，才来做这方面的研究和学习。 现阶段还是放在如何使用，以及对整个项目的学习上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BasicStroke;</span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.FontMetrics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics2D;</span><br><span class="line"><span class="keyword">import</span> java.awt.RenderingHints;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.SwingWorker;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CircleProgressBar</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> minimumProgress;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maximumProgress;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> progress;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> String progressText;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> Color backgroundColor;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> Color foregroundColor;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CircleProgressBar</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        minimumProgress = <span class="number">0</span>;</span><br><span class="line">        maximumProgress = <span class="number">100</span>;</span><br><span class="line">        progressText = <span class="string">"0%"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.paint(g);</span><br><span class="line">        Graphics2D graphics2d = (Graphics2D) g;</span><br><span class="line">        <span class="comment">// 开启抗锯齿</span></span><br><span class="line">        graphics2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> width = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> height = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> fontSize = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (getWidth() &gt;= getHeight()) &#123;</span><br><span class="line">            x = (getWidth() - getHeight()) / <span class="number">2</span> + <span class="number">25</span>;</span><br><span class="line">            y = <span class="number">25</span>;</span><br><span class="line">            width = getHeight() - <span class="number">50</span>;</span><br><span class="line">            height = getHeight() - <span class="number">50</span>;</span><br><span class="line">            fontSize = getWidth() / <span class="number">8</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            x = <span class="number">25</span>;</span><br><span class="line">            y = (getHeight() - getWidth()) / <span class="number">2</span> + <span class="number">25</span>;</span><br><span class="line">            width = getWidth() - <span class="number">50</span>;</span><br><span class="line">            height = getWidth() - <span class="number">50</span>;</span><br><span class="line">            fontSize = getHeight() / <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        graphics2d.setStroke(<span class="keyword">new</span> BasicStroke(<span class="number">20.0f</span>));</span><br><span class="line">        graphics2d.setColor(backgroundColor);</span><br><span class="line">        graphics2d.drawArc(x, y, width, height, <span class="number">0</span>, <span class="number">360</span>);</span><br><span class="line">        graphics2d.setColor(foregroundColor);</span><br><span class="line">        graphics2d.drawArc(x, y, width, height, <span class="number">90</span>,</span><br><span class="line">                -(<span class="keyword">int</span>) (<span class="number">360</span> * ((progress * <span class="number">1.0</span>) / (maximumProgress - minimumProgress))));</span><br><span class="line">        graphics2d.setFont(<span class="keyword">new</span> Font(<span class="string">"黑体"</span>, Font.BOLD, fontSize));</span><br><span class="line">        FontMetrics fontMetrics = graphics2d.getFontMetrics();</span><br><span class="line">        <span class="keyword">int</span> digitalWidth = fontMetrics.stringWidth(progressText);</span><br><span class="line">        <span class="keyword">int</span> digitalAscent = fontMetrics.getAscent();</span><br><span class="line">        graphics2d.setColor(foregroundColor);</span><br><span class="line">        graphics2d.drawString(progressText, getWidth() / <span class="number">2</span> - digitalWidth / <span class="number">2</span>, getHeight() / <span class="number">2</span> + digitalAscent / <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getProgress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> progress;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProgress</span><span class="params">(<span class="keyword">int</span> progress)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (progress &gt;= minimumProgress &amp;&amp; progress &lt;= maximumProgress)</span><br><span class="line">            <span class="keyword">this</span>.progress = progress;</span><br><span class="line">        <span class="keyword">if</span> (progress &gt; maximumProgress)</span><br><span class="line">            <span class="keyword">this</span>.progress = maximumProgress;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.progressText = String.valueOf(progress + <span class="string">"%"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.repaint();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Color <span class="title">getBackgroundColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> backgroundColor;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBackgroundColor</span><span class="params">(Color backgroundColor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.backgroundColor = backgroundColor;</span><br><span class="line">        <span class="keyword">this</span>.repaint();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Color <span class="title">getForegroundColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> foregroundColor;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setForegroundColor</span><span class="params">(Color foregroundColor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.foregroundColor = foregroundColor;</span><br><span class="line">        <span class="keyword">this</span>.repaint();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-使用CircleProgressBar"><a class="header-anchor" href="#步骤-3-使用CircleProgressBar">¶</a>步骤 3 : 使用CircleProgressBar</h3>
<p>实例化</p>
<p>CircleProgressBar cpb = new CircleProgressBar();</p>
<p>设置背景色</p>
<p>cpb.setBackgroundColor(ColorUtil.blueColor);</p>
<p>设置进度</p>
<p>cpb.setProgress(0);</p>
<p>根据进度设置前景色</p>
<p>cpb.setForegroundColor(ColorUtil.getByPercentage(i + 1));</p>
<p>同时在这个Test中，还使用到了前面讲解的[GUIUtil.showPanel]来启动程序，[ColorUtil.getByPercentage]来获取不同进度的颜色，[长耗时任务线程SwingWorker]来改动进度条</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2791.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.SwingWorker;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> util.CircleProgressBar;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">        <span class="comment">//面板</span></span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        <span class="comment">//进度条组件</span></span><br><span class="line">        CircleProgressBar cpb = <span class="keyword">new</span> CircleProgressBar();</span><br><span class="line">        cpb.setBackgroundColor(ColorUtil.blueColor);</span><br><span class="line">        cpb.setProgress(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">//按钮</span></span><br><span class="line">        JButton b = <span class="keyword">new</span> JButton(<span class="string">"点击"</span>);</span><br><span class="line">        <span class="comment">//添加组件</span></span><br><span class="line">        p.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        p.add(cpb, BorderLayout.CENTER);</span><br><span class="line">        p.add(b, BorderLayout.SOUTH);</span><br><span class="line">        <span class="comment">//显示面板</span></span><br><span class="line">        GUIUtil.showPanel(p);</span><br><span class="line">          </span><br><span class="line">        <span class="comment">//给按钮加监听</span></span><br><span class="line">        b.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">  </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">new</span> SwingWorker() &#123;</span><br><span class="line">  </span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">protected</span> Object <span class="title">doInBackground</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">                            cpb.setProgress(i + <span class="number">1</span>);</span><br><span class="line">                            cpb.setForegroundColor(ColorUtil.getByPercentage(i + <span class="number">1</span>));</span><br><span class="line">                            <span class="keyword">try</span> &#123;</span><br><span class="line">                                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                            &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">                                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                                e1.printStackTrace();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">  </span><br><span class="line">                &#125;.execute();</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);    </span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9、CHARTUTIL"><a class="header-anchor" href="#9、CHARTUTIL">¶</a>9、CHARTUTIL</h2>
<h3 id="步骤-1-先看效果"><a class="header-anchor" href="#步骤-1-先看效果">¶</a>步骤 1 : 先看效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2811.png" alt></p>
<h3 id="步骤-2-ChartUtil"><a class="header-anchor" href="#步骤-2-ChartUtil">¶</a>步骤 2 : ChartUtil</h3>
<p>在图表这个面板上，需要生成柱状图。 而Swing本身不支持直接生成柱状图，需要借助第三方的jar包<strong>chart.jar</strong>。</p>
<p>在ChartUtil中有一个getImage方法，返回一个模拟数据的柱状图表。<br>
然后把这个图表放在JLabel里，再把JLabel放在JPanel里，把JPanel显示出来，就可以看到图表的效果了。</p>
<p>​		JPanel p = new JPanel();</p>
<p>​		JLabel l = new JLabel();</p>
<p>​		Image img = ChartUtil.getImage(300, 200);</p>
<p>​		Icon icon = new ImageIcon(img);</p>
<p>​		l.setIcon(icon);</p>
<p>​		p.add(l);</p>
<p>​		GUIUtil.showPanel§;</p>
<p>本例使用的是柱状图BarChart，每个使用的地方都有相关注释，请查阅注释</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.Icon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.ImageIcon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.objectplanet.chart.BarChart;</span><br><span class="line"><span class="keyword">import</span> com.objectplanet.chart.Chart;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChartUtil</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span>[] sampleValues)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">double</span> v : sampleValues) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v &gt; max)</span><br><span class="line">                max = (<span class="keyword">int</span>) v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String[] sampleLabels() &#123;</span><br><span class="line">        String[] sampleLabels = <span class="keyword">new</span> String[<span class="number">30</span>];</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sampleLabels.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">0</span> == i % <span class="number">5</span>)</span><br><span class="line">                sampleLabels[i] = String.valueOf(i + <span class="number">1</span> + <span class="string">"日"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sampleLabels;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Image <span class="title">getImage</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 模拟样本数据</span></span><br><span class="line">        <span class="keyword">double</span>[] sampleValues = sampleValues();</span><br><span class="line">        <span class="comment">// 下方显示的文字</span></span><br><span class="line">        String[] sampleLabels = sampleLabels();</span><br><span class="line">        <span class="comment">// 样本中的最大值</span></span><br><span class="line">        <span class="keyword">int</span> max = max(sampleValues);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 数据颜色</span></span><br><span class="line">        Color[] sampleColors = <span class="keyword">new</span> Color[] &#123; ColorUtil.blueColor &#125;;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 柱状图</span></span><br><span class="line">        BarChart chart = <span class="keyword">new</span> BarChart();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 设置样本个数</span></span><br><span class="line">        chart.setSampleCount(sampleValues.length);</span><br><span class="line">        <span class="comment">// 设置样本数据</span></span><br><span class="line">        chart.setSampleValues(<span class="number">0</span>, sampleValues);</span><br><span class="line">        <span class="comment">// 设置文字</span></span><br><span class="line">        chart.setSampleLabels(sampleLabels);</span><br><span class="line">        <span class="comment">// 设置样本颜色</span></span><br><span class="line">        chart.setSampleColors(sampleColors);</span><br><span class="line">        <span class="comment">// 设置取值范围</span></span><br><span class="line">        chart.setRange(<span class="number">0</span>, max * <span class="number">1.2</span>);</span><br><span class="line">        <span class="comment">// 显示背景横线</span></span><br><span class="line">        chart.setValueLinesOn(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 显示文字</span></span><br><span class="line">        chart.setSampleLabelsOn(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 把文字显示在下方</span></span><br><span class="line">        chart.setSampleLabelStyle(Chart.BELOW);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 样本值的字体</span></span><br><span class="line">        chart.setFont(<span class="string">"rangeLabelFont"</span>, <span class="keyword">new</span> Font(<span class="string">"Arial"</span>, Font.BOLD, <span class="number">12</span>));</span><br><span class="line">        <span class="comment">// 显示图例说明</span></span><br><span class="line">        chart.setLegendOn(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 把图例说明放在左侧</span></span><br><span class="line">        chart.setLegendPosition(Chart.LEFT);</span><br><span class="line">        <span class="comment">// 图例说明中的文字</span></span><br><span class="line">        chart.setLegendLabels(<span class="keyword">new</span> String[] &#123; <span class="string">"月消费报表"</span> &#125;);</span><br><span class="line">        <span class="comment">// 图例说明的字体</span></span><br><span class="line">        chart.setFont(<span class="string">"legendFont"</span>, <span class="keyword">new</span> Font(<span class="string">"Dialog"</span>, Font.BOLD, <span class="number">13</span>));</span><br><span class="line">        <span class="comment">// 下方文字的字体</span></span><br><span class="line">        chart.setFont(<span class="string">"sampleLabelFont"</span>, <span class="keyword">new</span> Font(<span class="string">"Dialog"</span>, Font.BOLD, <span class="number">13</span>));</span><br><span class="line">        <span class="comment">// 图表中间背景颜色</span></span><br><span class="line">        chart.setChartBackground(Color.white);</span><br><span class="line">        <span class="comment">// 图表整体背景颜色</span></span><br><span class="line">        chart.setBackground(ColorUtil.backgroundColor);</span><br><span class="line">        <span class="comment">// 把图表转换为Image类型</span></span><br><span class="line">        Image im = chart.getImage(width, height);</span><br><span class="line">        <span class="keyword">return</span> im;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span>[] sampleValues() &#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">double</span>[] result = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">30</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; result.length; i++) &#123;</span><br><span class="line">            result[i] = (<span class="keyword">int</span>) (Math.random() * <span class="number">300</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        JLabel l = <span class="keyword">new</span> JLabel();</span><br><span class="line">        Image img = ChartUtil.getImage(<span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">        Icon icon = <span class="keyword">new</span> ImageIcon(img);</span><br><span class="line">        l.setIcon(icon);</span><br><span class="line">        p.add(l);</span><br><span class="line">        GUIUtil.showPanel(p);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10、图片资源"><a class="header-anchor" href="#10、图片资源">¶</a>10、图片资源</h2>
<h3 id="步骤-1-解压后，放在img目录下"><a class="header-anchor" href="#步骤-1-解压后，放在img目录下">¶</a>步骤 1 : 解压后，放在img目录下</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2801.png" alt></p>
<h1 id="四、原型-界面类"><a class="header-anchor" href="#四、原型-界面类">¶</a>四、原型-界面类</h1>
<h2 id="1、MAINPANEL"><a class="header-anchor" href="#1、MAINPANEL">¶</a>1、MAINPANEL</h2>
<p>接下来根据功能演示如何开发一个一个的Panel</p>
<h3 id="步骤-1-先看效果-v2"><a class="header-anchor" href="#步骤-1-先看效果-v2">¶</a>步骤 1 : 先看效果</h3>
<p>MainPanel 是主窗体的ContentPanel，采用的是[BorderLayerout]的布局方式。<br>
北边是一个工具条<br>
中间是一个空白的Panel，用于将来显示不同的功能面板</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2795.png" alt></p>
<h3 id="步骤-2-MainPanel-代码逐一讲解"><a class="header-anchor" href="#步骤-2-MainPanel-代码逐一讲解">¶</a>步骤 2 : MainPanel-代码逐一讲解</h3>
<p>在静态初始化块中调用LookAndFeel，[设置水晶皮肤]。 因为这段话必须放在最前面才能生效，所以需要在这里调用</p>
<p>static{</p>
<p>GUIUtil.useLNF();</p>
<p>}</p>
<p>接着采用单例模式，为的是后续的监听器访问这个容器里的组件的<strong>便利性</strong></p>
<p>public static MainPanel instance = new MainPanel();</p>
<p>然后是把各种按钮声明为public 的属性，同样也是为了后续的监听器访问这个容器里的组件的<strong>便利性</strong></p>
<p>public JButton bSpend = new JButton();</p>
<p>public JButton bRecord = new JButton();</p>
<p>…</p>
<p>使用[GUI.setImageIcon]设置这些按钮的图标、文字和提示</p>
<p>GUIUtil.setImageIcon(bSpend, “home.png”, “消费一览”);</p>
<p>GUIUtil.setImageIcon(bRecord, “record.png”, “记一笔”);</p>
<p>…</p>
<p>工作面板，用于将来显示不同的功能面板。 目前暂时是空白的</p>
<p>public CenterPanel workingPanel;</p>
<p>最后使用[GUIUtil.showPanel]方法，显示这个面板实例，测试起来非常方便。</p>
<p>GUIUtil.showPanel(MainPanel.instance,1);</p>
<p>参数&quot;1&quot; 表示满屏显示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JToolBar;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> util.CenterPanel;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> MainPanel instance = <span class="keyword">new</span> MainPanel();</span><br><span class="line">    <span class="keyword">public</span> JToolBar tb = <span class="keyword">new</span> JToolBar();</span><br><span class="line">    <span class="keyword">public</span> JButton bSpend = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bRecord = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bCategory = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bReport = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bConfig = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bBackup = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bRecover = <span class="keyword">new</span> JButton();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> CenterPanel workingPanel;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">MainPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        GUIUtil.setImageIcon(bSpend, <span class="string">"home.png"</span>, <span class="string">"消费一览"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bRecord, <span class="string">"record.png"</span>, <span class="string">"记一笔"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bCategory, <span class="string">"category2.png"</span>, <span class="string">"消费分类"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bReport, <span class="string">"report.png"</span>, <span class="string">"月消费报表"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bConfig, <span class="string">"config.png"</span>, <span class="string">"设置"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bBackup, <span class="string">"backup.png"</span>, <span class="string">"备份"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bRecover, <span class="string">"restore.png"</span>, <span class="string">"恢复"</span>);</span><br><span class="line"> </span><br><span class="line">        tb.add(bSpend);</span><br><span class="line">        tb.add(bRecord);</span><br><span class="line">        tb.add(bCategory);</span><br><span class="line">        tb.add(bReport);</span><br><span class="line">        tb.add(bConfig);</span><br><span class="line">        tb.add(bBackup);</span><br><span class="line">        tb.add(bRecover);</span><br><span class="line">        tb.setFloatable(<span class="keyword">false</span>);</span><br><span class="line"> </span><br><span class="line">        workingPanel = <span class="keyword">new</span> CenterPanel(<span class="number">0.8</span>);</span><br><span class="line"> </span><br><span class="line">        setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        add(tb, BorderLayout.NORTH);</span><br><span class="line">        add(workingPanel, BorderLayout.CENTER);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(MainPanel.instance, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、SPENDPANEL"><a class="header-anchor" href="#2、SPENDPANEL">¶</a>2、SPENDPANEL</h2>
<h3 id="步骤-1-先看效果-v3"><a class="header-anchor" href="#步骤-1-先看效果-v3">¶</a>步骤 1 : 先看效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2796.png" alt></p>
<h3 id="步骤-2-布局分析-整体"><a class="header-anchor" href="#步骤-2-布局分析-整体">¶</a>步骤 2 : 布局分析-整体</h3>
<p>首先把整体是一个BorderLayerout<br>
中间是一个Panel，采用的BorderLayerout.CENTER<br>
下面也是一个Panel，采用的BorderLayerout.SOUTH</p>
<p>this.add(center(), BorderLayout.CENTER);</p>
<p>this.add(south(), BorderLayout.SOUTH);</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2798.png" alt></p>
<h3 id="步骤-3-布局分析-南面"><a class="header-anchor" href="#步骤-3-布局分析-南面">¶</a>步骤 3 : 布局分析-南面</h3>
<p>南面这部分使用的是[GridLayerout]，采用的是2行4列的网格布局器</p>
<p>​	private JPanel south() {</p>
<p>​		JPanel p = new JPanel();</p>
<p>​		p.setLayout(new GridLayout(2, 4));</p>
<p>​		p.add(lAvgSpendPerDay);</p>
<p>​		p.add(lMonthLeft);</p>
<p>​		p.add(lDayAvgAvailable);</p>
<p>​		p.add(lMonthLeftDay);</p>
<p>​		p.add(vAvgSpendPerDay);</p>
<p>​		p.add(vMonthAvailable);</p>
<p>​		p.add(vDayAvgAvailable);</p>
<p>​		p.add(vMonthLeftDay);</p>
<p>​		return p;</p>
<p>​	}</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2799.png" alt></p>
<h3 id="步骤-4-布局分析-北面"><a class="header-anchor" href="#步骤-4-布局分析-北面">¶</a>步骤 4 : 布局分析-北面</h3>
<p>北面这个Panel，本身也是用的BorderLayout<br>
其自身分中西两部分<br>
CENTER就直接使用的[环形进度条]<br>
WEST 使用的是一个JPanel，这个JPanel用的是4行1列的[GridLayout]。</p>
<p>​	private JPanel center() {</p>
<p>​		JPanel p = new JPanel();</p>
<p>​		p.setLayout(new BorderLayout());</p>
<p>​		p.add(west(), BorderLayout.WEST);</p>
<p>​		p.add(center2(),BorderLayout.CENTER);</p>
<p>​		return p;</p>
<p>​	}</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2800.png" alt></p>
<h3 id="步骤-5-SpendPanel-消费一览面板代码讲解"><a class="header-anchor" href="#步骤-5-SpendPanel-消费一览面板代码讲解">¶</a>步骤 5 : SpendPanel 消费一览面板代码讲解</h3>
<p>首先还是设置皮肤</p>
<p>static{</p>
<p>GUIUtil.useLNF();</p>
<p>}</p>
<p>接着单例化，单例化的目的是为了监听器方便获取组件</p>
<p>public static SpendPanel instance = new SpendPanel();</p>
<p>然后是各种组件，组件设计为public属性，也是为了监听器方便获取组件</p>
<p>public JLabel lMonthSpend = new JLabel(“本月消费”);</p>
<p>public JLabel lTodaySpend = new JLabel(“今日消费”);</p>
<p>…</p>
<p>为不同的组件上不同的颜色</p>
<p>GUIUtil.setColor(…)</p>
<p>设置字体</p>
<p>vMonthSpend.setFont(new Font(“微软雅黑”, Font.BOLD, 23));</p>
<p>vTodaySpend.setFont(new Font(“微软雅黑”, Font.BOLD, 23));</p>
<p>进行布局规划</p>
<p>this.add(center(), BorderLayout.CENTER);</p>
<p>this.add(south(), BorderLayout.SOUTH);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.Component;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.GridLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> util.CircleProgressBar;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpendPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SpendPanel instance = <span class="keyword">new</span> SpendPanel();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> JLabel lMonthSpend = <span class="keyword">new</span> JLabel(<span class="string">"本月消费"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel lTodaySpend = <span class="keyword">new</span> JLabel(<span class="string">"今日消费"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel lAvgSpendPerDay = <span class="keyword">new</span> JLabel(<span class="string">"日均消费"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel lMonthLeft = <span class="keyword">new</span> JLabel(<span class="string">"本月剩余"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel lDayAvgAvailable = <span class="keyword">new</span> JLabel(<span class="string">"日均可用"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel lMonthLeftDay = <span class="keyword">new</span> JLabel(<span class="string">"距离月末"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> JLabel vMonthSpend = <span class="keyword">new</span> JLabel(<span class="string">"￥2300"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel vTodaySpend = <span class="keyword">new</span> JLabel(<span class="string">"￥25"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel vAvgSpendPerDay = <span class="keyword">new</span> JLabel(<span class="string">"￥120"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel vMonthAvailable = <span class="keyword">new</span> JLabel(<span class="string">"￥2084"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel vDayAvgAvailable = <span class="keyword">new</span> JLabel(<span class="string">"￥389"</span>);</span><br><span class="line">    <span class="keyword">public</span> JLabel vMonthLeftDay = <span class="keyword">new</span> JLabel(<span class="string">"15天"</span>);</span><br><span class="line"> </span><br><span class="line">    CircleProgressBar bar;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SpendPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        bar = <span class="keyword">new</span> CircleProgressBar();</span><br><span class="line">        bar.setBackgroundColor(ColorUtil.blueColor);</span><br><span class="line"> </span><br><span class="line">        GUIUtil.setColor(ColorUtil.grayColor, lMonthSpend, lTodaySpend, lAvgSpendPerDay, lMonthLeft, lDayAvgAvailable,</span><br><span class="line">                lMonthLeftDay, vAvgSpendPerDay, vMonthAvailable, vDayAvgAvailable, vMonthLeftDay);</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, vMonthSpend, vTodaySpend);</span><br><span class="line"> </span><br><span class="line">        vMonthSpend.setFont(<span class="keyword">new</span> Font(<span class="string">"微软雅黑"</span>, Font.BOLD, <span class="number">23</span>));</span><br><span class="line">        vTodaySpend.setFont(<span class="keyword">new</span> Font(<span class="string">"微软雅黑"</span>, Font.BOLD, <span class="number">23</span>));</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.add(center(), BorderLayout.CENTER);</span><br><span class="line">        <span class="keyword">this</span>.add(south(), BorderLayout.SOUTH);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> JPanel <span class="title">center</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        p.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        p.add(west(), BorderLayout.WEST);</span><br><span class="line">        p.add(center2(),BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Component <span class="title">center2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bar;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Component <span class="title">west</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        p.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">4</span>, <span class="number">1</span>));</span><br><span class="line">        p.add(lMonthSpend);</span><br><span class="line">        p.add(vMonthSpend);</span><br><span class="line">        p.add(lTodaySpend);</span><br><span class="line">        p.add(vTodaySpend);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> JPanel <span class="title">south</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        p.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line"> </span><br><span class="line">        p.add(lAvgSpendPerDay);</span><br><span class="line">        p.add(lMonthLeft);</span><br><span class="line">        p.add(lDayAvgAvailable);</span><br><span class="line">        p.add(lMonthLeftDay);</span><br><span class="line">        p.add(vAvgSpendPerDay);</span><br><span class="line">        p.add(vMonthAvailable);</span><br><span class="line">        p.add(vDayAvgAvailable);</span><br><span class="line">        p.add(vMonthLeftDay);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">         </span><br><span class="line">        GUIUtil.showPanel(SpendPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、RECORDPANEL"><a class="header-anchor" href="#3、RECORDPANEL">¶</a>3、RECORDPANEL</h2>
<h3 id="步骤-1-先看效果-v4"><a class="header-anchor" href="#步骤-1-先看效果-v4">¶</a>步骤 1 : 先看效果</h3>
<p>用于显示进行消费记录的界面</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2802.png" alt></p>
<h3 id="步骤-2-布局分析"><a class="header-anchor" href="#步骤-2-布局分析">¶</a>步骤 2 : 布局分析</h3>
<p>这个面板采用[BorderLayout] 分为北面和中间。</p>
<p>北面是一个JPanel，中间也是一个JPanel。</p>
<p>北面的JPanel使用4行2列的 [GridLayout]。</p>
<p>中间的JPanel使用默认的[FlowLayout],</p>
<p>this.setLayout(new BorderLayout());</p>
<p>this.add(pInput,BorderLayout.NORTH);</p>
<p>this.add(pSubmit,BorderLayout.CENTER);</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2803.png" alt></p>
<h3 id="步骤-3-CategoryComboBoxModel"><a class="header-anchor" href="#步骤-3-CategoryComboBoxModel">¶</a>步骤 3 : CategoryComboBoxModel</h3>
<p>下拉框用到了[JComboBox]，在创建这个下拉框的时候，借助了类似于[TableModel]的形式，使用ComboBoxModel把数据分离开来，这样做的目的是为了便于下拉框中分类信息的更新。 因为在后续的开发中，分类信息是从数据库中取出来的，很有可能发生变化。</p>
<p>public CategoryComboBoxModel cbModel = new CategoryComboBoxModel();</p>
<p>public JComboBox<String> cbCategory = new JComboBox&lt;&gt;(cbModel);</String></p>
<p><strong>CategoryComboBoxModel</strong> 类实现了ComboBoxModel接口，由此实现了一系列的方法</p>
<p><strong>Category</strong>英文是分类信息的意思，在本项目表示消费分类。以下是CategoryComboBoxModel代码的解读：</p>
<p>cs表示分类信息，是一个String字符串集合。(在后续改进中，会变为Category对象集合，因为截止目前为止，还只是原型阶段，尚未涉及到dao和实体类entity. 所以暂时使用String代替。 这里先打一个预防针，表示String类型只是暂时的。)</p>
<p>public List<String> cs = new ArrayList&lt;&gt;();</String></p>
<p>c表示被选中的字符串</p>
<p>String c;</p>
<p>构造方法中初始化模拟数据。 这些数据不是从数据库中读出来的，是专门用于原型数据显示的。</p>
<p>​	public CategoryComboBoxModel(){</p>
<p>​		cs.add(“餐饮”);</p>
<p>​		cs.add(“交通”);</p>
<p>​		cs.add(“住宿”);</p>
<p>​		cs.add(“话费”);</p>
<p>​		c = cs.get(0);</p>
<p>​	}</p>
<p>获取这个下拉框的大小，就是前面定义的字符串集合的大小</p>
<p>​	public int getSize() {</p>
<p>​		return cs.size();</p>
<p>​	}</p>
<p>获取指定位置的数据</p>
<p>​	public String getElementAt(int index) {</p>
<p>​		return cs.get(index);</p>
<p>​	}</p>
<p>当界面上选中了某一个下拉框项，就会调用这个方法</p>
<p>​	public void setSelectedItem(Object anItem) {</p>
<p>​		c = (String) anItem;</p>
<p>​	}</p>
<p>获取被选中的数据</p>
<p>​	public Object getSelectedItem() {</p>
<p>​		// TODO Auto-generated method stub</p>
<p>​		return c;</p>
<p>​	}</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2805.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.model;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.ComboBoxModel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.event.ListDataListener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryComboBoxModel</span> <span class="keyword">implements</span> <span class="title">ComboBoxModel</span>&lt;<span class="title">String</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; cs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">     </span><br><span class="line">    String c;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CategoryComboBoxModel</span><span class="params">()</span></span>&#123;</span><br><span class="line">        cs.add(<span class="string">"餐饮"</span>);</span><br><span class="line">        cs.add(<span class="string">"交通"</span>);</span><br><span class="line">        cs.add(<span class="string">"住宿"</span>);</span><br><span class="line">        cs.add(<span class="string">"话费"</span>);</span><br><span class="line">        c = cs.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cs.size();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getElementAt</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cs.get(index);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListDataListener</span><span class="params">(ListDataListener l)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeListDataListener</span><span class="params">(ListDataListener l)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSelectedItem</span><span class="params">(Object anItem)</span> </span>&#123;</span><br><span class="line">        c = (String) anItem;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getSelectedItem</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-日期控件"><a class="header-anchor" href="#步骤-4-日期控件">¶</a>步骤 4 : 日期控件</h3>
<p>本面板使用到了[JXDatePicker] 这个日期控件，用于显示当前日期。需要用到右侧的swingx-core-1.6.2.jar，下载后，导入到项目中。</p>
<p>public JXDatePicker datepick = new JXDatePicker(new Date());</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2804.png" alt></p>
<h3 id="步骤-5-RecordPanel-记一笔面板代码讲解"><a class="header-anchor" href="#步骤-5-RecordPanel-记一笔面板代码讲解">¶</a>步骤 5 : RecordPanel 记一笔面板代码讲解</h3>
<p>和前几个面板非常类似也是<br>
设置皮肤</p>
<p>static{</p>
<p>​     GUIUtil.useLNF();</p>
<p>}</p>
<p>单例化</p>
<p>public static RecordPanel instance = new RecordPanel();</p>
<p>public的属性</p>
<p>JLabel lSpend = new JLabel(“花费(￥)”);</p>
<p>JLabel lCategory = new JLabel(“分类”);</p>
<p>…</p>
<p>给标签和按钮分别上灰色和淡蓝色</p>
<p>GUIUtil.setColor(ColorUtil.grayColor, lSpend,lCategory,lComment,lDate);</p>
<p>GUIUtil.setColor(ColorUtil.blueColor, bSubmit);</p>
<p>把不同的子面板进行布局</p>
<p>this.setLayout(new BorderLayout());</p>
<p>this.add(pInput,BorderLayout.NORTH);</p>
<p>this.add(pSubmit,BorderLayout.CENTER);</p>
<p>最后使用GUIUtil.showPanel进行测试</p>
<p>GUIUtil.showPanel(RecordPanel.instance);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.GridLayout;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JComboBox;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.jdesktop.swingx.JXDatePicker;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.model.CategoryComboBoxModel;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecordPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> RecordPanel instance = <span class="keyword">new</span> RecordPanel();</span><br><span class="line"> </span><br><span class="line">    JLabel lSpend = <span class="keyword">new</span> JLabel(<span class="string">"花费(￥)"</span>);</span><br><span class="line">    JLabel lCategory = <span class="keyword">new</span> JLabel(<span class="string">"分类"</span>);</span><br><span class="line">    JLabel lComment = <span class="keyword">new</span> JLabel(<span class="string">"备注"</span>);</span><br><span class="line">    JLabel lDate = <span class="keyword">new</span> JLabel(<span class="string">"日期"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> JTextField tfSpend = <span class="keyword">new</span> JTextField(<span class="string">"0"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> CategoryComboBoxModel cbModel = <span class="keyword">new</span> CategoryComboBoxModel();</span><br><span class="line">    <span class="keyword">public</span> JComboBox&lt;String&gt; cbCategory = <span class="keyword">new</span> JComboBox&lt;&gt;(cbModel);</span><br><span class="line">    <span class="keyword">public</span> JTextField tfComment = <span class="keyword">new</span> JTextField();</span><br><span class="line">    <span class="keyword">public</span> JXDatePicker datepick = <span class="keyword">new</span> JXDatePicker(<span class="keyword">new</span> Date());</span><br><span class="line">     </span><br><span class="line">    JButton bSubmit = <span class="keyword">new</span> JButton(<span class="string">"记一笔"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecordPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.grayColor, lSpend,lCategory,lComment,lDate);</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bSubmit);</span><br><span class="line">        JPanel pInput =<span class="keyword">new</span> JPanel();</span><br><span class="line">        JPanel pSubmit = <span class="keyword">new</span> JPanel();</span><br><span class="line">        <span class="keyword">int</span> gap = <span class="number">40</span>;</span><br><span class="line">        pInput.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">4</span>,<span class="number">2</span>,gap,gap));</span><br><span class="line">         </span><br><span class="line">        pInput.add(lSpend);</span><br><span class="line">        pInput.add(tfSpend);</span><br><span class="line">        pInput.add(lCategory);</span><br><span class="line">        pInput.add(cbCategory);</span><br><span class="line">        pInput.add(lComment);</span><br><span class="line">        pInput.add(tfComment);</span><br><span class="line">        pInput.add(lDate);</span><br><span class="line">        pInput.add(datepick);</span><br><span class="line">         </span><br><span class="line">        pSubmit.add(bSubmit);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        <span class="keyword">this</span>.add(pInput,BorderLayout.NORTH);</span><br><span class="line">        <span class="keyword">this</span>.add(pSubmit,BorderLayout.CENTER);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(RecordPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4、CATEGORYPANEL"><a class="header-anchor" href="#4、CATEGORYPANEL">¶</a>4、CATEGORYPANEL</h2>
<h3 id="步骤-1-先看效果-v5"><a class="header-anchor" href="#步骤-1-先看效果-v5">¶</a>步骤 1 : 先看效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2807.png" alt></p>
<h3 id="步骤-2-布局分析-v2"><a class="header-anchor" href="#步骤-2-布局分析-v2">¶</a>步骤 2 : 布局分析</h3>
<p>本面板同样采用[BorderLayout],分居中和南面。</p>
<p>居中使用的是[JScrollPane]，其中放着JTable。<br>
南面使用一个JPanel，里面放3个按钮。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2808.png" alt></p>
<h3 id="步骤-3-CategoryTableModel"><a class="header-anchor" href="#步骤-3-CategoryTableModel">¶</a>步骤 3 : CategoryTableModel</h3>
<p>显示Table信息用到了CategoryTableModel，与记一笔面板RecordPanel原型中的[CategoryComboBoxModel]一样，也是放的一些模拟数据。</p>
<p>因为TableModel 在Java中级的[TableModel章节]有专门的讲解，这里就不做赘述了。</p>
<p>需要说明的是，第二个字段是用于显示这个分类下一共有多少笔消费的。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2810.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.model;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.event.TableModelListener;</span><br><span class="line"><span class="keyword">import</span> javax.swing.table.TableModel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryTableModel</span> <span class="keyword">implements</span> <span class="title">TableModel</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    String[] columnNames = <span class="keyword">new</span> String[]&#123;<span class="string">"分类名称"</span>,<span class="string">"消费次数"</span>&#125;;</span><br><span class="line">    List&lt;String&gt; cs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CategoryTableModel</span><span class="params">()</span></span>&#123;</span><br><span class="line">        cs.add(<span class="string">"餐饮"</span>);</span><br><span class="line">        cs.add(<span class="string">"交通"</span>);</span><br><span class="line">        cs.add(<span class="string">"住宿"</span>);</span><br><span class="line">        cs.add(<span class="string">"话费"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRowCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> cs.size();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getColumnCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> columnNames.length;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getColumnName</span><span class="params">(<span class="keyword">int</span> columnIndex)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> columnNames[columnIndex];</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getColumnClass(<span class="keyword">int</span> columnIndex) &#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> String<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isCellEditable</span><span class="params">(<span class="keyword">int</span> rowIndex, <span class="keyword">int</span> columnIndex)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getValueAt</span><span class="params">(<span class="keyword">int</span> rowIndex, <span class="keyword">int</span> columnIndex)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>==columnIndex)</span><br><span class="line">            <span class="keyword">return</span> cs.get(rowIndex);</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">1</span>==columnIndex)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValueAt</span><span class="params">(Object aValue, <span class="keyword">int</span> rowIndex, <span class="keyword">int</span> columnIndex)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTableModelListener</span><span class="params">(TableModelListener l)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeTableModelListener</span><span class="params">(TableModelListener l)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-分类信息面板CategoryPanel代码解读"><a class="header-anchor" href="#步骤-4-分类信息面板CategoryPanel代码解读">¶</a>步骤 4 : 分类信息面板CategoryPanel代码解读</h3>
<p>前面的内容和其他面板一样<br>
设置皮肤</p>
<p>static{</p>
<p>​    GUIUtil.useLNF();</p>
<p>}</p>
<p>单例化</p>
<p>public static CategoryPanel instance = new CategoryPanel();</p>
<p>public属性</p>
<p>public JButton bAdd = new JButton(“新增”);</p>
<p>public JButton bEdit = new JButton(“编辑”);</p>
<p>…</p>
<p>布局</p>
<p>this.setLayout(new BorderLayout());</p>
<p>this.add(sp,BorderLayout.CENTER);</p>
<p>this.add(pSubmit,BorderLayout.SOUTH);</p>
<p>测试</p>
<p>GUIUtil.showPanel(CategoryPanel.instance);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTable;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.model.CategoryTableModel;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CategoryPanel instance = <span class="keyword">new</span> CategoryPanel();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> JButton bAdd = <span class="keyword">new</span> JButton(<span class="string">"新增"</span>);</span><br><span class="line">    <span class="keyword">public</span> JButton bEdit = <span class="keyword">new</span> JButton(<span class="string">"编辑"</span>);</span><br><span class="line">    <span class="keyword">public</span> JButton bDelete = <span class="keyword">new</span> JButton(<span class="string">"删除"</span>);</span><br><span class="line">    String columNames[] = <span class="keyword">new</span> String[]&#123;<span class="string">"分类名称"</span>,<span class="string">"消费次数"</span>&#125;;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">public</span> CategoryTableModel ctm = <span class="keyword">new</span> CategoryTableModel();</span><br><span class="line">    <span class="keyword">public</span> JTable t =<span class="keyword">new</span> JTable(ctm);</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CategoryPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bAdd,bEdit,bDelete);</span><br><span class="line">        JScrollPane sp =<span class="keyword">new</span> JScrollPane(t);</span><br><span class="line">        JPanel pSubmit = <span class="keyword">new</span> JPanel();</span><br><span class="line">        pSubmit.add(bAdd);</span><br><span class="line">        pSubmit.add(bEdit);</span><br><span class="line">        pSubmit.add(bDelete);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        <span class="keyword">this</span>.add(sp,BorderLayout.CENTER);</span><br><span class="line">        <span class="keyword">this</span>.add(pSubmit,BorderLayout.SOUTH);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(CategoryPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5、REPORTPANEL"><a class="header-anchor" href="#5、REPORTPANEL">¶</a>5、REPORTPANEL</h2>
<h3 id="步骤-1-先看效果-v6"><a class="header-anchor" href="#步骤-1-先看效果-v6">¶</a>步骤 1 : 先看效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2813.png" alt></p>
<h3 id="步骤-2-报表面板ReportPanel代码解读"><a class="header-anchor" href="#步骤-2-报表面板ReportPanel代码解读">¶</a>步骤 2 : 报表面板ReportPanel代码解读</h3>
<p>ReportPanel就比较简单了，使用的是[ChartUtil]现成的方法生成了当月的模拟数据。</p>
<p>设置皮肤</p>
<p>​	static{</p>
<p>​		GUIUtil.useLNF();</p>
<p>​	}</p>
<p>单例化</p>
<p>public static ReportPanel instance = new ReportPanel();</p>
<p>public的属性</p>
<p>public JLabel l = new JLabel();</p>
<p>在构造其中获取图表，并把图表设置在Label上，然后显示这个Label</p>
<p>​	public ReportPanel() {</p>
<p>​		this.setLayout(new BorderLayout());</p>
<p>​		Image i =ChartUtil.getImage(400, 300);</p>
<p>​		ImageIcon icon= new ImageIcon(i);</p>
<p>​		l.setIcon(icon);</p>
<p>​		this.add(l);</p>
<p>​	}</p>
<p>最后使用GUIUtil.showPanel测试</p>
<p>GUIUtil.showPanel(ReportPanel.instance);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.ImageIcon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> util.ChartUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReportPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ReportPanel instance = <span class="keyword">new</span> ReportPanel();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> JLabel l = <span class="keyword">new</span> JLabel();</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReportPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        Image i =ChartUtil.getImage(<span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">        ImageIcon icon= <span class="keyword">new</span> ImageIcon(i);</span><br><span class="line">        l.setIcon(icon);</span><br><span class="line">        <span class="keyword">this</span>.add(l);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(ReportPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6、CONFIGPANEL"><a class="header-anchor" href="#6、CONFIGPANEL">¶</a>6、CONFIGPANEL</h2>
<h3 id="步骤-1-先看效果-v7"><a class="header-anchor" href="#步骤-1-先看效果-v7">¶</a>步骤 1 : 先看效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2815.png" alt></p>
<h3 id="步骤-2-布局规划"><a class="header-anchor" href="#步骤-2-布局规划">¶</a>步骤 2 : 布局规划</h3>
<p>本面板使用[BorderLayout]，分北面和居中。</p>
<p>北面是一个JPanel，里面放4个组件，使用4行1列的[GridLayout]的布局<br>
居中是一个JPanel,就放了一个按钮</p>
<p>this.setLayout(new BorderLayout());</p>
<p>this.add(pInput, BorderLayout.NORTH);</p>
<p>this.add(pSubmit, BorderLayout.CENTER);</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2817.png" alt></p>
<h3 id="步骤-3-设置界面ConfigPanel-代码讲解"><a class="header-anchor" href="#步骤-3-设置界面ConfigPanel-代码讲解">¶</a>步骤 3 : 设置界面ConfigPanel 代码讲解</h3>
<p>首先设置皮肤</p>
<p>static{</p>
<p>​     GUIUtil.useLNF();</p>
<p>}</p>
<p>单例化</p>
<p>public static ConfigPanel instance = new ConfigPanel();</p>
<p>public 组件属性</p>
<p>JLabel lBudget = new JLabel(“本月预算(￥)”);</p>
<p>public JTextField tfBudget = new JTextField(“0”);</p>
<p>…</p>
<p>布局</p>
<p>this.setLayout(new BorderLayout());</p>
<p>this.add(pInput, BorderLayout.NORTH);</p>
<p>this.add(pSubmit, BorderLayout.CENTER);</p>
<p>使用GUIUtil.showPanel测试</p>
<p>GUIUtil.showPanel(ConfigPanel.instance);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.GridLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ConfigPanel instance = <span class="keyword">new</span> ConfigPanel();</span><br><span class="line"> </span><br><span class="line">    JLabel lBudget = <span class="keyword">new</span> JLabel(<span class="string">"本月预算(￥)"</span>);</span><br><span class="line">    <span class="keyword">public</span> JTextField tfBudget = <span class="keyword">new</span> JTextField(<span class="string">"0"</span>);</span><br><span class="line">     </span><br><span class="line">    JLabel lMysql = <span class="keyword">new</span> JLabel(<span class="string">"Mysql安装目录"</span>);</span><br><span class="line">    <span class="keyword">public</span> JTextField tfMysqlPath = <span class="keyword">new</span> JTextField(<span class="string">""</span>);</span><br><span class="line"> </span><br><span class="line">    JButton bSubmit = <span class="keyword">new</span> JButton(<span class="string">"更新"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConfigPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.grayColor, lBudget,lMysql);</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bSubmit);</span><br><span class="line">         </span><br><span class="line">        JPanel pInput =<span class="keyword">new</span> JPanel();</span><br><span class="line">        JPanel pSubmit = <span class="keyword">new</span> JPanel();</span><br><span class="line">        <span class="keyword">int</span> gap =<span class="number">40</span>;</span><br><span class="line">        pInput.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">4</span>,<span class="number">1</span>,gap,gap));</span><br><span class="line">         </span><br><span class="line">        pInput.add(lBudget);</span><br><span class="line">        pInput.add(tfBudget);</span><br><span class="line">        pInput.add(lMysql);</span><br><span class="line">        pInput.add(tfMysqlPath);</span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        <span class="keyword">this</span>.add(pInput,BorderLayout.NORTH);</span><br><span class="line">         </span><br><span class="line">        pSubmit.add(bSubmit);</span><br><span class="line">        <span class="keyword">this</span>.add(pSubmit,BorderLayout.CENTER);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(ConfigPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7、BACKUPPANEL"><a class="header-anchor" href="#7、BACKUPPANEL">¶</a>7、BACKUPPANEL</h2>
<h3 id="步骤-1-先看效果-v8"><a class="header-anchor" href="#步骤-1-先看效果-v8">¶</a>步骤 1 : 先看效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2818.png" alt></p>
<h3 id="步骤-2-备份面板-BackupPanel-代码解读"><a class="header-anchor" href="#步骤-2-备份面板-BackupPanel-代码解读">¶</a>步骤 2 : 备份面板 BackupPanel 代码解读</h3>
<p>BackupPanel 就很简单了，直接放了个按钮在上面。<br>
当然也有设置皮肤</p>
<p>static{</p>
<p>​     GUIUtil.useLNF();</p>
<p>}</p>
<p>单例化</p>
<p>public static BackupPanel instance = new BackupPanel();</p>
<p>组件属性</p>
<p>JButton bBackup =new JButton(“备份”);</p>
<p>测试</p>
<p>GUIUtil.showPanel(BackupPanel.instance);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BackupPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line">             </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BackupPanel instance = <span class="keyword">new</span> BackupPanel();</span><br><span class="line">    JButton bBackup =<span class="keyword">new</span> JButton(<span class="string">"备份"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BackupPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bBackup);</span><br><span class="line">        <span class="keyword">this</span>.add(bBackup);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(BackupPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8、RECOVERPANEL"><a class="header-anchor" href="#8、RECOVERPANEL">¶</a>8、RECOVERPANEL</h2>
<h3 id="步骤-1-先看效果-v9"><a class="header-anchor" href="#步骤-1-先看效果-v9">¶</a>步骤 1 : 先看效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2820.png" alt></p>
<h3 id="步骤-2-恢复面板RecoverPanel-代码解读"><a class="header-anchor" href="#步骤-2-恢复面板RecoverPanel-代码解读">¶</a>步骤 2 : 恢复面板RecoverPanel 代码解读</h3>
<p>和[BackupPanel]一样，RecoverPanel 也比较简单，就放了一个按钮上去</p>
<p>当然也有设置皮肤</p>
<p>static{</p>
<p>GUIUtil.useLNF();</p>
<p>}</p>
<p>单例化</p>
<p>public static RecoverPanel instance = new RecoverPanel();</p>
<p>组件属性</p>
<p>JButton bBackup =new JButton(“恢复”);</p>
<p>测试</p>
<p>GUIUtil.showPanel(RecoverPanel.instance);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecoverPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> RecoverPanel instance = <span class="keyword">new</span> RecoverPanel();</span><br><span class="line"> </span><br><span class="line">    JButton bRecover =<span class="keyword">new</span> JButton(<span class="string">"恢复"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecoverPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bRecover);</span><br><span class="line">        <span class="keyword">this</span>.add(bRecover);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(RecoverPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9、MAINFRAME"><a class="header-anchor" href="#9、MAINFRAME">¶</a>9、MAINFRAME</h2>
<h3 id="步骤-1-效果"><a class="header-anchor" href="#步骤-1-效果">¶</a>步骤 1 : 效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2822.png" alt></p>
<h3 id="步骤-2-主窗体-MainFrame"><a class="header-anchor" href="#步骤-2-主窗体-MainFrame">¶</a>步骤 2 : 主窗体-MainFrame</h3>
<p>前面做的界面类都是面板类，不能独立运行。 整个项目的运行，还是需要一个顶级容器类 JFrame来容纳这些面板类。</p>
<p>在主窗体中通过setContentPane把[MainPanel]设置为内容面板</p>
<p>this.setContentPane(MainPanel.instance);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.frame;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.panel.MainPanel;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainFrame</span> <span class="keyword">extends</span> <span class="title">JFrame</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> MainFrame instance = <span class="keyword">new</span> MainFrame();</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">MainFrame</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setSize(<span class="number">500</span>,<span class="number">450</span>);</span><br><span class="line">        <span class="keyword">this</span>.setTitle(<span class="string">"一本糊涂账"</span>);</span><br><span class="line">        <span class="keyword">this</span>.setContentPane(MainPanel.instance);</span><br><span class="line">        <span class="keyword">this</span>.setLocationRelativeTo(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">this</span>.setResizable(<span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        instance.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="五、实体类和DAO"><a class="header-anchor" href="#五、实体类和DAO">¶</a>五、实体类和DAO</h1>
<h2 id="1、实体类ENTITY"><a class="header-anchor" href="#1、实体类ENTITY">¶</a>1、实体类ENTITY</h2>
<p>实体类Entity 有很多种其他的说法，比如Bean,JavaBean, pojo等等，其实都是相近的东西。</p>
<p>实体类Entity 是用于映射表中的一条一条数据的。比如分类表Category，有很多条分类记录，那么就有一个类也叫做Category，这个类的一个一个的实例，就对应了表Category中的一条一条的记录。</p>
<h3 id="步骤-1-entity包"><a class="header-anchor" href="#步骤-1-entity包">¶</a>步骤 1 : entity包</h3>
<p>首先创建entity包，专门用于存放各种实体类</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2879.png" alt></p>
<h3 id="步骤-2-配置信息类Config"><a class="header-anchor" href="#步骤-2-配置信息类Config">¶</a>步骤 2 : 配置信息类Config</h3>
<p>配置信息Config类与[配置信息表 config]相对应<br>
<strong>id</strong> 主键<br>
<strong>key</strong> 键<br>
<strong>value</strong> 值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String key;</span><br><span class="line">    <span class="keyword">public</span> String value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKey</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(String value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-消费分类Category"><a class="header-anchor" href="#步骤-3-消费分类Category">¶</a>步骤 3 : 消费分类Category</h3>
<p>消费分类Category有3个字段<br>
<strong>id</strong> <strong>主键</strong><br>
<strong>name</strong> 名称<br>
<strong>recordNumber</strong> 消费记录数</p>
<p>回头看看[消费分类表 category的表结构]，可以发现消费记录数 recordNumber 这个属性并不会出现在数据库中的。 它是根据这种分类在消费记录表Record中有多少条对应信息，临时查出来的。</p>
<p>在设计表结构的时候，这样的字段是不建议存放在数据库中的。 假设在表Category中设计了这么一个字段recordNumber，那么关于这种分类对应的消费记录数，其实在数据库中有两个：一是这个字段，二是实际Record表中存在的数据数量。</p>
<p>一个信息，在两个地方存在，就需要增加数据一致性的维护成本，也存在数据出现不一致的风险(比如忘记更新recordNumber中的信息)。</p>
<p><strong>注：</strong> 这里提供了一个toString方法，在后续JComboBox中显示的时候，会调用此方法，用于显示分类名称</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Category</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> recordNumber;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRecordNumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> recordNumber;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRecordNumber</span><span class="params">(<span class="keyword">int</span> recordNumber)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.recordNumber = recordNumber;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-消费信息类Record"><a class="header-anchor" href="#步骤-4-消费信息类Record">¶</a>步骤 4 : 消费信息类Record</h3>
<p>消费信息类Record与[消费记录表 record]相对应<br>
<strong>id</strong> 主键<br>
<strong>spend</strong> 消费金额<br>
<strong>cid</strong> 分类信息id<br>
<strong>comment</strong> 备注<br>
<strong>date</strong> 日期</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Record</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> spend;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> cid;</span><br><span class="line">    <span class="keyword">public</span> String comment;</span><br><span class="line">    <span class="keyword">public</span> Date date;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCid</span><span class="params">(<span class="keyword">int</span> cid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cid = cid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getComment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> comment;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setComment</span><span class="params">(String comment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.comment = comment;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDate</span><span class="params">(Date date)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.date = date;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSpend</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> spend;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSpend</span><span class="params">(<span class="keyword">int</span> spend)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.spend = spend;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、DBUTIL"><a class="header-anchor" href="#2、DBUTIL">¶</a>2、DBUTIL</h2>
<p>接下来讲解DAO，在讲解DAO之前，引入DBUtil这个工具类。</p>
<h3 id="步骤-1-工具类-DBUtil"><a class="header-anchor" href="#步骤-1-工具类-DBUtil">¶</a>步骤 1 : 工具类 DBUtil</h3>
<p>回顾以前学习[HeroDAO]，在每个DAO里自行创建Connnection，在这个项目里有多个DAO里都需要获取数据库的连接，并且在本项目中都是一样的数据库连接。 所以就可以把获取数据库连接的代码重构到一个类里。</p>
<p>这样做的好处是有两个</p>
<ol>
<li>
<p>不需要DAO里分别进行编写，直接调用就可以了</p>
</li>
<li>
<p>如果账号密码发生了变化，值需要修改这一个地方，而不用每个DAO里就分别修改，降低了维护成本，也降低了因为忘记修改而出错的概率</p>
</li>
</ol>
<p><strong>注</strong>：记得导入右侧的jar包mysql-connector-java-5.0.8-bin.jar</p>
<h3 id="步骤-2-代码讲解"><a class="header-anchor" href="#步骤-2-代码讲解">¶</a>步骤 2 : 代码讲解</h3>
<p>首先定义了很多和数据库连接相关的信息，如果账号密码发生改变，修改起来很容易</p>
<p>​    static String ip = “127.0.0.1”;</p>
<p>​    static int port = 3306;</p>
<p>​    static String database = “hutubill”;</p>
<p>​    static String encoding = “UTF-8”;</p>
<p>​    static String loginName = “root”;</p>
<p>​    static String password = “admin”;</p>
<p>驱动初始化放在了静态初始化块里，因为这行代码需要先执行，而且只需要执行一次就足够了。</p>
<p>static{</p>
<p>​    try {</p>
<p>​        Class.forName(“com.mysql.jdbc.Driver”);</p>
<p>​    } catch (ClassNotFoundException e) {</p>
<p>​        e.printStackTrace();</p>
<p>​    }</p>
<p>}</p>
<p>提供了一个静态的public的getConnection方法获取连接</p>
<p>public static Connection getConnection()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package util;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">  </span><br><span class="line">public class DBUtil &#123;</span><br><span class="line">    static String ip &#x3D; &quot;127.0.0.1&quot;;</span><br><span class="line">    static int port &#x3D; 3306;</span><br><span class="line">    static String database &#x3D; &quot;hutubill&quot;;</span><br><span class="line">    static String encoding &#x3D; &quot;UTF-8&quot;;</span><br><span class="line">    static String loginName &#x3D; &quot;root&quot;;</span><br><span class="line">    static String password &#x3D; &quot;admin&quot;;</span><br><span class="line">    static&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public static Connection getConnection() throws SQLException &#123;</span><br><span class="line">        String url &#x3D; String.format(&quot;jdbc:mysql:&#x2F;&#x2F;%s:%d&#x2F;%s?characterEncoding&#x3D;%s&quot;, ip, port, database, encoding);</span><br><span class="line">        return DriverManager.getConnection(url, loginName, password);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> String ip = <span class="string">"127.0.0.1"</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> port = <span class="number">3306</span>;</span><br><span class="line">    <span class="keyword">static</span> String database = <span class="string">"hutubill"</span>;</span><br><span class="line">    <span class="keyword">static</span> String encoding = <span class="string">"UTF-8"</span>;</span><br><span class="line">    <span class="keyword">static</span> String loginName = <span class="string">"root"</span>;</span><br><span class="line">    <span class="keyword">static</span> String password = <span class="string">"admin"</span>;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        String url = String.format(<span class="string">"jdbc:mysql://%s:%d/%s?"</span>+<span class="string">"useUnicode=true&amp;characterEncoding=%s&amp;"</span>+<span class="string">"useSSL=false&amp;serverTimezone=Hongkong"</span>,ip, port, database, encoding);</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url, loginName, password);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、DATEUTIL"><a class="header-anchor" href="#3、DATEUTIL">¶</a>3、DATEUTIL</h2>
<p>在讲DAO之前，还要用到另一个工具类： 日期工具类DateUtil</p>
<h3 id="步骤-1-日期工具类DateUtil"><a class="header-anchor" href="#步骤-1-日期工具类DateUtil">¶</a>步骤 1 : 日期工具类DateUtil</h3>
<p>为什么要用到日期工具类DateUtil呢？ 在业务上，比如消费一览这个界面，需要获取今日的消费总额，本月的消费总额，今天距离月末还有多长时间等信息，那么把关于日期的相关功能都抽象出来放在DateUtil进行调用，代码层次结构更加清晰，也更容易维护，在将来也可以重用。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2830.png" alt></p>
<h3 id="步骤-2-代码讲解-v2"><a class="header-anchor" href="#步骤-2-代码讲解-v2">¶</a>步骤 2 : 代码讲解</h3>
<p>定义一天的毫秒数,后面会用到</p>
<p>static long millisecondsOfOneDay = 1000*60*60*24;</p>
<p>把java.util.Date 的日期类型转换为java.sql.Date 的日期类型。<br>
为什么要转呢，因为通过[日期控件]获取到的日期类型是java.util.Date,而在JDBC的statement中插入用的日期类型又是java.sql.Date，所以需要进行转换。</p>
<p>public static java.sql.Date util2sql(java.util.Date d){</p>
<p>​	return  new java.sql.Date(d.getTime());</p>
<p>}</p>
<p>获取今天，并且把时，分，秒和毫秒都置0. 因为通过[日期控件]获取到的日期，就是没有时分秒和毫秒的。</p>
<p>public static Date today()</p>
<p>获取月初。使用[Calendar]获取本月第一天。 在统计消费一览信息的时候，查看本月的消费数据，其实就是从数据库中去把从本月第一天到最后一天的数据查出来，再进行简单统计，所以需要一个获取本月第一天的方法。</p>
<p>public static Date monthBegin()</p>
<p>获取月末，和月初一个道理</p>
<p>public static Date monthEnd()</p>
<p>获取本月一共有多少天</p>
<p>public static int thisMonthTotalDay()</p>
<p>获取本月还剩多少天</p>
<p>thisMonthLeftDay</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">long</span> millisecondsOfOneDay = <span class="number">1000</span>*<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> java.sql.<span class="function">Date <span class="title">util2sql</span><span class="params">(java.util.Date d)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> java.sql.Date(d.getTime());</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取今天，并且把时，分，秒和毫秒都置0. 因为通过日期控件获取到的日期，就是没有时分秒和毫秒的。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">today</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        c.setTime(<span class="keyword">new</span> Date());</span><br><span class="line">        c.set(Calendar.HOUR, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.MINUTE, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.SECOND, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> c.getTime();</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取月初。使用Calendar获取本月第一天。 在统计消费一览信息的时候，查看本月的消费数据，其实就是从数据库中去把从本月第一天到最后一天的数据查出来，再进行简单统计，所以需要一个获取本月第一天的方法。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">monthBegin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        c.setTime(<span class="keyword">new</span> Date());</span><br><span class="line">        c.set(Calendar.DATE, <span class="number">1</span>);</span><br><span class="line">          </span><br><span class="line">        c.set(Calendar.HOUR_OF_DAY, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.MINUTE, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.SECOND, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.MILLISECOND, <span class="number">0</span>);</span><br><span class="line">          </span><br><span class="line">        <span class="keyword">return</span> c.getTime();</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取月末</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">monthEnd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        c.setTime(<span class="keyword">new</span> Date());</span><br><span class="line">        c.set(Calendar.HOUR, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.MINUTE, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.SECOND, <span class="number">0</span>);</span><br><span class="line">          </span><br><span class="line">        c.set(Calendar.DATE, <span class="number">1</span>);</span><br><span class="line">        c.add(Calendar.MONTH, <span class="number">1</span>);</span><br><span class="line">        c.add(Calendar.DATE, -<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> c.getTime();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取本月一共有多少天</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">thisMonthTotalDay</span><span class="params">()</span></span>&#123;</span><br><span class="line">          </span><br><span class="line">        <span class="keyword">long</span> lastDayMilliSeconds = monthEnd().getTime();</span><br><span class="line">        <span class="keyword">long</span> firstDayMilliSeconds = monthBegin().getTime();</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) ((lastDayMilliSeconds-firstDayMilliSeconds)/millisecondsOfOneDay) +<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *获取本月还剩多少天</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">thisMonthLeftDay</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> lastDayMilliSeconds = monthEnd().getTime();</span><br><span class="line">        <span class="keyword">long</span> toDayMilliSeconds = today().getTime();</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) ((lastDayMilliSeconds-toDayMilliSeconds)/millisecondsOfOneDay) +<span class="number">1</span>;</span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(DateUtil.monthEnd());</span><br><span class="line">     </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4、CONFIGDAO"><a class="header-anchor" href="#4、CONFIGDAO">¶</a>4、CONFIGDAO</h2>
<h3 id="步骤-1-dao包"><a class="header-anchor" href="#步骤-1-dao包">¶</a>步骤 1 : dao包</h3>
<p>首先创建dao包，所有的DAO相关类都会放在这里</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2880.png" alt></p>
<h3 id="步骤-2-ConfigDAO"><a class="header-anchor" href="#步骤-2-ConfigDAO">¶</a>步骤 2 : ConfigDAO</h3>
<p>ConfigDAO专门用于把Config实例与Config表进行ORM映射。<br>
ORM映射是什么呢？ 简单点理解就是ConfigDAO负责把Config实例转换成一条Config表中的记录，反过来，又把Config表中的记录转换为一个Config实例。</p>
<p>这其中就用到了[DBUtil]来获取连接，其他的DAO也统一使用DBUtil的方式获取连接</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Config;</span><br><span class="line"><span class="keyword">import</span> util.DBUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigDAO</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getTotal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); Statement s = c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql = <span class="string">"select count(*) from config"</span>;</span><br><span class="line"> </span><br><span class="line">            ResultSet rs = s.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                total = rs.getInt(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            System.out.println(<span class="string">"total:"</span> + total);</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Config config)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        String sql = <span class="string">"insert into config values(null,?,?)"</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line">            ps.setString(<span class="number">1</span>, config.key);</span><br><span class="line">            ps.setString(<span class="number">2</span>, config.value);</span><br><span class="line">            ps.execute();</span><br><span class="line">            ResultSet rs = ps.getGeneratedKeys();</span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="number">1</span>);</span><br><span class="line">                config.id = id;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Config config)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        String sql = <span class="string">"update config set key_= ?, value=? where id = ?"</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line"> </span><br><span class="line">            ps.setString(<span class="number">1</span>, config.key);</span><br><span class="line">            ps.setString(<span class="number">2</span>, config.value);</span><br><span class="line">            ps.setInt(<span class="number">3</span>, config.id);</span><br><span class="line"> </span><br><span class="line">            ps.execute();</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); Statement s = c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql = <span class="string">"delete from config where id = "</span> + id;</span><br><span class="line"> </span><br><span class="line">            s.execute(sql);</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Config <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        Config config = <span class="keyword">null</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); Statement s = c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql = <span class="string">"select * from config where id = "</span> + id;</span><br><span class="line"> </span><br><span class="line">            ResultSet rs = s.executeQuery(sql);</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                config = <span class="keyword">new</span> Config();</span><br><span class="line">                String key = rs.getString(<span class="string">"key_"</span>);</span><br><span class="line">                String value = rs.getString(<span class="string">"value"</span>);</span><br><span class="line">                config.key = key;</span><br><span class="line">                config.value = value;</span><br><span class="line">                config.id = id;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Config&gt; <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list(<span class="number">0</span>, Short.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Config&gt; <span class="title">list</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">        List&lt;Config&gt; configs = <span class="keyword">new</span> ArrayList&lt;Config&gt;();</span><br><span class="line"> </span><br><span class="line">        String sql = <span class="string">"select * from config order by id desc limit ?,? "</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line"> </span><br><span class="line">            ps.setInt(<span class="number">1</span>, start);</span><br><span class="line">            ps.setInt(<span class="number">2</span>, count);</span><br><span class="line"> </span><br><span class="line">            ResultSet rs = ps.executeQuery();</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                Config config = <span class="keyword">new</span> Config();</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="number">1</span>);</span><br><span class="line">                String key = rs.getString(<span class="string">"key_"</span>);</span><br><span class="line">                String value = rs.getString(<span class="string">"value"</span>);</span><br><span class="line">                config.id = id;</span><br><span class="line">                config.key = key;</span><br><span class="line">                config.value = value;</span><br><span class="line">                configs.add(config);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> configs;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Config <span class="title">getByKey</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        Config config = <span class="keyword">null</span>;</span><br><span class="line">        String sql = <span class="string">"select * from config where key_ = ?"</span> ;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection();</span><br><span class="line">                PreparedStatement ps = c.prepareStatement(sql);</span><br><span class="line">            ) &#123;</span><br><span class="line">             </span><br><span class="line">            ps.setString(<span class="number">1</span>, key);</span><br><span class="line">            ResultSet rs =ps.executeQuery();</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                config = <span class="keyword">new</span> Config();</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">                String value = rs.getString(<span class="string">"value"</span>);</span><br><span class="line">                config.key = key;</span><br><span class="line">                config.value = value;</span><br><span class="line">                config.id = id;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-方法讲解"><a class="header-anchor" href="#步骤-3-方法讲解">¶</a>步骤 3 : 方法讲解</h3>
<p>增加</p>
<p>public void add(Config config)</p>
<p>更新</p>
<p>public void update(Config config)</p>
<p>删除</p>
<p>public void delete(int id)</p>
<p>获取</p>
<p>public Config get(int id)</p>
<p>查询所有</p>
<p>public List<Config> list()</Config></p>
<p>分页查询</p>
<p>public List<Config> list(int start, int count)</Config></p>
<p>统计总数</p>
<p>public int getTotal()</p>
<p>通过键获取Config实例，比如预算对应的Config实例，就会通过这种方式获取： new ConfigDAO().getByKey(“budget”);</p>
<p>public Config getByKey(String key)</p>
<h2 id="5、CATEGORYDAO"><a class="header-anchor" href="#5、CATEGORYDAO">¶</a>5、CATEGORYDAO</h2>
<h3 id="步骤-1-CategoryDAO"><a class="header-anchor" href="#步骤-1-CategoryDAO">¶</a>步骤 1 : CategoryDAO</h3>
<p>CategoryDAO专门用于把Category实例与Category表进行ORM映射。</p>
<p>其方法和[ConfigDAO]很接近，也是增删改查一套，就不赘述了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> util.DBUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryDAO</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getTotal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); Statement s = c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql = <span class="string">"select count(*) from category"</span>;</span><br><span class="line"> </span><br><span class="line">            ResultSet rs = s.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                total = rs.getInt(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            System.out.println(<span class="string">"total:"</span> + total);</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Category category)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        String sql = <span class="string">"insert into category values(null,?)"</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line"> </span><br><span class="line">            ps.setString(<span class="number">1</span>, category.name);</span><br><span class="line"> </span><br><span class="line">            ps.execute();</span><br><span class="line"> </span><br><span class="line">            ResultSet rs = ps.getGeneratedKeys();</span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="number">1</span>);</span><br><span class="line">                category.id = id;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Category category)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        String sql = <span class="string">"update category set name= ? where id = ?"</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line"> </span><br><span class="line">            ps.setString(<span class="number">1</span>, category.name);</span><br><span class="line">            ps.setInt(<span class="number">2</span>, category.id);</span><br><span class="line"> </span><br><span class="line">            ps.execute();</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); Statement s = c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql = <span class="string">"delete from category where id = "</span> + id;</span><br><span class="line"> </span><br><span class="line">            s.execute(sql);</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Category <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        Category category = <span class="keyword">null</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); Statement s = c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql = <span class="string">"select * from category where id = "</span> + id;</span><br><span class="line"> </span><br><span class="line">            ResultSet rs = s.executeQuery(sql);</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                category = <span class="keyword">new</span> Category();</span><br><span class="line">                String name = rs.getString(<span class="number">2</span>);</span><br><span class="line">                category.name = name;</span><br><span class="line">                category.id = id;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> category;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Category&gt; <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list(<span class="number">0</span>, Short.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Category&gt; <span class="title">list</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">        List&lt;Category&gt; categorys = <span class="keyword">new</span> ArrayList&lt;Category&gt;();</span><br><span class="line"> </span><br><span class="line">        String sql = <span class="string">"select * from category order by id desc limit ?,? "</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line"> </span><br><span class="line">            ps.setInt(<span class="number">1</span>, start);</span><br><span class="line">            ps.setInt(<span class="number">2</span>, count);</span><br><span class="line"> </span><br><span class="line">            ResultSet rs = ps.executeQuery();</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                Category category = <span class="keyword">new</span> Category();</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="number">1</span>);</span><br><span class="line">                String name = rs.getString(<span class="number">2</span>);</span><br><span class="line">                category.id = id;</span><br><span class="line">                category.name = name;</span><br><span class="line">                categorys.add(category);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> categorys;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6、RECORDDAO"><a class="header-anchor" href="#6、RECORDDAO">¶</a>6、RECORDDAO</h2>
<h3 id="步骤-1-RecordDAO"><a class="header-anchor" href="#步骤-1-RecordDAO">¶</a>步骤 1 : RecordDAO</h3>
<p>RecordDAO专门用于把Record实例与Record表进行ORM映射。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Record;</span><br><span class="line"><span class="keyword">import</span> util.DBUtil;</span><br><span class="line"><span class="keyword">import</span> util.DateUtil;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecordDAO</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getTotal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); Statement s = c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            String sql = <span class="string">"select count(*) from record"</span>;</span><br><span class="line">  </span><br><span class="line">            ResultSet rs = s.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                total = rs.getInt(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            System.out.println(<span class="string">"total:"</span> + total);</span><br><span class="line">  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Record record)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">        String sql = <span class="string">"insert into record values(null,?,?,?,?)"</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line">            ps.setInt(<span class="number">1</span>, record.spend);</span><br><span class="line">            ps.setInt(<span class="number">2</span>, record.cid);</span><br><span class="line">            ps.setString(<span class="number">3</span>, record.comment);</span><br><span class="line">            ps.setDate(<span class="number">4</span>, DateUtil.util2sql(record.date));</span><br><span class="line">  </span><br><span class="line">            ps.execute();</span><br><span class="line">  </span><br><span class="line">            ResultSet rs = ps.getGeneratedKeys();</span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="number">1</span>);</span><br><span class="line">                record.id = id;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Record record)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">        String sql = <span class="string">"update record set spend= ?, cid= ?, comment =?, date = ? where id = ?"</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line">  </span><br><span class="line">              ps.setInt(<span class="number">1</span>, record.spend);</span><br><span class="line">              ps.setInt(<span class="number">2</span>, record.cid);</span><br><span class="line">              ps.setString(<span class="number">3</span>, record.comment);</span><br><span class="line">              ps.setDate(<span class="number">4</span>, DateUtil.util2sql(record.date));</span><br><span class="line">              ps.setInt(<span class="number">5</span>, record.id);</span><br><span class="line">  </span><br><span class="line">            ps.execute();</span><br><span class="line">  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); Statement s = c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            String sql = <span class="string">"delete from record where id = "</span> + id;</span><br><span class="line">  </span><br><span class="line">            s.execute(sql);</span><br><span class="line">  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Record <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        Record record = <span class="keyword">null</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); Statement s = c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            String sql = <span class="string">"select * from record where id = "</span> + id;</span><br><span class="line">  </span><br><span class="line">            ResultSet rs = s.executeQuery(sql);</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                record = <span class="keyword">new</span> Record();</span><br><span class="line">                <span class="keyword">int</span> spend = rs.getInt(<span class="string">"spend"</span>);</span><br><span class="line">                <span class="keyword">int</span> cid = rs.getInt(<span class="string">"cid"</span>);</span><br><span class="line">                String comment = rs.getString(<span class="string">"comment"</span>);</span><br><span class="line">                Date date = rs.getDate(<span class="string">"date"</span>);</span><br><span class="line">                 </span><br><span class="line">                record.spend=spend;</span><br><span class="line">                record.cid=cid;</span><br><span class="line">                record.comment=comment;</span><br><span class="line">                record.date=date;</span><br><span class="line">                record.id = id;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> record;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Record&gt; <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list(<span class="number">0</span>, Short.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Record&gt; <span class="title">list</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">        List&lt;Record&gt; records = <span class="keyword">new</span> ArrayList&lt;Record&gt;();</span><br><span class="line">  </span><br><span class="line">        String sql = <span class="string">"select * from record order by id desc limit ?,? "</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setInt(<span class="number">1</span>, start);</span><br><span class="line">            ps.setInt(<span class="number">2</span>, count);</span><br><span class="line">  </span><br><span class="line">            ResultSet rs = ps.executeQuery();</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                Record record = <span class="keyword">new</span> Record();</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">                <span class="keyword">int</span> spend = rs.getInt(<span class="string">"spend"</span>);</span><br><span class="line">                <span class="keyword">int</span> cid = rs.getInt(<span class="string">"cid"</span>);</span><br><span class="line">                 </span><br><span class="line">                 String comment = rs.getString(<span class="string">"comment"</span>);</span><br><span class="line">                 Date date = rs.getDate(<span class="string">"date"</span>);</span><br><span class="line">                  </span><br><span class="line">                 record.spend=spend;</span><br><span class="line">                 record.cid=cid;</span><br><span class="line">                 record.comment=comment;</span><br><span class="line">                 record.date=date;</span><br><span class="line">                 record.id = id;</span><br><span class="line">                records.add(record);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> records;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Record&gt; <span class="title">list</span><span class="params">(<span class="keyword">int</span> cid)</span> </span>&#123;</span><br><span class="line">        List&lt;Record&gt; records = <span class="keyword">new</span> ArrayList&lt;Record&gt;();</span><br><span class="line">  </span><br><span class="line">        String sql = <span class="string">"select * from record where cid = ?"</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setInt(<span class="number">1</span>, cid);</span><br><span class="line">  </span><br><span class="line">            ResultSet rs = ps.executeQuery();</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                Record record = <span class="keyword">new</span> Record();</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">                <span class="keyword">int</span> spend = rs.getInt(<span class="string">"spend"</span>);</span><br><span class="line">                 </span><br><span class="line">                 String comment = rs.getString(<span class="string">"comment"</span>);</span><br><span class="line">                 Date date = rs.getDate(<span class="string">"date"</span>);</span><br><span class="line">                  </span><br><span class="line">                 record.spend=spend;</span><br><span class="line">                 record.cid=cid;</span><br><span class="line">                 record.comment=comment;</span><br><span class="line">                 record.date=date;</span><br><span class="line">                 record.id = id;</span><br><span class="line">                records.add(record);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> records;</span><br><span class="line">    &#125;   </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Record&gt; <span class="title">listToday</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list(DateUtil.today());</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Record&gt; <span class="title">list</span><span class="params">(Date day)</span> </span>&#123;</span><br><span class="line">        List&lt;Record&gt; records = <span class="keyword">new</span> ArrayList&lt;Record&gt;();</span><br><span class="line">        String sql = <span class="string">"select * from record where date =?"</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line">            ps.setDate(<span class="number">1</span>, DateUtil.util2sql(day));</span><br><span class="line"> </span><br><span class="line">            ResultSet rs = ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                Record record = <span class="keyword">new</span> Record();</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">                <span class="keyword">int</span> cid = rs.getInt(<span class="string">"cid"</span>);</span><br><span class="line">                <span class="keyword">int</span> spend = rs.getInt(<span class="string">"spend"</span>);</span><br><span class="line">                 </span><br><span class="line">                 String comment = rs.getString(<span class="string">"comment"</span>);</span><br><span class="line">                 Date date = rs.getDate(<span class="string">"date"</span>);</span><br><span class="line">                  </span><br><span class="line">                 record.spend=spend;</span><br><span class="line">                 record.cid=cid;</span><br><span class="line">                 record.comment=comment;</span><br><span class="line">                 record.date=date;</span><br><span class="line">                 record.id = id;</span><br><span class="line">                 records.add(record);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> records;</span><br><span class="line">    &#125;           </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Record&gt; <span class="title">listThisMonth</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list(DateUtil.monthBegin(),DateUtil.monthEnd());</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Record&gt; <span class="title">list</span><span class="params">(Date start, Date end)</span> </span>&#123;</span><br><span class="line">        List&lt;Record&gt; records = <span class="keyword">new</span> ArrayList&lt;Record&gt;();</span><br><span class="line">        String sql = <span class="string">"select * from record where date &gt;=? and date &lt;= ?"</span>;</span><br><span class="line">        <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql);) &#123;</span><br><span class="line">            ps.setDate(<span class="number">1</span>, DateUtil.util2sql(start));</span><br><span class="line">            ps.setDate(<span class="number">2</span>, DateUtil.util2sql(end));</span><br><span class="line">            ResultSet rs = ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                Record record = <span class="keyword">new</span> Record();</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">                <span class="keyword">int</span> cid = rs.getInt(<span class="string">"cid"</span>);</span><br><span class="line">                <span class="keyword">int</span> spend = rs.getInt(<span class="string">"spend"</span>);</span><br><span class="line">                 </span><br><span class="line">                 String comment = rs.getString(<span class="string">"comment"</span>);</span><br><span class="line">                 Date date = rs.getDate(<span class="string">"date"</span>);</span><br><span class="line">                  </span><br><span class="line">                 record.spend=spend;</span><br><span class="line">                 record.cid=cid;</span><br><span class="line">                 record.comment=comment;</span><br><span class="line">                 record.date=date;</span><br><span class="line">                 record.id = id;</span><br><span class="line">                 records.add(record);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> records;</span><br><span class="line">    &#125;       </span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-代码讲解-v3"><a class="header-anchor" href="#步骤-2-代码讲解-v3">¶</a>步骤 2 : 代码讲解</h3>
<p>基本的增删改查部分和[ConfigDAO]是一样的，就不赘述了。</p>
<p>除此之外，还有一些和日期相关的方法，这些方法就会用到工具类[DateUtil]中的方法</p>
<p>获取某个时间范围内的消费记录信息</p>
<p>​    public List<Record> list(Date start, Date end)</Record></p>
<p>获取本月的消费记录信息</p>
<p>​    public List<Record> listThisMonth()</Record></p>
<p>获取某天的消费记录信息</p>
<p>​    public List<Record> list(Date day)</Record></p>
<p>获取今天的消费记录信息</p>
<p>​    public List<Record> listToday()</Record></p>
<h1 id="六、功能"><a class="header-anchor" href="#六、功能">¶</a>六、功能</h1>
<h2 id="1、启动类BOOTSTRAP"><a class="header-anchor" href="#1、启动类BOOTSTRAP">¶</a>1、启动类BOOTSTRAP</h2>
<h3 id="步骤-1-先看效果-v10"><a class="header-anchor" href="#步骤-1-先看效果-v10">¶</a>步骤 1 : 先看效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2824.png" alt></p>
<h3 id="步骤-2-创建包startup"><a class="header-anchor" href="#步骤-2-创建包startup">¶</a>步骤 2 : 创建包startup</h3>
<p>创建包startup用于存放类Bootstrap</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2881.png" alt></p>
<h3 id="步骤-3-启动入口Bootstrap"><a class="header-anchor" href="#步骤-3-启动入口Bootstrap">¶</a>步骤 3 : 启动入口Bootstrap</h3>
<p>所有的进程都有个启动入口，一般说来，稍微复杂点的程序，就会有一个类，专门负责启动的事情，通常这个类会叫做<strong>startup.Bootstrap</strong></p>
<p>设置皮肤。 一旦在这里设置了皮肤，其他的Panel类里就不需要进行皮肤设置了。</p>
<p>GUIUtil.useLNF();</p>
<p>使用[SwingUtilities.invokeAndWait]的方式启动图形界面</p>
<p>SwingUtilities.invokeLater</p>
<p>显示主窗体，并让[主面板]下方的workingPanel显示[消费一览Panel]</p>
<p>MainFrame.instance.setVisible(true);</p>
<p>MainPanel.instance.workingPanel.show(SpendPanel.instance);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> startup;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.SwingUtilities;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.frame.MainFrame;</span><br><span class="line"><span class="keyword">import</span> gui.panel.MainPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.SpendPanel;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bootstrap</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line"> </span><br><span class="line">        SwingUtilities.invokeAndWait(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                MainFrame.instance.setVisible(<span class="keyword">true</span>);</span><br><span class="line">                MainPanel.instance.workingPanel.show(SpendPanel.instance);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、开发顺序"><a class="header-anchor" href="#2、开发顺序">¶</a>2、开发顺序</h2>
<h3 id="步骤-1-模块依赖"><a class="header-anchor" href="#步骤-1-模块依赖">¶</a>步骤 1 : 模块依赖</h3>
<p>本项目是由多个模块组成，各个模块之间是相互依赖的，有的模块不完成，其他模块就无法工作。比如</p>
<p>要&quot;记一笔&quot; 就必须要先有&quot;消费分类数据&quot;<br>
要&quot;消费一览” 就必须先在设置里预先设置预算<br>
要备份和恢复，也必须先在设置里预先设置mysql的安装路径</p>
<p>所以需要按照依赖的关系先开发一些模块，然后再是其他的</p>
<h3 id="步骤-2-开发顺序"><a class="header-anchor" href="#步骤-2-开发顺序">¶</a>步骤 2 : 开发顺序</h3>
<p>根据模块依赖关系，按照如下顺序进行功能开发</p>
<ol>
<li>
<p>主窗体工具栏事件响应</p>
</li>
<li>
<p>设置</p>
</li>
<li>
<p>消费分类</p>
</li>
<li>
<p>记一笔</p>
</li>
<li>
<p>消费一览</p>
</li>
<li>
<p>月消费报表</p>
</li>
<li>
<p>备份</p>
</li>
<li>
<p>恢复</p>
</li>
</ol>
<p><strong>注</strong>： 主窗体工具栏事件响应指的是主窗体工具栏中的按钮，点击之后，切换不同的面板。 这个可以先做。</p>
<h2 id="3、主窗体工具栏"><a class="header-anchor" href="#3、主窗体工具栏">¶</a>3、主窗体工具栏</h2>
<h3 id="步骤-1-监听器ToolBarListener"><a class="header-anchor" href="#步骤-1-监听器ToolBarListener">¶</a>步骤 1 : 监听器ToolBarListener</h3>
<p>设计一个独立的监听器类ToolBarListener ，实现接口ActionListener ，重写actionPerformed方法。</p>
<p>这个监听器是为工具栏上的几个按钮添加的，并且这几个按钮都使用这么一个监听器。</p>
<p>通过ActionEvent.getSource()获取事件是哪个按钮发出来的，根据不同的按钮，发出切换不同的功能面板。<br>
比如开始这段代码，如果按钮是bReport，那么就切换到报表面板ReportPanel</p>
<p>JButton b = (JButton) e.getSource();</p>
<p>if (b == p.bReport)</p>
<p>​     p.workingPanel.show(ReportPanel.instance);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.listener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.panel.BackupPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.CategoryPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.ConfigPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.SpendPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.MainPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.RecordPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.RecoverPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.ReportPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ToolBarListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">        MainPanel p = MainPanel.instance;</span><br><span class="line">        JButton b = (JButton) e.getSource();</span><br><span class="line">        <span class="keyword">if</span> (b == p.bReport)</span><br><span class="line">            p.workingPanel.show(ReportPanel.instance);</span><br><span class="line">        <span class="keyword">if</span> (b == p.bCategory)</span><br><span class="line">            p.workingPanel.show(CategoryPanel.instance);</span><br><span class="line">        <span class="keyword">if</span> (b == p.bSpend)</span><br><span class="line">            p.workingPanel.show(SpendPanel.instance);</span><br><span class="line">        <span class="keyword">if</span> (b == p.bRecord)</span><br><span class="line">            p.workingPanel.show(RecordPanel.instance);</span><br><span class="line">        <span class="keyword">if</span> (b == p.bConfig)</span><br><span class="line">            p.workingPanel.show(ConfigPanel.instance);</span><br><span class="line">        <span class="keyword">if</span> (b == p.bBackup)</span><br><span class="line">            p.workingPanel.show(BackupPanel.instance);</span><br><span class="line">        <span class="keyword">if</span> (b == p.bRecover)</span><br><span class="line">            p.workingPanel.show(RecoverPanel.instance);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-在主面板中增加监听器"><a class="header-anchor" href="#步骤-2-在主面板中增加监听器">¶</a>步骤 2 : 在主面板中增加监听器</h3>
<p>实例化一个ToolBarListener 监听器，工具栏上的按钮，都加上这么一个监听器对象即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JToolBar;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.listener.ToolBarListener;</span><br><span class="line"><span class="keyword">import</span> util.CenterPanel;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> MainPanel instance = <span class="keyword">new</span> MainPanel();</span><br><span class="line">    <span class="keyword">public</span> JToolBar tb = <span class="keyword">new</span> JToolBar();</span><br><span class="line">    <span class="keyword">public</span> JButton bSpend = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bRecord = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bCategory = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bReport = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bConfig = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bBackup = <span class="keyword">new</span> JButton();</span><br><span class="line">    <span class="keyword">public</span> JButton bRecover = <span class="keyword">new</span> JButton();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> CenterPanel workingPanel;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">MainPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        GUIUtil.setImageIcon(bSpend, <span class="string">"home.png"</span>, <span class="string">"消费一览"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bRecord, <span class="string">"record.png"</span>, <span class="string">"记一笔"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bCategory, <span class="string">"category2.png"</span>, <span class="string">"消费分类"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bReport, <span class="string">"report.png"</span>, <span class="string">"月消费报表"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bConfig, <span class="string">"config.png"</span>, <span class="string">"设置"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bBackup, <span class="string">"backup.png"</span>, <span class="string">"备份"</span>);</span><br><span class="line">        GUIUtil.setImageIcon(bRecover, <span class="string">"restore.png"</span>, <span class="string">"恢复"</span>);</span><br><span class="line"> </span><br><span class="line">        tb.add(bSpend);</span><br><span class="line">        tb.add(bRecord);</span><br><span class="line">        tb.add(bCategory);</span><br><span class="line">        tb.add(bReport);</span><br><span class="line">        tb.add(bConfig);</span><br><span class="line">        tb.add(bBackup);</span><br><span class="line">        tb.add(bRecover);</span><br><span class="line">        tb.setFloatable(<span class="keyword">false</span>);</span><br><span class="line"> </span><br><span class="line">        workingPanel = <span class="keyword">new</span> CenterPanel(<span class="number">0.8</span>);</span><br><span class="line"> </span><br><span class="line">        setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        add(tb, BorderLayout.NORTH);</span><br><span class="line">        add(workingPanel, BorderLayout.CENTER);</span><br><span class="line">         </span><br><span class="line">        addListener();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ToolBarListener listener = <span class="keyword">new</span> ToolBarListener();</span><br><span class="line">         </span><br><span class="line">        bSpend.addActionListener(listener);</span><br><span class="line">        bRecord.addActionListener(listener);</span><br><span class="line">        bCategory.addActionListener(listener);</span><br><span class="line">        bReport.addActionListener(listener);</span><br><span class="line">        bConfig.addActionListener(listener);</span><br><span class="line">        bBackup.addActionListener(listener);</span><br><span class="line">        bRecover.addActionListener(listener);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(MainPanel.instance, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-效果"><a class="header-anchor" href="#步骤-3-效果">¶</a>步骤 3 : 效果</h3>
<p>这样点击不同的按钮，就可以在不同的面板之间来回切换</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2842.png" alt></p>
<h3 id="步骤-4-独立的监听器与面板单例化"><a class="header-anchor" href="#步骤-4-独立的监听器与面板单例化">¶</a>步骤 4 : 独立的监听器与面板单例化</h3>
<p>至此面板单例化好处就开始显现出来了，在监听器里可以很方便的访问各种界面类。</p>
<p>独立的监听器规划在gui.listener包下面，如果需要做监听器方面的改动，定位也会非常方便</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2843.png" alt></p>
<h2 id="4、配置"><a class="header-anchor" href="#4、配置">¶</a>4、配置</h2>
<h3 id="步骤-1-业务类Service"><a class="header-anchor" href="#步骤-1-业务类Service">¶</a>步骤 1 : 业务类Service</h3>
<p>ConfigService 设置业务类，这个类是监听器直接调用的类，然后再通过ConfigService去调用ConfigDAO。</p>
<p>为什么需要一个业务类呢？ DAO是直接和数据库打交道的，在和数据库打交道之前，还需要对数据进行预处理，这些就可以放在业务类里进行。</p>
<p>如图所示，由监听器调用Service业务类，然后再调用DAO访问数据库。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2844.png" alt></p>
<h3 id="步骤-2-ConfigService"><a class="header-anchor" href="#步骤-2-ConfigService">¶</a>步骤 2 : ConfigService</h3>
<p>ConfigService 业务类做了几个事情</p>
<ol>
<li>
<p>初始化 init()<br>
因为设置信息里有两个数据，一个是预算，一个是Mysql路径。 这两个信息，无论如何都应该是存在数据库中的。 所以会调用init把他们俩初始化。</p>
</li>
<li>
<p>init(String key, String value) 方法<br>
首先根据key去查找，如果不存在，就使用value的值插入一条数据。</p>
</li>
<li>
<p>get(String key)<br>
根据键获取相应的值</p>
</li>
<li>
<p>update(String key, String value)<br>
更新键对应的值</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> dao.ConfigDAO;</span><br><span class="line"><span class="keyword">import</span> entity.Config;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String budget = <span class="string">"budget"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String mysqlPath = <span class="string">"mysqlPath"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String default_budget = <span class="string">"500"</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">static</span> ConfigDAO dao= <span class="keyword">new</span> ConfigDAO();</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        init(budget, default_budget);</span><br><span class="line">        init(mysqlPath, <span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(String key, String value)</span> </span>&#123;</span><br><span class="line">         </span><br><span class="line">        Config config= dao.getByKey(key);</span><br><span class="line">        <span class="keyword">if</span>(config==<span class="keyword">null</span>)&#123;</span><br><span class="line">            Config c = <span class="keyword">new</span> Config();</span><br><span class="line">            c.setKey(key);</span><br><span class="line">            c.setValue(value);</span><br><span class="line">            dao.add(c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        Config config= dao.getByKey(key);</span><br><span class="line">        <span class="keyword">return</span> config.getValue();</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String key, String value)</span></span>&#123;</span><br><span class="line">        Config config= dao.getByKey(key);</span><br><span class="line">        config.setValue(value);</span><br><span class="line">        dao.update(config);    </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getIntBudget</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.parseInt(get(budget));</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-ConfigListener"><a class="header-anchor" href="#步骤-3-ConfigListener">¶</a>步骤 3 : ConfigListener</h3>
<p>监听器ConfigListener，这个监听器是用在更新按钮上的</p>
<ol>
<li>
<p>首先判断输入的预算值是否是整数</p>
</li>
<li>
<p>接着判断输入的MYSQL安装路径是否正确。 判断办法是看路径对应的bin子目录下是否有mysql.exe文件存在</p>
</li>
<li>
<p>如果上述两个判断都通过了，那么就调用业务类ConfigService进行数据更新</p>
</li>
</ol>
<p>ConfigService cs= new ConfigService();</p>
<p>cs.update(ConfigService.budget,p.tfBudget.getText());</p>
<p>cs.update(ConfigService.mysqlPath,mysqlPath);</p>
<ol start="4">
<li>最后提示设置修改成功</li>
</ol>
<p><strong>注1：</strong> 在这里进一步体现了界面类单例化和组件设置为public的好处，即获取非常的方便，比之传统的匿名类方式快捷很多，维护起来也更容易</p>
<p><strong>注2：</strong> 在第3步中，也能更明显的体现业务类ConfigService的好处。 如果不使用ConfigService，那么就需要自己创建Config对象，对象是否存在的校验，设置属性等等，看上去就会显示比较繁杂。 而使用业务类，看上去就会比较简练。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2845.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.listener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JOptionPane;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.panel.ConfigPanel;</span><br><span class="line"><span class="keyword">import</span> service.ConfigService;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">        ConfigPanel p = ConfigPanel.instance;</span><br><span class="line">        <span class="keyword">if</span>(!GUIUtil.checkNumber(p.tfBudget, <span class="string">"本月预算"</span>))</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        String mysqlPath =p.tfMysqlPath.getText();</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>!=mysqlPath.length())&#123;</span><br><span class="line">            File commandFile = <span class="keyword">new</span> File(mysqlPath,<span class="string">"bin/mysql.exe"</span>);</span><br><span class="line">            <span class="keyword">if</span>(!commandFile.exists())&#123;</span><br><span class="line">                JOptionPane.showMessageDialog(p, <span class="string">"Mysql路径不正确"</span>);</span><br><span class="line">                p.tfMysqlPath.grabFocus();</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        ConfigService cs= <span class="keyword">new</span> ConfigService();</span><br><span class="line">        cs.update(ConfigService.budget,p.tfBudget.getText());</span><br><span class="line">        cs.update(ConfigService.mysqlPath,mysqlPath);</span><br><span class="line">         </span><br><span class="line">        JOptionPane.showMessageDialog(p, <span class="string">"设置修改成功"</span>);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-在ConfigPanel添加监听器"><a class="header-anchor" href="#步骤-4-在ConfigPanel添加监听器">¶</a>步骤 4 : 在ConfigPanel添加监听器</h3>
<p>在ConfigPanel添加监听器</p>
<p>public void addListener() {</p>
<p>​     ConfigListener l =new ConfigListener();</p>
<p>​     bSubmit.addActionListener(l);</p>
<p>}</p>
<p>并在构造方法中调用addListener()</p>
<p>addListener();</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.GridLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.listener.ConfigListener;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ConfigPanel instance = <span class="keyword">new</span> ConfigPanel();</span><br><span class="line"> </span><br><span class="line">    JLabel lBudget = <span class="keyword">new</span> JLabel(<span class="string">"本月预算(￥)"</span>);</span><br><span class="line">    <span class="keyword">public</span> JTextField tfBudget = <span class="keyword">new</span> JTextField(<span class="string">"0"</span>);</span><br><span class="line"> </span><br><span class="line">    JLabel lMysql = <span class="keyword">new</span> JLabel(<span class="string">"Mysql安装目录"</span>);</span><br><span class="line">    <span class="keyword">public</span> JTextField tfMysqlPath = <span class="keyword">new</span> JTextField(<span class="string">""</span>);</span><br><span class="line"> </span><br><span class="line">    JButton bSubmit = <span class="keyword">new</span> JButton(<span class="string">"更新"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConfigPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.grayColor, lBudget, lMysql);</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bSubmit);</span><br><span class="line"> </span><br><span class="line">        JPanel pInput = <span class="keyword">new</span> JPanel();</span><br><span class="line">        JPanel pSubmit = <span class="keyword">new</span> JPanel();</span><br><span class="line">        <span class="keyword">int</span> gap = <span class="number">40</span>;</span><br><span class="line">        pInput.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">4</span>, <span class="number">1</span>, gap, gap));</span><br><span class="line"> </span><br><span class="line">        pInput.add(lBudget);</span><br><span class="line">        pInput.add(tfBudget);</span><br><span class="line">        pInput.add(lMysql);</span><br><span class="line">        pInput.add(tfMysqlPath);</span><br><span class="line"> </span><br><span class="line">        pSubmit.add(bSubmit);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        <span class="keyword">this</span>.add(pInput, BorderLayout.NORTH);</span><br><span class="line">        <span class="keyword">this</span>.add(pSubmit, BorderLayout.CENTER);</span><br><span class="line">         </span><br><span class="line">        addListener();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(ConfigPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ConfigListener l =<span class="keyword">new</span> ConfigListener();</span><br><span class="line">        bSubmit.addActionListener(l);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-运行效果"><a class="header-anchor" href="#步骤-5-运行效果">¶</a>步骤 5 : 运行效果</h3>
<p>点击更新，提示修改成功。</p>
<p>**注：**不要忘记了导入mysql-jdbc的相关jar包</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2882.png" alt></p>
<h2 id="5、消费分类"><a class="header-anchor" href="#5、消费分类">¶</a>5、消费分类</h2>
<h3 id="步骤-1-CategoryService"><a class="header-anchor" href="#步骤-1-CategoryService">¶</a>步骤 1 : CategoryService</h3>
<p>Category业务类</p>
<ol>
<li>
<p>list()<br>
查询出所有的Category，然后根据每种分类，再把分类对应的消费记录总数查出来，并且设置在对应分类实例的recordNumer上。<br>
最后再根据recordNumer进行倒排序，让消费频率高的分类放在前面。</p>
</li>
<li>
<p>add(String name)<br>
增加一种分类</p>
</li>
<li>
<p>update(int id, String name)<br>
更新分类</p>
</li>
<li>
<p>delete(int id)<br>
删除分类</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> dao.CategoryDAO;</span><br><span class="line"><span class="keyword">import</span> dao.RecordDAO;</span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> entity.Record;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryService</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    CategoryDAO categoryDao = <span class="keyword">new</span> CategoryDAO();</span><br><span class="line">    RecordDAO recordDao = <span class="keyword">new</span> RecordDAO();</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Category&gt; <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Category&gt; cs= categoryDao.list();</span><br><span class="line">        <span class="keyword">for</span> (Category c : cs) &#123;</span><br><span class="line">            List&lt;Record&gt; rs =recordDao.list(c.id);</span><br><span class="line">            c.recordNumber=rs.size();</span><br><span class="line">        &#125;</span><br><span class="line">        Collections.sort(cs,(c1,c2)-&gt;c2.recordNumber-c1.recordNumber);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">return</span> cs;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        Category c = <span class="keyword">new</span> Category();</span><br><span class="line">        c.setName(name);</span><br><span class="line">        categoryDao.add(c);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> id, String name)</span> </span>&#123;</span><br><span class="line">        Category c = <span class="keyword">new</span> Category();</span><br><span class="line">        c.setName(name);</span><br><span class="line">        c.setId(id);</span><br><span class="line">        categoryDao.update(c);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        categoryDao.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-CategoryTableModel"><a class="header-anchor" href="#步骤-2-CategoryTableModel">¶</a>步骤 2 : CategoryTableModel</h3>
<p>之前做[分类信息原型]的时候[CategoryTableModel]里使用的都是模拟数据，现在应该使用数据库中的数据了。</p>
<p>几个改动如下</p>
<ol>
<li>存放的数据由String集合，改为了Category集合，并且从CategoryService的list()方法获取数据</li>
</ol>
<p>public List<Category> cs = new CategoryService().list();</Category></p>
<ol start="2">
<li>
<p>getValueAt方法，第一列取Category 对象的name值，第二列取recordNumber值。</p>
<p>public Object getValueAt(int rowIndex, int columnIndex) {</p>
</li>
</ol>
<p>​        Category h = cs.get(rowIndex);</p>
<p>​        if (0 == columnIndex)</p>
<p>​            return <a href="http://h.name" target="_blank" rel="noopener">h.name</a>;</p>
<p>​        if (1 == columnIndex)</p>
<p>​            return h.recordNumber;</p>
<p>​        return null;</p>
<p>​    }</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.model;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.table.AbstractTableModel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> service.CategoryService;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryTableModel</span> <span class="keyword">extends</span> <span class="title">AbstractTableModel</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    String[] columnNames = <span class="keyword">new</span> String[] &#123; <span class="string">"分类名称"</span>, <span class="string">"消费次数"</span>&#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 使用从Service返回的List作为TableModel的数据</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> List&lt;Category&gt; cs = <span class="keyword">new</span> CategoryService().list();</span><br><span class="line">  </span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRowCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">return</span> cs.size();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getColumnCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">return</span> columnNames.length;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getColumnName</span><span class="params">(<span class="keyword">int</span> columnIndex)</span> </span>&#123;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">return</span> columnNames[columnIndex];</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isCellEditable</span><span class="params">(<span class="keyword">int</span> rowIndex, <span class="keyword">int</span> columnIndex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 先通过cs.get(rowIndex)获取行对应的Category对象</span></span><br><span class="line">    <span class="comment">// 然后根据columnIndex返回对应的属性</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getValueAt</span><span class="params">(<span class="keyword">int</span> rowIndex, <span class="keyword">int</span> columnIndex)</span> </span>&#123;</span><br><span class="line">        Category h = cs.get(rowIndex);</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> == columnIndex)</span><br><span class="line">            <span class="keyword">return</span> h.name;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span> == columnIndex)</span><br><span class="line">            <span class="keyword">return</span> h.recordNumber;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-CategoryPanel"><a class="header-anchor" href="#步骤-3-CategoryPanel">¶</a>步骤 3 : CategoryPanel</h3>
<ol>
<li>为CategoryPanel新增加一个getSelectedCategory，方便获取JTable上当前选中的Category对象</li>
</ol>
<p>public Category getSelectedCategory() {</p>
<p>​    int index = t.getSelectedRow();</p>
<p>​    return ctm.cs.get(index);</p>
<p>}</p>
<ol start="2">
<li>增加一个updateData方法，用于在增加，删除，和修改之后，更新表格中的信息，并默认选中第一行。<br>
除此之外，还进行判断，如果表格里没有数据，删除和修改按钮不可使用。</li>
</ol>
<p>​	public void updateData() {</p>
<p>​		ctm.cs = new CategoryService().list();</p>
<p>​		t.updateUI();</p>
<p>​		t.getSelectionModel().setSelectionInterval(0, 0);</p>
<p>​</p>
<p>​		if(0==ctm.cs.size()){</p>
<p>​			bEdit.setEnabled(false);</p>
<p>​			bDelete.setEnabled(false);</p>
<p>​		}</p>
<p>​		else{</p>
<p>​			bEdit.setEnabled(true);</p>
<p>​			bDelete.setEnabled(true);</p>
<p>​		}</p>
<p>​	}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTable;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> gui.model.CategoryTableModel;</span><br><span class="line"><span class="keyword">import</span> service.CategoryService;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CategoryPanel instance = <span class="keyword">new</span> CategoryPanel();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> JButton bAdd = <span class="keyword">new</span> JButton(<span class="string">"新增"</span>);</span><br><span class="line">    <span class="keyword">public</span> JButton bEdit = <span class="keyword">new</span> JButton(<span class="string">"编辑"</span>);</span><br><span class="line">    <span class="keyword">public</span> JButton bDelete = <span class="keyword">new</span> JButton(<span class="string">"删除"</span>);</span><br><span class="line">    String columNames[] = <span class="keyword">new</span> String[] &#123; <span class="string">"分类名称"</span>, <span class="string">"消费次数"</span> &#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> CategoryTableModel ctm = <span class="keyword">new</span> CategoryTableModel();</span><br><span class="line">    <span class="keyword">public</span> JTable t = <span class="keyword">new</span> JTable(ctm);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CategoryPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bAdd, bEdit, bDelete);</span><br><span class="line">        JScrollPane sp = <span class="keyword">new</span> JScrollPane(t);</span><br><span class="line">        JPanel pSubmit = <span class="keyword">new</span> JPanel();</span><br><span class="line">        pSubmit.add(bAdd);</span><br><span class="line">        pSubmit.add(bEdit);</span><br><span class="line">        pSubmit.add(bDelete);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        <span class="keyword">this</span>.add(sp, BorderLayout.CENTER);</span><br><span class="line">        <span class="keyword">this</span>.add(pSubmit, BorderLayout.SOUTH);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(CategoryPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Category <span class="title">getSelectedCategory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = t.getSelectedRow();</span><br><span class="line">        <span class="keyword">return</span> ctm.cs.get(index);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ctm.cs = <span class="keyword">new</span> CategoryService().list();</span><br><span class="line">        t.updateUI();</span><br><span class="line">        t.getSelectionModel().setSelectionInterval(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>==ctm.cs.size())&#123;</span><br><span class="line">            bEdit.setEnabled(<span class="keyword">false</span>);</span><br><span class="line">            bDelete.setEnabled(<span class="keyword">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            bEdit.setEnabled(<span class="keyword">true</span>);</span><br><span class="line">            bDelete.setEnabled(<span class="keyword">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-CategoryListener"><a class="header-anchor" href="#步骤-4-CategoryListener">¶</a>步骤 4 : CategoryListener</h3>
<p>CategoryListener监听器，增加，编辑和删除按钮都使用这个监听器。</p>
<ol>
<li>
<p>与[监听器ToolBarListener ]类似的，根据事件的发出源，判断是哪个按钮触发了这个监听器，并做相应的功能。</p>
</li>
<li>
<p>如果是增加，弹出输入框，校验输入内容不为空后，通过CategoryService.add()添加到数据库。</p>
</li>
<li>
<p>如果是编辑，弹出输入框，校验输入内容不为空后，根据[CategoryPanel]中getSelectedCategory()获取id, 然后再通过CategoryService.update更新到数据库</p>
</li>
<li>
<p>如果是删除，首先判断是否有消费记录，如果有消费记录，则不能删除。 接着进行删除确认提示，确认后，通过CategoryService.delete()进行删除。</p>
</li>
<li>
<p>最后调用p.updateData();更新数据</p>
</li>
</ol>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2851.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.listener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JOptionPane;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> gui.panel.CategoryPanel;</span><br><span class="line"><span class="keyword">import</span> service.CategoryService;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">        CategoryPanel p = CategoryPanel.instance;</span><br><span class="line"> </span><br><span class="line">        JButton b = (JButton) e.getSource();</span><br><span class="line">        <span class="keyword">if</span> (b == p.bAdd) &#123;</span><br><span class="line">            String name = JOptionPane.showInputDialog(<span class="keyword">null</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">0</span> == name.length()) &#123;</span><br><span class="line">                JOptionPane.showMessageDialog(p, <span class="string">"分类名称不能为空"</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">new</span> CategoryService().add(name);</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (b == p.bEdit) &#123;</span><br><span class="line">            Category c = p.getSelectedCategory();</span><br><span class="line">            <span class="keyword">int</span> id = c.id;</span><br><span class="line">            String name = JOptionPane.showInputDialog(<span class="string">"修改分类名称"</span>, c.name);</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">0</span> == name.length()) &#123;</span><br><span class="line">                JOptionPane.showMessageDialog(p, <span class="string">"分类名称不能为空"</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">new</span> CategoryService().update(id, name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (b == p.bDelete) &#123;</span><br><span class="line">            Category c = p.getSelectedCategory();</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">0</span> != c.recordNumber) &#123;</span><br><span class="line">                JOptionPane.showMessageDialog(p, <span class="string">"本分类下有消费记录存在，不能删除"</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (JOptionPane.OK_OPTION != JOptionPane.showConfirmDialog(p, <span class="string">"确认要删除？"</span>))</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">int</span> id = c.id;</span><br><span class="line">            <span class="keyword">new</span> CategoryService().delete(id);</span><br><span class="line">        &#125;</span><br><span class="line">        p.updateData();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-在CategoryPanel中加上监听器"><a class="header-anchor" href="#步骤-5-在CategoryPanel中加上监听器">¶</a>步骤 5 : 在CategoryPanel中加上监听器</h3>
<p>为3个按钮加上监听器</p>
<p>​		CategoryListener listener = new CategoryListener();</p>
<p>​		bAdd.addActionListener(listener);</p>
<p>​		bEdit.addActionListener(listener);</p>
<p>​		bDelete.addActionListener(listener);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTable;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> gui.listener.CategoryListener;</span><br><span class="line"><span class="keyword">import</span> gui.model.CategoryTableModel;</span><br><span class="line"><span class="keyword">import</span> service.CategoryService;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CategoryPanel instance = <span class="keyword">new</span> CategoryPanel();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> JButton bAdd = <span class="keyword">new</span> JButton(<span class="string">"新增"</span>);</span><br><span class="line">    <span class="keyword">public</span> JButton bEdit = <span class="keyword">new</span> JButton(<span class="string">"编辑"</span>);</span><br><span class="line">    <span class="keyword">public</span> JButton bDelete = <span class="keyword">new</span> JButton(<span class="string">"删除"</span>);</span><br><span class="line">    String columNames[] = <span class="keyword">new</span> String[] &#123; <span class="string">"分类名称"</span>, <span class="string">"消费次数"</span> &#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> CategoryTableModel ctm = <span class="keyword">new</span> CategoryTableModel();</span><br><span class="line">    <span class="keyword">public</span> JTable t = <span class="keyword">new</span> JTable(ctm);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CategoryPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bAdd, bEdit, bDelete);</span><br><span class="line">        JScrollPane sp = <span class="keyword">new</span> JScrollPane(t);</span><br><span class="line">        JPanel pSubmit = <span class="keyword">new</span> JPanel();</span><br><span class="line">        pSubmit.add(bAdd);</span><br><span class="line">        pSubmit.add(bEdit);</span><br><span class="line">        pSubmit.add(bDelete);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        <span class="keyword">this</span>.add(sp, BorderLayout.CENTER);</span><br><span class="line">        <span class="keyword">this</span>.add(pSubmit, BorderLayout.SOUTH);</span><br><span class="line">         </span><br><span class="line">        addListener();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(CategoryPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Category <span class="title">getSelectedCategory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = t.getSelectedRow();</span><br><span class="line">        <span class="keyword">return</span> ctm.cs.get(index);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ctm.cs = <span class="keyword">new</span> CategoryService().list();</span><br><span class="line">        t.updateUI();</span><br><span class="line">        t.getSelectionModel().setSelectionInterval(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>==ctm.cs.size())&#123;</span><br><span class="line">            bEdit.setEnabled(<span class="keyword">false</span>);</span><br><span class="line">            bDelete.setEnabled(<span class="keyword">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            bEdit.setEnabled(<span class="keyword">true</span>);</span><br><span class="line">            bDelete.setEnabled(<span class="keyword">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CategoryListener listener = <span class="keyword">new</span> CategoryListener();</span><br><span class="line">        bAdd.addActionListener(listener);</span><br><span class="line">        bEdit.addActionListener(listener);</span><br><span class="line">        bDelete.addActionListener(listener);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-运行效果"><a class="header-anchor" href="#步骤-6-运行效果">¶</a>步骤 6 : 运行效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2883.png" alt></p>
<h2 id="6、WORKINGPANEL"><a class="header-anchor" href="#6、WORKINGPANEL">¶</a>6、WORKINGPANEL</h2>
<h3 id="步骤-1-共同性"><a class="header-anchor" href="#步骤-1-共同性">¶</a>步骤 1 : 共同性</h3>
<p>功能开发到这个阶段，可以总结出一些规律出来</p>
<ol>
<li>
<p>在设置面板ConfigPanel和分类面板CategoryPanel里都有addListener接口</p>
</li>
<li>
<p>面板在显示的时候，都需要从数据库中读取信息，并显示在界面上，比如[CategoryPanel的updateData方法]。 ConfigPanel虽然暂时没有updateData这么一个方法，但是也是有这个需要的(当点击工具栏上的设置按钮的时候，也是需要把预算信息读取出来，并显示在面板上的)</p>
</li>
</ol>
<p>可以预见到，后面的各种面板类，都有类似的功能需求。 这样，就可以抽象出一个WorkingPanel类，来提供这样的功能</p>
<h3 id="步骤-2-WorkingPanel"><a class="header-anchor" href="#步骤-2-WorkingPanel">¶</a>步骤 2 : WorkingPanel</h3>
<p>WorkingPanel是一个抽象类，其中声明了方法addListener()和updateData().</p>
<p>不同的面板类，都应该继承这个抽象类，进而<strong>必须</strong>提供addListener和updateData方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">WorkingPanel</span>  <span class="keyword">extends</span> <span class="title">JPanel</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-让CategoryPanel继承WorkingPanel"><a class="header-anchor" href="#步骤-3-让CategoryPanel继承WorkingPanel">¶</a>步骤 3 : 让CategoryPanel继承WorkingPanel</h3>
<p>public class CategoryPanel extends <strong>WorkingPanel</strong></p>
<p>CategoryPanel 本来就有addListener()和updateData()方法，所以无需做其他改动</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTable;</span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> gui.listener.CategoryListener;</span><br><span class="line"><span class="keyword">import</span> gui.model.CategoryTableModel;</span><br><span class="line"><span class="keyword">import</span> service.CategoryService;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryPanel</span> <span class="keyword">extends</span> <span class="title">WorkingPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CategoryPanel instance = <span class="keyword">new</span> CategoryPanel();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> JButton bAdd = <span class="keyword">new</span> JButton(<span class="string">"新增"</span>);</span><br><span class="line">    <span class="keyword">public</span> JButton bEdit = <span class="keyword">new</span> JButton(<span class="string">"编辑"</span>);</span><br><span class="line">    <span class="keyword">public</span> JButton bDelete = <span class="keyword">new</span> JButton(<span class="string">"删除"</span>);</span><br><span class="line">    String columNames[] = <span class="keyword">new</span> String[] &#123; <span class="string">"分类名称"</span>, <span class="string">"消费次数"</span> &#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> CategoryTableModel ctm = <span class="keyword">new</span> CategoryTableModel();</span><br><span class="line">    <span class="keyword">public</span> JTable t = <span class="keyword">new</span> JTable(ctm);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CategoryPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bAdd, bEdit, bDelete);</span><br><span class="line">        JScrollPane sp = <span class="keyword">new</span> JScrollPane(t);</span><br><span class="line">        JPanel pSubmit = <span class="keyword">new</span> JPanel();</span><br><span class="line">        pSubmit.add(bAdd);</span><br><span class="line">        pSubmit.add(bEdit);</span><br><span class="line">        pSubmit.add(bDelete);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        <span class="keyword">this</span>.add(sp, BorderLayout.CENTER);</span><br><span class="line">        <span class="keyword">this</span>.add(pSubmit, BorderLayout.SOUTH);</span><br><span class="line">         </span><br><span class="line">        addListener();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(CategoryPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Category <span class="title">getSelectedCategory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = t.getSelectedRow();</span><br><span class="line">        <span class="keyword">return</span> ctm.cs.get(index);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ctm.cs = <span class="keyword">new</span> CategoryService().list();</span><br><span class="line">        t.updateUI();</span><br><span class="line">        t.getSelectionModel().setSelectionInterval(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>==ctm.cs.size())&#123;</span><br><span class="line">            bEdit.setEnabled(<span class="keyword">false</span>);</span><br><span class="line">            bDelete.setEnabled(<span class="keyword">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            bEdit.setEnabled(<span class="keyword">true</span>);</span><br><span class="line">            bDelete.setEnabled(<span class="keyword">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CategoryListener listener = <span class="keyword">new</span> CategoryListener();</span><br><span class="line">        bAdd.addActionListener(listener);</span><br><span class="line">        bEdit.addActionListener(listener);</span><br><span class="line">        bDelete.addActionListener(listener);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-让ConfigPanel继承WorkingPanel"><a class="header-anchor" href="#步骤-4-让ConfigPanel继承WorkingPanel">¶</a>步骤 4 : 让ConfigPanel继承WorkingPanel</h3>
<p>因为ConfigPanel之前没有updateData()，所以需要提供该方法<br>
在updateData()中，通过ConfigService获取预算和MYSQL路径数据，并显示在组件上</p>
<p>​	public void updateData() {</p>
<p>​		String budget = new ConfigService().get(ConfigService.budget);</p>
<p>​		String mysqlPath = new ConfigService().get(ConfigService.mysqlPath);</p>
<p>​		tfBudget.setText(budget);</p>
<p>​		tfMysqlPath.setText(mysqlPath);</p>
<p>​		tfBudget.grabFocus();</p>
<p>​	}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.GridLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.listener.ConfigListener;</span><br><span class="line"><span class="keyword">import</span> service.ConfigService;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigPanel</span> <span class="keyword">extends</span> <span class="title">WorkingPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ConfigPanel instance = <span class="keyword">new</span> ConfigPanel();</span><br><span class="line"> </span><br><span class="line">    JLabel lBudget = <span class="keyword">new</span> JLabel(<span class="string">"本月预算(￥)"</span>);</span><br><span class="line">    <span class="keyword">public</span> JTextField tfBudget = <span class="keyword">new</span> JTextField(<span class="string">"0"</span>);</span><br><span class="line"> </span><br><span class="line">    JLabel lMysql = <span class="keyword">new</span> JLabel(<span class="string">"Mysql安装目录"</span>);</span><br><span class="line">    <span class="keyword">public</span> JTextField tfMysqlPath = <span class="keyword">new</span> JTextField(<span class="string">""</span>);</span><br><span class="line"> </span><br><span class="line">    JButton bSubmit = <span class="keyword">new</span> JButton(<span class="string">"更新"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConfigPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.grayColor, lBudget, lMysql);</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bSubmit);</span><br><span class="line"> </span><br><span class="line">        JPanel pInput = <span class="keyword">new</span> JPanel();</span><br><span class="line">        JPanel pSubmit = <span class="keyword">new</span> JPanel();</span><br><span class="line">        <span class="keyword">int</span> gap = <span class="number">40</span>;</span><br><span class="line">        pInput.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">4</span>, <span class="number">1</span>, gap, gap));</span><br><span class="line"> </span><br><span class="line">        pInput.add(lBudget);</span><br><span class="line">        pInput.add(tfBudget);</span><br><span class="line">        pInput.add(lMysql);</span><br><span class="line">        pInput.add(tfMysqlPath);</span><br><span class="line"> </span><br><span class="line">        pSubmit.add(bSubmit);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        <span class="keyword">this</span>.add(pInput, BorderLayout.NORTH);</span><br><span class="line">        <span class="keyword">this</span>.add(pSubmit, BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        addListener();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(ConfigPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ConfigListener l = <span class="keyword">new</span> ConfigListener();</span><br><span class="line">        bSubmit.addActionListener(l);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String budget = <span class="keyword">new</span> ConfigService().get(ConfigService.budget);</span><br><span class="line">        String mysqlPath = <span class="keyword">new</span> ConfigService().get(ConfigService.mysqlPath);</span><br><span class="line">        tfBudget.setText(budget);</span><br><span class="line">        tfMysqlPath.setText(mysqlPath);</span><br><span class="line">        tfBudget.grabFocus();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-ToolBarListener监听器的不完善"><a class="header-anchor" href="#步骤-5-ToolBarListener监听器的不完善">¶</a>步骤 5 : ToolBarListener监听器的不完善</h3>
<p>[监听器ToolBarListener ]目前做的工作是把面板显示出来。 但是并不能保证面板上刷新数据库中的信息，比如点击设置后，虽然能够切换到预算面板，但是看到的预算值依然是0。</p>
<p>那么怎么解决这个问题呢？ 请看下一步骤 [改进CenterPanel]</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2857.png" alt></p>
<h3 id="步骤-6-改进CenterPanel"><a class="header-anchor" href="#步骤-6-改进CenterPanel">¶</a>步骤 6 : 改进CenterPanel</h3>
<p>留意[监听器ToolBarListener ]中的这段代码</p>
<p>p.workingPanel.show(ConfigPanel.instance);</p>
<p>workingPanel是CenterPanel类型的，那么只需要在show方法中判断，如果是WorkingPanel类型，那么就可以调用其updateData来做到把数据更新到界面上了。</p>
<p>if (p instanceof WorkingPanel)</p>
<p>​    ((WorkingPanel) p).updateData();</p>
<p>这样就达到了这样的效果：点击工具栏上的按钮，不仅可以切换到不同的面板，而且面板上的数据也马上从数据库中更新。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.Component;</span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JComponent;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.panel.WorkingPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CenterPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> rate;<span class="comment">// 拉伸比例</span></span><br><span class="line">    <span class="keyword">private</span> JComponent c; <span class="comment">// 显示的组件</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> strech; <span class="comment">// 是否拉伸</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CenterPanel</span><span class="params">(<span class="keyword">double</span> rate, <span class="keyword">boolean</span> strech)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">this</span>.rate = rate;</span><br><span class="line">        <span class="keyword">this</span>.strech = strech;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CenterPanel</span><span class="params">(<span class="keyword">double</span> rate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(rate, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">repaint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != c) &#123;</span><br><span class="line">            Dimension containerSize = <span class="keyword">this</span>.getSize();</span><br><span class="line">            Dimension componentSize = c.getPreferredSize();</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span> (strech)</span><br><span class="line">                c.setSize((<span class="keyword">int</span>) (containerSize.width * rate), (<span class="keyword">int</span>) (containerSize.height * rate));</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                c.setSize(componentSize);</span><br><span class="line"> </span><br><span class="line">            c.setLocation(containerSize.width / <span class="number">2</span> - c.getSize().width / <span class="number">2</span>,</span><br><span class="line">                    containerSize.height / <span class="number">2</span> - c.getSize().height / <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">super</span>.repaint();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(JComponent p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.c = p;</span><br><span class="line">        Component[] cs = getComponents();</span><br><span class="line">        <span class="keyword">for</span> (Component c : cs) &#123;</span><br><span class="line">            remove(c);</span><br><span class="line">        &#125;</span><br><span class="line">        add(p);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (p <span class="keyword">instanceof</span> WorkingPanel)</span><br><span class="line">            ((WorkingPanel) p).updateData();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.updateUI();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        JFrame f = <span class="keyword">new</span> JFrame();</span><br><span class="line">        f.setSize(<span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">        f.setLocationRelativeTo(<span class="keyword">null</span>);</span><br><span class="line">        CenterPanel cp = <span class="keyword">new</span> CenterPanel(<span class="number">0.85</span>, <span class="keyword">true</span>);</span><br><span class="line">        f.setContentPane(cp);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(<span class="keyword">true</span>);</span><br><span class="line">        JButton b = <span class="keyword">new</span> JButton(<span class="string">"abc"</span>);</span><br><span class="line">        cp.show(b);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-点击设置按钮"><a class="header-anchor" href="#步骤-7-点击设置按钮">¶</a>步骤 7 : 点击设置按钮</h3>
<p>这时，点击设置按钮，就可以看到界面上显示的是数据库中的数据。</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2859.png" alt></p>
<h2 id="7、记一笔"><a class="header-anchor" href="#7、记一笔">¶</a>7、记一笔</h2>
<h3 id="步骤-1-RecordService"><a class="header-anchor" href="#步骤-1-RecordService">¶</a>步骤 1 : RecordService</h3>
<p>RecordService消费记录业务类只有一个方法add<br>
根据消费金额，消费分类，备注和日期添加一条消费记录</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> dao.RecordDAO;</span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> entity.Record;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecordService</span> </span>&#123;</span><br><span class="line">    RecordDAO recordDao = <span class="keyword">new</span> RecordDAO();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> spend, Category c, String comment,Date date)</span></span>&#123;</span><br><span class="line">        Record r = <span class="keyword">new</span> Record();</span><br><span class="line">        r.spend = spend;</span><br><span class="line">        r.cid = c.id;</span><br><span class="line">        r.comment = comment;</span><br><span class="line">        r.date = date;</span><br><span class="line">        recordDao.add(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-CategoryComboBoxModel"><a class="header-anchor" href="#步骤-2-CategoryComboBoxModel">¶</a>步骤 2 : CategoryComboBoxModel</h3>
<p>CategoryComboBoxModel和CategoryTableModel一样，由原来的存放字符串模拟数据的CategoryComboBoxModel，改为存放Category实时信息</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2861.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.model;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.ComboBoxModel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.event.ListDataListener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> service.CategoryService;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryComboBoxModel</span> <span class="keyword">implements</span> <span class="title">ComboBoxModel</span>&lt;<span class="title">Category</span>&gt;</span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> List&lt;Category&gt; cs = <span class="keyword">new</span> CategoryService().list();</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">public</span> Category c;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CategoryComboBoxModel</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!cs.isEmpty())</span><br><span class="line">            c=cs.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         </span><br><span class="line">        <span class="keyword">return</span> cs.size();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Category <span class="title">getElementAt</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> cs.get(index);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListDataListener</span><span class="params">(ListDataListener l)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeListDataListener</span><span class="params">(ListDataListener l)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSelectedItem</span><span class="params">(Object anItem)</span> </span>&#123;</span><br><span class="line">        c = (Category) anItem;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getSelectedItem</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!cs.isEmpty())</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-RecordListener"><a class="header-anchor" href="#步骤-3-RecordListener">¶</a>步骤 3 : RecordListener</h3>
<p>给界面上的&quot;记一笔“ 按钮添加监听</p>
<ol>
<li>
<p>首先判断是否有消费分类信息，如果没有提示先增加消费分类</p>
</li>
<li>
<p>输入的金额不能为0</p>
</li>
<li>
<p>调用RecordService的add添加消费记录</p>
</li>
<li>
<p>提示添加成功</p>
</li>
<li>
<p>添加成功后，切换到[消费一览]</p>
</li>
</ol>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2863.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.listener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JOptionPane;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> gui.panel.CategoryPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.MainPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.RecordPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.SpendPanel;</span><br><span class="line"><span class="keyword">import</span> service.RecordService;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecordListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">        RecordPanel p  =RecordPanel.instance;</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>==p.cbModel.cs.size())&#123;</span><br><span class="line">            JOptionPane.showMessageDialog(p, <span class="string">"暂无消费分类，无法添加，请先增加消费分类"</span>);</span><br><span class="line">            MainPanel.instance.workingPanel.show(CategoryPanel.instance);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">if</span>(!GUIUtil.checkZero(p.tfSpend,<span class="string">"花费金额"</span>))</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> spend = Integer.parseInt(p.tfSpend.getText());</span><br><span class="line">        Category c = p.getSelectedCategory();</span><br><span class="line">        String comment = p.tfComment.getText();</span><br><span class="line">        Date d = p.datepick.getDate();</span><br><span class="line">        <span class="keyword">new</span> RecordService().add(spend, c, comment, d);</span><br><span class="line">        JOptionPane.showMessageDialog(p, <span class="string">"添加成功"</span>);</span><br><span class="line">         </span><br><span class="line">        MainPanel.instance.workingPanel.show(SpendPanel.instance);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-RecordPanel"><a class="header-anchor" href="#步骤-4-RecordPanel">¶</a>步骤 4 : RecordPanel</h3>
<p>RecordPanel 消费记录面板做了如下改动</p>
<ol>
<li>
<p>继承了WorkingPanel，从而必须提供addListener()和updateData()方法</p>
</li>
<li>
<p>提供getSelectedCategory()用于获取当前选中的分类对象。</p>
</li>
<li>
<p>addListener() 给按钮添加监听</p>
</li>
<li>
<p>updateData()更新数据，主要是更新下拉框中的分类信息，并且让各个输入框信息重置，以及让焦点停留在金额的输入框上</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.GridLayout;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JComboBox;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.jdesktop.swingx.JXDatePicker;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Category;</span><br><span class="line"><span class="keyword">import</span> gui.listener.RecordListener;</span><br><span class="line"><span class="keyword">import</span> gui.model.CategoryComboBoxModel;</span><br><span class="line"><span class="keyword">import</span> service.CategoryService;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecordPanel</span> <span class="keyword">extends</span> <span class="title">WorkingPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> RecordPanel instance = <span class="keyword">new</span> RecordPanel();</span><br><span class="line"> </span><br><span class="line">    JLabel lSpend = <span class="keyword">new</span> JLabel(<span class="string">"花费(￥)"</span>);</span><br><span class="line">    JLabel lCategory = <span class="keyword">new</span> JLabel(<span class="string">"分类"</span>);</span><br><span class="line">    JLabel lComment = <span class="keyword">new</span> JLabel(<span class="string">"备注"</span>);</span><br><span class="line">    JLabel lDate = <span class="keyword">new</span> JLabel(<span class="string">"日期"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> JTextField tfSpend = <span class="keyword">new</span> JTextField(<span class="string">"0"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> CategoryComboBoxModel cbModel = <span class="keyword">new</span> CategoryComboBoxModel();</span><br><span class="line">    <span class="keyword">public</span> JComboBox&lt;Category&gt; cbCategory = <span class="keyword">new</span> JComboBox&lt;&gt;(cbModel);</span><br><span class="line">    <span class="keyword">public</span> JTextField tfComment = <span class="keyword">new</span> JTextField();</span><br><span class="line">    <span class="keyword">public</span> JXDatePicker datepick = <span class="keyword">new</span> JXDatePicker(<span class="keyword">new</span> Date());</span><br><span class="line">     </span><br><span class="line">    JButton bSubmit = <span class="keyword">new</span> JButton(<span class="string">"记一笔"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecordPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.grayColor, lSpend,lCategory,lComment,lDate);</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bSubmit);</span><br><span class="line">        JPanel pInput =<span class="keyword">new</span> JPanel();</span><br><span class="line">        JPanel pSubmit = <span class="keyword">new</span> JPanel();</span><br><span class="line">        <span class="keyword">int</span> gap = <span class="number">40</span>;</span><br><span class="line">        pInput.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">4</span>,<span class="number">2</span>,gap,gap));</span><br><span class="line">         </span><br><span class="line">        pInput.add(lSpend);</span><br><span class="line">        pInput.add(tfSpend);</span><br><span class="line">        pInput.add(lCategory);</span><br><span class="line">        pInput.add(cbCategory);</span><br><span class="line">        pInput.add(lComment);</span><br><span class="line">        pInput.add(tfComment);</span><br><span class="line">        pInput.add(lDate);</span><br><span class="line">        pInput.add(datepick);</span><br><span class="line">         </span><br><span class="line">        pSubmit.add(bSubmit);</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        <span class="keyword">this</span>.add(pInput,BorderLayout.NORTH);</span><br><span class="line">        <span class="keyword">this</span>.add(pSubmit,BorderLayout.CENTER);</span><br><span class="line">         </span><br><span class="line">        addListener();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(RecordPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Category <span class="title">getSelectedCategory</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Category) cbCategory.getSelectedItem();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cbModel.cs = <span class="keyword">new</span> CategoryService().list();</span><br><span class="line">        cbCategory.updateUI();</span><br><span class="line">        resetInput();</span><br><span class="line">        tfSpend.grabFocus();</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">resetInput</span><span class="params">()</span></span>&#123;</span><br><span class="line">        tfSpend.setText(<span class="string">"0"</span>);</span><br><span class="line">        tfComment.setText(<span class="string">""</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>!=cbModel.cs.size())</span><br><span class="line">            cbCategory.setSelectedIndex(<span class="number">0</span>);</span><br><span class="line">        datepick.setDate(<span class="keyword">new</span> Date());</span><br><span class="line">    &#125;  </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        RecordListener listener = <span class="keyword">new</span> RecordListener();</span><br><span class="line">        bSubmit.addActionListener(listener);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-点击效果"><a class="header-anchor" href="#步骤-5-点击效果">¶</a>步骤 5 : 点击效果</h3>
<p>运行Bootstrap</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2864.png" alt></p>
<h2 id="8、消费一览"><a class="header-anchor" href="#8、消费一览">¶</a>8、消费一览</h2>
<h3 id="步骤-1-SpendPage"><a class="header-anchor" href="#步骤-1-SpendPage">¶</a>步骤 1 : SpendPage</h3>
<p>这是一个专门用于[SpendPanel 消费一览面板] 的<strong>页面类</strong>，换句话说，消费一览面板上需要什么信息，这个类就封装什么信息。</p>
<p>所以其字段都是界面上对应的信息</p>
<p>​	//本月消费</p>
<p>​	public String monthSpend;</p>
<p>​	//今日消费</p>
<p>​	public String todaySpend;</p>
<p>​	//日均消费</p>
<p>​	public String avgSpendPerDay;</p>
<p>​	//本月剩余</p>
<p>​	public String monthAvailable;</p>
<p>​	//日均可用</p>
<p>​	public String dayAvgAvailable;</p>
<p>​	//距离月末</p>
<p>​	public String monthLeftDay;</p>
<p>​	//使用比例</p>
<p>​	public int usagePercentage;</p>
<p>​	//是否超支</p>
<p>​	public boolean isOverSpend = false;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.page;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpendPage</span> </span>&#123;</span><br><span class="line">    <span class="comment">//本月消费</span></span><br><span class="line">    <span class="keyword">public</span> String monthSpend;</span><br><span class="line">    <span class="comment">//今日消费</span></span><br><span class="line">    <span class="keyword">public</span> String todaySpend;</span><br><span class="line">    <span class="comment">//日均消费</span></span><br><span class="line">    <span class="keyword">public</span> String avgSpendPerDay;</span><br><span class="line">    <span class="comment">//本月剩余</span></span><br><span class="line">    <span class="keyword">public</span> String monthAvailable;</span><br><span class="line">    <span class="comment">//日均可用</span></span><br><span class="line">    <span class="keyword">public</span> String dayAvgAvailable;</span><br><span class="line">    <span class="comment">//距离月末</span></span><br><span class="line">    <span class="keyword">public</span> String monthLeftDay;</span><br><span class="line">    <span class="comment">//使用比例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> usagePercentage;</span><br><span class="line">    <span class="comment">//是否超支</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> isOverSpend = <span class="keyword">false</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SpendPage</span><span class="params">(<span class="keyword">int</span> monthSpend, <span class="keyword">int</span> todaySpend, <span class="keyword">int</span> avgSpendPerDay, <span class="keyword">int</span> monthAvailable, <span class="keyword">int</span> dayAvgAvailable,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> monthLeftDay, <span class="keyword">int</span> usagePercentage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.monthSpend = <span class="string">"￥"</span> + monthSpend;</span><br><span class="line">        <span class="keyword">this</span>.todaySpend = <span class="string">"￥"</span> + todaySpend;</span><br><span class="line">        <span class="keyword">this</span>.avgSpendPerDay = <span class="string">"￥"</span> + avgSpendPerDay;</span><br><span class="line">        <span class="keyword">if</span> (monthAvailable &lt; <span class="number">0</span>)</span><br><span class="line">            isOverSpend = <span class="keyword">true</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (!isOverSpend) &#123;</span><br><span class="line">            <span class="keyword">this</span>.monthAvailable = <span class="string">"￥"</span> + monthAvailable;</span><br><span class="line">            <span class="keyword">this</span>.dayAvgAvailable = <span class="string">"￥"</span> + dayAvgAvailable;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.monthAvailable = <span class="string">"超支"</span> + (<span class="number">0</span> - monthAvailable);</span><br><span class="line">            <span class="keyword">this</span>.dayAvgAvailable = <span class="string">"￥0"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.monthLeftDay = monthLeftDay + <span class="string">"天"</span>;</span><br><span class="line">        <span class="keyword">this</span>.usagePercentage = usagePercentage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-SpendService"><a class="header-anchor" href="#步骤-2-SpendService">¶</a>步骤 2 : SpendService</h3>
<p>SpendService消费一览业务类的getSpendPage()方法，返回SpendPage 用于界面显示。</p>
<p>getSpendPage()方法中的代码说明都在注释中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> dao.RecordDAO;</span><br><span class="line"><span class="keyword">import</span> entity.Record;</span><br><span class="line"><span class="keyword">import</span> gui.page.SpendPage;</span><br><span class="line"><span class="keyword">import</span> util.DateUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpendService</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> SpendPage <span class="title">getSpendPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RecordDAO dao = <span class="keyword">new</span> RecordDAO();</span><br><span class="line">        <span class="comment">// 本月数据</span></span><br><span class="line">        List&lt;Record&gt; thisMonthRecords = dao.listThisMonth();</span><br><span class="line">        <span class="comment">// 今日数据</span></span><br><span class="line">        List&lt;Record&gt; toDayRecords = dao.listToday();</span><br><span class="line">        <span class="comment">// 本月总天数</span></span><br><span class="line">        <span class="keyword">int</span> thisMonthTotalDay = DateUtil.thisMonthTotalDay();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">int</span> monthSpend = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> todaySpend = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> avgSpendPerDay = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> monthAvailable = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> dayAvgAvailable = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> monthLeftDay = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> usagePercentage = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 预算</span></span><br><span class="line">        <span class="keyword">int</span> monthBudget = <span class="keyword">new</span> ConfigService().getIntBudget();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 统计本月消费</span></span><br><span class="line">        <span class="keyword">for</span> (Record record : thisMonthRecords) &#123;</span><br><span class="line">            monthSpend += record.getSpend();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 统计今日消费</span></span><br><span class="line">        <span class="keyword">for</span> (Record record : toDayRecords) &#123;</span><br><span class="line">            todaySpend += record.getSpend();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 计算日均消费</span></span><br><span class="line">        avgSpendPerDay = monthSpend / thisMonthTotalDay;</span><br><span class="line">        <span class="comment">// 计算本月剩余</span></span><br><span class="line">        monthAvailable = monthBudget - monthSpend;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 距离月末</span></span><br><span class="line">        monthLeftDay = DateUtil.thisMonthLeftDay();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 计算日均可用</span></span><br><span class="line">        dayAvgAvailable = monthAvailable / monthLeftDay;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 计算使用比例</span></span><br><span class="line">        usagePercentage = monthSpend * <span class="number">100</span> / monthBudget;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 根据这些信息，生成SpendPage对象</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SpendPage(monthSpend, todaySpend, avgSpendPerDay, monthAvailable, dayAvgAvailable, monthLeftDay,</span><br><span class="line">                usagePercentage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-SpendPanel"><a class="header-anchor" href="#步骤-3-SpendPanel">¶</a>步骤 3 : SpendPanel</h3>
<p>SpendPanel消费一览面板类，也继承了[WorkingPanel]。 虽然SpendPanel不需要添加监听，但是要用到updateData()方法更新界面信息</p>
<p>在updateData()方法中根据SpendService获取页面对象<br>
SpendPage spend = new SpendService().getSpendPage();<br>
然后把这个页面对象的值，更新到组件里。</p>
<p>如果超支了，那么就把相应的组件设置为红色，否则就是正常的颜色</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2867.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> util.GUIUtil.setColor;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> util.GUIUtil.showPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Component;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.GridLayout;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.page.SpendPage;</span><br><span class="line"><span class="keyword">import</span> service.SpendService;</span><br><span class="line"><span class="keyword">import</span> util.CircleProgressBar;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpendPanel</span> <span class="keyword">extends</span> <span class="title">WorkingPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SpendPanel instance = <span class="keyword">new</span> SpendPanel();</span><br><span class="line"> </span><br><span class="line">    JLabel lMonthSpend = <span class="keyword">new</span> JLabel(<span class="string">"本月消费"</span>);</span><br><span class="line">    JLabel lTodaySpend = <span class="keyword">new</span> JLabel(<span class="string">"今日消费"</span>);</span><br><span class="line">    JLabel lAvgSpendPerDay = <span class="keyword">new</span> JLabel(<span class="string">"日均消费"</span>);</span><br><span class="line">    JLabel lMonthLeft = <span class="keyword">new</span> JLabel(<span class="string">"本月剩余"</span>);</span><br><span class="line">    JLabel lDayAvgAvailable = <span class="keyword">new</span> JLabel(<span class="string">"日均可用"</span>);</span><br><span class="line">    JLabel lMonthLeftDay = <span class="keyword">new</span> JLabel(<span class="string">"距离月末"</span>);</span><br><span class="line"> </span><br><span class="line">    JLabel vMonthSpend = <span class="keyword">new</span> JLabel(<span class="string">"￥2300"</span>);</span><br><span class="line">    JLabel vTodaySpend = <span class="keyword">new</span> JLabel(<span class="string">"￥25"</span>);</span><br><span class="line">    JLabel vAvgSpendPerDay = <span class="keyword">new</span> JLabel(<span class="string">"￥120"</span>);</span><br><span class="line">    JLabel vMonthAvailable = <span class="keyword">new</span> JLabel(<span class="string">"￥2084"</span>);</span><br><span class="line">    JLabel vDayAvgAvailable = <span class="keyword">new</span> JLabel(<span class="string">"￥389"</span>);</span><br><span class="line">    JLabel vMonthLeftDay = <span class="keyword">new</span> JLabel(<span class="string">"15天"</span>);</span><br><span class="line"> </span><br><span class="line">    CircleProgressBar bar;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SpendPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        bar = <span class="keyword">new</span> CircleProgressBar();</span><br><span class="line">        bar.setBackgroundColor(ColorUtil.blueColor);</span><br><span class="line"> </span><br><span class="line">        setColor(ColorUtil.grayColor, lMonthSpend, lTodaySpend, lAvgSpendPerDay, lMonthLeft, lDayAvgAvailable,</span><br><span class="line">                lMonthLeftDay, vAvgSpendPerDay, vMonthAvailable, vDayAvgAvailable, vMonthLeftDay);</span><br><span class="line">        setColor(ColorUtil.blueColor, vMonthSpend, vTodaySpend);</span><br><span class="line"> </span><br><span class="line">        vMonthSpend.setFont(<span class="keyword">new</span> Font(<span class="string">"微软雅黑"</span>, Font.BOLD, <span class="number">23</span>));</span><br><span class="line">        vTodaySpend.setFont(<span class="keyword">new</span> Font(<span class="string">"微软雅黑"</span>, Font.BOLD, <span class="number">23</span>));</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">this</span>.add(center(), BorderLayout.CENTER);</span><br><span class="line">        <span class="keyword">this</span>.add(south(), BorderLayout.SOUTH);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> JPanel <span class="title">center</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        p.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        p.add(west(), BorderLayout.WEST);</span><br><span class="line">        p.add(east());</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Component <span class="title">east</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> bar;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Component <span class="title">west</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        p.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">4</span>, <span class="number">1</span>));</span><br><span class="line">        p.add(lMonthSpend);</span><br><span class="line">        p.add(vMonthSpend);</span><br><span class="line">        p.add(lTodaySpend);</span><br><span class="line">        p.add(vTodaySpend);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> JPanel <span class="title">south</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        p.setLayout(<span class="keyword">new</span> GridLayout(<span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line"> </span><br><span class="line">        p.add(lAvgSpendPerDay);</span><br><span class="line">        p.add(lMonthLeft);</span><br><span class="line">        p.add(lDayAvgAvailable);</span><br><span class="line">        p.add(lMonthLeftDay);</span><br><span class="line">        p.add(vAvgSpendPerDay);</span><br><span class="line">        p.add(vMonthAvailable);</span><br><span class="line">        p.add(vDayAvgAvailable);</span><br><span class="line">        p.add(vMonthLeftDay);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        showPanel(SpendPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SpendPage spend = <span class="keyword">new</span> SpendService().getSpendPage();</span><br><span class="line">        vMonthSpend.setText(spend.monthSpend);</span><br><span class="line">        vTodaySpend.setText(spend.todaySpend);</span><br><span class="line">        vAvgSpendPerDay.setText(spend.avgSpendPerDay);</span><br><span class="line">        vMonthAvailable.setText(spend.monthAvailable);</span><br><span class="line">        vDayAvgAvailable.setText(spend.dayAvgAvailable);</span><br><span class="line">        vMonthLeftDay.setText(spend.monthLeftDay);</span><br><span class="line"> </span><br><span class="line">        bar.setProgress(spend.usagePercentage);</span><br><span class="line">        <span class="keyword">if</span> (spend.isOverSpend) &#123;</span><br><span class="line">            vMonthAvailable.setForeground(ColorUtil.warningColor);</span><br><span class="line">            vMonthSpend.setForeground(ColorUtil.warningColor);</span><br><span class="line">            vTodaySpend.setForeground(ColorUtil.warningColor);</span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            vMonthAvailable.setForeground(ColorUtil.grayColor);</span><br><span class="line">            vMonthSpend.setForeground(ColorUtil.blueColor);</span><br><span class="line">            vTodaySpend.setForeground(ColorUtil.blueColor);</span><br><span class="line">        &#125;</span><br><span class="line">        bar.setForegroundColor(ColorUtil.getByPercentage(spend.usagePercentage));</span><br><span class="line">        addListener();</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-运行效果"><a class="header-anchor" href="#步骤-4-运行效果">¶</a>步骤 4 : 运行效果</h3>
<p>启动Bootstrap</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2884.png" alt></p>
<h2 id="9、月消费报表"><a class="header-anchor" href="#9、月消费报表">¶</a>9、月消费报表</h2>
<h3 id="步骤-1-ReportService"><a class="header-anchor" href="#步骤-1-ReportService">¶</a>步骤 1 : ReportService</h3>
<p>报表业务类ReportService</p>
<p>listThisMonthRecords()<br>
返回一个消费记录集合，假设本月有30天，那么这个集合就有30条Record。每个Record对应一天的消费总金额，如果那天没有消费，则消费金额为0.</p>
<p>getDaySpend()<br>
获取某一天的消费总金额，这天的消费可能有多笔，把这几笔消费加起来算在一起。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> dao.RecordDAO;</span><br><span class="line"><span class="keyword">import</span> entity.Record;</span><br><span class="line"><span class="keyword">import</span> util.DateUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReportService</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取某一天的消费金额</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> d</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> monthRawData</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDaySpend</span><span class="params">(Date d,List&lt;Record&gt; monthRawData)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> daySpend = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Record record : monthRawData) &#123;</span><br><span class="line">            <span class="keyword">if</span>(record.date.equals(d))</span><br><span class="line">                daySpend+=record.spend;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> daySpend;</span><br><span class="line">    &#125;</span><br><span class="line">         </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取一个月的消费记录集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Record&gt; <span class="title">listThisMonthRecords</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RecordDAO dao= <span class="keyword">new</span> RecordDAO();</span><br><span class="line">        List&lt;Record&gt; monthRawData= dao.listThisMonth();</span><br><span class="line">        List&lt;Record&gt; result= <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Date monthBegin = DateUtil.monthBegin();</span><br><span class="line">        <span class="keyword">int</span> monthTotalDay = DateUtil.thisMonthTotalDay();</span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; monthTotalDay; i++) &#123;</span><br><span class="line">            Record r = <span class="keyword">new</span> Record();</span><br><span class="line">            c.setTime(monthBegin);</span><br><span class="line">            c.add(Calendar.DATE, i);</span><br><span class="line">            Date eachDayOfThisMonth=c.getTime() ;</span><br><span class="line">            <span class="keyword">int</span> daySpend = getDaySpend(eachDayOfThisMonth,monthRawData);</span><br><span class="line">            r.spend=daySpend;</span><br><span class="line">            result.add(r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-ChartUtil-v2"><a class="header-anchor" href="#步骤-2-ChartUtil-v2">¶</a>步骤 2 : ChartUtil</h3>
<p>以前的[ChartUtil]是模拟数据，现在ChartUtil要根据[ReportService.listThisMonthRecords() ]返回的集合来生成相应的图表</p>
<p>public static Image getImage(List<Record> rs, int width, int height) {</Record></p>
<p>​    // 根据消费记录得到的样本数据</p>
<p>​    double[] sampleValues = sampleValues(rs);</p>
<p>​    // 根据消费记录得到的下方日期文本</p>
<p>​    String[] sampleLabels = sampleLabels(rs);</p>
<p>​    …</p>
<p>​    …</p>
<p>}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.Icon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.ImageIcon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.objectplanet.chart.BarChart;</span><br><span class="line"><span class="keyword">import</span> com.objectplanet.chart.Chart;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Record;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChartUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String[] sampleLabels(List&lt;Record&gt; rs) &#123;</span><br><span class="line">        String[] sampleLabels = <span class="keyword">new</span> String[rs.size()];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sampleLabels.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">0</span> == i % <span class="number">5</span>)</span><br><span class="line">                sampleLabels[i] = String.valueOf(i + <span class="number">1</span> + <span class="string">"日"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> sampleLabels;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[] sampleValues(List&lt;Record&gt; rs) &#123;</span><br><span class="line">        <span class="keyword">double</span>[] sampleValues = <span class="keyword">new</span> <span class="keyword">double</span>[rs.size()];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sampleValues.length; i++) &#123;</span><br><span class="line">            sampleValues[i] = rs.get(i).spend;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> sampleValues;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Image <span class="title">getImage</span><span class="params">(List&lt;Record&gt; rs, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 根据消费记录得到的样本数据</span></span><br><span class="line">        <span class="keyword">double</span>[] sampleValues = sampleValues(rs);</span><br><span class="line">        <span class="comment">// 根据消费记录得到的下方日期文本</span></span><br><span class="line">        String[] sampleLabels = sampleLabels(rs);</span><br><span class="line">        <span class="comment">// 样本中的最大值</span></span><br><span class="line">        <span class="keyword">int</span> max = max(sampleValues);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 数据颜色</span></span><br><span class="line">        Color[] sampleColors = <span class="keyword">new</span> Color[] &#123; ColorUtil.blueColor &#125;;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 柱状图</span></span><br><span class="line">        BarChart chart = <span class="keyword">new</span> BarChart();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 设置样本个数</span></span><br><span class="line">        chart.setSampleCount(sampleValues.length);</span><br><span class="line">        <span class="comment">// 设置样本数据</span></span><br><span class="line">        chart.setSampleValues(<span class="number">0</span>, sampleValues);</span><br><span class="line">        <span class="comment">// 设置文字</span></span><br><span class="line">        chart.setSampleLabels(sampleLabels);</span><br><span class="line">        <span class="comment">// 设置样本颜色</span></span><br><span class="line">        chart.setSampleColors(sampleColors);</span><br><span class="line">        <span class="comment">// 设置取值范围</span></span><br><span class="line">        chart.setRange(<span class="number">0</span>, max * <span class="number">1.2</span>);</span><br><span class="line">        <span class="comment">// 显示背景横线</span></span><br><span class="line">        chart.setValueLinesOn(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 显示文字</span></span><br><span class="line">        chart.setSampleLabelsOn(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 把文字显示在下方</span></span><br><span class="line">        chart.setSampleLabelStyle(Chart.BELOW);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 样本值的字体</span></span><br><span class="line">        chart.setFont(<span class="string">"rangeLabelFont"</span>, <span class="keyword">new</span> Font(<span class="string">"Arial"</span>, Font.BOLD, <span class="number">12</span>));</span><br><span class="line">        <span class="comment">// 显示图例说明</span></span><br><span class="line">        chart.setLegendOn(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 把图例说明放在左侧</span></span><br><span class="line">        chart.setLegendPosition(Chart.LEFT);</span><br><span class="line">        <span class="comment">// 图例说明中的文字</span></span><br><span class="line">        chart.setLegendLabels(<span class="keyword">new</span> String[] &#123; <span class="string">"月消费报表"</span> &#125;);</span><br><span class="line">        <span class="comment">// 图例说明的字体</span></span><br><span class="line">        chart.setFont(<span class="string">"legendFont"</span>, <span class="keyword">new</span> Font(<span class="string">"Dialog"</span>, Font.BOLD, <span class="number">13</span>));</span><br><span class="line">        <span class="comment">// 下方文字的字体</span></span><br><span class="line">        chart.setFont(<span class="string">"sampleLabelFont"</span>, <span class="keyword">new</span> Font(<span class="string">"Dialog"</span>, Font.BOLD, <span class="number">13</span>));</span><br><span class="line">        <span class="comment">// 图表中间背景颜色</span></span><br><span class="line">        chart.setChartBackground(Color.white);</span><br><span class="line">        <span class="comment">// 图表整体背景颜色</span></span><br><span class="line">        chart.setBackground(ColorUtil.backgroundColor);</span><br><span class="line">        <span class="comment">// 把图表转换为Image类型</span></span><br><span class="line">        Image im = chart.getImage(width, height);</span><br><span class="line">        <span class="keyword">return</span> im;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span>[] sampleValues)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">double</span> v : sampleValues) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v &gt; max)</span><br><span class="line">                max = (<span class="keyword">int</span>) v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String[] sampleLabels() &#123;</span><br><span class="line">        String[] sampleLabels = <span class="keyword">new</span> String[<span class="number">30</span>];</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sampleLabels.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">0</span> == i % <span class="number">5</span>)</span><br><span class="line">                sampleLabels[i] = String.valueOf(i + <span class="number">1</span> + <span class="string">"日"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sampleLabels;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Image <span class="title">getImage</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 模拟样本数据</span></span><br><span class="line">        <span class="keyword">double</span>[] sampleValues = sampleValues();</span><br><span class="line">        <span class="comment">// 下方显示的文字</span></span><br><span class="line">        String[] sampleLabels = sampleLabels();</span><br><span class="line">        <span class="comment">// 样本中的最大值</span></span><br><span class="line">        <span class="keyword">int</span> max = max(sampleValues);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 数据颜色</span></span><br><span class="line">        Color[] sampleColors = <span class="keyword">new</span> Color[] &#123; ColorUtil.blueColor &#125;;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 柱状图</span></span><br><span class="line">        BarChart chart = <span class="keyword">new</span> BarChart();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 设置样本个数</span></span><br><span class="line">        chart.setSampleCount(sampleValues.length);</span><br><span class="line">        <span class="comment">// 设置样本数据</span></span><br><span class="line">        chart.setSampleValues(<span class="number">0</span>, sampleValues);</span><br><span class="line">        <span class="comment">// 设置文字</span></span><br><span class="line">        chart.setSampleLabels(sampleLabels);</span><br><span class="line">        <span class="comment">// 设置样本颜色</span></span><br><span class="line">        chart.setSampleColors(sampleColors);</span><br><span class="line">        <span class="comment">// 设置取值范围</span></span><br><span class="line">        chart.setRange(<span class="number">0</span>, max * <span class="number">1.2</span>);</span><br><span class="line">        <span class="comment">// 显示背景横线</span></span><br><span class="line">        chart.setValueLinesOn(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 显示文字</span></span><br><span class="line">        chart.setSampleLabelsOn(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 把文字显示在下方</span></span><br><span class="line">        chart.setSampleLabelStyle(Chart.BELOW);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 样本值的字体</span></span><br><span class="line">        chart.setFont(<span class="string">"rangeLabelFont"</span>, <span class="keyword">new</span> Font(<span class="string">"Arial"</span>, Font.BOLD, <span class="number">12</span>));</span><br><span class="line">        <span class="comment">// 显示图例说明</span></span><br><span class="line">        chart.setLegendOn(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 把图例说明放在左侧</span></span><br><span class="line">        chart.setLegendPosition(Chart.LEFT);</span><br><span class="line">        <span class="comment">// 图例说明中的文字</span></span><br><span class="line">        chart.setLegendLabels(<span class="keyword">new</span> String[] &#123; <span class="string">"月消费报表"</span> &#125;);</span><br><span class="line">        <span class="comment">// 图例说明的字体</span></span><br><span class="line">        chart.setFont(<span class="string">"legendFont"</span>, <span class="keyword">new</span> Font(<span class="string">"Dialog"</span>, Font.BOLD, <span class="number">13</span>));</span><br><span class="line">        <span class="comment">// 下方文字的字体</span></span><br><span class="line">        chart.setFont(<span class="string">"sampleLabelFont"</span>, <span class="keyword">new</span> Font(<span class="string">"Dialog"</span>, Font.BOLD, <span class="number">13</span>));</span><br><span class="line">        <span class="comment">// 图表中间背景颜色</span></span><br><span class="line">        chart.setChartBackground(Color.white);</span><br><span class="line">        <span class="comment">// 图表整体背景颜色</span></span><br><span class="line">        chart.setBackground(ColorUtil.backgroundColor);</span><br><span class="line">        <span class="comment">// 把图表转换为Image类型</span></span><br><span class="line">        Image im = chart.getImage(width, height);</span><br><span class="line">        <span class="keyword">return</span> im;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span>[] sampleValues() &#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">double</span>[] result = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">30</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; result.length; i++) &#123;</span><br><span class="line">            result[i] = (<span class="keyword">int</span>) (Math.random() * <span class="number">300</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        JLabel l = <span class="keyword">new</span> JLabel();</span><br><span class="line">        Image img = ChartUtil.getImage(<span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">        Icon icon = <span class="keyword">new</span> ImageIcon(img);</span><br><span class="line">        l.setIcon(icon);</span><br><span class="line">        p.add(l);</span><br><span class="line">        GUIUtil.showPanel(p);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-ReportPanel"><a class="header-anchor" href="#步骤-3-ReportPanel">¶</a>步骤 3 : ReportPanel</h3>
<p>ReportPanel报表面板类继承[WorkingPanel]，实现updateDate()方法来更新界面上的数据</p>
<p>public void updateData() {</p>
<p>​    List<Record> rs = new ReportService().listThisMonthRecords();</Record></p>
<p>​    Image i = ChartUtil.getImage(rs, 350, 250);</p>
<p>​    ImageIcon icon = new ImageIcon(i);</p>
<p>​    l.setIcon(icon);</p>
<p>}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> util.GUIUtil.showPanel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.ImageIcon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> entity.Record;</span><br><span class="line"><span class="keyword">import</span> service.ReportService;</span><br><span class="line"><span class="keyword">import</span> util.ChartUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReportPanel</span> <span class="keyword">extends</span> <span class="title">WorkingPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ReportPanel instance = <span class="keyword">new</span> ReportPanel();</span><br><span class="line"> </span><br><span class="line">    JLabel l = <span class="keyword">new</span> JLabel();</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReportPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        List&lt;Record&gt; rs = <span class="keyword">new</span> ReportService().listThisMonthRecords();</span><br><span class="line">        Image i = ChartUtil.getImage(rs, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">        ImageIcon icon = <span class="keyword">new</span> ImageIcon(i);</span><br><span class="line">        l.setIcon(icon);</span><br><span class="line">        <span class="keyword">this</span>.add(l);</span><br><span class="line">        addListener();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        showPanel(ReportPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Record&gt; rs = <span class="keyword">new</span> ReportService().listThisMonthRecords();</span><br><span class="line">        Image i = ChartUtil.getImage(rs, <span class="number">350</span>, <span class="number">250</span>);</span><br><span class="line">        ImageIcon icon = <span class="keyword">new</span> ImageIcon(i);</span><br><span class="line">        l.setIcon(icon);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-界面效果"><a class="header-anchor" href="#步骤-4-界面效果">¶</a>步骤 4 : 界面效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2871.png" alt></p>
<h2 id="10、MYSQLUTIL"><a class="header-anchor" href="#10、MYSQLUTIL">¶</a>10、MYSQLUTIL</h2>
<p>接下来是备份和恢复功能，在开始这两个功能之前 ，先设计一个 Mysql专门的工具类 MysqlUtil</p>
<h3 id="步骤-1-工具类-MysqlUtil"><a class="header-anchor" href="#步骤-1-工具类-MysqlUtil">¶</a>步骤 1 : 工具类 MysqlUtil</h3>
<p>备份方法backup()<br>
通过Runtime调用mysqldump.exe进行备份</p>
<p>恢复方法recover<br>
通过Runtime调用mysql.exe进行数据的还原</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MysqlUtil</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">backup</span><span class="params">(String mysqlPath, String backupfile)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String commandFormat = <span class="string">"\"%s/bin/mysqldump.exe\" -u%s -p%s   -hlocalhost   -P%d %s -r \"%s\""</span>;</span><br><span class="line"> </span><br><span class="line">        String command = String.format(commandFormat, mysqlPath, DBUtil.loginName, DBUtil.password, DBUtil.port,</span><br><span class="line">                DBUtil.database, backupfile);</span><br><span class="line">        Runtime.getRuntime().exec(command);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">recover</span><span class="params">(String mysqlPath, String recoverfile)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String commandFormat = <span class="string">"\"%s/bin/mysql.exe\" -u%s -p%s   %s "</span>;</span><br><span class="line">            String command = String.format(commandFormat, mysqlPath, DBUtil.loginName, DBUtil.password,</span><br><span class="line">                    DBUtil.database);</span><br><span class="line"> </span><br><span class="line">            Process p = Runtime.getRuntime().exec(command);</span><br><span class="line">            OutputStream out = p.getOutputStream();</span><br><span class="line">            String inStr;</span><br><span class="line">            StringBuffer sb = <span class="keyword">new</span> StringBuffer(<span class="string">""</span>);</span><br><span class="line">            String outStr;</span><br><span class="line">            BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(recoverfile), <span class="string">"utf8"</span>));</span><br><span class="line">            <span class="keyword">while</span> ((inStr = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                sb.append(inStr + <span class="string">"\r\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            outStr = sb.toString();</span><br><span class="line"> </span><br><span class="line">            OutputStreamWriter writer = <span class="keyword">new</span> OutputStreamWriter(out, <span class="string">"utf8"</span>);</span><br><span class="line">            writer.write(outStr);</span><br><span class="line">            writer.flush();</span><br><span class="line">            out.close();</span><br><span class="line">            br.close();</span><br><span class="line">            writer.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String mysqlPath = <span class="string">"D:/tools/MYSQL/mysql-5.1.57-win32"</span>;</span><br><span class="line">        String file = <span class="string">"C:/Documents and Settings/Administrator/My Documents/hutubill.sql"</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// backup(mysqlPath, file);</span></span><br><span class="line">        <span class="comment">// restore();</span></span><br><span class="line">        <span class="comment">// recover(mysqlPath, file);</span></span><br><span class="line">        <span class="comment">// recover(file);</span></span><br><span class="line">        recover(mysqlPath, file);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11、备份"><a class="header-anchor" href="#11、备份">¶</a>11、备份</h2>
<h3 id="步骤-1-BackupListener"><a class="header-anchor" href="#步骤-1-BackupListener">¶</a>步骤 1 : BackupListener</h3>
<p>BackupListener 备份监听器</p>
<ol>
<li>
<p>首先判断MYSQL安装路径是否配置</p>
</li>
<li>
<p>打开[文件选择器]，指定要保存的文件<br>
文件名默认设置为hutubill.sql<br>
以后缀名.sql过滤文件</p>
</li>
<li>
<p>调用[MysqlUtil]进行备份</p>
</li>
<li>
<p>提示备份成功</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.listener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JFileChooser;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JOptionPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.filechooser.FileFilter;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.panel.BackupPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.ConfigPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.MainPanel;</span><br><span class="line"><span class="keyword">import</span> service.ConfigService;</span><br><span class="line"><span class="keyword">import</span> util.MysqlUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BackupListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">        BackupPanel p  =BackupPanel.instance;</span><br><span class="line">        String mysqlPath= <span class="keyword">new</span> ConfigService().get(ConfigService.mysqlPath);</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>==mysqlPath.length())&#123;</span><br><span class="line">            JOptionPane.showMessageDialog(p, <span class="string">"备份前请事先配置mysql的路径"</span>);</span><br><span class="line">            MainPanel.instance.workingPanel.show(ConfigPanel.instance);</span><br><span class="line">            ConfigPanel.instance.tfMysqlPath.grabFocus();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        JFileChooser fc = <span class="keyword">new</span> JFileChooser();</span><br><span class="line">        fc.setSelectedFile(<span class="keyword">new</span> File(<span class="string">"hutubill.sql"</span>));</span><br><span class="line">        fc.setFileFilter(<span class="keyword">new</span> FileFilter() &#123;</span><br><span class="line">             </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">".sql"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File f)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> f.getName().toLowerCase().endsWith(<span class="string">".sql"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">         <span class="keyword">int</span> returnVal =  fc.showSaveDialog(p);</span><br><span class="line">         File file = fc.getSelectedFile();</span><br><span class="line">         System.out.println(file);</span><br><span class="line">         <span class="keyword">if</span> (returnVal == JFileChooser.APPROVE_OPTION) &#123;</span><br><span class="line">             <span class="comment">//如果保存的文件名没有以.sql结尾，自动加上.sql</span></span><br><span class="line">             System.out.println(file);</span><br><span class="line">             <span class="keyword">if</span>(!file.getName().toLowerCase().endsWith(<span class="string">".sql"</span>))</span><br><span class="line">                 file = <span class="keyword">new</span> File(file.getParent(),file.getName()+<span class="string">".sql"</span>);</span><br><span class="line">             System.out.println(file);</span><br><span class="line">              </span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                MysqlUtil.backup(mysqlPath, file.getAbsolutePath());</span><br><span class="line">                JOptionPane.showMessageDialog(p, <span class="string">"备份成功,备份文件位于:\r\n"</span>+file.getAbsolutePath());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e1) &#123;</span><br><span class="line">                e1.printStackTrace();</span><br><span class="line">                JOptionPane.showMessageDialog(p, <span class="string">"备份失败\r\n,错误:\r\n"</span>+e1.getMessage());  </span><br><span class="line">            &#125;</span><br><span class="line">              </span><br><span class="line">         &#125;     </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-BackupPanel"><a class="header-anchor" href="#步骤-2-BackupPanel">¶</a>步骤 2 : BackupPanel</h3>
<p>BackupPanel 备份面板类继承WorkingPanel 类，并实现addListener</p>
<p>BackupListener listener = new BackupListener();</p>
<p>bBackup.addActionListener(listener);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.listener.BackupListener;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BackupPanel</span> <span class="keyword">extends</span> <span class="title">WorkingPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BackupPanel instance = <span class="keyword">new</span> BackupPanel();</span><br><span class="line">    JButton bBackup = <span class="keyword">new</span> JButton(<span class="string">"备份"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BackupPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bBackup);</span><br><span class="line">        <span class="keyword">this</span>.add(bBackup);</span><br><span class="line">        addListener();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(BackupPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        BackupListener listener = <span class="keyword">new</span> BackupListener();</span><br><span class="line">        bBackup.addActionListener(listener);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-备份执行效果"><a class="header-anchor" href="#步骤-3-备份执行效果">¶</a>步骤 3 : 备份执行效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2875.png" alt></p>
<h2 id="12、恢复"><a class="header-anchor" href="#12、恢复">¶</a>12、恢复</h2>
<h3 id="步骤-1-RecoverListener"><a class="header-anchor" href="#步骤-1-RecoverListener">¶</a>步骤 1 : RecoverListener</h3>
<p>RecoverListener 恢复监听器</p>
<ol>
<li>
<p>首先判断MYSQL安装路径是否配置</p>
</li>
<li>
<p>打开[文件选择器]，指定要打开的文件<br>
文件名默认设置为hutubill.sql<br>
根据后缀名.sql过滤文件</p>
</li>
<li>
<p>调用[MysqlUtil]进行恢复</p>
</li>
<li>
<p>提示恢复成功</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.listener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JFileChooser;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JOptionPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.filechooser.FileFilter;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.panel.BackupPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.ConfigPanel;</span><br><span class="line"><span class="keyword">import</span> gui.panel.MainPanel;</span><br><span class="line"><span class="keyword">import</span> service.ConfigService;</span><br><span class="line"><span class="keyword">import</span> util.MysqlUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecoverListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">        BackupPanel p  =BackupPanel.instance;</span><br><span class="line">        String mysqlPath= <span class="keyword">new</span> ConfigService().get(ConfigService.mysqlPath);</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>==mysqlPath.length())&#123;</span><br><span class="line">            JOptionPane.showMessageDialog(p, <span class="string">"恢复前请事先配置mysql的路径"</span>);</span><br><span class="line">            MainPanel.instance.workingPanel.show(ConfigPanel.instance);</span><br><span class="line">            ConfigPanel.instance.tfMysqlPath.grabFocus();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        JFileChooser fc = <span class="keyword">new</span> JFileChooser();</span><br><span class="line">        fc.setSelectedFile(<span class="keyword">new</span> File(<span class="string">"hutubill.sql"</span>));</span><br><span class="line">        fc.setFileFilter(<span class="keyword">new</span> FileFilter() &#123;</span><br><span class="line">             </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">".sql"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File f)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> f.getName().toLowerCase().endsWith(<span class="string">".sql"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">         <span class="keyword">int</span> returnVal =  fc.showOpenDialog(p);</span><br><span class="line">         File file = fc.getSelectedFile();</span><br><span class="line">         System.out.println(file);</span><br><span class="line">         <span class="keyword">if</span> (returnVal == JFileChooser.APPROVE_OPTION) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                MysqlUtil.recover(mysqlPath,file.getAbsolutePath());</span><br><span class="line"><span class="comment">//              MysqlUtil.recover(mysqlPath, file.getAbsolutePath());</span></span><br><span class="line">                JOptionPane.showMessageDialog(p, <span class="string">"恢复成功"</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e1) &#123;</span><br><span class="line">                e1.printStackTrace();</span><br><span class="line">                JOptionPane.showMessageDialog(p, <span class="string">"恢复失败\r\n,错误:\r\n"</span>+e1.getMessage());  </span><br><span class="line">            &#125;</span><br><span class="line">              </span><br><span class="line">         &#125;     </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-RecoverPanel"><a class="header-anchor" href="#步骤-2-RecoverPanel">¶</a>步骤 2 : RecoverPanel</h3>
<p>RecoverPanel 恢复面板类继承WorkingPanel 类，并实现addListener</p>
<p>RecoverListener listener = new RecoverListener();</p>
<p>bRecover.addActionListener(listener);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gui.panel;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> gui.listener.RecoverListener;</span><br><span class="line"><span class="keyword">import</span> util.ColorUtil;</span><br><span class="line"><span class="keyword">import</span> util.GUIUtil;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecoverPanel</span> <span class="keyword">extends</span> <span class="title">WorkingPanel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        GUIUtil.useLNF();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> RecoverPanel instance = <span class="keyword">new</span> RecoverPanel();</span><br><span class="line"> </span><br><span class="line">    JButton bRecover =<span class="keyword">new</span> JButton(<span class="string">"恢复"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecoverPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        GUIUtil.setColor(ColorUtil.blueColor, bRecover);</span><br><span class="line">        <span class="keyword">this</span>.add(bRecover);</span><br><span class="line">         </span><br><span class="line">        addListener();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GUIUtil.showPanel(RecoverPanel.instance);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RecoverListener listener = <span class="keyword">new</span> RecoverListener();</span><br><span class="line">        bRecover.addActionListener(listener);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-恢复执行效果"><a class="header-anchor" href="#步骤-3-恢复执行效果">¶</a>步骤 3 : 恢复执行效果</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2878.png" alt></p>
<h1 id="七、总结"><a class="header-anchor" href="#七、总结">¶</a>七、总结</h1>
<h2 id="1、包结构"><a class="header-anchor" href="#1、包结构">¶</a>1、包结构</h2>
<h3 id="步骤-1-所有的包和类截图"><a class="header-anchor" href="#步骤-1-所有的包和类截图">¶</a>步骤 1 : 所有的包和类截图</h3>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2889.png" alt></p>
<h3 id="步骤-2-包以及用途说明"><a class="header-anchor" href="#步骤-2-包以及用途说明">¶</a>步骤 2 : 包以及用途说明</h3>
<p><strong>entity, dao</strong> 存放实体类和DAO类<br>
<strong>gui.frame,gui.panel,gui.model,gui.listener</strong> 存放界面相关类<br>
<strong>service</strong> 存放业务类<br>
<strong>startup</strong> 存放启动类<br>
<strong>util</strong> 存放工具类</p>
<h2 id="2、用到的资源"><a class="header-anchor" href="#2、用到的资源">¶</a>2、用到的资源</h2>
<h3 id="步骤-1-第三方jar包-lib-rar"><a class="header-anchor" href="#步骤-1-第三方jar包-lib-rar">¶</a>步骤 1 : 第三方jar包 lib.rar</h3>
<p>分别是<br>
chart.jar 图表<br>
linquidlnf.jar 水晶皮肤<br>
mysql-connector-java-5.0.8-bin.jar mysql-jdbc连接包<br>
swingx-core-1.6.2.jar 日期控件</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2891.png" alt></p>
<h3 id="步骤-2-图片资源-img-rar"><a class="header-anchor" href="#步骤-2-图片资源-img-rar">¶</a>步骤 2 : 图片资源 img.rar</h3>
<p>工具栏用到的图片</p>
<p><img src="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/2892.png" alt></p>
<h2 id="3、完整项目下载"><a class="header-anchor" href="#3、完整项目下载">¶</a>3、完整项目下载</h2>
<h3 id="步骤-1-项目源码"><a class="header-anchor" href="#步骤-1-项目源码">¶</a>步骤 1 : 项目源码</h3>
<p>这是给已经做完了的同学参考用的。<br>
没学的同学，老老实实地把本项目从头学过来，不然拿到源码都不知道怎么运行的。</p>
<h2 id="4、改进练习"><a class="header-anchor" href="#4、改进练习">¶</a>4、改进练习</h2>
<p>还有些功能可以继续完善。</p>
<ol>
<li>
<p>比如查看分类下具体都有哪些消费记录。</p>
</li>
<li>
<p>对单次消费记录的金额进行修改</p>
</li>
</ol>
<p>这些功能就交由同学们自己完成了，也可以检验对整个项目的掌握情况</p>
<h2 id="5、反馈与建议"><a class="header-anchor" href="#5、反馈与建议">¶</a>5、反馈与建议</h2>
<p>本项目的讲解过程有不足的地方，希望大家指正。</p>
<p>有什么知识点，希望可以讲解更详细，也可以在这里留言。 欢迎各种意见和建议，大家共同提高。</p>
<p>谢谢大家。</p>

      
    </div>
    
    
    

    <div>
     
         <div>
 
  <div style="text-align:center;color:#bfbfbf;font-size:16px;">
   <span>-------- 本文结束 </span>
   <i class="fa fa-paw"></i>
   <span> 感谢阅读 --------</span>
  </div>
 
</div>
     
    </div>

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="潇 卟 甸 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="潇 卟 甸 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <!-- JS库 clipboard 拷贝内容到粘贴板-->
<script src="https://cdn.bootcss.com/clipboard.js/2.0.1/clipboard.min.js"></script>

<!-- JS库 sweetalert 显示提示信息-->
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<ul class="post-copyright">
<!-- 本文标题 -->
<li>
  <strong>本文标题： </strong>
  Java实践-一本糊涂账
</li>

<!-- 本文作者 -->
<li class="post-copyright-author">
  <strong>本文作者： </strong>
  
</li>

<!-- 创建时间 -->
<li>
  <strong>创建时间： </strong>
  2020年06月23日 - 22时06分
</li>

<!-- 修改时间 -->
<li>
  <strong>修改时间： </strong>
  2020年07月25日 - 17时07分
</li>

<!-- 引用链接 -->
<li class="post-copyright-link">
  <strong>本文链接：</strong>
  <a href="http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/" title="Java实践-一本糊涂账"
    >http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/</a
  >
  <span class="copy-path" title="点击复制引用链接"
    ><i
      style="cursor: pointer"
      class="fa fa-clipboard"
      data-clipboard-text="['s Blog | Java实践-一本糊涂账](http://yoursite.com/2020/06/23/Java%E5%AE%9E%E8%B7%B5-%E4%B8%80%E6%9C%AC%E7%B3%8A%E6%B6%82%E8%B4%A6/)"
      aria-label="复制成功"
    ></i
  ></span>
</li>

<!-- 版权声明 -->
<li class="post-copyright-license">
  <strong
    >版权声明：
  </strong>
  本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！
</li>
</ul>

<script>
var clipboard = new ClipboardJS(".fa-clipboard");
clipboard.on("success", function(target) {
  var message = document.createElement("div");
  message.innerHTML =
    '<i class="fa fa-check-circle message-icon"></i><span class="message-content">' +
    target.trigger.getAttribute("aria-label") +
    "</span>";
  swal({
    content: message,
    className: "copy-success-message",
    timer: 1000,
    button: false
  });
});
</script>
      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
          
            <a href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag"><i class="fa fa-tag"></i> 编程</a>
          
            <a href="/tags/%E6%BA%90%E4%BB%A3%E7%A0%81/" rel="tag"><i class="fa fa-tag"></i> 源代码</a>
          
            <a href="/tags/Java%E5%AE%9E%E8%B7%B5/" rel="tag"><i class="fa fa-tag"></i> Java实践</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div id="needsharebutton-postbottom">
            <span class="btn">
              <i class="fa fa-share-alt" aria-hidden="true"></i>
            </span>
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/06/23/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/" rel="next" title="MySQL必知必会">
                <i class="fa fa-chevron-left"></i> MySQL必知必会
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/06/23/Java%E5%AE%9E%E8%B7%B5-DIYTomcat/" rel="prev" title="Java实践-DIYTomcat">
                Java实践-DIYTomcat <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <a href="/">
              <img class="site-author-image" itemprop="image"
                src="/uploads/picture.jpg"
                alt="潇 卟 甸" />
              </a>
            
              <p class="site-author-name" itemprop="name">潇 卟 甸</p>
              <p class="site-description motion-element" itemprop="description">总结自己一些知识，一些事</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">53</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

			
				<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
				<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
				<div class="widget-wrap">
					<div id="myCanvasContainer" class="widget tagcloud">
						<canvas width="250" height="250" id="resCanvas" style="width=100%">
							<ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">27</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%AE%9E%E8%B7%B5/" rel="tag">Java实践</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/b%E7%AB%99%E8%A7%86%E9%A2%91/" rel="tag">b站视频</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E7%BA%A7/" rel="tag">中级</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85/" rel="tag">喜马拉雅</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E8%AF%AD/" rel="tag">日语</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E4%BB%A3%E7%A0%81/" rel="tag">源代码</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%B5%E5%AD%90%E4%B9%A6/" rel="tag">电子书</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a><span class="tag-list-count">41</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BE%8E%E5%8C%96/" rel="tag">美化</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" rel="tag">计算机</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E6%8E%A8%E8%8D%90/" rel="tag">读书推荐</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E9%98%B6/" rel="tag">进阶</a><span class="tag-list-count">4</span></li></ul>
						</canvas>
					</div>
				</div>
			

          </nav>

          

          
		  
		  <!-- 添加近期文章 -->
			
				<div class="links-of-blogroll motion-element links-of-blogroll-block">
				<div class="links-of-blogroll-title">
				<!-- modify icon to fire by szw -->
				<i class="fa fa-history fa-" aria-hidden="true"></i>
				近期文章
				</div>
				<ul class="links-of-blogroll-list">
				
				
					<li>
					<a href="/2021/06/08/%E5%B0%9A%E7%A1%85%E8%B0%B7-JDBC%E6%95%99%E7%A8%8B/" title="尚硅谷-JDBC教程" target="_blank">尚硅谷-JDBC教程</a>
					</li>
				
					<li>
					<a href="/2021/06/04/%E5%B0%9A%E7%A1%85%E8%B0%B7-MySQL%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/" title="尚硅谷-MySQL核心技术" target="_blank">尚硅谷-MySQL核心技术</a>
					</li>
				
					<li>
					<a href="/2021/04/16/%E5%B0%9A%E7%A1%85%E8%B0%B7-Java%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80/" title="尚硅谷_Java核心基础" target="_blank">尚硅谷_Java核心基础</a>
					</li>
				
					<li>
					<a href="/2021/04/14/Spring-Boot%E5%AE%9E%E6%88%98/" title="Spring Boot实战" target="_blank">Spring Boot实战</a>
					</li>
				
					<li>
					<a href="/2021/04/14/Spring%E5%AE%9E%E6%88%98%EF%BC%88%E7%AC%AC%E5%9B%9B%E7%89%88%EF%BC%89/" title="Spring实战" target="_blank">Spring实战</a>
					</li>
				
				</ul>
			</div>
			

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                推荐阅读
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://sushan102.top/posts/1410804403/" title="博客搭建" target="_blank">博客搭建</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://how2j.cn?p=154642" title="HOW2J" target="_blank">HOW2J</a>
                  </li>
                
              </ul>
            </div>
          
		  
		  
			
		  
		  <div style="">
  <canvas id="canvas" style="width:60%;">当前浏览器不支持canvas，请更换浏览器后再试</canvas>
</div>
<script>
(function(){

   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //声明canvas的宽高
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //存储时间数据
    var data = [];
    //存储运动的小球
    var balls = [];
    //设置粒子半径
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //存储时间数字，由十位小时、个位小时、冒号、十位分钟、个位分钟、冒号、十位秒钟、个位秒钟这7个数字组成
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*生成点阵数字*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*更新时钟*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //时间发生变化
            if(NewData[i] !== data[i]){
                //将变化的数字值和在data数组中的索引存储在changeNumArray数组中
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //增加小球
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*更新小球状态*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*增加要运动的小球*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*渲染*/
    function render(){
        //重置画布宽度，达到清空画布的效果
        canvas.height = 100;
        //渲染时钟
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //渲染小球
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //更新时钟
        updateDigitTime();
        //更新小球状态
        updateBalls();
        //渲染
        render();
    },50);
}

})();
</script>


        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、基础"><span class="nav-text">一、基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、项目简介"><span class="nav-text">1、项目简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、可执行文件"><span class="nav-text">2、可执行文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-可执行文件"><span class="nav-text">步骤 1 : 可执行文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-执行exe文件"><span class="nav-text">步骤 2 : 执行exe文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-情况一"><span class="nav-text">步骤 3 : 情况一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-情况二"><span class="nav-text">步骤 4 : 情况二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-关于exe不能执行"><span class="nav-text">步骤 5 : 关于exe不能执行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、功能一览"><span class="nav-text">3、功能一览</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-消费一览"><span class="nav-text">步骤 1 : 消费一览</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-记一笔"><span class="nav-text">步骤 2 : 记一笔</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-消费分类管理"><span class="nav-text">步骤 3 : 消费分类管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-月度消费报表"><span class="nav-text">步骤 4 : 月度消费报表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-设置预算和数据库路径"><span class="nav-text">步骤 5 : 设置预算和数据库路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-备份数据"><span class="nav-text">步骤 6 : 备份数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-恢复数据"><span class="nav-text">步骤 7 : 恢复数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、开发流程"><span class="nav-text">4、开发流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-表结构设计"><span class="nav-text">步骤 1 : 表结构设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-原型设计"><span class="nav-text">步骤 2 : 原型设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-实体类与DAO的设计"><span class="nav-text">步骤 3 : 实体类与DAO的设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-功能开发"><span class="nav-text">步骤 4 : 功能开发</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、学习方法"><span class="nav-text">5、学习方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-正向学习"><span class="nav-text">步骤 1 : 正向学习</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-反向学习"><span class="nav-text">步骤 2 : 反向学习</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-两次学习"><span class="nav-text">步骤 3 : 两次学习</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、表结构设计"><span class="nav-text">二、表结构设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、概述"><span class="nav-text">1、概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、数据库与表"><span class="nav-text">2、数据库与表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-首先创建数据库"><span class="nav-text">步骤 1 : 首先创建数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-确定需要哪些表"><span class="nav-text">步骤 2 : 确定需要哪些表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-配置信息表-config"><span class="nav-text">步骤 3 : 配置信息表 config</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-消费分类表-category"><span class="nav-text">步骤 4 : 消费分类表 category</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-消费记录表-record"><span class="nav-text">步骤 5 : 消费记录表 record</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、表关系"><span class="nav-text">3、表关系</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-如何分析表之间的关系"><span class="nav-text">步骤 1 : 如何分析表之间的关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-确定外键"><span class="nav-text">步骤 2 : 确定外键</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、约束"><span class="nav-text">4、约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-主键"><span class="nav-text">步骤 1 : 主键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-设置id为自增长"><span class="nav-text">步骤 2 : 设置id为自增长</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-外键"><span class="nav-text">步骤 3 : 外键</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、放在一起"><span class="nav-text">5、放在一起</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-放在一起"><span class="nav-text">步骤 1 : 放在一起</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、原型-基础"><span class="nav-text">三、原型-基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、概述-v2"><span class="nav-text">1、概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、粗陋的JFRAME"><span class="nav-text">2、粗陋的JFRAME</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-原型概念"><span class="nav-text">步骤 1 : 原型概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-直接在main方法中new-JFrame"><span class="nav-text">步骤 2 : 直接在main方法中new JFrame</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-问题"><span class="nav-text">步骤 3 : 问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-解决办法"><span class="nav-text">步骤 4 : 解决办法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、界面包的规划"><span class="nav-text">3、界面包的规划</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-首先看界面包规划后的样子"><span class="nav-text">步骤 1 : 首先看界面包规划后的样子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-界面包的规划"><span class="nav-text">步骤 2 : 界面包的规划</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-项目完成后界面相关包的规划截图"><span class="nav-text">步骤 3 : 项目完成后界面相关包的规划截图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-项目涉及的所有包"><span class="nav-text">步骤 4 : 项目涉及的所有包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、单例的面板类"><span class="nav-text">4、单例的面板类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-监听器访问组件"><span class="nav-text">步骤 1 : 监听器访问组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-在面板类中，把组件声明为public的属性"><span class="nav-text">步骤 2 : 在面板类中，把组件声明为public的属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-把面板类设计为单例模式"><span class="nav-text">步骤 3 : 把面板类设计为单例模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-监听器通过单例模式的面板访问组件"><span class="nav-text">步骤 4 : 监听器通过单例模式的面板访问组件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、居中面板"><span class="nav-text">5、居中面板</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-拉伸居中"><span class="nav-text">步骤 1 : 先看效果-拉伸居中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-先看效果-非拉伸居中"><span class="nav-text">步骤 2 : 先看效果-非拉伸居中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-居中面板CenterPanel"><span class="nav-text">步骤 3 : 居中面板CenterPanel</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、GUIUTIL"><span class="nav-text">6、GUIUTIL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-GUIUtil"><span class="nav-text">步骤 1 : GUIUtil</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-checkEmpty"><span class="nav-text">步骤 2 : checkEmpty</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-checkNumber"><span class="nav-text">步骤 3 : checkNumber</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-checkZero"><span class="nav-text">步骤 4 : checkZero</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-setColor"><span class="nav-text">步骤 5 : setColor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-setImageIcon"><span class="nav-text">步骤 6 : setImageIcon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-useLNF"><span class="nav-text">步骤 7 : useLNF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-8-showPanel"><span class="nav-text">步骤 8 : showPanel</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、COLORUTIL"><span class="nav-text">7、COLORUTIL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-ColorUtil"><span class="nav-text">步骤 1 : ColorUtil</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-getByPercentage"><span class="nav-text">步骤 2 : getByPercentage</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、CIRCLEPROGRESSBAR"><span class="nav-text">8、CIRCLEPROGRESSBAR</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-环形进度条"><span class="nav-text">步骤 1 : 环形进度条</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-CircleProgressBar"><span class="nav-text">步骤 2 : CircleProgressBar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-使用CircleProgressBar"><span class="nav-text">步骤 3 : 使用CircleProgressBar</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、CHARTUTIL"><span class="nav-text">9、CHARTUTIL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-ChartUtil"><span class="nav-text">步骤 2 : ChartUtil</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10、图片资源"><span class="nav-text">10、图片资源</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-解压后，放在img目录下"><span class="nav-text">步骤 1 : 解压后，放在img目录下</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、原型-界面类"><span class="nav-text">四、原型-界面类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、MAINPANEL"><span class="nav-text">1、MAINPANEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-v2"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-MainPanel-代码逐一讲解"><span class="nav-text">步骤 2 : MainPanel-代码逐一讲解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、SPENDPANEL"><span class="nav-text">2、SPENDPANEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-v3"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-布局分析-整体"><span class="nav-text">步骤 2 : 布局分析-整体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-布局分析-南面"><span class="nav-text">步骤 3 : 布局分析-南面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-布局分析-北面"><span class="nav-text">步骤 4 : 布局分析-北面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-SpendPanel-消费一览面板代码讲解"><span class="nav-text">步骤 5 : SpendPanel 消费一览面板代码讲解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、RECORDPANEL"><span class="nav-text">3、RECORDPANEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-v4"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-布局分析"><span class="nav-text">步骤 2 : 布局分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-CategoryComboBoxModel"><span class="nav-text">步骤 3 : CategoryComboBoxModel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-日期控件"><span class="nav-text">步骤 4 : 日期控件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-RecordPanel-记一笔面板代码讲解"><span class="nav-text">步骤 5 : RecordPanel 记一笔面板代码讲解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、CATEGORYPANEL"><span class="nav-text">4、CATEGORYPANEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-v5"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-布局分析-v2"><span class="nav-text">步骤 2 : 布局分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-CategoryTableModel"><span class="nav-text">步骤 3 : CategoryTableModel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-分类信息面板CategoryPanel代码解读"><span class="nav-text">步骤 4 : 分类信息面板CategoryPanel代码解读</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、REPORTPANEL"><span class="nav-text">5、REPORTPANEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-v6"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-报表面板ReportPanel代码解读"><span class="nav-text">步骤 2 : 报表面板ReportPanel代码解读</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、CONFIGPANEL"><span class="nav-text">6、CONFIGPANEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-v7"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-布局规划"><span class="nav-text">步骤 2 : 布局规划</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-设置界面ConfigPanel-代码讲解"><span class="nav-text">步骤 3 : 设置界面ConfigPanel 代码讲解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、BACKUPPANEL"><span class="nav-text">7、BACKUPPANEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-v8"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-备份面板-BackupPanel-代码解读"><span class="nav-text">步骤 2 : 备份面板 BackupPanel 代码解读</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、RECOVERPANEL"><span class="nav-text">8、RECOVERPANEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-v9"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-恢复面板RecoverPanel-代码解读"><span class="nav-text">步骤 2 : 恢复面板RecoverPanel 代码解读</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、MAINFRAME"><span class="nav-text">9、MAINFRAME</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-效果"><span class="nav-text">步骤 1 : 效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-主窗体-MainFrame"><span class="nav-text">步骤 2 : 主窗体-MainFrame</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、实体类和DAO"><span class="nav-text">五、实体类和DAO</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、实体类ENTITY"><span class="nav-text">1、实体类ENTITY</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-entity包"><span class="nav-text">步骤 1 : entity包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-配置信息类Config"><span class="nav-text">步骤 2 : 配置信息类Config</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-消费分类Category"><span class="nav-text">步骤 3 : 消费分类Category</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-消费信息类Record"><span class="nav-text">步骤 4 : 消费信息类Record</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、DBUTIL"><span class="nav-text">2、DBUTIL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-工具类-DBUtil"><span class="nav-text">步骤 1 : 工具类 DBUtil</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-代码讲解"><span class="nav-text">步骤 2 : 代码讲解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、DATEUTIL"><span class="nav-text">3、DATEUTIL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-日期工具类DateUtil"><span class="nav-text">步骤 1 : 日期工具类DateUtil</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-代码讲解-v2"><span class="nav-text">步骤 2 : 代码讲解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、CONFIGDAO"><span class="nav-text">4、CONFIGDAO</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-dao包"><span class="nav-text">步骤 1 : dao包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-ConfigDAO"><span class="nav-text">步骤 2 : ConfigDAO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-方法讲解"><span class="nav-text">步骤 3 : 方法讲解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、CATEGORYDAO"><span class="nav-text">5、CATEGORYDAO</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-CategoryDAO"><span class="nav-text">步骤 1 : CategoryDAO</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、RECORDDAO"><span class="nav-text">6、RECORDDAO</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-RecordDAO"><span class="nav-text">步骤 1 : RecordDAO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-代码讲解-v3"><span class="nav-text">步骤 2 : 代码讲解</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、功能"><span class="nav-text">六、功能</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、启动类BOOTSTRAP"><span class="nav-text">1、启动类BOOTSTRAP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-先看效果-v10"><span class="nav-text">步骤 1 : 先看效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-创建包startup"><span class="nav-text">步骤 2 : 创建包startup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-启动入口Bootstrap"><span class="nav-text">步骤 3 : 启动入口Bootstrap</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、开发顺序"><span class="nav-text">2、开发顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-模块依赖"><span class="nav-text">步骤 1 : 模块依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-开发顺序"><span class="nav-text">步骤 2 : 开发顺序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、主窗体工具栏"><span class="nav-text">3、主窗体工具栏</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-监听器ToolBarListener"><span class="nav-text">步骤 1 : 监听器ToolBarListener</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-在主面板中增加监听器"><span class="nav-text">步骤 2 : 在主面板中增加监听器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-效果"><span class="nav-text">步骤 3 : 效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-独立的监听器与面板单例化"><span class="nav-text">步骤 4 : 独立的监听器与面板单例化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、配置"><span class="nav-text">4、配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-业务类Service"><span class="nav-text">步骤 1 : 业务类Service</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-ConfigService"><span class="nav-text">步骤 2 : ConfigService</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-ConfigListener"><span class="nav-text">步骤 3 : ConfigListener</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-在ConfigPanel添加监听器"><span class="nav-text">步骤 4 : 在ConfigPanel添加监听器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-运行效果"><span class="nav-text">步骤 5 : 运行效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、消费分类"><span class="nav-text">5、消费分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-CategoryService"><span class="nav-text">步骤 1 : CategoryService</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-CategoryTableModel"><span class="nav-text">步骤 2 : CategoryTableModel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-CategoryPanel"><span class="nav-text">步骤 3 : CategoryPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-CategoryListener"><span class="nav-text">步骤 4 : CategoryListener</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-在CategoryPanel中加上监听器"><span class="nav-text">步骤 5 : 在CategoryPanel中加上监听器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-运行效果"><span class="nav-text">步骤 6 : 运行效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、WORKINGPANEL"><span class="nav-text">6、WORKINGPANEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-共同性"><span class="nav-text">步骤 1 : 共同性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-WorkingPanel"><span class="nav-text">步骤 2 : WorkingPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-让CategoryPanel继承WorkingPanel"><span class="nav-text">步骤 3 : 让CategoryPanel继承WorkingPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-让ConfigPanel继承WorkingPanel"><span class="nav-text">步骤 4 : 让ConfigPanel继承WorkingPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-ToolBarListener监听器的不完善"><span class="nav-text">步骤 5 : ToolBarListener监听器的不完善</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-改进CenterPanel"><span class="nav-text">步骤 6 : 改进CenterPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-点击设置按钮"><span class="nav-text">步骤 7 : 点击设置按钮</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、记一笔"><span class="nav-text">7、记一笔</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-RecordService"><span class="nav-text">步骤 1 : RecordService</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-CategoryComboBoxModel"><span class="nav-text">步骤 2 : CategoryComboBoxModel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-RecordListener"><span class="nav-text">步骤 3 : RecordListener</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-RecordPanel"><span class="nav-text">步骤 4 : RecordPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-点击效果"><span class="nav-text">步骤 5 : 点击效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、消费一览"><span class="nav-text">8、消费一览</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-SpendPage"><span class="nav-text">步骤 1 : SpendPage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-SpendService"><span class="nav-text">步骤 2 : SpendService</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-SpendPanel"><span class="nav-text">步骤 3 : SpendPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-运行效果"><span class="nav-text">步骤 4 : 运行效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、月消费报表"><span class="nav-text">9、月消费报表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-ReportService"><span class="nav-text">步骤 1 : ReportService</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-ChartUtil-v2"><span class="nav-text">步骤 2 : ChartUtil</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-ReportPanel"><span class="nav-text">步骤 3 : ReportPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-界面效果"><span class="nav-text">步骤 4 : 界面效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10、MYSQLUTIL"><span class="nav-text">10、MYSQLUTIL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-工具类-MysqlUtil"><span class="nav-text">步骤 1 : 工具类 MysqlUtil</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11、备份"><span class="nav-text">11、备份</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-BackupListener"><span class="nav-text">步骤 1 : BackupListener</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-BackupPanel"><span class="nav-text">步骤 2 : BackupPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-备份执行效果"><span class="nav-text">步骤 3 : 备份执行效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12、恢复"><span class="nav-text">12、恢复</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-RecoverListener"><span class="nav-text">步骤 1 : RecoverListener</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-RecoverPanel"><span class="nav-text">步骤 2 : RecoverPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-恢复执行效果"><span class="nav-text">步骤 3 : 恢复执行效果</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七、总结"><span class="nav-text">七、总结</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、包结构"><span class="nav-text">1、包结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-所有的包和类截图"><span class="nav-text">步骤 1 : 所有的包和类截图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-包以及用途说明"><span class="nav-text">步骤 2 : 包以及用途说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、用到的资源"><span class="nav-text">2、用到的资源</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-第三方jar包-lib-rar"><span class="nav-text">步骤 1 : 第三方jar包 lib.rar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-图片资源-img-rar"><span class="nav-text">步骤 2 : 图片资源 img.rar</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、完整项目下载"><span class="nav-text">3、完整项目下载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-项目源码"><span class="nav-text">步骤 1 : 项目源码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、改进练习"><span class="nav-text">4、改进练习</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、反馈与建议"><span class="nav-text">5、反馈与建议</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script
  async
  src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"
></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">潇 卟 甸</span>

  
</div>

<!--

  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>

-->



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
     我的第 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 位朋友，
    </span>
  

  
    <span class="site-pv">
     历经 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次回眸才与你相遇
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: true,
        appId: 'w1mVK8MFY7n2fWIKlq2t9EJn-gzGzoHsz',
        appKey: 'NMGzUaGqmpzSiSItkHBQGUaA',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("w1mVK8MFY7n2fWIKlq2t9EJn-gzGzoHsz", "NMGzUaGqmpzSiSItkHBQGUaA");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">

  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  

  

  


  

 <script src="/js/src/activate-power-mode.js"></script>
 <script>
   POWERMODE.colorful = true;
   POWERMODE.shake = false;
   document.body.addEventListener('input', POWERMODE);
 </script>




<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script>
<script>
  function timer() {
    var ages = moment.preciseDiff(moment(),moment(20200610,"YYYYMMDD"));
    ages = ages.replace(/years?/, "年");
    ages = ages.replace(/months?/, "月");
    ages = ages.replace(/days?/, "天");
    ages = ages.replace(/hours?/, "小时");
    ages = ages.replace(/minutes?/, "分");
    ages = ages.replace(/seconds?/, "秒");
    ages = ages.replace(/\d+/g, '<span style="color:#1890ff">$&</span>');
    div.innerHTML = `我已在此等候你 ${ages}`;
  }
  var div = document.createElement("div");
  //插入到copyright之后
  var copyright = document.querySelector(".copyright");
  document.querySelector(".footer-inner").insertBefore(div, copyright.nextSibling);
  timer();
  setInterval("timer()",1000)
</script>




<script>
  var OriginTitile = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function() {
    if (document.hidden) {
      document.title = "(つェ⊂)我藏好了哦~" + OriginTitile;
      clearTimeout(titleTime);
    } else {
      document.title = "(*´∇｀*) 被你发现啦~" + OriginTitile;
      titleTime = setTimeout(function() {
        document.title = OriginTitile;
      }, 2000);
    }
  });
</script>


  
</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
<!-- 代码块复制功能 -->
<script type="text/javascript" src="/js/src/clipboard.min.js"></script>  
<script type="text/javascript" src="/js/src/clipboard-use.js"></script>
