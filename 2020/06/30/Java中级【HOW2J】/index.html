<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Java,编程,中级," />










<meta name="description" content="地址：https:&#x2F;&#x2F;how2j.cn?p&#x3D;154642">
<meta property="og:type" content="article">
<meta property="og:title" content="Java中级【HOW2J】">
<meta property="og:url" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/index.html">
<meta property="og:site_name" content="伶仃浩瀚">
<meta property="og:description" content="地址：https:&#x2F;&#x2F;how2j.cn?p&#x3D;154642">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/735.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2412.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/742.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/744.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/745.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/746.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/756.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/757.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/759.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2414.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2415.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2417.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2432.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2434.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2481.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2482.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2483.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2485.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2488.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2489.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/771.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2442.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2142.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2444.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2491.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/5679.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2453.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2454.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2455.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2456.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2457.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2458.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2459.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2460.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2461.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2462.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2463.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/808.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2469.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/806.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2470.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/809.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/810.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1008.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1009.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1010.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2511.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/823.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2386.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/830.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2498.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2501.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2499.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2500.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2497.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/798.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2513.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2520.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/799.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2507.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2508.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/817.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/818.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/819.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/828.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/829.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2564.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/837.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/838.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/836.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/835.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2551.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2552.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2553.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2570.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2560.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2561.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2562.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2565.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2568.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2569.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/777.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/778.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2589.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/786.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/787.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/788.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/789.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/790.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/793.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2595.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2596.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/794.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/796.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2591.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2600.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2601.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2604.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2610.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2611.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2617.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2626.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/855.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/856.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/857.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/858.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/859.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/860.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/866.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1714.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/878.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2650.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2654.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2655.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1833.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/915.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/924.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/925.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/926.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2662.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/887.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/888.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2666.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1344.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/890.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/891.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/892.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/919.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2734.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2671.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/918.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/904.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/905.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/906.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/907.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/908.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/909.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/910.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/911.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/912.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/913.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2703.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2736.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/893.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/895.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2721.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/896.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2735.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2701.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2673.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2675.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2677.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2679.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2681.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2704.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2449.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/897.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/898.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2685.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/921.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/922.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/923.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/899.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/902.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/927.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2724.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/928.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/901.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/929.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/932.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/933.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/943.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/949.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2697.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2732.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2687.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2689.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2691.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2693.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2699.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2726.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2727.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/916.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/880.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/881.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2716.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2717.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2718.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2719.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/882.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2737.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2658.png">
<meta property="og:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2706.png">
<meta property="article:published_time" content="2020-06-30T12:57:46.000Z">
<meta property="article:modified_time" content="2020-08-23T08:49:52.101Z">
<meta property="article:author" content="潇 卟 甸">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="编程">
<meta property="article:tag" content="中级">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/735.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/06/30/Java中级【HOW2J】/"/>







<script>
    (function(){
        if('224694'){
            if (prompt('请输入文章密码') !== '224694'){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>

  <title>Java中级【HOW2J】 | 伶仃浩瀚</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://xbd224694.github.io" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">伶仃浩瀚</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="潇 卟 甸">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/picture.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伶仃浩瀚">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java中级【HOW2J】</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建时间" itemprop="dateCreated datePublished" datetime="2020-06-30T20:57:46+08:00">
                2020-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/How2j/" itemprop="url" rel="index">
                    <span itemprop="name">How2j</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/" class="leancloud_visitors" data-flag-title="Java中级【HOW2J】">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">热度 </span>
               
                 <span class="leancloud-visitors-count"></span>
	 <span> ℃ </span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  106.6k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  536 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>地址：<a href="https://how2j.cn?p=154642" target="_blank" rel="noopener">https://how2j.cn?p=154642</a></strong></p>
<a id="more"></a>
<h1 id="一、异常处理"><a class="header-anchor" href="#一、异常处理">¶</a>一、异常处理</h1>
<h2 id="1、JAVA-异常-EXCEPTION"><a class="header-anchor" href="#1、JAVA-异常-EXCEPTION">¶</a>1、JAVA 异常 EXCEPTION</h2>
<h3 id="步骤-1-文件不存在异常"><a class="header-anchor" href="#步骤-1-文件不存在异常">¶</a>步骤 1 : 文件不存在异常</h3>
<p>比如要打开d盘的LOL.exe文件，这个文件是有可能不存在的<br>
Java中通过 new FileInputStream(f) 试图打开某文件，就有可能抛出<strong>文件不存在异常FileNotFoundException</strong><br>
如果不处理该异常，就会有编译错误<br>
处理办法参见 [异常处理]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> exception;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestException</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">          </span><br><span class="line">        File f= <span class="keyword">new</span> File(<span class="string">"d:/LOL.exe"</span>);</span><br><span class="line">          </span><br><span class="line">        <span class="comment">//试图打开文件LOL.exe，会抛出FileNotFoundException，如果不处理该异常，就会有编译错误</span></span><br><span class="line">        <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-异常"><a class="header-anchor" href="#步骤-2-练习-异常">¶</a>步骤 2 : 练习-异常</h3>
<p>罗列出学习到目前为止，都接触过了哪些异常，分别在什么情况下会出现</p>
<p>![](Java中级【HOW2J】/57538 .png)</p>
<h2 id="2、JAVA的异常处理办法-TRY-CATCH-THROWS"><a class="header-anchor" href="#2、JAVA的异常处理办法-TRY-CATCH-THROWS">¶</a>2、JAVA的异常处理办法 TRY CATCH THROWS</h2>
<h3 id="步骤-1-try-catch"><a class="header-anchor" href="#步骤-1-try-catch">¶</a>步骤 1 : try catch</h3>
<p>1.将可能抛出FileNotFoundException <strong>文件不存在异常</strong>的代码放在try里</p>
<p>2.如果文件存在，就会顺序往下执行，并且不执行catch块中的代码</p>
<ol start="3">
<li>
<p>如果文件不存在，try 里的代码会立即终止，程序流程会运行到对应的catch块中</p>
</li>
<li>
<p>e.printStackTrace(); 会打印出方法的调用痕迹，如此例，会打印出异常开始于TestException的第16行，这样就便于定位和分析到底哪里出了异常</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/735.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line"> </span><br><span class="line">public class TestException &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        File f&#x3D; new File(&quot;d:&#x2F;LOL.exe&quot;);</span><br><span class="line">         </span><br><span class="line">        try&#123;</span><br><span class="line">            System.out.println(&quot;试图打开 d:&#x2F;LOL.exe&quot;);</span><br><span class="line">            new FileInputStream(f);</span><br><span class="line">            System.out.println(&quot;成功打开&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        catch(FileNotFoundException e)&#123;</span><br><span class="line">            System.out.println(&quot;d:&#x2F;LOL.exe不存在&quot;);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-使用异常的父类进行catch"><a class="header-anchor" href="#步骤-2-使用异常的父类进行catch">¶</a>步骤 2 : 使用异常的父类进行catch</h3>
<p>FileNotFoundException是Exception的子类，使用Exception也可以catch住FileNotFoundException</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line">  </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line">  </span><br><span class="line">public class TestException &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        File f&#x3D; new File(&quot;d:&#x2F;LOL.exe&quot;);</span><br><span class="line">          </span><br><span class="line">        try&#123;</span><br><span class="line">            System.out.println(&quot;试图打开 d:&#x2F;LOL.exe&quot;);</span><br><span class="line">            new FileInputStream(f);</span><br><span class="line">            System.out.println(&quot;成功打开&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        catch(Exception e)&#123;</span><br><span class="line">            System.out.println(&quot;d:&#x2F;LOL.exe不存在&quot;);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-多异常捕捉办法1"><a class="header-anchor" href="#步骤-3-多异常捕捉办法1">¶</a>步骤 3 : 多异常捕捉办法1</h3>
<p>有的时候一段代码会抛出多种异常，比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">new FileInputStream(f);</span><br><span class="line"></span><br><span class="line">Date d &#x3D; sdf.parse(&quot;2016-06-03&quot;);</span><br></pre></td></tr></table></figure>
<p>这段代码，会抛出 文件不存在异常 FileNotFoundException 和 解析异常ParseException<br>
解决办法之一是分别进行catch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">catch (FileNotFoundException e) &#123;</span><br><span class="line"></span><br><span class="line">	System.out.println(&quot;d:&#x2F;LOL.exe不存在&quot;);</span><br><span class="line"></span><br><span class="line">	e.printStackTrace();</span><br><span class="line"></span><br><span class="line">&#125; catch (ParseException e) &#123;</span><br><span class="line"></span><br><span class="line">	System.out.println(&quot;日期格式解析错误&quot;);</span><br><span class="line"></span><br><span class="line">	e.printStackTrace();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line">import java.text.ParseException;</span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line"> </span><br><span class="line">public class TestException &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;LOL.exe&quot;);</span><br><span class="line"> </span><br><span class="line">        try &#123;</span><br><span class="line">            System.out.println(&quot;试图打开 d:&#x2F;LOL.exe&quot;);</span><br><span class="line">            new FileInputStream(f);</span><br><span class="line">            System.out.println(&quot;成功打开&quot;);</span><br><span class="line">            SimpleDateFormat sdf &#x3D; new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">            Date d &#x3D; sdf.parse(&quot;2016-06-03&quot;);</span><br><span class="line">        &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">            System.out.println(&quot;d:&#x2F;LOL.exe不存在&quot;);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (ParseException e) &#123;</span><br><span class="line">            System.out.println(&quot;日期格式解析错误&quot;);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-多异常捕捉办法2"><a class="header-anchor" href="#步骤-4-多异常捕捉办法2">¶</a>步骤 4 : 多异常捕捉办法2</h3>
<p>另一个种办法是把多个异常，放在一个catch里统一捕捉</p>
<p>catch (FileNotFoundException | ParseException e) {</p>
<p>这种方式从 JDK7开始支持，好处是捕捉的代码<strong>更紧凑</strong>，不足之处是，一旦发生异常，<strong>不能确定到底是哪种异常</strong>，需要通过instanceof 进行判断具体的异常类型</p>
<p>if (e instanceof FileNotFoundException)</p>
<p>​	System.out.println(“d:/LOL.exe不存在”);</p>
<p>if (e instanceof ParseException)</p>
<p>​	System.out.println(“日期格式解析错误”);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line">import java.text.ParseException;</span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line"> </span><br><span class="line">public class TestException &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;LOL.exe&quot;);</span><br><span class="line"> </span><br><span class="line">        try &#123;</span><br><span class="line">            System.out.println(&quot;试图打开 d:&#x2F;LOL.exe&quot;);</span><br><span class="line">            new FileInputStream(f);</span><br><span class="line">            System.out.println(&quot;成功打开&quot;);</span><br><span class="line">            SimpleDateFormat sdf &#x3D; new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">            Date d &#x3D; sdf.parse(&quot;2016-06-03&quot;);</span><br><span class="line">        &#125; catch (FileNotFoundException | ParseException e) &#123;</span><br><span class="line">            if (e instanceof FileNotFoundException)</span><br><span class="line">                System.out.println(&quot;d:&#x2F;LOL.exe不存在&quot;);</span><br><span class="line">            if (e instanceof ParseException)</span><br><span class="line">                System.out.println(&quot;日期格式解析错误&quot;);</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-finally"><a class="header-anchor" href="#步骤-5-finally">¶</a>步骤 5 : finally</h3>
<p>无论是否出现异常，finally中的代码都会被执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line"> </span><br><span class="line">public class TestException &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        File f&#x3D; new File(&quot;d:&#x2F;LOL.exe&quot;);</span><br><span class="line">         </span><br><span class="line">        try&#123;</span><br><span class="line">            System.out.println(&quot;试图打开 d:&#x2F;LOL.exe&quot;);</span><br><span class="line">            new FileInputStream(f);</span><br><span class="line">            System.out.println(&quot;成功打开&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        catch(FileNotFoundException e)&#123;</span><br><span class="line">            System.out.println(&quot;d:&#x2F;LOL.exe不存在&quot;);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        finally&#123;</span><br><span class="line">            System.out.println(&quot;无论文件是否存在， 都会执行的代码&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-throws"><a class="header-anchor" href="#步骤-6-throws">¶</a>步骤 6 : throws</h3>
<p>考虑如下情况：<br>
主方法调用method1<br>
method1调用method2<br>
method2中打开文件</p>
<p>method2中需要进行异常处理<br>
但是method2<strong>不打算处理</strong>，而是把这个异常通过<strong>throws 抛出去</strong><br>
那么method1就会<strong>接到该异常</strong>。 处理办法也是两种，要么是try catch处理掉，要么也是<strong>抛出去</strong>。<br>
method1选择本地try catch住 一旦try catch住了，就相当于把这个异常消化掉了，主方法在调用method1的时候，就不需要进行异常处理了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line"> </span><br><span class="line">public class TestException &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        method1();</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void method1() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            method2();</span><br><span class="line">        &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void method2() throws FileNotFoundException &#123;</span><br><span class="line"> </span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;LOL.exe&quot;);</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;试图打开 d:&#x2F;LOL.exe&quot;);</span><br><span class="line">        new FileInputStream(f);</span><br><span class="line">        System.out.println(&quot;成功打开&quot;);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-throw和throws的区别"><a class="header-anchor" href="#步骤-7-throw和throws的区别">¶</a>步骤 7 : throw和throws的区别</h3>
<p>throws与throw这两个关键字接近，不过意义不一样，有如下区别：</p>
<ol>
<li>
<p>throws 出现在方法声明上，而throw通常都出现在方法体内。</p>
</li>
<li>
<p>throws 表示出现异常的一种可能性，并不一定会发生这些异常；throw则是抛出了异常，执行throw则一定抛出了某个异常对象。</p>
</li>
</ol>
<h3 id="步骤-8-练习-异常处理"><a class="header-anchor" href="#步骤-8-练习-异常处理">¶</a>步骤 8 : 练习-异常处理</h3>
<p>假设有一个方法 public int method()， 会返回一个整数<br>
在这个方法中有try catch 和 finally.<br>
try 里返回 1<br>
catch 里 返回 2<br>
finally 里 返回3<br>
那么，这个方法到底返回多少？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">首先要记住一点 ： finally 中的代码 一定会执行</span><br><span class="line"></span><br><span class="line">先执行try中代码，如果try中代码没有异常且有返回值 ，先会执行 finally中代码 ，如果finally没有返回值，会回过头执行try的return;如果finally中有返回值。则直接返回。不会执行try中的return了；</span><br><span class="line"></span><br><span class="line">catch 同理；</span><br></pre></td></tr></table></figure>
<h2 id="3、JAVA-中异常的分类"><a class="header-anchor" href="#3、JAVA-中异常的分类">¶</a>3、JAVA 中异常的分类</h2>
<h3 id="步骤-1-可查异常"><a class="header-anchor" href="#步骤-1-可查异常">¶</a>步骤 1 : 可查异常</h3>
<p>可查异常： CheckedException<br>
可查异常即<strong>必须进行处理的异常</strong>，要么try catch住,要么往外抛，谁调用，谁处理，比如 FileNotFoundException<br>
如果不处理，编译器，就不让你通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line">  </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line">  </span><br><span class="line">public class TestException &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        File f&#x3D; new File(&quot;d:&#x2F;LOL.exe&quot;);</span><br><span class="line">          </span><br><span class="line">        try&#123;</span><br><span class="line">            System.out.println(&quot;试图打开 d:&#x2F;LOL.exe&quot;);</span><br><span class="line">            new FileInputStream(f);</span><br><span class="line">            System.out.println(&quot;成功打开&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        catch(FileNotFoundException e)&#123;</span><br><span class="line">            System.out.println(&quot;d:&#x2F;LOL.exe不存在&quot;);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-运行时异常"><a class="header-anchor" href="#步骤-2-运行时异常">¶</a>步骤 2 : 运行时异常</h3>
<p>运行时异常RuntimeException指： <strong>不是必须进行try catch的异常</strong><br>
<strong>常见运行时异常:</strong><br>
除数不能为0异常:ArithmeticException<br>
下标越界异常:ArrayIndexOutOfBoundsException<br>
空指针异常:NullPointerException<br>
在编写代码的时候，依然可以使用try catch throws进行处理，与可查异常不同之处在于，<strong>即便不进行try catch，也不会有编译错误</strong><br>
Java之所以会设计运行时异常的原因之一，是因为下标越界，空指针这些运行时异常<strong>太过于普遍</strong>，如果都需要进行捕捉，代码的可读性就会变得很糟糕。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line">  </span><br><span class="line">public class TestException &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;任何除数不能为0:ArithmeticException</span><br><span class="line">        int k &#x3D; 5&#x2F;0;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;下标越界异常：ArrayIndexOutOfBoundsException</span><br><span class="line">        int j[] &#x3D; new int[5];</span><br><span class="line">        j[10] &#x3D; 10;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;空指针异常：NullPointerException</span><br><span class="line">        String str &#x3D; null;</span><br><span class="line">        str.length();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-错误"><a class="header-anchor" href="#步骤-3-错误">¶</a>步骤 3 : 错误</h3>
<p>错误Error，指的是<strong>系统级别的异常</strong>，通常是内存用光了<br>
在<strong>默认设置下</strong>，一般java程序启动的时候，最大可以使用16m的内存<br>
如例不停的给StringBuffer追加字符，很快就把内存使用光了。抛出<strong>OutOfMemoryError</strong><br>
与运行时异常一样，错误也是不要求强制捕捉的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line">  </span><br><span class="line">public class TestException &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">     </span><br><span class="line">        StringBuffer sb &#x3D;new StringBuffer();</span><br><span class="line">         </span><br><span class="line">        for (int i &#x3D; 0; i &lt; Integer.MAX_VALUE; i++) &#123;</span><br><span class="line">            sb.append(&#39;a&#39;);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-三种分类"><a class="header-anchor" href="#步骤-4-三种分类">¶</a>步骤 4 : 三种分类</h3>
<p>总体上异常分三类：</p>
<ol>
<li>
<p>错误</p>
</li>
<li>
<p>运行时异常</p>
</li>
<li>
<p>可查异常</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2412.png" alt></p>
<h3 id="步骤-5-练习-异常分类"><a class="header-anchor" href="#步骤-5-练习-异常分类">¶</a>步骤 5 : 练习-异常分类</h3>
<p>运行时异常 RuntimeException，能否被捕捉？</p>
<p>错误Error，能否被捕捉？</p>
<p><strong>面试题常问题：</strong> 运行时异常与非运行时异常的区别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">运行时错误是RunTimeException类或其子类，一般是由程序逻辑问题引起的，如果不进行异常处理，线程或程序将在问题处中断（或main函数处中断）;  非运行错误是RuntimeException以外的异常，类型上都属于Exception类及其子类，java编辑器要求必须对这类异常进行处理</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RuntimeException如果使用try和catch异常可以被捕捉。 错误Error 不能够被捕捉 运行时异常与非运行时异常的区别 Throwable 是所有 Java 程序中错误处理的父类 ，有两种资类： Error 和 Exception 。   Error ：表示由 JVM 所侦测到的无法预期的错误，由于这是属于 JVM 层次的严重错误 ，导致 JVM 无法继续执行，因此，这是不可捕捉到的，无法采取任何恢复的操作，顶多只能显示错误信息。 Exception ：表示可恢复的例外，这是可捕捉到的。 Java 提供了两类主要的异常 :runtime exception 和 checked exception 。 checked 异常也就是我们经常遇到的 IO 异常，以及 SQL 异常都是这种异常。 对于这种异常， JAVA 编译器强制要求我们必需对出现的这些异常进行  catch 。所以，面对这种异常不管我们是否愿意，只能自己去写一大堆 catch 块去处理可能的异常。     但是另外一种异常： runtime exception ，也称运行时异常，我们可以不处理。当出现这样的异常时，总是由虚拟机 接管。比如：我们从来没有人去处理过 NullPointerException 异常，它就是运行时异常，并且这种异常还是最常见的异常之一。    出现运行时异常后，系统会把异常一直往上层抛，一直遇到处理代码。如果没有处理块，到最上层，如果是多线程就由 Thread.run() 抛出 ，如果是单线程就被 main() 抛出 。抛出之后，如果是线程，这个线程也就退出了。如果是主程序抛出的异常，那么这整个程序也就退出了。运行时异常是  Exception 的子类，也有一般异常的特点，是可以被 Catch  块处理的。只不过往往我们不对他处理罢了。也就是说，你如果不对运行时异常进行处理，那么出现运行时异常之后，要么是线程中止，要么是主程序终止。     如果不想终止，则必须扑捉所有的运行时异常，决不让这个处理线程退出。队列里面出现异常数据了，正常的处理应该是把异常数据舍弃，然后记录日志。不应该由于异常数据而影响下面对正常数据的处理。  在这个场景这样处理可能是一个比较好的应用，但并不代表在所有的场景你都应该如此。如果在其它场景，遇到了一些错误，如果退出程序比较好，这时你就可以不太理会运行时异常  ，或者是通过对异常的处理显式的控制程序退出。</span><br></pre></td></tr></table></figure>
<h2 id="4、JAVA-THROWABLE接口"><a class="header-anchor" href="#4、JAVA-THROWABLE接口">¶</a>4、JAVA THROWABLE接口</h2>
<h3 id="步骤-1-Throwable"><a class="header-anchor" href="#步骤-1-Throwable">¶</a>步骤 1 : Throwable</h3>
<p>Throwable是类，Exception和Error都继承了该类<br>
所以在捕捉的时候，也可以使用Throwable进行捕捉<br>
如图： 异常分<strong>Error</strong>和<strong>Exception</strong><br>
Exception里又分<strong>运行时异常</strong>和<strong>可查异常</strong>。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/742.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line"> </span><br><span class="line">public class TestException &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;LOL.exe&quot;);</span><br><span class="line"> </span><br><span class="line">        try &#123;</span><br><span class="line">            new FileInputStream(f);</span><br><span class="line">            &#x2F;&#x2F;使用Throwable进行异常捕捉</span><br><span class="line">        &#125; catch (Throwable t) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            t.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-Throwable"><a class="header-anchor" href="#步骤-2-练习-Throwable">¶</a>步骤 2 : 练习-Throwable</h3>
<p>在方法声明上，可以抛出指定的异常，比如FileNotFoundException<br>
那么能否抛出Throwable这个类？</p>
<p>这个方法的调用者又该如何处理？</p>
<p>可以抛出Throwable这个类，但catch的时候必须也是Throwable类型</p>
<h2 id="5、JAVA-自定义异常"><a class="header-anchor" href="#5、JAVA-自定义异常">¶</a>5、JAVA 自定义异常</h2>
<h3 id="示例-1-创建自定义异常"><a class="header-anchor" href="#示例-1-创建自定义异常">¶</a>示例 1 : 创建自定义异常</h3>
<p>一个英雄攻击另一个英雄的时候，如果发现另一个英雄已经挂了，就会抛出EnemyHeroIsDeadException<br>
创建一个类EnemyHeroIsDeadException，并继承Exception<br>
提供两个构造方法</p>
<ol>
<li>
<p>无参的构造方法</p>
</li>
<li>
<p>带参的构造方法，并调用父类的对应的构造方法</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class EnemyHeroIsDeadException extends Exception&#123;</span><br><span class="line">     </span><br><span class="line">    public EnemyHeroIsDeadException()&#123;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">    public EnemyHeroIsDeadException(String msg)&#123;</span><br><span class="line">        super(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-抛出自定义异常"><a class="header-anchor" href="#示例-2-抛出自定义异常">¶</a>示例 2 : 抛出自定义异常</h3>
<p>在Hero的attack方法中，当发现敌方英雄的血量为0的时候，抛出该异常</p>
<ol>
<li>
<p>创建一个EnemyHeroIsDeadException实例</p>
</li>
<li>
<p>通过<strong>throw</strong> 抛出该异常</p>
</li>
<li>
<p>当前方法通过 <strong>throws</strong> 抛出该异常</p>
</li>
</ol>
<p>在外部调用attack方法的时候，就需要进行捕捉，并且捕捉的时候，可以通过e.getMessage() 获取当时出错的具体原因</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/744.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">  </span><br><span class="line">public class Hero &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    protected float hp;</span><br><span class="line"> </span><br><span class="line">    public void attackHero(Hero h) throws EnemyHeroIsDeadException&#123;</span><br><span class="line">        if(h.hp &#x3D;&#x3D; 0)&#123;</span><br><span class="line">            throw new EnemyHeroIsDeadException(h.name + &quot; 已经挂了,不需要施放技能&quot; );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public String toString()&#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    class EnemyHeroIsDeadException extends Exception&#123;</span><br><span class="line">         </span><br><span class="line">        public EnemyHeroIsDeadException()&#123;</span><br><span class="line">             </span><br><span class="line">        &#125;</span><br><span class="line">        public EnemyHeroIsDeadException(String msg)&#123;</span><br><span class="line">            super(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        Hero garen &#x3D;  new Hero();</span><br><span class="line">        garen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        garen.hp &#x3D; 616;</span><br><span class="line"> </span><br><span class="line">        Hero teemo &#x3D;  new Hero();</span><br><span class="line">        teemo.name &#x3D; &quot;提莫&quot;;</span><br><span class="line">        teemo.hp &#x3D; 0;</span><br><span class="line">         </span><br><span class="line">        try &#123;</span><br><span class="line">            garen.attackHero(teemo);</span><br><span class="line">             </span><br><span class="line">        &#125; catch (EnemyHeroIsDeadException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            System.out.println(&quot;异常的具体原因:&quot;+e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-练习-自定义异常"><a class="header-anchor" href="#示例-3-练习-自定义异常">¶</a>示例 3 : 练习-自定义异常</h3>
<p>对[MyStringBuffer]的插入和删除方法中的边界条件判断，用抛出异常来解决<br>
例: insert(int pos, String b) , 当pos 是负数的时候，抛出<strong>自定义异常</strong><br>
需要实现自定义两种异常<br>
IndexIsNagetiveException 下标为负异常<br>
IndexIsOutofRangeException 下标超出范围异常<br>
以下是需要调用这些异常的场景：</p>
<p><code>pos&lt;0</code></p>
<p>抛出 IndexIsNagetiveException</p>
<p><code>pos&gt;length</code></p>
<p>抛出 IndexIsOutofRangeException</p>
<p><code>null==b</code></p>
<p>抛出 NullPointerException</p>
<p><code>start&lt;0</code></p>
<p>抛出 IndexIsNagetiveException</p>
<p><code>start&gt;length</code></p>
<p>抛出 IndexIsOutofRangeException</p>
<p><code>end&lt;0</code><br>
抛出 IndexIsNagetiveException</p>
<p><code>end&gt;length</code></p>
<p>抛出 IndexIsOutofRangeException</p>
<p><code>start&gt;=end</code></p>
<p>抛出 IndexIsOutofRangeException</p>
<p><strong>注意：</strong> 接口IStringBuffer中声明的方法需要抛出异常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">package test;</span><br><span class="line"> </span><br><span class="line">public class my  &#123;</span><br><span class="line"> </span><br><span class="line">    int capacity &#x3D; 16;</span><br><span class="line">    int length &#x3D; 0;</span><br><span class="line">    char[] value;</span><br><span class="line"> </span><br><span class="line">    public my() &#123;</span><br><span class="line">        value &#x3D; new char[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 有参构造方法</span><br><span class="line">    public my(String str) &#123;</span><br><span class="line">        this();</span><br><span class="line">        if (null &#x3D;&#x3D; str)</span><br><span class="line">            return;</span><br><span class="line"> </span><br><span class="line">        if (capacity &lt; str.length()) &#123;</span><br><span class="line">            capacity &#x3D; value.length * 2;</span><br><span class="line">            value &#x3D; new char[capacity];</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        if (capacity &gt;&#x3D; str.length())</span><br><span class="line">            System.arraycopy(str.toCharArray(), 0, value, 0, str.length());</span><br><span class="line"> </span><br><span class="line">        length &#x3D; str.length();</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line">    public void append(String str) throws IndexIsNagetiveException,IndexIsOutofRangeException&#123;</span><br><span class="line"> </span><br><span class="line">        insert(length, str);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line">    public void append(char c) throws IndexIsNagetiveException,IndexIsOutofRangeException&#123;</span><br><span class="line">        append(String.valueOf(c));</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line">    public void insert(int pos, char b) throws IndexIsNagetiveException,IndexIsOutofRangeException&#123;</span><br><span class="line">        insert(pos, String.valueOf(b));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line">    public void delete(int start) throws IndexIsNagetiveException,IndexIsOutofRangeException&#123;</span><br><span class="line"> </span><br><span class="line">        delete(start, length);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line">    public void delete(int start, int end) throws IndexIsNagetiveException,IndexIsOutofRangeException&#123;</span><br><span class="line">        &#x2F;&#x2F; 边界条件判断</span><br><span class="line">        if (start &lt; 0)</span><br><span class="line">            throw new IndexIsNagetiveException(&quot;下标为负异常&quot;);</span><br><span class="line"> </span><br><span class="line">        if (start &gt; length)</span><br><span class="line">            throw new IndexIsOutofRangeException(&quot;下标超出范围&quot;);</span><br><span class="line"> </span><br><span class="line">        if (end &lt; 0)</span><br><span class="line">            throw new IndexIsNagetiveException(&quot;下标为负异常&quot;);</span><br><span class="line"> </span><br><span class="line">        if (end &gt; length)</span><br><span class="line">            throw new IndexIsOutofRangeException(&quot;下标超出范围&quot;);</span><br><span class="line"> </span><br><span class="line">        if (start &gt;&#x3D; end)</span><br><span class="line">            throw new IndexIsOutofRangeException(&quot;下标超出范围&quot;);</span><br><span class="line"> </span><br><span class="line">        System.arraycopy(value, end, value, start, length - end);</span><br><span class="line">        length -&#x3D; end - start;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    public void reverse() &#123;</span><br><span class="line"> </span><br><span class="line">        for (int i &#x3D; 0; i &lt; length &#x2F; 2; i++) &#123;</span><br><span class="line">            char temp &#x3D; value[i];</span><br><span class="line">            value[i] &#x3D; value[length - i - 1];</span><br><span class="line">            value[length - i - 1] &#x3D; temp;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    public int length() &#123;</span><br><span class="line">        return length;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line">    public void insert(int pos, String b) throws IndexIsNagetiveException,IndexIsOutofRangeException&#123;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 边界条件判断</span><br><span class="line">        if (pos &lt; 0)</span><br><span class="line">            throw new IndexIsNagetiveException(&quot;下标为负异常&quot;);</span><br><span class="line"> </span><br><span class="line">        if (pos &gt; length)</span><br><span class="line">            throw new IndexIsOutofRangeException(&quot;下标超出范围&quot;);</span><br><span class="line"> </span><br><span class="line">         </span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 扩容</span><br><span class="line">        while (length + b.length() &gt; capacity) &#123;</span><br><span class="line">            capacity &#x3D; (int) ((length + b.length()) * 1.5f);</span><br><span class="line">            char[] newValue &#x3D; new char[capacity];</span><br><span class="line">            System.arraycopy(value, 0, newValue, 0, length);</span><br><span class="line">            value &#x3D; newValue;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        char[] cs &#x3D; b.toCharArray();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 先把已经存在的数据往后移</span><br><span class="line"> </span><br><span class="line">        System.arraycopy(value, pos, value, pos + cs.length, length - pos);</span><br><span class="line">        &#x2F;&#x2F; 把要插入的数据插入到指定位置</span><br><span class="line">        System.arraycopy(cs, 0, value, pos, cs.length);</span><br><span class="line"> </span><br><span class="line">        length &#x3D; length + cs.length;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public String toString() &#123;</span><br><span class="line"> </span><br><span class="line">        char[] realValue &#x3D; new char[length];</span><br><span class="line"> </span><br><span class="line">        System.arraycopy(value, 0, realValue, 0, length);</span><br><span class="line"> </span><br><span class="line">        return new String(realValue);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 下标超出范围异常</span><br><span class="line">    public class IndexIsOutofRangeException extends Exception &#123;</span><br><span class="line">        public IndexIsOutofRangeException() &#123;</span><br><span class="line">        &#125;;</span><br><span class="line"> </span><br><span class="line">        public IndexIsOutofRangeException(String s) &#123;</span><br><span class="line">            super(s);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 下标为负异常</span><br><span class="line">    public class IndexIsNagetiveException extends Exception &#123;</span><br><span class="line">        public IndexIsNagetiveException() &#123;</span><br><span class="line">        &#125;;</span><br><span class="line"> </span><br><span class="line">        public IndexIsNagetiveException(String s) &#123;</span><br><span class="line">            super(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        my sb &#x3D; new my(&quot;there light&quot;);</span><br><span class="line">        System.out.println(sb);</span><br><span class="line">        try &#123;</span><br><span class="line">            sb.insert(1, &quot;let&quot;);</span><br><span class="line">            sb.delete(1,3);</span><br><span class="line">        &#125; catch (IndexIsOutofRangeException | IndexIsNagetiveException e ) &#123;</span><br><span class="line">            if (e instanceof IndexIsOutofRangeException)</span><br><span class="line">                System.out.println(&quot;下标超出范围异常&quot;);</span><br><span class="line">            if (e instanceof IndexIsNagetiveException)</span><br><span class="line">                System.out.println(&quot;下标为负异常&quot;);</span><br><span class="line">             System.out.println(&quot;异常的具体原因:&quot;+e.getMessage());</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6、JAVA-异常综合练习题"><a class="header-anchor" href="#6、JAVA-异常综合练习题">¶</a>6、JAVA 异常综合练习题</h2>
<h3 id="步骤-1-练习-异常综合1"><a class="header-anchor" href="#步骤-1-练习-异常综合1">¶</a>步骤 1 : 练习-异常综合1</h3>
<p>这是一个类图<br>
Account类： 银行账号<br>
属性： balance 余额<br>
方法： getBalance() 获取余额<br>
方法： deposit() 存钱<br>
方法： withdraw() 取钱<br>
OverdraftException： 透支异常，继承Exception<br>
属性： deficit 透支额</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/745.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line"></span><br><span class="line">public class Account &#123;</span><br><span class="line">    protected double balance;</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">    public Account(double balance) &#123;</span><br><span class="line">        this.balance &#x3D; balance;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">    public void deposit(double amt) &#123;</span><br><span class="line">        this.balance +&#x3D;amt;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">    public void withdraw(double amt) throws OverDraftException&#123;</span><br><span class="line">        if(balance&lt;amt) &#123;</span><br><span class="line">            throw new OverDraftException(&quot;余额不足&quot;,amt-this.balance);</span><br><span class="line">        &#125;</span><br><span class="line">        this.balance -&#x3D; amt;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">    public double getBalance() &#123;</span><br><span class="line">        return balance;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;开户存了1000</span><br><span class="line">        Account a &#x3D; new Account(1000);</span><br><span class="line">        &#x2F;&#x2F;存钱1000</span><br><span class="line">        a.deposit(1000);</span><br><span class="line">        &#x2F;&#x2F;查看余额</span><br><span class="line">        System.out.println(a.getBalance());</span><br><span class="line">            </span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;取2001</span><br><span class="line">            a.withdraw(2001);</span><br><span class="line">        &#125; catch (OverDraftException e) &#123;</span><br><span class="line">            System.err.println(&quot;透支金额：&quot;+e.getDeficit());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-异常综合2"><a class="header-anchor" href="#步骤-2-练习-异常综合2">¶</a>步骤 2 : 练习-异常综合2</h3>
<p>类： CheckingAccount 支票账户，具备透支额度，继承Account<br>
属性：overdraftProtection 透支额度</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/746.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package exception;</span><br><span class="line"></span><br><span class="line">public class CheckingAccount extends Account &#123;</span><br><span class="line">	private double overdraftProtection;</span><br><span class="line"></span><br><span class="line">	public CheckingAccount(double balance) &#123;</span><br><span class="line">		super(balance);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public CheckingAccount(double balance, double protect) &#123;</span><br><span class="line">		super(balance);</span><br><span class="line">		overdraftProtection &#x3D; protect;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public double getOverdraftProtection() &#123; &#x2F;&#x2F;添加的方法获得透支额度</span><br><span class="line">		return overdraftProtection;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void withdraw(double take) throws OverDraftException &#123;</span><br><span class="line">		if (this.balance + overdraftProtection &lt; take) &#123;</span><br><span class="line">			throw new OverDraftException(&quot;余额不足&quot;, take - (overdraftProtection + this.balance));</span><br><span class="line">		&#125;</span><br><span class="line">		if (this.balance &gt;&#x3D; take) &#123; &#x2F;&#x2F; 如果本金够就先扣本金的</span><br><span class="line">			this.balance -&#x3D; take;</span><br><span class="line">		&#125; else if (balance &lt; take) &#123; &#x2F;&#x2F;如果本金不够 就先得出差数 然后本金归零 透支的额度减去差数就好</span><br><span class="line">			overdraftProtection -&#x3D; (take - balance);</span><br><span class="line">			balance &#x3D; 0;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		CheckingAccount a &#x3D; new CheckingAccount(1000, 500);</span><br><span class="line">		try &#123;</span><br><span class="line">			a.withdraw(10);</span><br><span class="line">		&#125; catch (OverDraftException e) &#123;</span><br><span class="line">			System.out.println(&quot;超出金额为：&quot;+e.getDeficit());</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			System.out.println(&quot;本金余额为：&quot; + a.getBalance());</span><br><span class="line">			System.out.println(&quot;透支余额为：&quot; + a.getOverdraftProtection());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="二、I-O"><a class="header-anchor" href="#二、I-O">¶</a>二、I/O</h1>
<h2 id="1、JAVA-的FILE类，以及常用方法"><a class="header-anchor" href="#1、JAVA-的FILE类，以及常用方法">¶</a>1、JAVA 的FILE类，以及常用方法</h2>
<h3 id="步骤-1-创建一个文件对象"><a class="header-anchor" href="#步骤-1-创建一个文件对象">¶</a>步骤 1 : 创建一个文件对象</h3>
<p>使用绝对路径或者相对路径创建File对象</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/756.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> file;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFile</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 绝对路径</span></span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"d:/LOLFolder"</span>);</span><br><span class="line">        System.out.println(<span class="string">"f1的绝对路径："</span> + f1.getAbsolutePath());</span><br><span class="line">        <span class="comment">// 相对路径,相对于工作目录，如果在eclipse中，就是项目目录</span></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"LOL.exe"</span>);</span><br><span class="line">        System.out.println(<span class="string">"f2的绝对路径："</span> + f2.getAbsolutePath());</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 把f1作为父目录创建文件对象</span></span><br><span class="line">        File f3 = <span class="keyword">new</span> File(f1, <span class="string">"LOL.exe"</span>);</span><br><span class="line">  </span><br><span class="line">        System.out.println(<span class="string">"f3的绝对路径："</span> + f3.getAbsolutePath());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-文件常用方法1"><a class="header-anchor" href="#步骤-2-文件常用方法1">¶</a>步骤 2 : 文件常用方法1</h3>
<p><strong>注意1：</strong> 需要在D:\LOLFolder确实存在一个LOL.exe,才可以看到对应的文件长度、修改时间等信息</p>
<p><strong>注意2： renameTo  方法用于对物理文件名称进行修改，但是并不会修改File对象的name属性。</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/757.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> file;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFile</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"d:/LOLFolder/LOL.exe"</span>);</span><br><span class="line">        System.out.println(<span class="string">"当前文件是："</span> +f);</span><br><span class="line">        <span class="comment">//文件是否存在</span></span><br><span class="line">        System.out.println(<span class="string">"判断是否存在："</span>+f.exists());</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//是否是文件夹</span></span><br><span class="line">        System.out.println(<span class="string">"判断是否是文件夹："</span>+f.isDirectory());</span><br><span class="line">          </span><br><span class="line">        <span class="comment">//是否是文件（非文件夹）</span></span><br><span class="line">        System.out.println(<span class="string">"判断是否是文件："</span>+f.isFile());</span><br><span class="line">          </span><br><span class="line">        <span class="comment">//文件长度</span></span><br><span class="line">        System.out.println(<span class="string">"获取文件的长度："</span>+f.length());</span><br><span class="line">          </span><br><span class="line">        <span class="comment">//文件最后修改时间</span></span><br><span class="line">        <span class="keyword">long</span> time = f.lastModified();</span><br><span class="line">        Date d = <span class="keyword">new</span> Date(time);</span><br><span class="line">        System.out.println(<span class="string">"获取文件的最后修改时间："</span>+d);</span><br><span class="line">        <span class="comment">//设置文件修改时间为1970.1.1 08:00:00</span></span><br><span class="line">        f.setLastModified(<span class="number">0</span>);</span><br><span class="line">          </span><br><span class="line">        <span class="comment">//文件重命名</span></span><br><span class="line">        File f2 =<span class="keyword">new</span> File(<span class="string">"d:/LOLFolder/DOTA.exe"</span>);</span><br><span class="line">        f.renameTo(f2);</span><br><span class="line">        System.out.println(<span class="string">"把LOL.exe改名成了DOTA.exe"</span>);</span><br><span class="line">         </span><br><span class="line">        System.out.println(<span class="string">"注意： 需要在D:\\LOLFolder确实存在一个LOL.exe,\r\n才可以看到对应的文件长度、修改时间等信息"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-文件常用方法2"><a class="header-anchor" href="#步骤-3-文件常用方法2">¶</a>步骤 3 : 文件常用方法2</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> file;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFile</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">  </span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"d:/LOLFolder/skin/garen.ski"</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 以字符串数组的形式，返回当前文件夹下的所有文件（不包含子文件及子文件夹）</span></span><br><span class="line">        f.list();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 以文件数组的形式，返回当前文件夹下的所有文件（不包含子文件及子文件夹）</span></span><br><span class="line">        File[]fs= f.listFiles();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 以字符串形式返回获取所在文件夹</span></span><br><span class="line">        f.getParent();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 以文件形式返回获取所在文件夹</span></span><br><span class="line">        f.getParentFile();</span><br><span class="line">        <span class="comment">// 创建文件夹，如果父文件夹skin不存在，创建就无效</span></span><br><span class="line">        f.mkdir();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 创建文件夹，如果父文件夹skin不存在，就会创建父文件夹</span></span><br><span class="line">        f.mkdirs();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 创建一个空文件,如果父文件夹skin不存在，就会抛出异常</span></span><br><span class="line">        f.createNewFile();</span><br><span class="line">        <span class="comment">// 所以创建一个空文件之前，通常都会创建父目录</span></span><br><span class="line">        f.getParentFile().mkdirs();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 列出所有的盘符c: d: e: 等等</span></span><br><span class="line">        f.listRoots();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 刪除文件</span></span><br><span class="line">        f.delete();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// JVM结束的时候，刪除文件，常用于临时文件的删除</span></span><br><span class="line">        f.deleteOnExit();</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-遍历文件夹"><a class="header-anchor" href="#步骤-4-练习-遍历文件夹">¶</a>步骤 4 : 练习-遍历文件夹</h3>
<p>一般说来操作系统都会安装在C盘，所以会有一个 C:\WINDOWS目录。</p>
<p>遍历这个目录下所有的文件(不用遍历子目录)</p>
<p>找出这些文件里，最大的和最小(非0)的那个文件，打印出他们的文件名</p>
<p><strong>注:</strong> 最小的文件不能是0长度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> file;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">File_BianLi_C_WINDOWS</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"C:/Windows"</span>);</span><br><span class="line">        File[] fs = f.listFiles();</span><br><span class="line">        File maxFile = <span class="keyword">null</span>;</span><br><span class="line">        File minFile = <span class="keyword">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(File f1 : fs) &#123;</span><br><span class="line">        	System.out.println(f1);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (File ff : fs) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ff.length() != <span class="number">0</span>)&#123;</span><br><span class="line">                maxFile = ff;</span><br><span class="line">                minFile = ff;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (File ff : fs) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ff.length() != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ff.length() &gt; maxFile.length()) &#123;</span><br><span class="line">                    maxFile = ff;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (ff.length() &lt; minFile.length()) &#123;</span><br><span class="line">                    minFile = ff;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        System.out.println(<span class="string">"最大文件是："</span> + maxFile.getAbsolutePath() + <span class="string">",大小为："</span> + maxFile.length() + <span class="string">"字节"</span>);</span><br><span class="line">        System.out.println(<span class="string">"最小文件是："</span> + minFile.getAbsolutePath() + <span class="string">",大小为："</span> + minFile.length() + <span class="string">"字节"</span>);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-遍历子文件夹"><a class="header-anchor" href="#步骤-5-练习-遍历子文件夹">¶</a>步骤 5 : 练习-遍历子文件夹</h3>
<p>同上的练习，要求遍历子文件夹</p>
<h2 id="2、什么JAVA-的流-STREAM？"><a class="header-anchor" href="#2、什么JAVA-的流-STREAM？">¶</a>2、什么JAVA 的流 STREAM？</h2>
<h3 id="步骤-1-什么是流"><a class="header-anchor" href="#步骤-1-什么是流">¶</a>步骤 1 : 什么是流</h3>
<p>当不同的介质之间有数据交互的时候，JAVA就使用流来实现。<br>
数据源可以是文件，还可以是数据库，网络甚至是其他的程序</p>
<p>比如读取文件的数据到程序中，站在程序的角度来看，就叫做输入流<br>
输入流： InputStream<br>
输出流：OutputStream</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/759.png" alt></p>
<h3 id="步骤-2-文件输入流"><a class="header-anchor" href="#步骤-2-文件输入流">¶</a>步骤 2 : 文件输入流</h3>
<p>如下代码，就建立了一个文件输入流，这个流可以用来把数据从硬盘的文件，读取到JVM(内存)。</p>
<p>目前代码只是建立了流，还没有开始读取，真正的读取在下个章节讲解。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> stream;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            File f = <span class="keyword">new</span> File(<span class="string">"d:/lol.txt"</span>);</span><br><span class="line">            <span class="comment">// 创建基于文件的输入流</span></span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line">            <span class="comment">// 通过这个输入流，就可以把数据从硬盘，读取到Java的虚拟机中来，也就是读取到内存中</span></span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-流"><a class="header-anchor" href="#步骤-3-练习-流">¶</a>步骤 3 : 练习-流</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            File f = <span class="keyword">new</span> File(<span class="string">"f:/lol.txt"</span>);</span><br><span class="line">            <span class="comment">//创建基于文件的输出流</span></span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(f);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、JAVA-字节流-INPUTSTREAM-OUTPUTSTREAM"><a class="header-anchor" href="#3、JAVA-字节流-INPUTSTREAM-OUTPUTSTREAM">¶</a>3、JAVA 字节流 INPUTSTREAM OUTPUTSTREAM</h2>
<h3 id="步骤-1-ASCII码-概念"><a class="header-anchor" href="#步骤-1-ASCII码-概念">¶</a>步骤 1 : ASCII码 概念</h3>
<p>所有的数据存放在计算机中都是以数字的形式存放的。 所以<strong>字母就需要转换为数字才能够存放</strong>。<br>
比如A就对应的数字65，a对应的数字97. 不同的字母和符号对应不同的数字，就是一张码表。<br>
ASCII是这样的一种码表。 只<strong>包含简单的英文字母</strong>，符号，数字等等。 <strong>不包含中文，德文，俄语等复杂</strong>的。</p>
<p>示例中列出了可见的ASCII码以及对应的十进制和十六进制数字，不可见的暂未列出</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>十进制数字</th>
<th>十六进制数字</th>
</tr>
</thead>
<tbody>
<tr>
<td>!</td>
<td>33</td>
<td>21</td>
</tr>
<tr>
<td>&quot;</td>
<td>34</td>
<td>22</td>
</tr>
<tr>
<td>#</td>
<td>35</td>
<td>23</td>
</tr>
<tr>
<td>$</td>
<td>36</td>
<td>24</td>
</tr>
<tr>
<td>%</td>
<td>37</td>
<td>25</td>
</tr>
<tr>
<td>&amp;</td>
<td>38</td>
<td>26</td>
</tr>
<tr>
<td>’</td>
<td>39</td>
<td>27</td>
</tr>
<tr>
<td>(</td>
<td>40</td>
<td>28</td>
</tr>
<tr>
<td>)</td>
<td>41</td>
<td>29</td>
</tr>
<tr>
<td>*</td>
<td>42</td>
<td>2A</td>
</tr>
<tr>
<td>+</td>
<td>43</td>
<td>2B</td>
</tr>
<tr>
<td>,</td>
<td>44</td>
<td>2C</td>
</tr>
<tr>
<td>-</td>
<td>45</td>
<td>2D</td>
</tr>
<tr>
<td>.</td>
<td>46</td>
<td>2E</td>
</tr>
<tr>
<td>/</td>
<td>47</td>
<td>2F</td>
</tr>
<tr>
<td>0</td>
<td>48</td>
<td>30</td>
</tr>
<tr>
<td>1</td>
<td>49</td>
<td>31</td>
</tr>
<tr>
<td>2</td>
<td>50</td>
<td>32</td>
</tr>
<tr>
<td>3</td>
<td>51</td>
<td>33</td>
</tr>
<tr>
<td>4</td>
<td>52</td>
<td>34</td>
</tr>
<tr>
<td>5</td>
<td>53</td>
<td>35</td>
</tr>
<tr>
<td>6</td>
<td>54</td>
<td>36</td>
</tr>
<tr>
<td>7</td>
<td>55</td>
<td>37</td>
</tr>
<tr>
<td>8</td>
<td>56</td>
<td>38</td>
</tr>
<tr>
<td>9</td>
<td>57</td>
<td>39</td>
</tr>
<tr>
<td>:</td>
<td>58</td>
<td>3A</td>
</tr>
<tr>
<td>;</td>
<td>59</td>
<td>3B</td>
</tr>
<tr>
<td>&lt;</td>
<td>60</td>
<td>3C</td>
</tr>
<tr>
<td>=</td>
<td>61</td>
<td>3D</td>
</tr>
<tr>
<td>&gt;</td>
<td>62</td>
<td>3E</td>
</tr>
<tr>
<td>@</td>
<td>64</td>
<td>40</td>
</tr>
<tr>
<td>A</td>
<td>65</td>
<td>41</td>
</tr>
<tr>
<td>B</td>
<td>66</td>
<td>42</td>
</tr>
<tr>
<td>C</td>
<td>67</td>
<td>43</td>
</tr>
<tr>
<td>D</td>
<td>68</td>
<td>44</td>
</tr>
<tr>
<td>E</td>
<td>69</td>
<td>45</td>
</tr>
<tr>
<td>F</td>
<td>70</td>
<td>46</td>
</tr>
<tr>
<td>G</td>
<td>71</td>
<td>47</td>
</tr>
<tr>
<td>H</td>
<td>72</td>
<td>48</td>
</tr>
<tr>
<td>I</td>
<td>73</td>
<td>49</td>
</tr>
<tr>
<td>J</td>
<td>74</td>
<td>4A</td>
</tr>
<tr>
<td>K</td>
<td>75</td>
<td>4B</td>
</tr>
<tr>
<td>L</td>
<td>76</td>
<td>4C</td>
</tr>
<tr>
<td>M</td>
<td>77</td>
<td>4D</td>
</tr>
<tr>
<td>N</td>
<td>78</td>
<td>4E</td>
</tr>
<tr>
<td>O</td>
<td>79</td>
<td>4F</td>
</tr>
<tr>
<td>P</td>
<td>80</td>
<td>50</td>
</tr>
<tr>
<td>Q</td>
<td>81</td>
<td>51</td>
</tr>
<tr>
<td>R</td>
<td>82</td>
<td>52</td>
</tr>
<tr>
<td>S</td>
<td>83</td>
<td>53</td>
</tr>
<tr>
<td>T</td>
<td>84</td>
<td>54</td>
</tr>
<tr>
<td>U</td>
<td>85</td>
<td>55</td>
</tr>
<tr>
<td>V</td>
<td>86</td>
<td>56</td>
</tr>
<tr>
<td>W</td>
<td>87</td>
<td>57</td>
</tr>
<tr>
<td>X</td>
<td>88</td>
<td>58</td>
</tr>
<tr>
<td>Y</td>
<td>89</td>
<td>59</td>
</tr>
<tr>
<td>Z</td>
<td>90</td>
<td>5A</td>
</tr>
<tr>
<td>[</td>
<td>91</td>
<td>5B</td>
</tr>
<tr>
<td>\</td>
<td>92</td>
<td>5C</td>
</tr>
<tr>
<td>]</td>
<td>93</td>
<td>5D</td>
</tr>
<tr>
<td>^</td>
<td>94</td>
<td>5E</td>
</tr>
<tr>
<td>_</td>
<td>95</td>
<td>5F</td>
</tr>
<tr>
<td>`</td>
<td>96</td>
<td>60</td>
</tr>
<tr>
<td>a</td>
<td>97</td>
<td>61</td>
</tr>
<tr>
<td>b</td>
<td>98</td>
<td>62</td>
</tr>
<tr>
<td>c</td>
<td>99</td>
<td>63</td>
</tr>
<tr>
<td>d</td>
<td>100</td>
<td>64</td>
</tr>
<tr>
<td>e</td>
<td>101</td>
<td>65</td>
</tr>
<tr>
<td>f</td>
<td>102</td>
<td>66</td>
</tr>
<tr>
<td>g</td>
<td>103</td>
<td>67</td>
</tr>
<tr>
<td>h</td>
<td>104</td>
<td>68</td>
</tr>
<tr>
<td>i</td>
<td>105</td>
<td>69</td>
</tr>
<tr>
<td>j</td>
<td>106</td>
<td>6A</td>
</tr>
<tr>
<td>k</td>
<td>107</td>
<td>6B</td>
</tr>
<tr>
<td>l</td>
<td>108</td>
<td>6C</td>
</tr>
<tr>
<td>m</td>
<td>109</td>
<td>6D</td>
</tr>
<tr>
<td>n</td>
<td>110</td>
<td>6E</td>
</tr>
<tr>
<td>o</td>
<td>111</td>
<td>6F</td>
</tr>
<tr>
<td>p</td>
<td>112</td>
<td>70</td>
</tr>
<tr>
<td>q</td>
<td>113</td>
<td>71</td>
</tr>
<tr>
<td>r</td>
<td>114</td>
<td>72</td>
</tr>
<tr>
<td>s</td>
<td>115</td>
<td>73</td>
</tr>
<tr>
<td>t</td>
<td>116</td>
<td>74</td>
</tr>
<tr>
<td>u</td>
<td>117</td>
<td>75</td>
</tr>
<tr>
<td>v</td>
<td>118</td>
<td>76</td>
</tr>
<tr>
<td>w</td>
<td>119</td>
<td>77</td>
</tr>
<tr>
<td>x</td>
<td>120</td>
<td>78</td>
</tr>
<tr>
<td>y</td>
<td>121</td>
<td>79</td>
</tr>
<tr>
<td>z</td>
<td>122</td>
<td>7A</td>
</tr>
<tr>
<td>{</td>
<td>123</td>
<td>7B</td>
</tr>
<tr>
<td>|</td>
<td>124</td>
<td>7C</td>
</tr>
<tr>
<td>}</td>
<td>125</td>
<td>7D</td>
</tr>
<tr>
<td>~</td>
<td>126</td>
<td>7E</td>
</tr>
</tbody>
</table>
<h3 id="步骤-2-以字节流的形式读取文件内容"><a class="header-anchor" href="#步骤-2-以字节流的形式读取文件内容">¶</a>步骤 2 : 以字节流的形式读取文件内容</h3>
<p>InputStream是字节输入流，同时也是抽象类，只提供方法声明，不提供方法的具体实现。<br>
FileInputStream 是InputStream子类，以FileInputStream 为例进行文件读取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> stream;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//准备文件lol.txt其中的内容是AB，对应的ASCII分别是65 66</span></span><br><span class="line">            File f =<span class="keyword">new</span> File(<span class="string">"d:/lol.txt"</span>);</span><br><span class="line">            <span class="comment">//创建基于文件的输入流</span></span><br><span class="line">            FileInputStream fis =<span class="keyword">new</span> FileInputStream(f);</span><br><span class="line">            <span class="comment">//创建字节数组，其长度就是文件的长度</span></span><br><span class="line">            <span class="keyword">byte</span>[] all =<span class="keyword">new</span> <span class="keyword">byte</span>[(<span class="keyword">int</span>) f.length()];</span><br><span class="line">            <span class="comment">//以字节流的形式读取文件所有内容</span></span><br><span class="line">            fis.read(all);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">byte</span> b : all) &#123;</span><br><span class="line">                <span class="comment">//打印出来是65 66</span></span><br><span class="line">                System.out.println(b);</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">            <span class="comment">//每次使用完流，都应该进行关闭</span></span><br><span class="line">            fis.close();</span><br><span class="line">              </span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-以字节流的形式向文件写入数据"><a class="header-anchor" href="#步骤-3-以字节流的形式向文件写入数据">¶</a>步骤 3 : 以字节流的形式向文件写入数据</h3>
<p>OutputStream是字节输出流，同时也是抽象类，只提供方法声明，不提供方法的具体实现。<br>
FileOutputStream 是OutputStream子类，以FileOutputStream 为例向文件写出数据</p>
<p>注: 如果文件d:/lol2.txt不存在，写出操作会自动创建该文件。<br>
但是如果是文件 d:/xyz/lol2.txt，而目录xyz又不存在，会抛出异常</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2414.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> stream;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 准备文件lol2.txt其中的内容是空的</span></span><br><span class="line">            File f = <span class="keyword">new</span> File(<span class="string">"d:/lol2.txt"</span>);</span><br><span class="line">            <span class="comment">// 准备长度是2的字节数组，用88,89初始化，其对应的字符分别是X,Y</span></span><br><span class="line">            <span class="keyword">byte</span> data[] = &#123; <span class="number">88</span>, <span class="number">89</span> &#125;;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// 创建基于文件的输出流</span></span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(f);</span><br><span class="line">            <span class="comment">// 把数据写入到输出流</span></span><br><span class="line">            fos.write(data);</span><br><span class="line">            <span class="comment">// 关闭输出流</span></span><br><span class="line">            fos.close();</span><br><span class="line">             </span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-写入数据到文件"><a class="header-anchor" href="#步骤-4-练习-写入数据到文件">¶</a>步骤 4 : 练习-写入数据到文件</h3>
<p>[以字节流的形式向文件写入数据] 中的例子，当lol2.txt不存在的时候，是会自动创建lol2.txt文件的。<br>
但是，如果是写入数据到d:/xyz/lol2.txt，而目录xyz又不存在的话，就会抛出异常。<br>
那么怎么自动创建xyz目录？<br>
如果是多层目录 d:/xyz/abc/def/lol2.txt 呢？</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2415.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> stream;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//准备文件lol.txt其中的内容是空的</span></span><br><span class="line">			File f=<span class="keyword">new</span> File(<span class="string">"D:/xyz/lol.txt"</span>);</span><br><span class="line">			<span class="comment">//获得父目录生成文件夹</span></span><br><span class="line">			f.getParentFile().mkdirs();</span><br><span class="line">			<span class="comment">//准备长度是5的数组，用65,66,90,91,92</span></span><br><span class="line">			<span class="keyword">byte</span>[] b=&#123;<span class="number">65</span>,<span class="number">66</span>,<span class="number">90</span>,<span class="number">91</span>,<span class="number">92</span>&#125;;</span><br><span class="line">			<span class="comment">//创建基于文件的输出流</span></span><br><span class="line">			FileOutputStream fos=<span class="keyword">new</span> FileOutputStream(f);</span><br><span class="line">			<span class="comment">//把数据写入到输出流</span></span><br><span class="line">			fos.write(b);</span><br><span class="line">			<span class="comment">//关闭输出流</span></span><br><span class="line">			fos.close();</span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-拆分文件"><a class="header-anchor" href="#步骤-5-练习-拆分文件">¶</a>步骤 5 : 练习-拆分文件</h3>
<p>找到一个大于100k的文件，按照100k为单位，拆分成多个子文件，并且以编号作为文件名结束。<br>
比如文件 eclipse.exe，大小是309k。<br>
拆分之后，成为<br>
eclipse.exe-0<br>
eclipse.exe-1<br>
eclipse.exe-2<br>
eclipse.exe-3</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2417.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> stream;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> eachSize = <span class="number">100</span> * <span class="number">1024</span>; <span class="comment">// 100k</span></span><br><span class="line">        File srcFile = <span class="keyword">new</span> File(<span class="string">"d:/eclipse.exe"</span>);</span><br><span class="line">        splitFile(srcFile, eachSize);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 拆分的思路，先把源文件的所有内容读取到内存中，然后从内存中挨个分到子文件里</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> srcFile 要拆分的源文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> eachSize 按照这个大小，拆分</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">splitFile</span><span class="params">(File srcFile, <span class="keyword">int</span> eachSize)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> == srcFile.length())</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"文件长度为0，不可拆分"</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">byte</span>[] fileContent = <span class="keyword">new</span> <span class="keyword">byte</span>[(<span class="keyword">int</span>) srcFile.length()];</span><br><span class="line">        <span class="comment">// 先把文件读取到数组中</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(srcFile);</span><br><span class="line">            fis.read(fileContent);</span><br><span class="line">            fis.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 计算需要被划分成多少份子文件</span></span><br><span class="line">        <span class="keyword">int</span> fileNumber;</span><br><span class="line">        <span class="comment">// 文件是否能被整除得到的子文件个数是不一样的</span></span><br><span class="line">        <span class="comment">// (假设文件长度是25，每份的大小是5，那么就应该是5个)</span></span><br><span class="line">        <span class="comment">// (假设文件长度是26，每份的大小是5，那么就应该是6个)</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> == fileContent.length % eachSize)</span><br><span class="line">            fileNumber = (<span class="keyword">int</span>) (fileContent.length / eachSize);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            fileNumber = (<span class="keyword">int</span>) (fileContent.length / eachSize) + <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; fileNumber; i++) &#123;</span><br><span class="line">            String eachFileName = srcFile.getName() + <span class="string">"-"</span> + i;</span><br><span class="line">            File eachFile = <span class="keyword">new</span> File(srcFile.getParent(), eachFileName);</span><br><span class="line">            <span class="keyword">byte</span>[] eachContent;</span><br><span class="line">  </span><br><span class="line">            <span class="comment">// 从源文件的内容里，复制部分数据到子文件</span></span><br><span class="line">            <span class="comment">// 除开最后一个文件，其他文件大小都是100k</span></span><br><span class="line">            <span class="comment">// 最后一个文件的大小是剩余的</span></span><br><span class="line">            <span class="keyword">if</span> (i != fileNumber - <span class="number">1</span>) <span class="comment">// 不是最后一个</span></span><br><span class="line">                eachContent = Arrays.copyOfRange(fileContent, eachSize * i, eachSize * (i + <span class="number">1</span>));</span><br><span class="line">            <span class="keyword">else</span> <span class="comment">// 最后一个</span></span><br><span class="line">                eachContent = Arrays.copyOfRange(fileContent, eachSize * i, fileContent.length);</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// 写出去</span></span><br><span class="line">                FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(eachFile);</span><br><span class="line">                fos.write(eachContent);</span><br><span class="line">                <span class="comment">// 记得关闭</span></span><br><span class="line">                fos.close();</span><br><span class="line">                System.out.printf(<span class="string">"输出子文件%s，其大小是 %d字节%n"</span>, eachFile.getAbsoluteFile(), eachFile.length());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-练习-合并文件"><a class="header-anchor" href="#步骤-6-练习-合并文件">¶</a>步骤 6 : 练习-合并文件</h3>
<p>把上述拆分出来的文件，合并成一个原文件。</p>
<p>以是否能正常运行，验证合并是否正确</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> stream;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Merge</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        murgeFile(<span class="string">"D:\\abc\\split"</span>, <span class="string">"01.pdf"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 合并的思路，就是从eclipse.exe-0开始，读取到一个文件，就开始写出到 eclipse.exe中，直到没有文件可以读</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folder</span></span><br><span class="line"><span class="comment">     *            需要合并的文件所处于的目录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileName</span></span><br><span class="line"><span class="comment">     *            需要合并的文件的名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> FileNotFoundException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">murgeFile</span><span class="params">(String folder, String fileName)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 合并的目标文件</span></span><br><span class="line">            File destFile = <span class="keyword">new</span> File(folder, fileName);</span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(destFile);</span><br><span class="line">            <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="comment">//子文件</span></span><br><span class="line">                File eachFile = <span class="keyword">new</span> File(folder, fileName + <span class="string">"-"</span> + index++);</span><br><span class="line">                <span class="comment">//如果子文件不存在了就结束</span></span><br><span class="line">                <span class="keyword">if</span> (!eachFile.exists())</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">  </span><br><span class="line">                <span class="comment">//读取子文件的内容</span></span><br><span class="line">                FileInputStream fis = <span class="keyword">new</span> FileInputStream(eachFile);</span><br><span class="line">                <span class="keyword">byte</span>[] eachContent = <span class="keyword">new</span> <span class="keyword">byte</span>[(<span class="keyword">int</span>) eachFile.length()];</span><br><span class="line">                fis.read(eachContent);</span><br><span class="line">                fis.close();</span><br><span class="line">                  </span><br><span class="line">                <span class="comment">//把子文件的内容写出去</span></span><br><span class="line">                fos.write(eachContent);</span><br><span class="line">                fos.flush();</span><br><span class="line">                System.out.printf(<span class="string">"把子文件 %s写出到目标文件中%n"</span>,eachFile);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            fos.close();</span><br><span class="line">            System.out.printf(<span class="string">"最后目标文件的大小：%,d字节"</span> , destFile.length());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4、关闭流的方式"><a class="header-anchor" href="#4、关闭流的方式">¶</a>4、关闭流的方式</h2>
<h3 id="步骤-1-在try中关闭"><a class="header-anchor" href="#步骤-1-在try中关闭">¶</a>步骤 1 : 在try中关闭</h3>
<p>在try的作用域里关闭文件输入流，在前面的示例中都是使用这种方式，这样做有一个弊端；<br>
如果文件不存在，或者读取的时候出现问题而抛出异常，那么就不会执行这一行关闭流的代码，存在巨大的资源占用隐患。 <strong>不推荐</strong>使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"> </span><br><span class="line">public class TestStream &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            File f &#x3D; new File(&quot;d:&#x2F;lol.txt&quot;);</span><br><span class="line">            FileInputStream fis &#x3D; new FileInputStream(f);</span><br><span class="line">            byte[] all &#x3D; new byte[(int) f.length()];</span><br><span class="line">            fis.read(all);</span><br><span class="line">            for (byte b : all) &#123;</span><br><span class="line">                System.out.println(b);</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F; 在try 里关闭流</span><br><span class="line">            fis.close();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-在finally中关闭"><a class="header-anchor" href="#步骤-2-在finally中关闭">¶</a>步骤 2 : 在finally中关闭</h3>
<p>这是标准的关闭流的方式</p>
<ol>
<li>
<p>首先把流的引用声明在try的外面，如果声明在try里面，其作用域无法抵达finally.</p>
</li>
<li>
<p>在finally关闭之前，要先判断该引用是否为空</p>
</li>
<li>
<p>关闭的时候，需要再一次进行try catch处理</p>
</li>
</ol>
<p>这是标准的严谨的关闭流的方式，但是看上去很繁琐，所以写不重要的或者测试代码的时候，都会采用上面的<strong>有隐患</strong>try的方式，因为不麻烦~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"> </span><br><span class="line">public class TestStream &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;lol.txt&quot;);</span><br><span class="line">        FileInputStream fis &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            fis &#x3D; new FileInputStream(f);</span><br><span class="line">            byte[] all &#x3D; new byte[(int) f.length()];</span><br><span class="line">            fis.read(all);</span><br><span class="line">            for (byte b : all) &#123;</span><br><span class="line">                System.out.println(b);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            &#x2F;&#x2F; 在finally 里关闭流</span><br><span class="line">            if (null !&#x3D; fis)</span><br><span class="line">                try &#123;</span><br><span class="line"> </span><br><span class="line">                    fis.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-使用try-的方式"><a class="header-anchor" href="#步骤-3-使用try-的方式">¶</a>步骤 3 : 使用try()的方式</h3>
<p>把流定义在try()里,try,catch或者finally结束的时候，会自动关闭<br>
这种编写代码的方式叫做 <strong>try-with-resources</strong>， 这是从JDK7开始支持的技术</p>
<p>所有的流，都实现了一个接口叫做 <strong>AutoCloseable</strong>，任何类实现了这个接口，都可以在try()中进行实例化。 并且在try, catch, finally结束的时候自动关闭，回收相关资源。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">  </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">  </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;lol.txt&quot;);</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F;把流定义在try()里,try,catch或者finally结束的时候，会自动关闭</span><br><span class="line">        try (FileInputStream fis &#x3D; new FileInputStream(f)) &#123;</span><br><span class="line">            byte[] all &#x3D; new byte[(int) f.length()];</span><br><span class="line">            fis.read(all);</span><br><span class="line">            for (byte b : all) &#123;</span><br><span class="line">                System.out.println(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-关闭流"><a class="header-anchor" href="#步骤-4-练习-关闭流">¶</a>步骤 4 : 练习-关闭流</h3>
<p>把 [拆分文件]中关闭流的风格，修改成 finally 方式</p>
<p>把 [合并文件]中关闭流的风格，修改成 try() 方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line">package file;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line"> </span><br><span class="line">public class TestStream1 &#123;</span><br><span class="line">     </span><br><span class="line">    public static void main(String []args) &#123;</span><br><span class="line">        split();</span><br><span class="line">        merge();</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public static void split() &#123;</span><br><span class="line">&#x2F;&#x2F;      找到一个大于100k的文件，按照100k为单位，拆分成多个子文件，并且以编号作为文件名结束。</span><br><span class="line">&#x2F;&#x2F;      比如文件 eclipse.exe，大小是309k。</span><br><span class="line">&#x2F;&#x2F;      拆分之后，成为 </span><br><span class="line">&#x2F;&#x2F;      eclipse.exe-0</span><br><span class="line">&#x2F;&#x2F;      eclipse.exe-1</span><br><span class="line">&#x2F;&#x2F;      eclipse.exe-2</span><br><span class="line">&#x2F;&#x2F;      eclipse.exe-3</span><br><span class="line">        &#x2F;&#x2F;之前在TestStream里用自己的方式做了一次，现在来用Arrays.copyOfRange再 来做一次</span><br><span class="line">        &#x2F;&#x2F;这一次用的文件只有19K，所以会以2K，或者3K来做拆分                      </span><br><span class="line">        File f &#x3D; new File(&quot;F:\\testFile\\lianxi.txt&quot;);</span><br><span class="line">        System.out.println(&quot;源文件的是:&quot;+f.getName()+&quot;，大小是：&quot;+f.length());</span><br><span class="line">        &#x2F;&#x2F;文件的总长度</span><br><span class="line">        long allLength &#x3D; f.length();</span><br><span class="line">        &#x2F;&#x2F;得到要写入的字节数据的长度</span><br><span class="line">        int num &#x3D; (int) (allLength &#x2F; 1024 &#x2F; 2 +1);</span><br><span class="line">        &#x2F;&#x2F;创建文件数据对象</span><br><span class="line">        File files[] &#x3D; new File[num];</span><br><span class="line">        &#x2F;&#x2F;初始化文件</span><br><span class="line">        for (int i &#x3D; 0; i &lt; files.length; i++) &#123;</span><br><span class="line">            files[i] &#x3D; new File(f.getParent(), f.getName()+&#39;-&#39;+i);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        FileInputStream fis &#x3D;null;</span><br><span class="line">        FileOutputStream fos &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;FileInputStream fis &#x3D; new FileInputStream(f);</span><br><span class="line">            fis &#x3D; new FileInputStream(f);</span><br><span class="line">            byte all[] &#x3D; new byte[(int)allLength];</span><br><span class="line">            fis.read(all);</span><br><span class="line">            for (int i &#x3D; 0; i &lt; files.length; i++) &#123;</span><br><span class="line">                byte []temp &#x3D; null;</span><br><span class="line">                if(i &#x3D;&#x3D; files.length-1) &#123;</span><br><span class="line">                    temp &#x3D; Arrays.copyOfRange(all, i*1024*2, (int)allLength);</span><br><span class="line">                &#125;else &#123;</span><br><span class="line">                    temp &#x3D; Arrays.copyOfRange(all, i*1024*2, (i+1)*1024*2);</span><br><span class="line">                &#125;</span><br><span class="line">                &#x2F;&#x2F;FileOutputStream fos &#x3D; new FileOutputStream(files[i]); </span><br><span class="line">                fos &#x3D; new FileOutputStream(files[i]); </span><br><span class="line">                fos.write(temp);</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            if(null!&#x3D;fis) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    fis.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(null!&#x3D;fos) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    fos.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        for (File file : files) &#123;</span><br><span class="line">            System.out.println(&quot;拆分后的文件名是：&quot;+file.getName()+&quot;,大小是：&quot;+file.length());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void merge() &#123;</span><br><span class="line">        &#x2F;&#x2F;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">&#x2F;&#x2F;      把上述拆分出来的文件，合并成一个原文件。</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;      以是否能正常运行，验证合并是否正确</span><br><span class="line">        &#x2F;&#x2F;先定义一下要合并的文件</span><br><span class="line">        File tagf &#x3D; new File(&quot;F:\\testFile\\lianxi11\\lianxi.txt&quot;);</span><br><span class="line">        tagf.getParentFile().mkdirs();</span><br><span class="line">        &#x2F;&#x2F;假设并不知道要合并的个数，只知道名称样式</span><br><span class="line">        &#x2F;&#x2F;合并文件的总长度</span><br><span class="line">        long totalLength &#x3D; 0;</span><br><span class="line">        &#x2F;&#x2F;要合并的文件个数</span><br><span class="line">        int num &#x3D; 0;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;遍历目录下我们要合并的文件</span><br><span class="line">        File f &#x3D; new File(&quot;F:\\testFile&quot;);</span><br><span class="line">        &#x2F;&#x2F;目录下的所有文件</span><br><span class="line">        File []files &#x3D; f.listFiles();</span><br><span class="line">        System.out.println(&quot;文件的总个数为:&quot;+files.length);</span><br><span class="line">        &#x2F;&#x2F;找出要合并的文件是那些</span><br><span class="line">        for (int i &#x3D; 0; i &lt; files.length; i++) &#123;</span><br><span class="line">            if(files[i].getName().contains(&quot;lianxi.txt-&quot;)) &#123;</span><br><span class="line">                &#x2F;&#x2F;得到文件的总长度</span><br><span class="line">                totalLength +&#x3D;files[i].length();</span><br><span class="line">                &#x2F;&#x2F;文件个数</span><br><span class="line">                num++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;总长度为:&quot;+totalLength);</span><br><span class="line">        System.out.println(&quot;文件个数为:&quot;+num);</span><br><span class="line">        &#x2F;&#x2F;创建目标文件的字节数据，用上面找到的长度和个数来创建字节数组tagbb和文件数组files2</span><br><span class="line">        byte tagbb[] &#x3D; new byte[(int)totalLength];</span><br><span class="line">        File files2[] &#x3D; new File[num];</span><br><span class="line">        &#x2F;&#x2F;临时变量</span><br><span class="line">        int j &#x3D; 0;</span><br><span class="line">        &#x2F;&#x2F;写入内容，内容要从上面的文件中来</span><br><span class="line">        for (int i &#x3D; 0; i &lt; files.length; i++) &#123;</span><br><span class="line">            if(files[i].getName().contains(&quot;lianxi.txt-&quot;)) &#123;</span><br><span class="line">                &#x2F;&#x2F;得到文件的总长度</span><br><span class="line">                files2[j]&#x3D;files[i];</span><br><span class="line">                &#x2F;&#x2F;文件个数</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;文件中的内容合并到tagbb中</span><br><span class="line">        &#x2F;&#x2F;FileInputStream fis &#x3D; null;</span><br><span class="line">        &#x2F;&#x2F;这次循环只有循环files2的个数了</span><br><span class="line">        for (int i &#x3D; 0; i &lt; files2.length; i++) &#123;</span><br><span class="line">            try (FileInputStream fis &#x3D;new FileInputStream(files2[i]))&#123;</span><br><span class="line">                &#x2F;&#x2F;创建字节输入流</span><br><span class="line">                &#x2F;&#x2F;fis &#x3D; new FileInputStream(files2[i]);</span><br><span class="line">                &#x2F;&#x2F;临时的字节数组</span><br><span class="line">                byte []temp &#x3D; new byte[(int)files2[i].length()];</span><br><span class="line">                &#x2F;&#x2F;读入内容</span><br><span class="line">                fis.read(temp);</span><br><span class="line">                &#x2F;&#x2F;将内容依次写入tagbb中，利用System.arraycopy的功能，下次不要傻傻自己写方法了</span><br><span class="line">                System.arraycopy(temp, 0, tagbb, i*1024*2, temp.length);</span><br><span class="line">            &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;   </span><br><span class="line">             </span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;创建字节输出流</span><br><span class="line">        try (FileOutputStream fos &#x3D; new FileOutputStream(tagf))&#123;</span><br><span class="line">            fos.write(tagbb);</span><br><span class="line">            fos.close();</span><br><span class="line">        &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        String str &#x3D; &quot;合并后的文件目录为%s,合并后的文件大小为：%d&quot;;</span><br><span class="line">        System.out.printf(str,tagf.getAbsolutePath(),tagf.length());</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5、JAVA的字符流-READER-WRITER"><a class="header-anchor" href="#5、JAVA的字符流-READER-WRITER">¶</a>5、JAVA的字符流 READER WRITER</h2>
<h3 id="步骤-1-使用字符流读取文件"><a class="header-anchor" href="#步骤-1-使用字符流读取文件">¶</a>步骤 1 : 使用字符流读取文件</h3>
<p>FileReader 是Reader子类，以FileReader 为例进行文件读取</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"> </span><br><span class="line">public class TestStream &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; 准备文件lol.txt其中的内容是AB</span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;lol.txt&quot;);</span><br><span class="line">        &#x2F;&#x2F; 创建基于文件的Reader</span><br><span class="line">        try (FileReader fr &#x3D; new FileReader(f)) &#123;</span><br><span class="line">            &#x2F;&#x2F; 创建字符数组，其长度就是文件的长度</span><br><span class="line">            char[] all &#x3D; new char[(int) f.length()];</span><br><span class="line">            &#x2F;&#x2F; 以字符流的形式读取文件所有内容</span><br><span class="line">            fr.read(all);</span><br><span class="line">            for (char b : all) &#123;</span><br><span class="line">                &#x2F;&#x2F; 打印出来是A B</span><br><span class="line">                System.out.println(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-使用字符流把字符串写入到文件"><a class="header-anchor" href="#步骤-2-使用字符流把字符串写入到文件">¶</a>步骤 2 : 使用字符流把字符串写入到文件</h3>
<p>FileWriter 是Writer的子类，以FileWriter 为例把字符串写入到文件</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2432.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">  </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileWriter;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">  </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; 准备文件lol2.txt</span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;lol2.txt&quot;);</span><br><span class="line">        &#x2F;&#x2F; 创建基于文件的Writer</span><br><span class="line">        try (FileWriter fr &#x3D; new FileWriter(f)) &#123;</span><br><span class="line">            &#x2F;&#x2F; 以字符流的形式把数据写入到文件中</span><br><span class="line">            String data&#x3D;&quot;abcdefg1234567890&quot;;</span><br><span class="line">            char[] cs &#x3D; data.toCharArray();</span><br><span class="line">            fr.write(cs);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-文件加密"><a class="header-anchor" href="#步骤-3-练习-文件加密">¶</a>步骤 3 : 练习-文件加密</h3>
<p>准备一个<strong>文本文件</strong>(非二进制)，其中包含<a href="https://how2j.cn/k/io/io-bytestream/340.html#step766" target="_blank" rel="noopener">ASCII码</a>的字符和中文字符。<br>
设计一个方法</p>
<p>public static void encodeFile(File encodingFile, File encodedFile);</p>
<p>在这个方法中把encodingFile的内容进行加密，然后保存到encodedFile文件中。<br>
加密算法：<br>
数字：<br>
如果不是9的数字，在原来的基础上加1，比如5变成6, 3变成4<br>
如果是9的数字，变成0<br>
字母字符：<br>
如果是非z字符，向右移动一个，比如d变成e, G变成H<br>
如果是z，z-&gt;a, Z-A。<br>
字符需要保留大小写<br>
非字母字符<br>
比如’,&amp;^ 保留不变，中文也保留不变<br>
<strong>建议：</strong> 使用以前学习的练习题中的某个Java文件，比如循环练习，就有很多的字符和数字</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2434.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">import java.io.*;</span><br><span class="line">public class Test&#123;</span><br><span class="line">    static File f1 &#x3D; new File(&quot;D:&#x2F;lianxi.txt&quot;);</span><br><span class="line">    static File f2 &#x3D; new File(&quot;D:&#x2F;lianxi2.txt&quot;);</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        encodeFile(f1, f2);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void encodeFile(File encodingFile, File encodedFile)&#123;</span><br><span class="line">        FileReader fr &#x3D; null;</span><br><span class="line">        FileWriter fw &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            fr &#x3D; new FileReader(encodingFile);</span><br><span class="line">            fw &#x3D; new FileWriter(encodedFile);</span><br><span class="line">            char[] before &#x3D; new char[(int)f1.length()];</span><br><span class="line">            fr.read(before);</span><br><span class="line">            char[] after &#x3D; new char[(int)f1.length()];</span><br><span class="line">            for (int i &#x3D; 0; i &lt; before.length; i++)&#123;</span><br><span class="line">                after[i] &#x3D; change(before[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            fw.write(after);</span><br><span class="line">            System.out.println(&quot;加密前的内容：&quot;);</span><br><span class="line">            for (char c : before)&#123;</span><br><span class="line">                System.out.print(c);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;\n加密后的内容：&quot;);</span><br><span class="line">            for (char c : after)&#123;</span><br><span class="line">                System.out.print(c);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            if (fr !&#x3D; null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    fr.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (fw !&#x3D; null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    fw.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static char change(char c)&#123;</span><br><span class="line">        if ((int)c &gt;&#x3D; 48 &amp;&amp; (int)c &lt;&#x3D; 56)&#123;</span><br><span class="line">            return (char)(c+1);</span><br><span class="line">        &#125;else if ((int)c &#x3D;&#x3D; 57)&#123;</span><br><span class="line">            return &#39;0&#39;;</span><br><span class="line">        &#125;else if ((int)c &gt;&#x3D; 65 &amp;&amp; (int)c &lt;&#x3D; 89)&#123;</span><br><span class="line">            return (char)(c+1);</span><br><span class="line">        &#125;else if ((int)c &#x3D;&#x3D; 90)&#123;</span><br><span class="line">            return &#39;A&#39;;</span><br><span class="line">        &#125;else if ((int)c &gt;&#x3D; 97 &amp;&amp; (int)c &lt;&#x3D; 121)&#123;</span><br><span class="line">            return (char)(c+1);</span><br><span class="line">        &#125;else if ((int)c &#x3D;&#x3D; 122)&#123;</span><br><span class="line">            return &#39;a&#39;;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-文件解密"><a class="header-anchor" href="#步骤-4-练习-文件解密">¶</a>步骤 4 : 练习-文件解密</h3>
<p>解密在[文件加密]中生成的文件。<br>
设计一个方法</p>
<p>public static void decodeFile(File decodingFile, File decodedFile);</p>
<p>在这个方法中把decodingFile的内容进行解密，然后保存到decodedFile文件中。<br>
解密算法：<br>
数字：<br>
如果不是0的数字，在原来的基础上减1，比如6变成5, 4变成3<br>
如果是0的数字，变成9<br>
字母字符：<br>
如果是非a字符，向左移动一个，比如e变成d, H变成G<br>
如果是a，a-&gt;z, A-Z。<br>
字符需要保留大小写<br>
非字母字符：<br>
比如’,&amp;^ 保留不变，中文也保留不变</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">import java.io.*;</span><br><span class="line">public class Test&#123;</span><br><span class="line">    static File f1 &#x3D; new File(&quot;D:&#x2F;lianxi2.txt&quot;);</span><br><span class="line">    static File f2 &#x3D; new File(&quot;D:&#x2F;lianxi1.txt&quot;);</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        encodeFile(f1, f2);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void encodeFile(File encodingFile, File encodedFile)&#123;</span><br><span class="line">        FileReader fr &#x3D; null;</span><br><span class="line">        FileWriter fw &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            fr &#x3D; new FileReader(encodingFile);</span><br><span class="line">            fw &#x3D; new FileWriter(encodedFile);</span><br><span class="line">            char[] before &#x3D; new char[(int)f1.length()];</span><br><span class="line">            fr.read(before);</span><br><span class="line">            char[] after &#x3D; new char[(int)f1.length()];</span><br><span class="line">            for (int i &#x3D; 0; i &lt; before.length; i++)&#123;</span><br><span class="line">                after[i] &#x3D; change(before[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            fw.write(after);</span><br><span class="line">            System.out.println(&quot;解密前的内容：&quot;);</span><br><span class="line">            for (char c : before)&#123;</span><br><span class="line">                System.out.print(c);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;\n解密后的内容：&quot;);</span><br><span class="line">            for (char c : after)&#123;</span><br><span class="line">                System.out.print(c);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            if (fr !&#x3D; null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    fr.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (fw !&#x3D; null)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    fw.close();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static char change(char c)&#123;</span><br><span class="line">        if ((int)c &gt;&#x3D; 49 &amp;&amp; (int)c &lt;&#x3D; 57)&#123;</span><br><span class="line">            return (char)(c-1);</span><br><span class="line">        &#125;else if ((int)c &#x3D;&#x3D; 48)&#123;</span><br><span class="line">            return &#39;9&#39;;</span><br><span class="line">        &#125;else if ((int)c &gt;&#x3D; 66 &amp;&amp; (int)c &lt;&#x3D; 90)&#123;</span><br><span class="line">            return (char)(c-1);</span><br><span class="line">        &#125;else if ((int)c &#x3D;&#x3D; 65)&#123;</span><br><span class="line">            return &#39;Z&#39;;</span><br><span class="line">        &#125;else if ((int)c &gt;&#x3D; 98 &amp;&amp; (int)c &lt;&#x3D; 122)&#123;</span><br><span class="line">            return (char)(c-1);</span><br><span class="line">        &#125;else if ((int)c &#x3D;&#x3D; 97)&#123;</span><br><span class="line">            return &#39;z&#39;;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6、JAVA-编码中文问题系统透彻讲解-UNICODE-GBK-UTF-8-ISO-8859-1-之间的区别"><a class="header-anchor" href="#6、JAVA-编码中文问题系统透彻讲解-UNICODE-GBK-UTF-8-ISO-8859-1-之间的区别">¶</a>6、JAVA 编码中文问题系统透彻讲解 UNICODE GBK UTF-8 ISO-8859-1 之间的区别</h2>
<h3 id="步骤-1-编码概念"><a class="header-anchor" href="#步骤-1-编码概念">¶</a>步骤 1 : 编码概念</h3>
<p>计算机存放数据只能存放数字，所有的字符都会被转换为不同的数字。<br>
就像一个棋盘一样，不同的字，处于不同的位置，而不同的位置，有不同的数字编号。<br>
有的棋盘很小，只能放数字和英文<br>
有的大一点，还能放中文<br>
有的“足够”大，能够放下世界人民所使用的所有文字和符号</p>
<p>如图所示，英文字符 <strong>A</strong> 能够放在所有的棋盘里，而且位置都差不多<br>
中文字符, 中文字符 <strong>中</strong> 能够放在后两种棋盘里，并且位置不一样，而且在小的那个棋盘里，就放不下中文</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2481.png" alt></p>
<h3 id="步骤-2-常见编码"><a class="header-anchor" href="#步骤-2-常见编码">¶</a>步骤 2 : 常见编码</h3>
<p>工作后经常接触的编码方式有如下几种：<br>
<strong>ISO-8859-1 ASCII</strong> 数字和西欧字母<br>
<strong>GBK GB2312 BIG5</strong> 中文<br>
<strong>UNICODE</strong> (统一码，万国码)</p>
<p>其中<br>
ISO-8859-1 包含 ASCII<br>
GB2312 是简体中文，BIG5是繁体中文，GBK同时包含简体和繁体以及日文。<br>
UNICODE 包括了所有的文字，无论中文，英文，藏文，法文，世界所有的文字都包含其中</p>
<h3 id="步骤-3-UNICODE和UTF"><a class="header-anchor" href="#步骤-3-UNICODE和UTF">¶</a>步骤 3 : UNICODE和UTF</h3>
<p>根据前面的学习，我们了解到不同的编码方式对应不同的<strong>棋盘</strong>，而UNICODE因为要存放所有的数据，那么它的棋盘是最大的。<br>
不仅如此，棋盘里每个数字都是很长的(4个字节)，因为不仅要表示字母，还要表示汉字等。</p>
<p>如果完全按照UNICODE的方式来存储数据，就会有很大的浪费。<br>
比如在ISO-8859-1中，<strong>a</strong> 字符对应的数字是0x61<br>
而UNICODE中对应的数字是 0x00000061，倘若一篇文章大部分都是英文字母，那么按照UNICODE的方式进行数据保存就会消耗很多空间</p>
<p>在这种情况下，就出现了UNICODE的各种<strong>减肥</strong>子编码, 比如UTF-8对数字和字母就使用一个字节，而对汉字就使用3个字节，从而达到了<strong>减肥还能保证健康</strong>的效果</p>
<p>UTF-8，UTF-16和UTF-32 针对不同类型的数据有不同的<strong>减肥效果</strong>，一般说来UTF-8是比较常用的方式</p>
<p>UTF-8，UTF-16和UTF-32 彼此的区别在此不作赘述，有兴趣的可以参考 <a href="http://baike.baidu.com/link?url=ty4mEX5hSfK2xAyPO8N2zgxTibBE59CShSb5yFxbVkBun_QVz65llOPEXOepgPeqe3AQDLt6LLjTayn6tioS4_#4" target="_blank" rel="noopener">unicode-百度百科</a></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2482.png" alt></p>
<h3 id="步骤-4-Java采用的是Unicode"><a class="header-anchor" href="#步骤-4-Java采用的是Unicode">¶</a>步骤 4 : Java采用的是Unicode</h3>
<p>写在.java源代码中的汉字，在执行之后，都会变成JVM中的字符。<br>
而这些中文字符采用的编码方式，都是使用UNICODE. &quot;中&quot;字对应的UNICODE是<strong>4E2D</strong>,所以在内存中，实际保存的数据就是十六进制的0x4E2D, 也就是十进制的20013。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"> </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        String str &#x3D; &quot;中&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-一个汉字使用不同编码方式的表现"><a class="header-anchor" href="#步骤-5-一个汉字使用不同编码方式的表现">¶</a>步骤 5 : 一个汉字使用不同编码方式的表现</h3>
<p>以字符 <strong>中</strong> 为例，查看其在不同编码方式下的值是多少</p>
<p>也即在不同的<strong>棋盘上的位置</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2483.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"> </span><br><span class="line">import java.io.UnsupportedEncodingException;</span><br><span class="line"> </span><br><span class="line">public class TestStream &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        String str &#x3D; &quot;中&quot;;</span><br><span class="line">        showCode(str);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void showCode(String str) &#123;</span><br><span class="line">        String[] encodes &#x3D; &#123; &quot;BIG5&quot;, &quot;GBK&quot;, &quot;GB2312&quot;, &quot;UTF-8&quot;, &quot;UTF-16&quot;, &quot;UTF-32&quot; &#125;;</span><br><span class="line">        for (String encode : encodes) &#123;</span><br><span class="line">            showCode(str, encode);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void showCode(String str, String encode) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            System.out.printf(&quot;字符: \&quot;%s\&quot; 的在编码方式%s下的十六进制值是%n&quot;, str, encode);</span><br><span class="line">            byte[] bs &#x3D; str.getBytes(encode);</span><br><span class="line"> </span><br><span class="line">            for (byte b : bs) &#123;</span><br><span class="line">                int i &#x3D; b&amp;0xff;</span><br><span class="line">                System.out.print(Integer.toHexString(i) + &quot;\t&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125; catch (UnsupportedEncodingException e) &#123;</span><br><span class="line">            System.out.printf(&quot;UnsupportedEncodingException: %s编码方式无法解析字符%s\n&quot;, encode, str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-文件的编码方式-记事本"><a class="header-anchor" href="#步骤-6-文件的编码方式-记事本">¶</a>步骤 6 : 文件的编码方式-记事本</h3>
<p>接下来讲，字符在文件中的保存<br>
字符保存在文件中肯定也是以数字形式保存的，即对应在不同的<strong>棋盘</strong>上的不同的数字<br>
用<strong>记事本</strong>打开任意文本文件，并且<strong>另存为</strong>，就能够在编码这里看到一个下拉。<br>
<strong>ANSI</strong> 这个<strong>不是  ASCII  <strong>的意思，而是采用</strong>本地编码</strong>的意思。如果你是中文的操作系统，就会使GBK，如果是英文的就会是ISO-8859-1<br>
<strong>Unicode</strong> UNICODE原生的编码方式<br>
<strong>Unicode big endian</strong> 另一个 UNICODE编码方式<br>
<strong>UTF-8</strong> 最常见的UTF-8编码方式，数字和字母用一个字节， 汉字用3个字节。</p>
<h3 id="步骤-7-文件的编码方式-eclipse"><a class="header-anchor" href="#步骤-7-文件的编码方式-eclipse">¶</a>步骤 7 : 文件的编码方式-eclipse</h3>
<p>eclipse也有类似的编码方式，右键任意文本文件，点击最下面的&quot;property&quot;<br>
就可以看到<strong>Text file encoding</strong><br>
也有ISO-8859-1，GBK,UTF-8等等选项。<br>
其他的US-ASCII,UTF-16，UTF-16BE,UTF-16LE不常用。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2485.png" alt></p>
<h3 id="步骤-8-用FileInputStream-字节流正确读取中文"><a class="header-anchor" href="#步骤-8-用FileInputStream-字节流正确读取中文">¶</a>步骤 8 : 用FileInputStream 字节流正确读取中文</h3>
<p>为了能够正确的读取中文内容</p>
<ol>
<li>
<p>必须了解文本是以哪种编码方式保存字符的</p>
</li>
<li>
<p>使用字节流读取了文本后，再使用对应的<strong>编码方式去识别这些数字</strong>，得到正确的字符<br>
如本例，一个文件中的内容是字符<strong>中</strong>，编码方式是GBK，那么读出来的数据一定是D6D0。<br>
再使用GBK编码方式识别D6D0，就能正确的得到字符<strong>中</strong></p>
</li>
</ol>
<p><strong>注：</strong> 在GBK的棋盘上找到的<strong>中</strong>字后，JVM会自动找到<strong>中</strong>在UNICODE这个棋盘上对应的数字，并且以[UNICODE上的数字保存在内存中]。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2488.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">   </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">   </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        File f &#x3D; new File(&quot;E:\\project\\j2se\\src\\test.txt&quot;);</span><br><span class="line">        try (FileInputStream fis &#x3D; new FileInputStream(f);) &#123;</span><br><span class="line">            byte[] all &#x3D; new byte[(int) f.length()];</span><br><span class="line">            fis.read(all);</span><br><span class="line">   </span><br><span class="line">            &#x2F;&#x2F;文件中读出来的数据是</span><br><span class="line">            System.out.println(&quot;文件中读出来的数据是：&quot;);</span><br><span class="line">            for (byte b : all)</span><br><span class="line">            &#123;</span><br><span class="line">                int i &#x3D; b&amp;0x000000ff;  &#x2F;&#x2F;只取16进制的后两位</span><br><span class="line">                System.out.println(Integer.toHexString(i));</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;把这个数字，放在GBK的棋盘上去：&quot;);</span><br><span class="line">            String str &#x3D; new String(all,&quot;GBK&quot;);</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-9-用FileReader-字符流正确读取中文"><a class="header-anchor" href="#步骤-9-用FileReader-字符流正确读取中文">¶</a>步骤 9 : 用FileReader 字符流正确读取中文</h3>
<p>FileReader得到的是字符，所以一定是已经把字节<strong>根据某种编码识别成了字符</strong>了<br>
而FileReader使用的编码方式是Charset.defaultCharset()的返回值，如果是中文的操作系统，就是GBK<br>
FileReader是不能手动设置编码方式的，为了使用其他的编码方式，只能使用InputStreamReader来代替，像这样：</p>
<p>new InputStreamReader(new FileInputStream(f),Charset.forName(“UTF-8”));</p>
<p>在本例中，用记事本另存为UTF-8格式，然后用UTF-8就能识别对应的中文了。</p>
<p><strong>解释：</strong> 为什么中字前面有一个?<br>
如果是使用记事本另存为UTF-8的格式，那么在第一个字节有一个<strong>标示符</strong>，叫做BOM用来标志这个文件是用UTF-8来编码的。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2489.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStreamReader;</span><br><span class="line">import java.io.UnsupportedEncodingException;</span><br><span class="line">import java.nio.charset.Charset;</span><br><span class="line"> </span><br><span class="line">public class TestStream &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) throws UnsupportedEncodingException, FileNotFoundException &#123;</span><br><span class="line">        File f &#x3D; new File(&quot;E:\\project\\j2se\\src\\test.txt&quot;);</span><br><span class="line">        System.out.println(&quot;默认编码方式:&quot;+Charset.defaultCharset());</span><br><span class="line">        &#x2F;&#x2F;FileReader得到的是字符，所以一定是已经把字节根据某种编码识别成了字符了</span><br><span class="line">        &#x2F;&#x2F;而FileReader使用的编码方式是Charset.defaultCharset()的返回值，如果是中文的操作系统，就是GBK</span><br><span class="line">        try (FileReader fr &#x3D; new FileReader(f)) &#123;</span><br><span class="line">            char[] cs &#x3D; new char[(int) f.length()];</span><br><span class="line">            fr.read(cs);</span><br><span class="line">            System.out.printf(&quot;FileReader会使用默认的编码方式%s,识别出来的字符是：%n&quot;,Charset.defaultCharset());</span><br><span class="line">            System.out.println(new String(cs));</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;FileReader是不能手动设置编码方式的，为了使用其他的编码方式，只能使用InputStreamReader来代替</span><br><span class="line">        &#x2F;&#x2F;并且使用new InputStreamReader(new FileInputStream(f),Charset.forName(&quot;UTF-8&quot;)); 这样的形式</span><br><span class="line">        try (InputStreamReader isr &#x3D; new InputStreamReader(new FileInputStream(f),Charset.forName(&quot;UTF-8&quot;))) &#123;</span><br><span class="line">            char[] cs &#x3D; new char[(int) f.length()];</span><br><span class="line">            isr.read(cs);</span><br><span class="line">            System.out.printf(&quot;InputStreamReader 指定编码方式UTF-8,识别出来的字符是：%n&quot;);</span><br><span class="line">            System.out.println(new String(cs));</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-10-练习-数字对应的中文"><a class="header-anchor" href="#步骤-10-练习-数字对应的中文">¶</a>步骤 10 : 练习-数字对应的中文</h3>
<p>找出 E5 B1 8C 这3个十六进制对应UTF-8编码的汉字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package file;</span><br><span class="line"></span><br><span class="line">import java.io.UnsupportedEncodingException;</span><br><span class="line"></span><br><span class="line">public class TestFile &#123;</span><br><span class="line">		public static void main(String[] args) throws UnsupportedEncodingException &#123;</span><br><span class="line">		byte[] bs &#x3D; &#123;(byte) 0xE5,(byte) 0xB1,(byte) 0x8C&#125;;</span><br><span class="line"></span><br><span class="line">		String str &#x3D; new String(bs,&quot;UTF-8&quot;);</span><br><span class="line">		System.out.println(&quot;E5 B1 8C 用UTF-8编码对应的的汉字是：&quot;+str);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-11-练习-移除BOM"><a class="header-anchor" href="#步骤-11-练习-移除BOM">¶</a>步骤 11 : 练习-移除BOM</h3>
<p>如果用记事本根据UTF-8编码保存汉字就会在最前面生成一段标示符，这个标示符用于表示该文件是使用UTF-8编码的。</p>
<p>找出这段标示符对应的十六进制，并且开发一个方法，自动去除这段标示符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package rego;</span><br><span class="line">import java.io.*;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">public class FileTest3 &#123;</span><br><span class="line">    public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        File f&#x3D;new File(&quot;E:\\新建文件夹\\ReGo\\lol.txt&quot;);</span><br><span class="line">        Bom(f);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">    public static void Bom(File file)</span><br><span class="line">    &#123;</span><br><span class="line">        try(FileInputStream fis&#x3D;new FileInputStream(file))</span><br><span class="line">        &#123;</span><br><span class="line">            byte [] all &#x3D; new byte[(int)(file.length())];</span><br><span class="line">            fis.read(all);</span><br><span class="line">            String s&#x3D;new String(all,&quot;UTF-8&quot;);</span><br><span class="line">            System.out.printf(&quot;未斩首的:%s&quot;,s);</span><br><span class="line">            System.out.println();</span><br><span class="line">             &#x2F;*for (byte b : all) &#123;</span><br><span class="line">                    int i &#x3D; b &amp; 0xff;</span><br><span class="line">                    System.out.print(Integer.toHexString(i) + &quot; &quot;);&#125;*&#x2F;</span><br><span class="line">             all&#x3D;Arrays.copyOfRange(all, 3, all.length);</span><br><span class="line">             fis.read(all);</span><br><span class="line">             String s2&#x3D;new String(all,&quot;UTF-8&quot;);</span><br><span class="line">             System.out.printf(&quot;斩首后（去BOM）的:%s&quot;,s2);</span><br><span class="line">            &#x2F;* System.out.println(&quot;改过后的：&quot;);</span><br><span class="line">             for (byte b : all) &#123;</span><br><span class="line">                    int i &#x3D; b &amp; 0xff;</span><br><span class="line">                    System.out.print(Integer.toHexString(i) + &quot; &quot;);&#125;*&#x2F;</span><br><span class="line">        &#125;</span><br><span class="line">        catch(IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">             </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7、JAVA-缓存流BUFFEREDREADER，PRINTWRITER"><a class="header-anchor" href="#7、JAVA-缓存流BUFFEREDREADER，PRINTWRITER">¶</a>7、JAVA 缓存流BUFFEREDREADER，PRINTWRITER</h2>
<h3 id="示例-1-使用缓存流读取数据"><a class="header-anchor" href="#示例-1-使用缓存流读取数据">¶</a>示例 1 : 使用缓存流读取数据</h3>
<p>缓存字符输入流 BufferedReader 可以一次读取一行数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">  </span><br><span class="line">import java.io.BufferedReader;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">  </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; 准备文件lol.txt其中的内容是</span><br><span class="line">        &#x2F;&#x2F; garen kill teemo</span><br><span class="line">        &#x2F;&#x2F; teemo revive after 1 minutes</span><br><span class="line">        &#x2F;&#x2F; teemo try to garen, but killed again</span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;lol.txt&quot;);</span><br><span class="line">        &#x2F;&#x2F; 创建文件字符流</span><br><span class="line">        &#x2F;&#x2F; 缓存流必须建立在一个存在的流的基础上</span><br><span class="line">        try (</span><br><span class="line">                FileReader fr &#x3D; new FileReader(f);</span><br><span class="line">                BufferedReader br &#x3D; new BufferedReader(fr);</span><br><span class="line">            )</span><br><span class="line">        &#123;</span><br><span class="line">            while (true) &#123;</span><br><span class="line">                &#x2F;&#x2F; 一次读一行</span><br><span class="line">                String line &#x3D; br.readLine();</span><br><span class="line">                if (null &#x3D;&#x3D; line)</span><br><span class="line">                    break;</span><br><span class="line">                System.out.println(line);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-使用缓存流写出数据"><a class="header-anchor" href="#示例-2-使用缓存流写出数据">¶</a>示例 2 : 使用缓存流写出数据</h3>
<p>PrintWriter 缓存字符输出流， 可以一次写出一行数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">   </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileWriter;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line">   </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; 向文件lol2.txt中写入三行语句</span><br><span class="line">        File f &#x3D; new File(&quot;d:&#x2F;lol2.txt&quot;);</span><br><span class="line">          </span><br><span class="line">        try (</span><br><span class="line">                &#x2F;&#x2F; 创建文件字符流</span><br><span class="line">                FileWriter fw &#x3D; new FileWriter(f);</span><br><span class="line">                &#x2F;&#x2F; 缓存流必须建立在一个存在的流的基础上              </span><br><span class="line">                PrintWriter pw &#x3D; new PrintWriter(fw);              </span><br><span class="line">        ) &#123;</span><br><span class="line">            pw.println(&quot;garen kill teemo&quot;);</span><br><span class="line">            pw.println(&quot;teemo revive after 1 minutes&quot;);</span><br><span class="line">            pw.println(&quot;teemo try to garen, but killed again&quot;);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-flush"><a class="header-anchor" href="#示例-3-flush">¶</a>示例 3 : flush</h3>
<p>有的时候，需要<strong>立即把数据写入到硬盘</strong>，而不是等缓存满了才写出去。 这时候就需要用到flush</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">    </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileWriter;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line">public class TestStream &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;向文件lol2.txt中写入三行语句</span><br><span class="line">        File f &#x3D;new File(&quot;d:&#x2F;lol2.txt&quot;);</span><br><span class="line">        &#x2F;&#x2F;创建文件字符流</span><br><span class="line">        &#x2F;&#x2F;缓存流必须建立在一个存在的流的基础上</span><br><span class="line">        try(FileWriter fr &#x3D; new FileWriter(f);PrintWriter pw &#x3D; new PrintWriter(fr);) &#123;</span><br><span class="line">            pw.println(&quot;garen kill teemo&quot;);</span><br><span class="line">            &#x2F;&#x2F;强制把缓存中的数据写入硬盘，无论缓存是否已满</span><br><span class="line">                pw.flush();           </span><br><span class="line">            pw.println(&quot;teemo revive after 1 minutes&quot;);</span><br><span class="line">                pw.flush();</span><br><span class="line">            pw.println(&quot;teemo try to garen, but killed again&quot;);</span><br><span class="line">                pw.flush();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-练习-移除注释"><a class="header-anchor" href="#示例-4-练习-移除注释">¶</a>示例 4 : 练习-移除注释</h3>
<p>设计一个方法，用于移除Java文件中的注释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void removeComments(File javaFile)</span><br></pre></td></tr></table></figure>
<p>比如，移出以//开头的注释行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">File f &#x3D; new File(&quot;d:&#x2F;LOLFolder&#x2F;LOL.exe&quot;);</span><br><span class="line"></span><br><span class="line">System.out.println(&quot;当前文件是：&quot; +f);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;文件是否存在</span><br><span class="line"></span><br><span class="line">System.out.println(&quot;判断是否存在：&quot;+f.exists());</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;是否是文件夹</span><br><span class="line"></span><br><span class="line">System.out.println(&quot;判断是否是文件夹：&quot;+f.isDirectory());</span><br></pre></td></tr></table></figure>
<p><strong>注：</strong> 如果注释在后面，或者是/**/风格的注释，暂不用处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"></span><br><span class="line">import java.io.BufferedReader;</span><br><span class="line">import java.io.BufferedWriter;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.FileWriter;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">&#x2F;&#x2F; 设计一个方法，用于移除Java文件中的注释</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; public void removeComments(File javaFile)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 比如，移出以&#x2F;&#x2F;开头的注释行</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; File f &#x3D; new File(&quot;d:&#x2F;LOLFolder&#x2F;LOL.exe&quot;);</span><br><span class="line">&#x2F;&#x2F; System.out.println(&quot;当前文件是：&quot; +f);</span><br><span class="line">&#x2F;&#x2F; 文件是否存在</span><br><span class="line">&#x2F;&#x2F; System.out.println(&quot;判断是否存在：&quot;+f.exists());</span><br><span class="line">&#x2F;&#x2F; 是否是文件夹</span><br><span class="line">&#x2F;&#x2F; System.out.println(&quot;判断是否是文件夹：&quot;+f.isDirectory());</span><br><span class="line">public class RemoveComments &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		&#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">		&#x2F;&#x2F; 这是一行注释</span><br><span class="line">		File file1 &#x3D; new File(&quot;d:\\yzb.txt&quot;);</span><br><span class="line">		File file2 &#x3D; new File(&quot;d:\\yzb1.txt&quot;);</span><br><span class="line">		try &#123;</span><br><span class="line">			FileReader fr &#x3D; new FileReader(file1);</span><br><span class="line">			FileWriter fw &#x3D; new FileWriter(file2);</span><br><span class="line">			BufferedReader br &#x3D; new BufferedReader(fr);</span><br><span class="line">			BufferedWriter bf &#x3D; new BufferedWriter(fw);</span><br><span class="line">			while (true) &#123;</span><br><span class="line">				String s &#x3D; br.readLine();</span><br><span class="line">				if (s !&#x3D; null) &#123;</span><br><span class="line">					&#x2F;&#x2F; 把含有&#x2F;&#x2F;的字符串分割成几个部分</span><br><span class="line">					String ss[] &#x3D; s.split(&quot;&#x2F;&#x2F;&quot;);</span><br><span class="line">					&#x2F;&#x2F; 如果ss</span><br><span class="line">					&#x2F;&#x2F; 这个数组的长度大于一，也就是表示s这个字符串含有&#x2F;&#x2F;（不含有的话ss.length&#x3D;&#x3D;1），并且&#x2F;&#x2F;的前头为&quot;&quot;就不写入文件（就是注释）</span><br><span class="line">					if (ss.length &gt; 1 &amp;&amp; ss[0].equals(&quot;&quot;)) &#123;</span><br><span class="line">						continue;</span><br><span class="line">					&#125;</span><br><span class="line">					&#x2F;&#x2F; 还有种情况，就是这一行含有&#x2F;&#x2F;但是开头不是&quot;&quot;,而是由空白字符组成。这也是注释</span><br><span class="line">					else if (ss.length &gt; 1) &#123;</span><br><span class="line">						&#x2F;&#x2F; 这里使用了正则表达式，ss[0].matches(&quot;[\\s]+&quot;)表示了这个字符串中是否全是由空白字符组成，是的话就返回true</span><br><span class="line">						if (ss[0].matches(&quot;[\\s]+&quot;)) &#123;</span><br><span class="line">							continue;</span><br><span class="line">						&#125;</span><br><span class="line">						&#x2F;&#x2F; 除了以上两种情况的字符串就算含有&#x2F;&#x2F; 也会正常写入文件</span><br><span class="line">						else &#123;</span><br><span class="line">							bf.write(s);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125; else &#123;</span><br><span class="line">						bf.write(s);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125; else &#123;</span><br><span class="line">					br.close();</span><br><span class="line">					bf.flush();</span><br><span class="line">					bf.close();</span><br><span class="line">					break;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">			&#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; catch (IOException e) &#123;</span><br><span class="line">			&#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8、JAVA-数据流DATAINPUTSTREAM-，DATAOUTPUTSTREAM"><a class="header-anchor" href="#8、JAVA-数据流DATAINPUTSTREAM-，DATAOUTPUTSTREAM">¶</a>8、JAVA 数据流DATAINPUTSTREAM ，DATAOUTPUTSTREAM</h2>
<h3 id="步骤-1-直接进行字符串的读写"><a class="header-anchor" href="#步骤-1-直接进行字符串的读写">¶</a>步骤 1 : 直接进行字符串的读写</h3>
<p>使用数据流的writeUTF()和readUTF() 可以进行数据的<strong>格式化顺序读写</strong><br>
如本例，通过DataOutputStream 向文件顺序写出 布尔值，整数和字符串。 然后再通过DataInputStream 顺序读入这些数据。</p>
<p><strong>注：</strong> 要用DataInputStream 读取一个文件，这个文件必须是由DataOutputStream 写出的，否则会出现EOFException，因为DataOutputStream 在写出的时候会做一些特殊标记，只有DataInputStream 才能成功的读取。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/771.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">      </span><br><span class="line">import java.io.DataInputStream;</span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">      </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">      </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        write();</span><br><span class="line">        read();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void read() &#123;</span><br><span class="line">        File f &#x3D;new File(&quot;d:&#x2F;lol.txt&quot;);</span><br><span class="line">        try (</span><br><span class="line">                FileInputStream fis  &#x3D; new FileInputStream(f);</span><br><span class="line">                DataInputStream dis &#x3D;new DataInputStream(fis);</span><br><span class="line">        )&#123;</span><br><span class="line">            boolean b&#x3D; dis.readBoolean();</span><br><span class="line">            int i &#x3D; dis.readInt();</span><br><span class="line">            String str &#x3D; dis.readUTF();</span><br><span class="line">             </span><br><span class="line">            System.out.println(&quot;读取到布尔值:&quot;+b);</span><br><span class="line">            System.out.println(&quot;读取到整数:&quot;+i);</span><br><span class="line">            System.out.println(&quot;读取到字符串:&quot;+str);</span><br><span class="line"> </span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void write() &#123;</span><br><span class="line">        File f &#x3D;new File(&quot;d:&#x2F;lol.txt&quot;);</span><br><span class="line">        try (</span><br><span class="line">                FileOutputStream fos  &#x3D; new FileOutputStream(f);</span><br><span class="line">                DataOutputStream dos &#x3D;new DataOutputStream(fos);</span><br><span class="line">        )&#123;</span><br><span class="line">            dos.writeBoolean(true);</span><br><span class="line">            dos.writeInt(300);</span><br><span class="line">            dos.writeUTF(&quot;123 this is gareen&quot;);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-向文件中写入两个数字，然后把这两个数字分别读取出来"><a class="header-anchor" href="#步骤-2-练习-向文件中写入两个数字，然后把这两个数字分别读取出来">¶</a>步骤 2 : 练习-向文件中写入两个数字，然后把这两个数字分别读取出来</h3>
<p>要求<br>
第一种方式： 使用[缓存流]把两个数字以字符串的形式写到文件里，再用[缓存流]以字符串的形式读取出来，然后转换为两个数字。<br>
<strong>注：</strong> 两个数字之间要有分隔符用于区分这两个数字。 比如数字是31和15，如果不使用分隔符，那么就是3115，读取出来就无法识别到底是哪两个数字。 使用分隔符31@15能解决这个问题。</p>
<p>第二种方式： 使用数据流DataOutputStream向文件连续写入两个数字，然后用DataInpuStream连续读取两个数字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package file;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">public class TestFile&#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		File f &#x3D; new File(&quot;D:&#x2F;lol.txt&quot;);</span><br><span class="line">		try(</span><br><span class="line">				FileWriter fw &#x3D; new FileWriter(f);</span><br><span class="line">				PrintWriter pw &#x3D; new PrintWriter(fw);</span><br><span class="line">		) &#123;</span><br><span class="line">			pw.println(&quot;31@15&quot;);</span><br><span class="line">		&#125; catch (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		try(</span><br><span class="line">				FileReader fd &#x3D; new FileReader(f);</span><br><span class="line">				BufferedReader br &#x3D; new BufferedReader(fd);</span><br><span class="line">		) &#123;</span><br><span class="line">			String str &#x3D; br.readLine();</span><br><span class="line">			String[] strs &#x3D; str.split(&quot;@&quot;);</span><br><span class="line">			System.out.println(&quot;两个数字为：&quot; + Integer.valueOf(strs[0]) + &quot;和&quot; + Integer.valueOf(strs[1]));</span><br><span class="line">		&#125; catch (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">package file;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">public class TestFile&#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        File f &#x3D; new File(&quot;D:&#x2F;lol.txt&quot;);</span><br><span class="line">        write(f);</span><br><span class="line">        read(f);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void write(File f)&#123;</span><br><span class="line">        try(</span><br><span class="line">                DataOutputStream dos &#x3D; new DataOutputStream(new FileOutputStream(f))</span><br><span class="line">                ) &#123;</span><br><span class="line">            dos.writeUTF(&quot;31@15&quot;);</span><br><span class="line">        &#125;  catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void read(File f)&#123;</span><br><span class="line">        try(</span><br><span class="line">                DataInputStream dis &#x3D; new DataInputStream(new FileInputStream(f))</span><br><span class="line">                ) &#123;</span><br><span class="line">            String str &#x3D; dis.readUTF();</span><br><span class="line">            String[] strs &#x3D; str.split(&quot;@&quot;);</span><br><span class="line">            System.out.println(&quot;两个数字是：&quot; + Integer.valueOf(strs[0]) + &quot;和&quot; + Integer.valueOf(strs[1]));</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9、JAVA-对象流-OBJECTINPUTSTREAM-OBJECTOUTPUTSTREAM"><a class="header-anchor" href="#9、JAVA-对象流-OBJECTINPUTSTREAM-OBJECTOUTPUTSTREAM">¶</a>9、JAVA 对象流 OBJECTINPUTSTREAM,OBJECTOUTPUTSTREAM</h2>
<h3 id="步骤-1-序列化一个对象"><a class="header-anchor" href="#步骤-1-序列化一个对象">¶</a>步骤 1 : 序列化一个对象</h3>
<p>创建一个Hero对象，设置其名称为garen。<br>
把该对象序列化到一个文件garen.lol。<br>
然后再通过序列化把该文件转换为一个Hero对象</p>
<p>**注：**把一个对象序列化有一个前提是：这个对象的类，必须实现了Serializable接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">    </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.ObjectInputStream;</span><br><span class="line">import java.io.ObjectOutputStream;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">    </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">    </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;创建一个Hero garen</span><br><span class="line">        &#x2F;&#x2F;要把Hero对象直接保存在文件上，务必让Hero类实现Serializable接口</span><br><span class="line">        Hero h &#x3D; new Hero();</span><br><span class="line">        h.name &#x3D; &quot;garen&quot;;</span><br><span class="line">        h.hp &#x3D; 616;</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;准备一个文件用于保存该对象</span><br><span class="line">        File f &#x3D;new File(&quot;d:&#x2F;garen.lol&quot;);</span><br><span class="line"> </span><br><span class="line">        try(</span><br><span class="line">            &#x2F;&#x2F;创建对象输出流</span><br><span class="line">            FileOutputStream fos &#x3D; new FileOutputStream(f);</span><br><span class="line">            ObjectOutputStream oos &#x3D;new ObjectOutputStream(fos);</span><br><span class="line">            &#x2F;&#x2F;创建对象输入流              </span><br><span class="line">            FileInputStream fis &#x3D; new FileInputStream(f);</span><br><span class="line">            ObjectInputStream ois &#x3D;new ObjectInputStream(fis);</span><br><span class="line">        ) &#123;</span><br><span class="line">            oos.writeObject(h);</span><br><span class="line">            Hero h2 &#x3D; (Hero) ois.readObject();</span><br><span class="line">            System.out.println(h2.name);</span><br><span class="line">            System.out.println(h2.hp);</span><br><span class="line">               </span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line"> </span><br><span class="line">import java.io.Serializable;</span><br><span class="line"> </span><br><span class="line">public class Hero implements Serializable &#123;</span><br><span class="line">    &#x2F;&#x2F;表示这个类当前的版本，如果有了变化，比如新设计了属性，就应该修改这个版本号</span><br><span class="line">    private static final long serialVersionUID &#x3D; 1L;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-序列化数组"><a class="header-anchor" href="#步骤-2-练习-序列化数组">¶</a>步骤 2 : 练习-序列化数组</h3>
<p>准备一个长度是10，类型是Hero的数组，使用10个Hero对象初始化该数组</p>
<p>然后把该数组序列化到一个文件heros.lol</p>
<p>接着使用ObjectInputStream 读取该文件，并转换为Hero数组，验证该数组中的内容，是否和序列化之前一样</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2442.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">    </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.ObjectInputStream;</span><br><span class="line">import java.io.ObjectOutputStream;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">    </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">    </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;创建一个Hero garen</span><br><span class="line">        &#x2F;&#x2F;要把Hero对象直接保存在文件上，务必让Hero类实现Serializable接口</span><br><span class="line">    	Hero[] heroes &#x3D; new Hero[10];</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++)&#123;</span><br><span class="line">            heroes[i] &#x3D; new Hero(i);</span><br><span class="line">        &#125;</span><br><span class="line">        File f &#x3D; new File(&quot;D:&#x2F;heros.lol&quot;);</span><br><span class="line">        System.out.println(&quot;查看中文件中反序列化出来的数组中的每一个元素：&quot;);</span><br><span class="line">        try(</span><br><span class="line">                ObjectOutputStream oos &#x3D; new ObjectOutputStream(new FileOutputStream(f));</span><br><span class="line">                ObjectInputStream ois &#x3D; new ObjectInputStream(new FileInputStream(f))</span><br><span class="line">                ) &#123;</span><br><span class="line">            for (Hero h : heroes)&#123;</span><br><span class="line">                oos.writeObject(h);</span><br><span class="line">            &#125;</span><br><span class="line">            for (int i &#x3D; 0; i &lt; 10; i++)&#123;</span><br><span class="line">                Hero h &#x3D; (Hero)ois.readObject();</span><br><span class="line">                System.out.println(&quot;hero:&quot; + h.num);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;  catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line"> </span><br><span class="line">import java.io.Serializable;</span><br><span class="line"> </span><br><span class="line">public class Hero implements Serializable &#123;</span><br><span class="line">    &#x2F;&#x2F;表示这个类当前的版本，如果有了变化，比如新设计了属性，就应该修改这个版本号</span><br><span class="line">    private static final long serialVersionUID &#x3D; 1L;</span><br><span class="line">    public int num;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">    </span><br><span class="line">    public Hero(int i) &#123;</span><br><span class="line">    	num &#x3D; i;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10、JAVA-控制台输入流SYSTEM-IN和SCANNER"><a class="header-anchor" href="#10、JAVA-控制台输入流SYSTEM-IN和SCANNER">¶</a>10、JAVA 控制台输入流SYSTEM.IN和SCANNER</h2>
<h3 id="步骤-1-System-in"><a class="header-anchor" href="#步骤-1-System-in">¶</a>步骤 1 : <a href="http://System.in" target="_blank" rel="noopener">System.in</a></h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line"> </span><br><span class="line">public class TestStream &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; 控制台输入</span><br><span class="line">        try (InputStream is &#x3D; System.in;) &#123;</span><br><span class="line">            while (true) &#123;</span><br><span class="line">                &#x2F;&#x2F; 敲入a,然后敲回车可以看到</span><br><span class="line">                &#x2F;&#x2F; 97 13 10</span><br><span class="line">                &#x2F;&#x2F; 97是a的ASCII码</span><br><span class="line">                &#x2F;&#x2F; 13 10分别对应回车换行</span><br><span class="line">                int i &#x3D; is.read();</span><br><span class="line">                System.out.println(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-Scanner读取字符串"><a class="header-anchor" href="#步骤-2-Scanner读取字符串">¶</a>步骤 2 : Scanner读取字符串</h3>
<p>使用System.in.read虽然可以读取数据，但是很不方便<br>
使用Scanner就可以逐行读取了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line">    </span><br><span class="line">import java.util.Scanner;</span><br><span class="line">    </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">    </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">            Scanner s &#x3D; new Scanner(System.in);</span><br><span class="line">             </span><br><span class="line">            while(true)&#123;</span><br><span class="line">                String line &#x3D; s.nextLine();</span><br><span class="line">                System.out.println(line);</span><br><span class="line">            &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-Scanner从控制台读取整数"><a class="header-anchor" href="#步骤-3-Scanner从控制台读取整数">¶</a>步骤 3 : Scanner从控制台读取整数</h3>
<p>使用Scanner从控制台读取整数</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2142.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"> </span><br><span class="line">import java.util.Scanner;</span><br><span class="line"> </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Scanner s &#x3D; new Scanner(System.in);</span><br><span class="line">        int a &#x3D; s.nextInt();</span><br><span class="line">        System.out.println(&quot;第一个整数：&quot;+a);</span><br><span class="line">        int b &#x3D; s.nextInt();</span><br><span class="line">        System.out.println(&quot;第二个整数：&quot;+b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-自动创建类"><a class="header-anchor" href="#步骤-4-练习-自动创建类">¶</a>步骤 4 : 练习-自动创建类</h3>
<p>自动创建有一个属性的类文件。<br>
通过控制台，获取类名，属性名称，属性类型，根据一个模板文件，自动创建这个类文件，并且为属性提供setter和getter</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2444.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class @class@ &#123;</span><br><span class="line">    public @type@ @property@;</span><br><span class="line">    public @class@() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    public void set@Uproperty@(@type@  @property@)&#123;</span><br><span class="line">        this.@property@ &#x3D; @property@;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    public @type@  get@Uproperty@()&#123;</span><br><span class="line">        return this.@property@;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">package stream;</span><br><span class="line"> </span><br><span class="line">import java.util.Scanner;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.BufferedReader;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line">import java.io.FileWriter;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"> </span><br><span class="line">public class TestStream &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        File fRead &#x3D; new File(&quot;D:&#x2F;1.txt&quot;);</span><br><span class="line">        File fWrite &#x3D; new File(&quot;D:&#x2F;Dog.java&quot;);</span><br><span class="line">        Scanner s &#x3D; new Scanner(System.in);</span><br><span class="line">        replace(fRead, fWrite, s);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    protected static void replace(File fRead, File fWrite, Scanner s) &#123;</span><br><span class="line">        System.out.println(&quot;请输入类的名称：&quot;);</span><br><span class="line">        String className &#x3D; s.nextLine();</span><br><span class="line">        System.out.println(&quot;请输入属性的类型：&quot;);</span><br><span class="line">        String type &#x3D; s.nextLine();</span><br><span class="line">        System.out.println(&quot;请输入属性的名称：&quot;);</span><br><span class="line">        String propertyName &#x3D; s.nextLine();</span><br><span class="line">        try (FileReader fr &#x3D; new FileReader(fRead);</span><br><span class="line">                BufferedReader br &#x3D; new BufferedReader(fr);</span><br><span class="line">                FileWriter fw &#x3D; new FileWriter(fWrite);</span><br><span class="line">                PrintWriter pw &#x3D; new PrintWriter(fw)) &#123;</span><br><span class="line">            while (true) &#123;</span><br><span class="line">                String str &#x3D; br.readLine();</span><br><span class="line">                if (null &#x3D;&#x3D; str)</span><br><span class="line">                    break;</span><br><span class="line">                if (str.contains(&quot;@class@&quot;) || str.contains(&quot;@type@&quot;) || str.contains(&quot;@property@&quot;)</span><br><span class="line">                        || str.contains(&quot;@Uproperty@&quot;)) &#123;</span><br><span class="line">                    str &#x3D; str.replaceAll(&quot;@class@&quot;, className);</span><br><span class="line">                    str &#x3D; str.replaceAll(&quot;@type@&quot;, type);</span><br><span class="line">                    str &#x3D; str.replaceAll(&quot;@property@&quot;, propertyName);</span><br><span class="line">                    str &#x3D; str.replaceAll(&quot;@Uproperty@&quot;, toUpperFirstLetter(propertyName));</span><br><span class="line">                &#125;</span><br><span class="line">                pw.println(str);</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static String toUpperFirstLetter(String propertyName) &#123;</span><br><span class="line">        char c &#x3D; propertyName.charAt(0);</span><br><span class="line">        propertyName &#x3D; propertyName.replace(c, Character.toUpperCase(c));</span><br><span class="line">        return propertyName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11、JAVA-复制文件，复制文件夹"><a class="header-anchor" href="#11、JAVA-复制文件，复制文件夹">¶</a>11、JAVA 复制文件，复制文件夹</h2>
<h3 id="步骤-1-练习-复制文件"><a class="header-anchor" href="#步骤-1-练习-复制文件">¶</a>步骤 1 : 练习-复制文件</h3>
<p>复制文件是常见的IO操作，设计如下方法，实现复制源文件srcFile到目标文件destFile</p>
<p>public static void copyFile(String srcFile, String destFile){</p>
<p>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package file;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">public class TestFile&#123;</span><br><span class="line">	public static void copyFile(String srcFile, String destFile)throws Exception&#123;</span><br><span class="line">        File file &#x3D; new File(srcFile);</span><br><span class="line">        FileInputStream fis &#x3D; new FileInputStream(file);</span><br><span class="line">        BufferedInputStream bis &#x3D; new BufferedInputStream(fis);</span><br><span class="line">        byte[] bytes &#x3D; new byte[(int) file.length()];</span><br><span class="line">        bis.read(bytes);</span><br><span class="line"> </span><br><span class="line">        File file2 &#x3D; new File(destFile);</span><br><span class="line">        if(file2.exists())&#123;</span><br><span class="line">            file2.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        FileOutputStream fos &#x3D; new FileOutputStream(file2);</span><br><span class="line">        BufferedOutputStream bos &#x3D; new BufferedOutputStream(fos);</span><br><span class="line">        bos.write(bytes);</span><br><span class="line">        bos.flush();</span><br><span class="line">        bis.close();</span><br><span class="line">        fis.close();</span><br><span class="line">        bos.close();</span><br><span class="line">        fos.close();</span><br><span class="line">	&#125;</span><br><span class="line">	 public static void main(String[] args)throws Exception &#123;</span><br><span class="line">		 copyFile(&quot;D:\\1.txt&quot;,&quot;D:\\学校\\1.txt&quot;);</span><br><span class="line">	 &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-复制文件夹"><a class="header-anchor" href="#步骤-2-练习-复制文件夹">¶</a>步骤 2 : 练习-复制文件夹</h3>
<p>复制文件夹,实现如下方法，把源文件夹下所有的文件 复制到目标文件夹下(包括子文件夹)</p>
<p>public static void copyFolder(String srcFolder, String destFolder){</p>
<p>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package file;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">public class TestFile&#123;</span><br><span class="line">	public static void main(String[] args)&#123;</span><br><span class="line">				copyFolder(&quot;D:\\test&quot;,&quot;D:\\test2&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">			public static void copyFolder(String srcFolder, String destFolder)&#123;</span><br><span class="line">				File filesrc&#x3D;new File(srcFolder);</span><br><span class="line">				File filedest&#x3D;new File(destFolder);</span><br><span class="line">				File[] files&#x3D;filesrc.listFiles();</span><br><span class="line">				for (int i &#x3D; 0; i &lt;files.length; i++) &#123;</span><br><span class="line">					if (files[i].isFile())&#123;</span><br><span class="line">						try &#123;</span><br><span class="line">							FileInputStream in&#x3D;new FileInputStream(files[i]);</span><br><span class="line">							File file1&#x3D;new File(filedest,files[i].getName());</span><br><span class="line">							FileOutputStream ou&#x3D;new FileOutputStream(file1);</span><br><span class="line">							byte[] buf&#x3D;new byte[1024];</span><br><span class="line">							int d;</span><br><span class="line">							while ((d&#x3D;in.read(buf))!&#x3D;-1)&#123;</span><br><span class="line">								ou.write(buf,0,d);</span><br><span class="line">							&#125;</span><br><span class="line">							ou.close();</span><br><span class="line">							in.close();</span><br><span class="line">						&#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">							e.printStackTrace();</span><br><span class="line">						&#125; catch (IOException e) &#123;</span><br><span class="line">							e.printStackTrace();</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;else if (files[i].isDirectory())&#123;</span><br><span class="line">						File file1&#x3D;new File(filedest,files[i].getName());</span><br><span class="line">						file1.mkdir();</span><br><span class="line">						copyFolder(files[i].getAbsolutePath(),file1.getAbsolutePath());</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-查找文件内容"><a class="header-anchor" href="#步骤-3-练习-查找文件内容">¶</a>步骤 3 : 练习-查找文件内容</h3>
<p>public static void search(File folder, String search);</p>
<p>假设你的项目目录是 e:/project，遍历这个目录下所有的java文件（包括子文件夹），找出文件内容包括 <strong>Magic</strong>的那些文件，并打印出来。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2491.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package file;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">public class TestFile&#123;</span><br><span class="line">	public static void search(File f, String s) &#123;</span><br><span class="line">        if (f.isDirectory() &#x3D;&#x3D; true) &#123;</span><br><span class="line">            File[] file &#x3D; f.listFiles();</span><br><span class="line">            for (File a : file) &#123;</span><br><span class="line">                search(a, s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (f.isFile() &#x3D;&#x3D; true &amp;&amp; f.getName().endsWith(&quot;.java&quot;)) &#123;</span><br><span class="line">            try (FileReader fre &#x3D; new FileReader(f); BufferedReader bre &#x3D; new BufferedReader(fre);) &#123;</span><br><span class="line">                String str &#x3D; &quot;0&quot;;</span><br><span class="line">                while ((str &#x3D; bre.readLine()) !&#x3D; null) &#123;</span><br><span class="line">                    if (str.contains(s))&#123;</span><br><span class="line">                        System.out.println(f.getAbsolutePath());</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            catch (IOException E) &#123;</span><br><span class="line">                System.out.println(E);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        search(new File(&quot;D:\\test&quot;), &quot;this&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="12、流关系图"><a class="header-anchor" href="#12、流关系图">¶</a>12、流关系图</h2>
<h3 id="步骤-1-流关系图"><a class="header-anchor" href="#步骤-1-流关系图">¶</a>步骤 1 : 流关系图</h3>
<h3 id="步骤-2-其他流"><a class="header-anchor" href="#步骤-2-其他流">¶</a>步骤 2 : 其他流</h3>
<p>除了上图所接触的流之外，还有很多其他流，如图所示InputStream下面有很多的子类。 这些子类不需要立即掌握，他们大体上用法是差不多的，只是在一些特殊场合下用起来更方便，在工作中用到的时候再进行学习就行了。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/5679.png" alt></p>
<h1 id="三、集合框架"><a class="header-anchor" href="#三、集合框架">¶</a>三、集合框架</h1>
<h2 id="1、ARRAYLIST-JAVA-ARRAYLIST-完整教程"><a class="header-anchor" href="#1、ARRAYLIST-JAVA-ARRAYLIST-完整教程">¶</a>1、ARRAYLIST - JAVA ARRAYLIST 完整教程</h2>
<h3 id="示例-1-使用数组的局限性"><a class="header-anchor" href="#示例-1-使用数组的局限性">¶</a>示例 1 : 使用数组的局限性</h3>
<p>如果要存放多个对象，可以使用数组，但是数组有局限性<br>
比如 声明长度是10的数组<br>
不用的数组就浪费了<br>
超过10的个数，又放不下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;数组的局限性</span><br><span class="line">        Hero heros[] &#x3D; new Hero[10];</span><br><span class="line">        &#x2F;&#x2F;声明长度是10的数组</span><br><span class="line">        &#x2F;&#x2F;不用的数组就浪费了</span><br><span class="line">        &#x2F;&#x2F;超过10的个数，又放不下</span><br><span class="line">        heros[0] &#x3D; new Hero(&quot;盖伦&quot;);</span><br><span class="line">                &#x2F;&#x2F;放不下要报错</span><br><span class="line">        heros[20] &#x3D; new Hero(&quot;提莫&quot;);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line"> </span><br><span class="line">public class Hero &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line"> </span><br><span class="line">    public int damage;</span><br><span class="line"> </span><br><span class="line">    public Hero() &#123;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 增加一个初始化name的构造方法</span><br><span class="line">    public Hero(String name) &#123;</span><br><span class="line"> </span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 重写toString方法</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-ArrayList存放对象"><a class="header-anchor" href="#示例-2-ArrayList存放对象">¶</a>示例 2 : ArrayList存放对象</h3>
<p>为了解决数组的局限性，引入容器类的概念。 最常见的容器类就是<br>
ArrayList<br>
[容器的容量]&quot;capacity&quot;会随着对象的增加，自动增长<br>
只需要不断往容器里增加英雄即可，不用担心会出现数组的边界问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    @SuppressWarnings(&quot;rawtypes&quot;)</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;容器类ArrayList，用于存放对象</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line">        heros.add( new Hero(&quot;盖伦&quot;));</span><br><span class="line">        System.out.println(heros.size());</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;容器的容量&quot;capacity&quot;会随着对象的增加，自动增长</span><br><span class="line">        &#x2F;&#x2F;只需要不断往容器里增加英雄即可，不用担心会出现数组的边界问题。</span><br><span class="line">        heros.add( new Hero(&quot;提莫&quot;));</span><br><span class="line">        System.out.println(heros.size());</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、ARRAYLIST-ARRAYLIST-常用方法"><a class="header-anchor" href="#2、ARRAYLIST-ARRAYLIST-常用方法">¶</a>2、ARRAYLIST - ARRAYLIST 常用方法</h2>
<h3 id="步骤-1-增加"><a class="header-anchor" href="#步骤-1-增加">¶</a>步骤 1 : 增加</h3>
<p><strong>add</strong> 有两种用法<br>
第一种是直接add对象，把对象加在最后面</p>
<p>heros.add(new Hero(&quot;hero &quot; + i));</p>
<p>第二种是在指定位置加对象</p>
<p>heros.add(3, specialHero);</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2453.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把5个对象加入到ArrayList中</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(heros);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 在指定位置增加对象</span><br><span class="line">        Hero specialHero &#x3D; new Hero(&quot;special hero&quot;);</span><br><span class="line">        heros.add(3, specialHero);</span><br><span class="line"> </span><br><span class="line">        System.out.println(heros.toString());</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">  </span><br><span class="line">public class Hero &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">  </span><br><span class="line">    public int damage;</span><br><span class="line">  </span><br><span class="line">    public Hero() &#123;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 增加一个初始化name的构造方法</span><br><span class="line">    public Hero(String name) &#123;</span><br><span class="line">  </span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 重写toString方法</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-判断是否存在"><a class="header-anchor" href="#步骤-2-判断是否存在">¶</a>步骤 2 : 判断是否存在</h3>
<p>通过方法<strong>contains</strong> 判断一个对象是否在容器中<br>
判断标准： 是否是同一个对象，而不是name是否相同</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2454.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 初始化5个对象</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line">        Hero specialHero &#x3D; new Hero(&quot;special hero&quot;);</span><br><span class="line">        heros.add(specialHero);</span><br><span class="line"> </span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        &#x2F;&#x2F; 判断一个对象是否在容器中</span><br><span class="line">        &#x2F;&#x2F; 判断标准： 是否是同一个对象，而不是name是否相同</span><br><span class="line">        System.out.print(&quot;虽然一个新的对象名字也叫 hero 1，但是contains的返回是:&quot;);</span><br><span class="line">        System.out.println(heros.contains(new Hero(&quot;hero 1&quot;)));</span><br><span class="line">        System.out.print(&quot;而对specialHero的判断，contains的返回是:&quot;);</span><br><span class="line">        System.out.println(heros.contains(specialHero));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-获取指定位置的对象"><a class="header-anchor" href="#步骤-3-获取指定位置的对象">¶</a>步骤 3 : 获取指定位置的对象</h3>
<p>通过get获取指定位置的对象，如果输入的下标越界，一样会报错</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2455.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 初始化5个对象</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line">        Hero specialHero &#x3D; new Hero(&quot;special hero&quot;);</span><br><span class="line">        heros.add(specialHero);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;获取指定位置的对象</span><br><span class="line">        System.out.println(heros.get(5));</span><br><span class="line">        &#x2F;&#x2F;如果超出了范围，依然会报错</span><br><span class="line">        System.out.println(heros.get(6));</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-获取对象所处的位置"><a class="header-anchor" href="#步骤-4-获取对象所处的位置">¶</a>步骤 4 : 获取对象所处的位置</h3>
<p><strong>indexOf</strong>用于判断一个对象在ArrayList中所处的位置<br>
与[contains]一样，判断标准是对象是否相同，而非对象的name值是否相等</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2456.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 初始化5个对象</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line">        Hero specialHero &#x3D; new Hero(&quot;special hero&quot;);</span><br><span class="line">        heros.add(specialHero);</span><br><span class="line"> </span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;specialHero所处的位置:&quot;+heros.indexOf(specialHero));</span><br><span class="line">        System.out.println(&quot;新的英雄，但是名字是\&quot;hero 1\&quot;所处的位置:&quot;+heros.indexOf(new Hero(&quot;hero 1&quot;)));</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-删除"><a class="header-anchor" href="#步骤-5-删除">¶</a>步骤 5 : 删除</h3>
<p><strong>remove</strong>用于把对象从ArrayList中删除<br>
remove可以根据下标删除ArrayList的元素</p>
<p>heros.remove(2);</p>
<p>也可以根据对象删除</p>
<p>heros.remove(specialHero);</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2457.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 初始化5个对象</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line">        Hero specialHero &#x3D; new Hero(&quot;special hero&quot;);</span><br><span class="line">        heros.add(specialHero);</span><br><span class="line">         </span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        heros.remove(2);</span><br><span class="line">        System.out.println(&quot;删除下标是2的对象&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;删除special hero&quot;);</span><br><span class="line">        heros.remove(specialHero);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-替换"><a class="header-anchor" href="#步骤-6-替换">¶</a>步骤 6 : 替换</h3>
<p><strong>set</strong>用于替换指定位置的元素</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2458.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 初始化5个对象</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line">        Hero specialHero &#x3D; new Hero(&quot;special hero&quot;);</span><br><span class="line">        heros.add(specialHero);</span><br><span class="line">         </span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;把下标是5的元素，替换为\&quot;hero 5\&quot;&quot;);</span><br><span class="line">        heros.set(5, new Hero(&quot;hero 5&quot;));</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-获取大小"><a class="header-anchor" href="#步骤-7-获取大小">¶</a>步骤 7 : 获取大小</h3>
<p><strong>size</strong> 用于获取ArrayList的大小</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2459.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 初始化5个对象</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line">        Hero specialHero &#x3D; new Hero(&quot;special hero&quot;);</span><br><span class="line">        heros.add(specialHero);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;获取ArrayList的大小：&quot;);</span><br><span class="line">        System.out.println(heros.size());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-8-转换为数组"><a class="header-anchor" href="#步骤-8-转换为数组">¶</a>步骤 8 : 转换为数组</h3>
<p><strong>toArray</strong>可以把一个ArrayList对象转换为数组。<br>
需要注意的是，如果要转换为一个Hero数组，那么需要传递一个Hero数组类型的对象给toArray()，这样toArray方法才知道，你希望转换为哪种类型的数组，否则只能转换为Object数组</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2460.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 初始化5个对象</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line">        Hero specialHero &#x3D; new Hero(&quot;special hero&quot;);</span><br><span class="line">        heros.add(specialHero);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        Hero hs[] &#x3D; (Hero[])heros.toArray(new Hero[]&#123;&#125;);</span><br><span class="line">        System.out.println(&quot;数组:&quot; +hs);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-9-把另一个容器所有对象都加进来"><a class="header-anchor" href="#步骤-9-把另一个容器所有对象都加进来">¶</a>步骤 9 : 把另一个容器所有对象都加进来</h3>
<p><strong>addAll</strong> 把另一个容器所有对象都加进来</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2461.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 初始化5个对象</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;ArrayList heros:\t&quot; + heros);</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;把另一个容器里所有的元素，都加入到该容器里来</span><br><span class="line">        ArrayList anotherHeros &#x3D; new ArrayList();</span><br><span class="line">        anotherHeros.add(new Hero(&quot;hero a&quot;));</span><br><span class="line">        anotherHeros.add(new Hero(&quot;hero b&quot;));</span><br><span class="line">        anotherHeros.add(new Hero(&quot;hero c&quot;));</span><br><span class="line">        System.out.println(&quot;anotherHeros heros:\t&quot; + anotherHeros);</span><br><span class="line">        heros.addAll(anotherHeros);</span><br><span class="line">        System.out.println(&quot;把另一个ArrayList的元素都加入到当前ArrayList:&quot;);</span><br><span class="line">        System.out.println(&quot;ArrayList heros:\t&quot; + heros);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-10-清空"><a class="header-anchor" href="#步骤-10-清空">¶</a>步骤 10 : 清空</h3>
<p><strong>clear</strong> 清空一个ArrayList</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2462.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 初始化5个对象</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;ArrayList heros:\t&quot; + heros);</span><br><span class="line">        System.out.println(&quot;使用clear清空&quot;);</span><br><span class="line">        heros.clear();</span><br><span class="line">        System.out.println(&quot;ArrayList heros:\t&quot; + heros);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-11-练习-判断是否相同"><a class="header-anchor" href="#步骤-11-练习-判断是否相同">¶</a>步骤 11 : 练习-判断是否相同</h3>
<p>如果就是要判断集合里是否存在一个 name等于 &quot;hero 1&quot;的对象，应该怎么做？</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2463.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">    ArrayList heros &#x3D; new ArrayList();</span><br><span class="line">     </span><br><span class="line">    for(int i&#x3D;0;i&lt;5;i++)&#123;</span><br><span class="line">        heros.add(new Hero(&quot;hero&quot;+i));</span><br><span class="line">    &#125;</span><br><span class="line">    Hero[] name &#x3D;(Hero[])heros.toArray(new Hero[]&#123;&#125;);</span><br><span class="line">    for(int i&#x3D;0;i&lt;name.length;i++)&#123;</span><br><span class="line">        if(name[i].toString().equals(&quot;hero1&quot;))&#123;</span><br><span class="line">            System.out.println(&quot;找到了名字hero1,下标为&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-12-练习-MyStringBuffer"><a class="header-anchor" href="#步骤-12-练习-MyStringBuffer">¶</a>步骤 12 : 练习-MyStringBuffer</h3>
<p>做一个一样的[MyStringBuffer]练习，但是不使用字符数组，而是使用ArrayList来实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">package ArrayList;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">public class MyStringBuffer &#123;</span><br><span class="line">    ArrayList value;</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;有参构造方法</span><br><span class="line">        public MyStringBuffer(String str)&#123;</span><br><span class="line">            this();</span><br><span class="line">            if(null&#x3D;&#x3D;str)</span><br><span class="line">                return;</span><br><span class="line">              </span><br><span class="line">            char cs[] &#x3D; str.toCharArray();</span><br><span class="line">         </span><br><span class="line">            for (int i &#x3D; 0; i &lt; str.length(); i++) &#123;</span><br><span class="line">                &#x2F;&#x2F;char c &#x3D; cs[i];</span><br><span class="line">                value.add(cs[i]);</span><br><span class="line">            &#125;</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        public MyStringBuffer() &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated constructor stub</span><br><span class="line">            value &#x3D; new ArrayList();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        public void append(String str) &#123;</span><br><span class="line">      </span><br><span class="line">            insert(value.size(),str);</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        public void append(char c) &#123;</span><br><span class="line">            append(String.valueOf(c));</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        public void insert(int pos, char b) &#123;</span><br><span class="line">            insert(pos,String.valueOf(b));</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        public void delete(int start) &#123;</span><br><span class="line">              </span><br><span class="line">            delete(start,value.size());</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        public void delete(int start, int end) &#123;</span><br><span class="line">            &#x2F;&#x2F;边界条件判断</span><br><span class="line">            if(start&lt;0)</span><br><span class="line">                return;</span><br><span class="line">              </span><br><span class="line">            if(start&gt;value.size())</span><br><span class="line">                return;</span><br><span class="line">              </span><br><span class="line">            if(end&lt;0)</span><br><span class="line">                return;</span><br><span class="line">              </span><br><span class="line">            if(end&gt;value.size())</span><br><span class="line">                return;</span><br><span class="line">              </span><br><span class="line">            if(start&gt;&#x3D;end)</span><br><span class="line">                return;</span><br><span class="line">            </span><br><span class="line">            for (int i &#x3D; 0; i &lt; end - start; i++) &#123;</span><br><span class="line">                value.remove(start);</span><br><span class="line">            &#125;</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        public void reverse() &#123;</span><br><span class="line">      </span><br><span class="line">            for (int i &#x3D; 0; i &lt; value.size()&#x2F;2; i++) &#123;</span><br><span class="line">               int length &#x3D; value.size();</span><br><span class="line">               char temp &#x3D; (char) value.get(i);</span><br><span class="line">               value.set(i,value.get(length -i-1) );</span><br><span class="line">               value.set(length-i-1, temp);</span><br><span class="line">            &#125;</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        public int length() &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">            return value.size();</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        </span><br><span class="line">        public void insert(int pos, String b) &#123;</span><br><span class="line">      </span><br><span class="line">              </span><br><span class="line">            &#x2F;&#x2F; 边界条件判断</span><br><span class="line">            if (pos &lt; 0)</span><br><span class="line">                return;</span><br><span class="line">      </span><br><span class="line">            if (pos &gt; value.size())</span><br><span class="line">                return;</span><br><span class="line">      </span><br><span class="line">            if (null &#x3D;&#x3D; b)</span><br><span class="line">                return;</span><br><span class="line">      </span><br><span class="line">            &#x2F;&#x2F; 无需手动扩容</span><br><span class="line">      </span><br><span class="line">            char[] cs &#x3D; b.toCharArray();</span><br><span class="line">            for (int i &#x3D; 0; i &lt; cs.length; i++) &#123;</span><br><span class="line">&#x2F;&#x2F;              char c &#x3D; cs[i];</span><br><span class="line">                value.add(pos + i, cs[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        public String toString()&#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">            char[] charValue &#x3D; new char[value.size()];</span><br><span class="line">            for (int i &#x3D; 0; i &lt; value.size(); i++) &#123;</span><br><span class="line">                charValue[i] &#x3D; (char) value.get(i);</span><br><span class="line">            &#125;</span><br><span class="line">            return new String(charValue);</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        public static void main(String[] args) &#123;</span><br><span class="line">            MyStringBuffer sb &#x3D; new MyStringBuffer(&quot;there light&quot;);</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">            sb.insert(0, &quot;let &quot;);</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">      </span><br><span class="line">            sb.insert(10, &quot;be &quot;);</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">            sb.insert(0, &quot;God Say:&quot;);</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">            sb.append(&quot;!&quot;);</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">            sb.append(&#39;?&#39;);</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">            sb.reverse();</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">              </span><br><span class="line">            sb.reverse();</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">              </span><br><span class="line">            sb.delete(0,4);</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">            sb.delete(4);</span><br><span class="line">            System.out.println(sb);</span><br><span class="line">      </span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、ARRAYLIST-ARRAYLIST与LIST接口"><a class="header-anchor" href="#3、ARRAYLIST-ARRAYLIST与LIST接口">¶</a>3、ARRAYLIST - ARRAYLIST与LIST接口</h2>
<h3 id="步骤-1-ArrayList和List"><a class="header-anchor" href="#步骤-1-ArrayList和List">¶</a>步骤 1 : ArrayList和List</h3>
<p>ArrayList实现了接口List<br>
常见的写法会把引用声明为接口List类型<br>
注意：是<strong>java.util.List</strong>,而<strong>不是</strong>java.awt.List</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/808.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;ArrayList实现了接口List</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;常见的写法会把引用声明为接口List类型</span><br><span class="line">        &#x2F;&#x2F;注意：是java.util.List,而不是java.awt.List</span><br><span class="line">        &#x2F;&#x2F;接口引用指向子类对象（多态）</span><br><span class="line">         </span><br><span class="line">        List heros &#x3D; new ArrayList();</span><br><span class="line">        heros.add( new Hero(&quot;盖伦&quot;));</span><br><span class="line">        System.out.println(heros.size());</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-List接口的方法"><a class="header-anchor" href="#步骤-2-List接口的方法">¶</a>步骤 2 : List接口的方法</h3>
<p>因为ArrayList实现了List接口，所以List接口的方法ArrayList都实现了。<br>
在[ArrayList 常用方法]章节有详细的讲解，在此不作赘述</p>
<h2 id="4、ARRAYLIST-ARRAYLIST上使用泛型"><a class="header-anchor" href="#4、ARRAYLIST-ARRAYLIST上使用泛型">¶</a>4、ARRAYLIST - ARRAYLIST上使用泛型</h2>
<h3 id="步骤-1-泛型-Generic"><a class="header-anchor" href="#步骤-1-泛型-Generic">¶</a>步骤 1 : 泛型 Generic</h3>
<p>不指定泛型的容器，可以存放任何类型的元素<br>
指定了泛型的容器，只能存放指定类型的元素以及其子类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package property;</span><br><span class="line"> </span><br><span class="line">public class Item &#123;</span><br><span class="line">    String name;</span><br><span class="line">    int price;</span><br><span class="line">     </span><br><span class="line">    public Item()&#123;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;提供一个初始化name的构造方法</span><br><span class="line">    public Item(String name)&#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public void effect()&#123;</span><br><span class="line">        System.out.println(&quot;物品使用后，可以有效果&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">  </span><br><span class="line">import property.Item;</span><br><span class="line">import charactor.APHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;对于不使用泛型的容器，可以往里面放英雄，也可以往里面放物品</span><br><span class="line">        List heros &#x3D; new ArrayList();</span><br><span class="line">          </span><br><span class="line">        heros.add(new Hero(&quot;盖伦&quot;));</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;本来用于存放英雄的容器，现在也可以存放物品了</span><br><span class="line">        heros.add(new Item(&quot;冰杖&quot;));</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;对象转型会出现问题</span><br><span class="line">        Hero h1&#x3D;  (Hero) heros.get(0);</span><br><span class="line">        &#x2F;&#x2F;尤其是在容器里放的对象太多的时候，就记不清楚哪个位置放的是哪种类型的对象了</span><br><span class="line">        Hero h2&#x3D;  (Hero) heros.get(1);</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;引入泛型Generic</span><br><span class="line">        &#x2F;&#x2F;声明容器的时候，就指定了这种容器，只能放Hero，放其他的就会出错</span><br><span class="line">        List&lt;Hero&gt; genericheros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        genericheros.add(new Hero(&quot;盖伦&quot;));</span><br><span class="line">        &#x2F;&#x2F;如果不是Hero类型，根本就放不进去</span><br><span class="line">        &#x2F;&#x2F;genericheros.add(new Item(&quot;冰杖&quot;));</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;除此之外，还能存放Hero的子类</span><br><span class="line">        genericheros.add(new APHero());</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;并且在取出数据的时候，不需要再进行转型了，因为里面肯定是放的Hero或者其子类</span><br><span class="line">        Hero h &#x3D; genericheros.get(0);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-泛型的简写"><a class="header-anchor" href="#步骤-2-泛型的简写">¶</a>步骤 2 : 泛型的简写</h3>
<p>为了不使编译器出现警告，需要前后都使用泛型，像这样：</p>
<p>List<Hero> genericheros = new ArrayList<Hero>();</Hero></Hero></p>
<p>不过JDK7提供了一个可以略微减少代码量的泛型简写方式</p>
<p>List<Hero> genericheros2 = new ArrayList&lt;&gt;();</Hero></p>
<p>后面的泛型可以用&lt;&gt;来代替，聊胜于无吧</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Hero&gt; genericheros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        List&lt;Hero&gt; genericheros2 &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-泛型的系统学习"><a class="header-anchor" href="#步骤-3-泛型的系统学习">¶</a>步骤 3 : 泛型的系统学习</h3>
<p>泛型的知识还包含 [支持泛型的类] [泛型转型] [通配符] 这些内容都在[泛型章节]详细展开</p>
<h3 id="步骤-4-练习-支持泛型的ArrayList"><a class="header-anchor" href="#步骤-4-练习-支持泛型的ArrayList">¶</a>步骤 4 : 练习-支持泛型的ArrayList</h3>
<p>借助泛型和前面学习的面向对象的知识，设计一个ArrayList，使得这个ArrayList里，又可以放Hero，又可以放Item,但是除了这两种对象，其他的对象都不能放</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class TestCollection &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">            Hero h1 &#x3D; new Hero();</span><br><span class="line">            Hero h2 &#x3D; new Hero();</span><br><span class="line"> </span><br><span class="line">            List&lt;LOL&gt; lollist &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">            lollist.add(new Hero(&quot;maodiao&quot;));</span><br><span class="line">            lollist.add(new Item(&quot;shadiao&quot;));</span><br><span class="line">            lollist.forEach(l-&gt;System.out.println(l.name));</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">public class LOL &#123;</span><br><span class="line">    public String name;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">public class Hero extends LOL &#123;&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">public class Item extends LOL &#123;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;步骤 4 : 练习-支持泛型的ArrayList</span><br><span class="line">        List&lt;LOL&gt; lolList &#x3D; new ArrayList&lt;LOL&gt;();&#x2F;&#x2F;通过接口实现Hero跟Item的连接，并且可以直接调用接口,换做继承也行，但是问题一样，就是怎么打印出来</span><br><span class="line">        lolList.add(new Hero3(&quot;Lily&quot;));&#x2F;&#x2F;能放Hero</span><br><span class="line">        lolList.add(new Item2(&quot;long pike&quot;));&#x2F;&#x2F;也能放Item</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;        lolList.add(new GiantDragon());&#x2F;&#x2F;除了Hero和Item容不下其他</span><br><span class="line">        System.out.println(lolList.get(1).getName());&#x2F;&#x2F;给接口写了一个getName方法，然后Hero3 和 Item2 类都需要重写这个方法，然后就可以直接调用了</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;Hero的</span><br><span class="line">package property;</span><br><span class="line"> </span><br><span class="line">import collection.Hero;</span><br><span class="line"> </span><br><span class="line">public class Item extends Hero &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    int price;</span><br><span class="line">     </span><br><span class="line">    public Item() &#123;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">    public Item(String name) &#123;</span><br><span class="line">          </span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 重写toString方法</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;下面是Testcollection5 </span><br><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import property.Item;</span><br><span class="line">&#x2F;&#x2F;import collection.Hero;</span><br><span class="line"> </span><br><span class="line">public class Testcollection5   &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Hero&gt; al &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        al.add(new Hero(&quot;盖伦&quot;));</span><br><span class="line">        al.add(new Item(&quot;冰杖&quot;));</span><br><span class="line">         </span><br><span class="line">         </span><br><span class="line">        Hero h &#x3D; (Hero) al.get(0);</span><br><span class="line">        Item g &#x3D; (Item) al.get(1);</span><br><span class="line">         </span><br><span class="line">        System.out.println(h.name);</span><br><span class="line">        System.out.println(g.name);     </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5、ARRAYLIST-遍历ARRAYLIST的三种方法"><a class="header-anchor" href="#5、ARRAYLIST-遍历ARRAYLIST的三种方法">¶</a>5、ARRAYLIST - 遍历ARRAYLIST的三种方法</h2>
<h3 id="步骤-1-用for循环遍历"><a class="header-anchor" href="#步骤-1-用for循环遍历">¶</a>步骤 1 : 用for循环遍历</h3>
<p>通过前面的学习，知道了可以用size()和get()分别得到大小，和获取指定位置的元素，结合for循环就可以遍历出ArrayList的内容</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2469.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 放5个Hero进入容器</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero name &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 第一种遍历 for循环</span><br><span class="line">        System.out.println(&quot;--------for 循环-------&quot;);</span><br><span class="line">        for (int i &#x3D; 0; i &lt; heros.size(); i++) &#123;</span><br><span class="line">            Hero h &#x3D; heros.get(i);</span><br><span class="line">            System.out.println(h);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-迭代器遍历"><a class="header-anchor" href="#步骤-2-迭代器遍历">¶</a>步骤 2 : 迭代器遍历</h3>
<p>使用迭代器Iterator遍历集合中的元素</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/806.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;放5个Hero进入容器</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero name &quot; +i));</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;第二种遍历，使用迭代器</span><br><span class="line">        System.out.println(&quot;--------使用while的iterator-------&quot;);</span><br><span class="line">        Iterator&lt;Hero&gt; it&#x3D; heros.iterator();</span><br><span class="line">        &#x2F;&#x2F;从最开始的位置判断&quot;下一个&quot;位置是否有数据</span><br><span class="line">        &#x2F;&#x2F;如果有就通过next取出来，并且把指针向下移动</span><br><span class="line">        &#x2F;&#x2F;直到&quot;下一个&quot;位置没有数据</span><br><span class="line">        while(it.hasNext())&#123;</span><br><span class="line">            Hero h &#x3D; it.next();</span><br><span class="line">            System.out.println(h);</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;迭代器的for写法</span><br><span class="line">        System.out.println(&quot;--------使用for的iterator-------&quot;);</span><br><span class="line">        for (Iterator&lt;Hero&gt; iterator &#x3D; heros.iterator(); iterator.hasNext();) &#123;</span><br><span class="line">            Hero hero &#x3D; (Hero) iterator.next();</span><br><span class="line">            System.out.println(hero);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-用增强型for循环"><a class="header-anchor" href="#步骤-3-用增强型for循环">¶</a>步骤 3 : 用增强型for循环</h3>
<p>使用增强型for循环可以非常方便的遍历ArrayList中的元素，这是很多开发人员的首选。</p>
<p>不过增强型for循环也有不足：<br>
无法用来进行ArrayList的初始化<br>
无法得知当前是第几个元素了，当需要只打印单数元素的时候，就做不到了。 必须再自定下标变量。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2470.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 放5个Hero进入容器</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero name &quot; + i));</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 第三种，增强型for循环</span><br><span class="line">        System.out.println(&quot;--------增强型for循环-------&quot;);</span><br><span class="line">        for (Hero h : heros) &#123;</span><br><span class="line">            System.out.println(h);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-删除ArrayList中的数据"><a class="header-anchor" href="#步骤-4-练习-删除ArrayList中的数据">¶</a>步骤 4 : 练习-删除ArrayList中的数据</h3>
<p>首先初始化一个Hero集合，里面放100个Hero对象，名称分别是从<br>
hero 0<br>
hero 1<br>
hero 2<br>
…<br>
hero 99.</p>
<p>通过遍历的手段，删除掉名字编号是8的倍数的对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">public class Delect &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        System.out.println(&quot;删除掉名字编号是8的倍数后的元素有：&quot;);</span><br><span class="line">        for(int i&#x3D;0;i&lt;100;i++)&#123;</span><br><span class="line">            if(i%8!&#x3D;0)&#123;</span><br><span class="line">                heros.add(new Hero(&quot;hero &quot;+i));</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        for(Hero h:heros)&#123;</span><br><span class="line">            System.out.print(h.name + &quot; &quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">public class Delect &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		System.out.println(&quot;原集合元素为：&quot;);</span><br><span class="line">		for(int i&#x3D;0;i&lt;100;i++)&#123;</span><br><span class="line">			heros.add(new Hero(&quot;hero &quot;+i));</span><br><span class="line">			System.out.print(&quot;hero &quot;+i+&quot; &quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;现集合元素为：&quot;);</span><br><span class="line">		for(int j&#x3D;0;j&lt;heros.size();j++)&#123;</span><br><span class="line">			String[] index &#x3D; heros.get(j).name.split(&quot; &quot;);</span><br><span class="line">			int indexNum &#x3D; Integer.parseInt(index[1]);</span><br><span class="line">			if(indexNum%8&#x3D;&#x3D;0)&#123;</span><br><span class="line">				heros.remove(j);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		for(Hero h:heros)&#123;</span><br><span class="line">			System.out.print(h.name + &quot; &quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"></span><br><span class="line">public class Hero &#123;</span><br><span class="line"></span><br><span class="line">	public String name;</span><br><span class="line"></span><br><span class="line">	public Hero(String name) &#123;</span><br><span class="line">		</span><br><span class="line">		this.name &#x3D; name;</span><br><span class="line">		&#x2F;&#x2F; TODO Auto-generated constructor stub</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6、其他集合-JAVA-LINKEDLIST"><a class="header-anchor" href="#6、其他集合-JAVA-LINKEDLIST">¶</a>6、其他集合 - JAVA LINKEDLIST</h2>
<h3 id="示例-1-LinkedList-与-List接口"><a class="header-anchor" href="#示例-1-LinkedList-与-List接口">¶</a>示例 1 : LinkedList 与 List接口</h3>
<p>与[ArrayList]一样，LinkedList也实现了List接口，诸如add,remove,contains等等方法。 详细使用，请参考[ArrayList 常用方法]，在此不作赘述。</p>
<p>接下来要讲的是LinkedList的一些特别的地方</p>
<h3 id="示例-2-双向链表-Deque"><a class="header-anchor" href="#示例-2-双向链表-Deque">¶</a>示例 2 : 双向链表 - Deque</h3>
<p>除了实现了List接口外，LinkedList还实现了<strong>双向链表结构</strong>Deque，可以很方便的在头尾插入删除数据</p>
<p>什么是链表结构: 与数组结构相比较，数组结构，就好像是电影院，每个位置都有标示，每个位置之间的间隔都是一样的。 而链表就相当于佛珠，每个珠子，只连接前一个和后一个，不用关心除此之外的其他佛珠在哪里。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/809.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.LinkedList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;LinkedList是一个双向链表结构的list</span><br><span class="line">        LinkedList&lt;Hero&gt; ll &#x3D;new LinkedList&lt;Hero&gt;();</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;所以可以很方便的在头部和尾部插入数据</span><br><span class="line">        &#x2F;&#x2F;在最后插入新的英雄</span><br><span class="line">        ll.addLast(new Hero(&quot;hero1&quot;));</span><br><span class="line">        ll.addLast(new Hero(&quot;hero2&quot;));</span><br><span class="line">        ll.addLast(new Hero(&quot;hero3&quot;));</span><br><span class="line">        System.out.println(ll);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;在最前面插入新的英雄</span><br><span class="line">        ll.addFirst(new Hero(&quot;heroX&quot;));</span><br><span class="line">        System.out.println(ll);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;查看最前面的英雄</span><br><span class="line">        System.out.println(ll.getFirst());</span><br><span class="line">        &#x2F;&#x2F;查看最后面的英雄</span><br><span class="line">        System.out.println(ll.getLast());</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;查看不会导致英雄被删除</span><br><span class="line">        System.out.println(ll);</span><br><span class="line">        &#x2F;&#x2F;取出最前面的英雄</span><br><span class="line">        System.out.println(ll.removeFirst());</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;取出最后面的英雄</span><br><span class="line">        System.out.println(ll.removeLast());</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;取出会导致英雄被删除</span><br><span class="line">        System.out.println(ll);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-队列-Queue"><a class="header-anchor" href="#示例-3-队列-Queue">¶</a>示例 3 : 队列 - Queue</h3>
<p>LinkedList 除了实现了List和Deque外，还实现了<strong>Queue</strong>接口(队列)。<br>
Queue是先进先出队列 <strong>FIFO</strong>，常用方法：<br>
<strong>offer</strong> 在最后添加元素<br>
<strong>poll</strong> 取出第一个元素<br>
<strong>peek</strong> 查看第一个元素</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/810.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Queue;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;和ArrayList一样，LinkedList也实现了List接口</span><br><span class="line">        List ll &#x3D;new LinkedList&lt;Hero&gt;();</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;所不同的是LinkedList还实现了Deque，进而又实现了Queue这个接口</span><br><span class="line">        &#x2F;&#x2F;Queue代表FIFO 先进先出的队列</span><br><span class="line">        Queue&lt;Hero&gt; q&#x3D; new LinkedList&lt;Hero&gt;();</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;加在队列的最后面</span><br><span class="line">        System.out.print(&quot;初始化队列：\t&quot;);</span><br><span class="line">        q.offer(new Hero(&quot;Hero1&quot;));</span><br><span class="line">        q.offer(new Hero(&quot;Hero2&quot;));</span><br><span class="line">        q.offer(new Hero(&quot;Hero3&quot;));</span><br><span class="line">        q.offer(new Hero(&quot;Hero4&quot;));</span><br><span class="line">          </span><br><span class="line">        System.out.println(q);</span><br><span class="line">        System.out.print(&quot;把第一个元素取poll()出来:\t&quot;);</span><br><span class="line">        &#x2F;&#x2F;取出第一个Hero，FIFO 先进先出</span><br><span class="line">        Hero h &#x3D; q.poll();</span><br><span class="line">        System.out.println(h);</span><br><span class="line">        System.out.print(&quot;取出第一个元素之后的队列:\t&quot;);</span><br><span class="line">        System.out.println(q);</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;把第一个拿出来看一看，但是不取出来</span><br><span class="line">        h&#x3D;q.peek();</span><br><span class="line">        System.out.print(&quot;查看peek()第一个元素:\t&quot;);</span><br><span class="line">        System.out.println(h);</span><br><span class="line">        System.out.print(&quot;查看并不会导致第一个元素被取出来:\t&quot;);</span><br><span class="line">        System.out.println(q);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-ArrayList-与-LinkedList的区别"><a class="header-anchor" href="#示例-4-ArrayList-与-LinkedList的区别">¶</a>示例 4 : ArrayList 与 LinkedList的区别</h3>
<p>ArrayList 与 LinkedList的区别是面试常常会问到的考题<br>
具体区别，详见 [ArrayList 与 LinkedList的区别]</p>
<h3 id="示例-5-练习-使用LinkedList实现Stack栈"><a class="header-anchor" href="#示例-5-练习-使用LinkedList实现Stack栈">¶</a>示例 5 : 练习-使用LinkedList实现Stack栈</h3>
<p>与<strong>FIFO</strong>(先入先出的)<strong>队列</strong>类似的一种数据结构是<strong>FILO</strong>先入后出<strong>栈</strong>Stack<br>
根据接口Stack ：<br>
实现类：MyStack</p>
<p>public class MyStack implements Stack</p>
<p>并向这个栈中，压入5个英雄，接着弹出5个英雄</p>
<p>再解释一下栈: 栈的结构，就像给弹夹添加子弹一样，先添加的子弹，就放在了最下面，<strong>打手枪</strong>的时候，只能从最上面取子弹。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public interface Stack &#123;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;把英雄推入到最后位置</span><br><span class="line">    public void push(Hero h);</span><br><span class="line">    &#x2F;&#x2F;把最后一个英雄取出来</span><br><span class="line">    public Hero pull();</span><br><span class="line">    &#x2F;&#x2F;查看最后一个英雄</span><br><span class="line">    public Hero peek();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">import java.util.LinkedList;</span><br><span class="line"> </span><br><span class="line">public class MyStack implements Stack &#123;</span><br><span class="line"> </span><br><span class="line">    LinkedList&lt;Hero&gt; heros &#x3D;new LinkedList&lt;&gt;();</span><br><span class="line">    @Override</span><br><span class="line">    public void push(Hero h) &#123;</span><br><span class="line">    heros.addLast(h);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public Hero pull() &#123;</span><br><span class="line">        return heros.removeLast();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public Hero peek() &#123;</span><br><span class="line">        return heros.getLast();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        MyStack heroS&#x3D; new MyStack();</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            heroS.push(new Hero(&quot;hero name &quot;+i));</span><br><span class="line">        &#125;</span><br><span class="line">        for(int i&#x3D;0;i&lt;5;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(&quot;依次取出对象&quot;+heroS.pull());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7、其他集合-JAVA-二叉树"><a class="header-anchor" href="#7、其他集合-JAVA-二叉树">¶</a>7、其他集合 - JAVA 二叉树</h2>
<h3 id="示例-1-二叉树概念"><a class="header-anchor" href="#示例-1-二叉树概念">¶</a>示例 1 : 二叉树概念</h3>
<p>二叉树由各种<strong>节点</strong>组成<br>
二叉树特点：<br>
每个节点都可以有<strong>左子</strong>节点，<strong>右子</strong>节点<br>
每一个节点都有一个<strong>值</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1008.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">public class Node &#123;</span><br><span class="line">    &#x2F;&#x2F; 左子节点</span><br><span class="line">    public Node leftNode;</span><br><span class="line">    &#x2F;&#x2F; 右子节点</span><br><span class="line">    public Node rightNode;</span><br><span class="line">    &#x2F;&#x2F; 值</span><br><span class="line">    public Object value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-二叉树排序-插入数据"><a class="header-anchor" href="#示例-2-二叉树排序-插入数据">¶</a>示例 2 : 二叉树排序-插入数据</h3>
<p>假设通过二叉树对如下10个随机数进行排序<br>
67,7,30,73,10,0,78,81,10,74<br>
排序的第一个步骤是把数据插入到该二叉树中<br>
插入基本逻辑是，<strong>小、相同的放左边</strong>，<strong>大的放右边</strong></p>
<ol>
<li>
<p>67 放在根节点</p>
</li>
<li>
<p>7 比 67小，放在67的左节点</p>
</li>
<li>
<p>30 比67 小，找到67的左节点7，30比7大，就放在7的右节点</p>
</li>
<li>
<p>73 比67大， 放在67的右节点</p>
</li>
<li>
<p>10 比 67小，找到67的左节点7，10比7大，找到7的右节点30，10比30小，放在30的左节点。<br>
…<br>
…</p>
</li>
<li>
<p>10比67小，找到67的左节点7，10比7大，找到7的右节点30，10比30小，找到30的左节点10，10和10一样大，放在左边</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1009.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">public class Node &#123;</span><br><span class="line">    &#x2F;&#x2F; 左子节点</span><br><span class="line">    public Node leftNode;</span><br><span class="line">    &#x2F;&#x2F; 右子节点</span><br><span class="line">    public Node rightNode;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 值</span><br><span class="line">    public Object value;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 插入 数据</span><br><span class="line">    public void add(Object v) &#123;</span><br><span class="line">        &#x2F;&#x2F; 如果当前节点没有值，就把数据放在当前节点上</span><br><span class="line">        if (null &#x3D;&#x3D; value)</span><br><span class="line">            value &#x3D; v;</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 如果当前节点有值，就进行判断，新增的值与当前值的大小关系</span><br><span class="line">        else &#123;</span><br><span class="line">            &#x2F;&#x2F; 新增的值，比当前值小或者相同</span><br><span class="line">             </span><br><span class="line">            if ((Integer) v -((Integer)value) &lt;&#x3D; 0) &#123;</span><br><span class="line">                if (null &#x3D;&#x3D; leftNode)</span><br><span class="line">                    leftNode &#x3D; new Node();</span><br><span class="line">                leftNode.add(v);</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F; 新增的值，比当前值大</span><br><span class="line">            else &#123;</span><br><span class="line">                if (null &#x3D;&#x3D; rightNode)</span><br><span class="line">                    rightNode &#x3D; new Node();</span><br><span class="line">                rightNode.add(v);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        int randoms[] &#x3D; new int[] &#123; 67, 7, 30, 73, 10, 0, 78, 81, 10, 74 &#125;;</span><br><span class="line">  </span><br><span class="line">        Node roots &#x3D; new Node();</span><br><span class="line">        for (int number : randoms) &#123;</span><br><span class="line">            roots.add(number);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-二叉树排序-遍历"><a class="header-anchor" href="#示例-3-二叉树排序-遍历">¶</a>示例 3 : 二叉树排序-遍历</h3>
<p>通过上一个步骤的插入行为，实际上，数据就已经排好序了。 接下来要做的是看，把<strong>这些已经排好序的数据</strong>，遍历成我们常用的List或者数组的形式</p>
<p>二叉树的遍历分左序，中序，右序<br>
<strong>左序</strong>即： 中间的数遍历后放在<strong>左边</strong><br>
<strong>中序</strong>即： 中间的数遍历后放在<strong>中间</strong><br>
<strong>右序</strong>即： 中间的数遍历后放在<strong>右边</strong><br>
如图所见，我们希望遍历后的结果是从小到大的，所以应该采用<strong>中序遍历</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1010.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">public class Node &#123;</span><br><span class="line">    &#x2F;&#x2F; 左子节点</span><br><span class="line">    public Node leftNode;</span><br><span class="line">    &#x2F;&#x2F; 右子节点</span><br><span class="line">    public Node rightNode;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 值</span><br><span class="line">    public Object value;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 插入 数据</span><br><span class="line">    public void add(Object v) &#123;</span><br><span class="line">        &#x2F;&#x2F; 如果当前节点没有值，就把数据放在当前节点上</span><br><span class="line">        if (null &#x3D;&#x3D; value)</span><br><span class="line">            value &#x3D; v;</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 如果当前节点有值，就进行判断，新增的值与当前值的大小关系</span><br><span class="line">        else &#123;</span><br><span class="line">            &#x2F;&#x2F; 新增的值，比当前值小或者相同</span><br><span class="line">             </span><br><span class="line">            if ((Integer) v -((Integer)value) &lt;&#x3D; 0) &#123;</span><br><span class="line">                if (null &#x3D;&#x3D; leftNode)</span><br><span class="line">                    leftNode &#x3D; new Node();</span><br><span class="line">                leftNode.add(v);</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F; 新增的值，比当前值大</span><br><span class="line">            else &#123;</span><br><span class="line">                if (null &#x3D;&#x3D; rightNode)</span><br><span class="line">                    rightNode &#x3D; new Node();</span><br><span class="line">                rightNode.add(v);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"> &#x2F;&#x2F; 中序遍历所有的节点</span><br><span class="line">    public List&lt;Object&gt; values() &#123;</span><br><span class="line">        List&lt;Object&gt; values &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 左节点的遍历结果</span><br><span class="line">        if (null !&#x3D; leftNode)</span><br><span class="line">            values.addAll(leftNode.values());</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 当前节点</span><br><span class="line">        values.add(value);</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 右节点的遍历结果</span><br><span class="line">        if (null !&#x3D; rightNode)</span><br><span class="line">  </span><br><span class="line">            values.addAll(rightNode.values());</span><br><span class="line">  </span><br><span class="line">        return values;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        int randoms[] &#x3D; new int[] &#123; 67, 7, 30, 73, 10, 0, 78, 81, 10, 74 &#125;;</span><br><span class="line">  </span><br><span class="line">        Node roots &#x3D; new Node();</span><br><span class="line">        for (int number : randoms) &#123;</span><br><span class="line">            roots.add(number);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        System.out.println(roots.values());</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-练习-英雄二叉树"><a class="header-anchor" href="#示例-4-练习-英雄二叉树">¶</a>示例 4 : 练习-英雄二叉树</h3>
<p>根据上面的学习和理解，设计一个Hero二叉树，HeroNode.<br>
可以向这个英雄二叉树插入不同的Hero对象，并且按照Hero的<strong>血量倒排序</strong>。</p>
<p>随机生成10个Hero对象，每个Hero对象都有不同的血量值，插入这个HeroNode后，把排序结果打印出来。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2511.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">import charactor.Hero;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">public class HeroBinaryTree &#123;</span><br><span class="line">	static List&lt;Hero&gt; heros&#x3D; new ArrayList&lt;&gt;(); </span><br><span class="line">	&#x2F;&#x2F;二叉树排序</span><br><span class="line">	public HeroBinaryTree leftNode;</span><br><span class="line">	public HeroBinaryTree rightNode;</span><br><span class="line">	public Hero present;</span><br><span class="line">	public void add(Hero h) &#123;</span><br><span class="line">        if (null &#x3D;&#x3D; present) &#123;</span><br><span class="line">            present &#x3D; h;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            if ((Integer) h.hp &lt; (Integer) present.hp) &#123;</span><br><span class="line">                if(null &#x3D;&#x3D; leftNode)</span><br><span class="line">                    leftNode &#x3D; new HeroBinaryTree();</span><br><span class="line">                leftNode.add(h);</span><br><span class="line">            &#125;</span><br><span class="line">            if ((Integer) h.hp &gt; (Integer) present.hp) &#123;</span><br><span class="line">                if(null &#x3D;&#x3D; rightNode)</span><br><span class="line">                    rightNode &#x3D; new HeroBinaryTree();</span><br><span class="line">                rightNode.add(h);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;二叉树遍历</span><br><span class="line">    public List&lt;Hero&gt; updateHeros()&#123;</span><br><span class="line">        List&lt;Hero&gt; updateHeros &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        if(null !&#x3D; leftNode)</span><br><span class="line">            updateHeros.addAll(leftNode.updateHeros());</span><br><span class="line">         </span><br><span class="line">        updateHeros.add(present);</span><br><span class="line">         </span><br><span class="line">        if(null !&#x3D; rightNode)</span><br><span class="line">            updateHeros.addAll(rightNode.updateHeros());</span><br><span class="line">         </span><br><span class="line">        return updateHeros;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;放置英雄方法</span><br><span class="line">    public void push(Hero h) &#123;</span><br><span class="line">        heros.add(h);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;主方法</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">    	HeroBinaryTree root &#x3D; new HeroBinaryTree();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            Hero h &#x3D; new Hero(&quot;hero&quot;+i,(int) (Math.random()*1000));</span><br><span class="line">            root.push(h);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;排序前&quot;);</span><br><span class="line">        for (Hero h : heros) &#123;</span><br><span class="line">            System.out.println(&quot;英雄名称：&quot;+h.name+&quot;\t&quot;+&quot;英雄血量：&quot;+h.hp);</span><br><span class="line">            root.add(h);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;排序后&quot;);</span><br><span class="line">        List&lt;Hero&gt; updateHeros &#x3D; root.updateHeros();</span><br><span class="line">        for (Hero h : updateHeros) &#123;</span><br><span class="line">            System.out.println(&quot;英雄名称：&quot;+h.name+&quot;\t&quot;+&quot;英雄血量：&quot;+h.hp);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-5-练习-比较冒泡法，选择法以及二叉树排序的性能区别"><a class="header-anchor" href="#示例-5-练习-比较冒泡法，选择法以及二叉树排序的性能区别">¶</a>示例 5 : 练习-比较冒泡法，选择法以及二叉树排序的性能区别</h3>
<p>二叉树排序用时极短，选择排序耗时较长，冒泡排序耗时最长</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line">package HOW2J.Middle.Container;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">import suanfa_basic.sort.class_03.Code_14_FindFirstIntersectNode;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Stack;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;创建4万个随机数，然后用分别用冒泡法，选择法，二叉树3种排序算法进行排序，比较哪种更快</span><br><span class="line">public class Test_compareSort &#123;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;创建一个随机数组</span><br><span class="line">    &#x2F;**</span><br><span class="line">     *</span><br><span class="line">     * @param index 数组长度</span><br><span class="line">     * @return</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static int[] random(int index)&#123;</span><br><span class="line">        int[] arr &#x3D; new int[index];</span><br><span class="line">        for (int i &#x3D; 0;i &lt; index;i++)&#123;</span><br><span class="line">            arr[i] &#x3D; (int)(Math.random()*10000);</span><br><span class="line">        &#125;</span><br><span class="line">        return arr;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;交换两数</span><br><span class="line">    public static void swap(int[] arr,int L,int R)&#123;</span><br><span class="line">        int temp &#x3D; arr[L];</span><br><span class="line">        arr[L] &#x3D; arr[R];</span><br><span class="line">        arr[R] &#x3D; temp;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;冒泡排序算法(稳定)</span><br><span class="line">    &#x2F;&#x2F;从小到大顺序</span><br><span class="line">    public static int[] bubbleSort(int[] arr)&#123;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; arr.length;i++)&#123;</span><br><span class="line">            boolean flag &#x3D; true;  &#x2F;&#x2F;重置交换标志位</span><br><span class="line">            for (int j &#x3D; 1;j &lt; arr.length - i;j++)&#123;</span><br><span class="line">                if (arr[j -1] &gt; arr[j])&#123;</span><br><span class="line">                    swap(arr,j-1,j);  &#x2F;&#x2F;交换两数</span><br><span class="line">                    flag &#x3D; false;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (flag)&#123;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return arr;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;选择排序(不稳定排序)</span><br><span class="line">    &#x2F;&#x2F;寻找当前排序区间最小值放在排序区间的首位</span><br><span class="line">    public static int[]  selectSort(int[] arr)&#123;</span><br><span class="line">        if (arr &#x3D;&#x3D; null || arr.length &#x3D;&#x3D; 1)&#123;</span><br><span class="line">            return arr;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        for (int i &#x3D; 0;i &lt; arr.length;i++)&#123;</span><br><span class="line">            int temp &#x3D; i;  &#x2F;&#x2F;最小元素下标</span><br><span class="line">            for (int j &#x3D; i+1;j &lt; arr.length;j++)&#123;</span><br><span class="line">                if (arr[j] &lt; arr[temp])&#123;</span><br><span class="line">                    temp &#x3D; j;  &#x2F;&#x2F;交换下标</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(arr,i,temp);  &#x2F;&#x2F;交换两数</span><br><span class="line">        &#125;</span><br><span class="line">        return arr;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;二叉树排序(HOW2J方法)</span><br><span class="line">    static class SelectionSort&#123;</span><br><span class="line"> </span><br><span class="line">        int numbers[];</span><br><span class="line">        SelectionSort(int [] numbers)&#123;</span><br><span class="line">            this.numbers &#x3D; numbers;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        public void sort() &#123;</span><br><span class="line">            for (int j &#x3D; 0; j &lt; numbers.length-1; j++) &#123;</span><br><span class="line">                for (int i &#x3D; j+1; i &lt; numbers.length; i++) &#123;</span><br><span class="line">                    if(numbers[i]&lt;numbers[j])&#123;</span><br><span class="line">                        int temp &#x3D; numbers[j];</span><br><span class="line">                        numbers[j] &#x3D; numbers[i];</span><br><span class="line">                        numbers[i] &#x3D; temp;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        public int[] values() &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">            return numbers;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;二叉树排序</span><br><span class="line">    public static class Node1&#123;</span><br><span class="line">        public Integer value;</span><br><span class="line">        public Node1 leftNode;</span><br><span class="line">        public Node1 rightNode;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">        public void BinaryTreeSort(int a)&#123;</span><br><span class="line">            if (value &#x3D;&#x3D; null)&#123;</span><br><span class="line">                this.value &#x3D; Integer.valueOf(a);</span><br><span class="line">            &#125;else if (value.intValue() &gt; a)&#123;  &#x2F;&#x2F;小于放左孩子</span><br><span class="line">                if (leftNode &#x3D;&#x3D; null)</span><br><span class="line">                    leftNode &#x3D; new Node1();</span><br><span class="line">                leftNode.BinaryTreeSort(a);</span><br><span class="line">            &#125;else &#123;  &#x2F;&#x2F;大于放右孩子</span><br><span class="line">                if (rightNode &#x3D;&#x3D; null)</span><br><span class="line">                    rightNode &#x3D; new Node1();</span><br><span class="line">                rightNode.BinaryTreeSort(a);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;中序遍历(非递归版本)</span><br><span class="line">        &#x2F;&#x2F;从小到大</span><br><span class="line">        public int[] inorderRecur(Node1 head,int[] arr)&#123;</span><br><span class="line">            if (head !&#x3D; null)&#123;</span><br><span class="line">                int i &#x3D; 0;  &#x2F;&#x2F;数组指针</span><br><span class="line">                Stack&lt;Node1&gt; stack &#x3D; new Stack&lt;&gt;();</span><br><span class="line">                while (!stack.isEmpty() || head !&#x3D; null)&#123;</span><br><span class="line">                    if (head !&#x3D; null)&#123;</span><br><span class="line">                        stack.push(head);</span><br><span class="line">                        head &#x3D; head.leftNode;</span><br><span class="line">                    &#125;else &#123;</span><br><span class="line">                        head &#x3D; stack.pop();</span><br><span class="line">                        arr[i++] &#x3D; head.value;</span><br><span class="line">                        head &#x3D; head.rightNode;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return arr;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int[] arr &#x3D; random(40000);  &#x2F;&#x2F;生成40000个元素的随机数组</span><br><span class="line">        System.out.println(&quot;接下来分别用3种算法进行排序&quot;);</span><br><span class="line">        int[] a &#x3D; &#123;4,2,1,3,5,5,8,9,-10&#125;;  &#x2F;&#x2F;测试数组</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;复制初始化随机数组</span><br><span class="line">        int[] temp;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;冒泡排序算法计时</span><br><span class="line">        temp &#x3D; Arrays.copyOf(arr,arr.length);</span><br><span class="line">        long start &#x3D; System.currentTimeMillis();</span><br><span class="line">        int[] sortNumberBybubblesort &#x3D; bubbleSort(temp);</span><br><span class="line">        long end &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.printf(&quot;冒泡排序算法耗时：%d%n&quot;,end-start);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;选择排序算法计时</span><br><span class="line">        temp &#x3D; Arrays.copyOf(arr,arr.length);</span><br><span class="line">        start &#x3D; System.currentTimeMillis();</span><br><span class="line">        int[] sortNumberByselectionsort &#x3D; selectSort(temp);</span><br><span class="line">        end &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.printf(&quot;选择排序算法耗时：%d%n&quot;,end -start);</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;查看排序算法结果&quot;);</span><br><span class="line">        System.out.println(&quot;比较 选择法 和 冒泡法  排序结果：&quot;);</span><br><span class="line">        System.out.println(Arrays.equals(sortNumberBybubblesort, sortNumberByselectionsort));</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;二叉树排序算法计时</span><br><span class="line">        temp &#x3D; Arrays.copyOf(arr,arr.length);</span><br><span class="line">        Node1 head &#x3D; new Node1();</span><br><span class="line">        start &#x3D; System.currentTimeMillis();</span><br><span class="line">        for (int i &#x3D; 0;i &lt; temp.length;i++)&#123;</span><br><span class="line">            head.BinaryTreeSort(temp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        int[] sortNumberBytreeSort &#x3D; head.inorderRecur(head,temp);</span><br><span class="line">        end &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.printf(&quot;二叉树排序算法耗时：%d%n&quot;,end -start);</span><br><span class="line">        System.out.println(&quot;比较 选择法 和 二叉树  排序结果：&quot;);</span><br><span class="line">        System.out.println(Arrays.equals(sortNumberBybubblesort, sortNumberBytreeSort));</span><br><span class="line">        System.out.println(&quot;打印冒泡排序后的数组&quot;);</span><br><span class="line">        System.out.println(Arrays.toString(sortNumberBybubblesort));</span><br><span class="line">        System.out.println(&quot;打印二叉树排序后的数组&quot;);</span><br><span class="line">        System.out.println(Arrays.toString(sortNumberBytreeSort));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8、其他集合-JAVA-HASHMAP"><a class="header-anchor" href="#8、其他集合-JAVA-HASHMAP">¶</a>8、其他集合 - JAVA HASHMAP</h2>
<h3 id="示例-1-HashMap的键值对"><a class="header-anchor" href="#示例-1-HashMap的键值对">¶</a>示例 1 : HashMap的键值对</h3>
<p>HashMap储存数据的方式是—— 键值对</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.HashMap;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        HashMap&lt;String,String&gt; dictionary &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">        dictionary.put(&quot;adc&quot;, &quot;物理英雄&quot;);</span><br><span class="line">        dictionary.put(&quot;apc&quot;, &quot;魔法英雄&quot;);</span><br><span class="line">        dictionary.put(&quot;t&quot;, &quot;坦克&quot;);</span><br><span class="line">         </span><br><span class="line">        System.out.println(dictionary.get(&quot;t&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-键不能重复，值可以重复"><a class="header-anchor" href="#示例-2-键不能重复，值可以重复">¶</a>示例 2 : 键不能重复，值可以重复</h3>
<p>对于HashMap而言，key是唯一的，不可以重复的。<br>
所以，以相同的key 把不同的value插入到 Map中会导致旧元素被覆盖，只留下最后插入的元素。<br>
不过，同一个对象可以作为值插入到map中，只要对应的key不一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">import java.util.HashMap;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        HashMap&lt;String,Hero&gt; heroMap &#x3D; new HashMap&lt;String,Hero&gt;();</span><br><span class="line">         </span><br><span class="line">        heroMap.put(&quot;gareen&quot;, new Hero(&quot;gareen1&quot;));</span><br><span class="line">        System.out.println(heroMap);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;key为gareen已经有value了，再以gareen作为key放入数据，会导致原英雄，被覆盖</span><br><span class="line">        &#x2F;&#x2F;不会增加新的元素到Map中</span><br><span class="line">        heroMap.put(&quot;gareen&quot;, new Hero(&quot;gareen2&quot;));</span><br><span class="line">        System.out.println(heroMap);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;清空map</span><br><span class="line">        heroMap.clear();</span><br><span class="line">        Hero gareen &#x3D; new Hero(&quot;gareen&quot;);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;同一个对象可以作为值插入到map中，只要对应的key不一样</span><br><span class="line">        heroMap.put(&quot;hero1&quot;, gareen);</span><br><span class="line">        heroMap.put(&quot;hero2&quot;, gareen);</span><br><span class="line">         </span><br><span class="line">        System.out.println(heroMap);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-练习-查找内容性能比较"><a class="header-anchor" href="#示例-3-练习-查找内容性能比较">¶</a>示例 3 : 练习-查找内容性能比较</h3>
<p>准备一个ArrayList其中存放3000000(三百万个)Hero对象，其名称是随机的,格式是hero-[4位随机数]<br>
hero-3229<br>
hero-6232<br>
hero-9365<br>
…</p>
<p>因为总数很大，所以几乎每种都有重复，把名字叫做 hero-5555的所有对象找出来<br>
要求使用两种办法来寻找</p>
<ol>
<li>
<p>不使用HashMap，直接使用for循环找出来，并统计花费的时间</p>
</li>
<li>
<p>借助HashMap，找出结果，并统计花费的时间</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">package otherlist;</span><br><span class="line"></span><br><span class="line">import charactor.Hero;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class HashMapL &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Hero&gt; hs &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		System.out.println(&quot;初始化开始&quot;);</span><br><span class="line">		for(int i &#x3D;0;i&lt;3000000;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			Hero h &#x3D; new Hero(&quot;hero-&quot;+((int)(Math.random()*9000)+1000));</span><br><span class="line">			hs.add(h);</span><br><span class="line">		&#125;</span><br><span class="line">		HashMap&lt;String,List&lt;Hero&gt;&gt; heroMap &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">		for(Hero h : hs)</span><br><span class="line">		&#123;</span><br><span class="line">			List&lt;Hero&gt; list &#x3D; heroMap.get(h.name);</span><br><span class="line">			if(list&#x3D;&#x3D;null)</span><br><span class="line">			&#123;</span><br><span class="line">				list&#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">				heroMap.put(h.name,list);</span><br><span class="line">			&#125;</span><br><span class="line">			list.add(h);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(&quot;初始化结束&quot;);</span><br><span class="line">		System.out.println(&quot;开始查找&quot;);</span><br><span class="line">		findByMap(heroMap);</span><br><span class="line">		findByIteration(hs);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private static List&lt;Hero&gt; findByMap(HashMap&lt;String,List&lt;Hero&gt;&gt; m)</span><br><span class="line">	&#123;</span><br><span class="line">		long start &#x3D;System.currentTimeMillis();</span><br><span class="line">		List&lt;Hero&gt; result&#x3D; m.get(&quot;hero-6666&quot;);</span><br><span class="line">		long end &#x3D; System.currentTimeMillis();</span><br><span class="line">		System.out.printf(&quot;通过map查找，一共找到%d个英雄，耗时%d毫秒%n&quot;,result.size(),end-start);</span><br><span class="line">		return result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private static List&lt;Hero&gt; findByIteration(List&lt;Hero&gt; hs)</span><br><span class="line">	&#123;</span><br><span class="line">		long start &#x3D; System.currentTimeMillis();</span><br><span class="line">		List&lt;Hero&gt; result&#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		for(Hero h : hs)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h.name.equals(&quot;hero-6666&quot;))</span><br><span class="line">			&#123;</span><br><span class="line">				result.add(h);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		long end &#x3D; System.currentTimeMillis();</span><br><span class="line">		System.out.printf(&quot;通过for查找，一共找到%d个英雄，耗时%d毫秒%n&quot;,result.size(),end-start);</span><br><span class="line">		return result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9、其他集合-JAVA-HASHSET-详解"><a class="header-anchor" href="#9、其他集合-JAVA-HASHSET-详解">¶</a>9、其他集合 - JAVA HASHSET 详解</h2>
<h3 id="示例-1-元素不能重复"><a class="header-anchor" href="#示例-1-元素不能重复">¶</a>示例 1 : 元素不能重复</h3>
<p>Set中的元素，不能重复</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">import java.util.HashSet;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        HashSet&lt;String&gt; names &#x3D; new HashSet&lt;String&gt;();</span><br><span class="line">         </span><br><span class="line">        names.add(&quot;gareen&quot;);</span><br><span class="line">         </span><br><span class="line">        System.out.println(names);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;第二次插入同样的数据，是插不进去的，容器中只会保留一个</span><br><span class="line">        names.add(&quot;gareen&quot;);</span><br><span class="line">        System.out.println(names);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-没有顺序"><a class="header-anchor" href="#示例-2-没有顺序">¶</a>示例 2 : 没有顺序</h3>
<p>Set中的元素，没有顺序。<br>
严格的说，是没有按照元素的插入顺序排列</p>
<p>HashSet的具体顺序，既不是按照插入顺序，也不是按照hashcode的顺序。关于hashcode有专门的章节讲解: [hashcode 原理]。</p>
<p>以下是<strong>HashSet源代码</strong>中的部分注释</p>
<p>/**</p>
<p>* It makes no guarantees as to the iteration order of the set;</p>
<p>* in particular, it does not guarantee that the order will remain constant over time.</p>
<p>*/</p>
<p>不保证Set的迭代顺序; 确切的说，在不同条件下，元素的顺序都有可能不一样</p>
<p>换句话说，同样是插入0-9到HashSet中， 在JVM的不同版本中，看到的顺序都是不一样的。 所以在开发的时候，不能依赖于某种<strong>臆测的顺序</strong>，这个顺序本身是<strong>不稳定的</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/823.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.HashSet;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        HashSet&lt;Integer&gt; numbers &#x3D; new HashSet&lt;Integer&gt;();</span><br><span class="line"> </span><br><span class="line">        numbers.add(9);</span><br><span class="line">        numbers.add(5);</span><br><span class="line">        numbers.add(1);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; Set中的元素排列，不是按照插入顺序</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-遍历"><a class="header-anchor" href="#示例-3-遍历">¶</a>示例 3 : 遍历</h3>
<p>Set不提供get()来获取指定位置的元素<br>
所以遍历需要用到迭代器，或者增强型for循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">import java.util.HashSet;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        HashSet&lt;Integer&gt; numbers &#x3D; new HashSet&lt;Integer&gt;();</span><br><span class="line">         </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 20; i++) &#123;</span><br><span class="line">            numbers.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;Set不提供get方法来获取指定位置的元素</span><br><span class="line">        &#x2F;&#x2F;numbers.get(0)</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;遍历Set可以采用迭代器iterator</span><br><span class="line">        for (Iterator&lt;Integer&gt; iterator &#x3D; numbers.iterator(); iterator.hasNext();) &#123;</span><br><span class="line">            Integer i &#x3D; (Integer) iterator.next();</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;或者采用增强型for循环</span><br><span class="line">        for (Integer i : numbers) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-HashSet和HashMap的关系"><a class="header-anchor" href="#示例-4-HashSet和HashMap的关系">¶</a>示例 4 : HashSet和HashMap的关系</h3>
<p>通过观察HashSet的源代码（[如何查看源代码]）<br>
可以发现HashSet自身并没有独立的实现，而是在里面封装了一个Map.<br>
HashSet是作为Map的key而存在的<br>
而value是一个命名为PRESENT的static的Object对象，因为是一个类属性，所以只会有一个。</p>
<p>private static final Object PRESENT = new Object();</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.AbstractSet;</span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.Set;</span><br><span class="line"> </span><br><span class="line">public class HashSet&lt;E&gt;</span><br><span class="line">    extends AbstractSet&lt;E&gt;</span><br><span class="line">    implements Set&lt;E&gt;, Cloneable, java.io.Serializable</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;HashSet里封装了一个HashMap</span><br><span class="line">    private  HashMap&lt;E,Object&gt; map;</span><br><span class="line"> </span><br><span class="line">    private static final Object PRESENT &#x3D; new Object();</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;HashSet的构造方法初始化这个HashMap</span><br><span class="line">    public HashSet() &#123;</span><br><span class="line">        map &#x3D; new HashMap&lt;E,Object&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;向HashSet中增加元素，其实就是把该元素作为key，增加到Map中</span><br><span class="line">    &#x2F;&#x2F;value是PRESENT，静态，final的对象，所有的HashSet都使用这么同一个对象</span><br><span class="line">    public boolean add(E e) &#123;</span><br><span class="line">        return map.put(e, PRESENT)&#x3D;&#x3D;null;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;HashSet的size就是map的size</span><br><span class="line">    public int size() &#123;</span><br><span class="line">        return map.size();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;清空Set就是清空Map</span><br><span class="line">    public void clear() &#123;</span><br><span class="line">        map.clear();</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;迭代Set,就是把Map的键拿出来迭代</span><br><span class="line">    public Iterator&lt;E&gt; iterator() &#123;</span><br><span class="line">        return map.keySet().iterator();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-5-练习-HashSet"><a class="header-anchor" href="#示例-5-练习-HashSet">¶</a>示例 5 : 练习-HashSet</h3>
<p>在[比较字符串]章节，有一个同样的练习<br>
创建一个长度是100的字符串数组<br>
使用长度是2的随机字符填充该字符串数组<br>
统计这个字符串数组里<strong>重复的字符串有多少种</strong><br>
使用HashSet来解决这个问题</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2386.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.HashSet;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line"></span><br><span class="line">public class HashSetTest &#123;</span><br><span class="line">	public static String RandomString()&#123;</span><br><span class="line">		String s &#x3D;&quot;0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM&quot;;</span><br><span class="line">		char [] chars &#x3D; s.toCharArray();</span><br><span class="line">		String s1 &#x3D; String.valueOf(chars[(int) (Math.random()*chars.length)])</span><br><span class="line">				+String.valueOf(chars[(int) (Math.random()*chars.length)]);</span><br><span class="line">		return s1;</span><br><span class="line">	&#125;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		HashSet&lt;String&gt; hashSet &#x3D; new HashSet&lt;&gt;();</span><br><span class="line">		HashSet&lt;String&gt; hashSet1 &#x3D; new HashSet&lt;&gt;();</span><br><span class="line">		ArrayList&lt;String&gt; arrayList &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		System.out.println(&quot;元素：&quot;+&quot;\n&quot;);</span><br><span class="line">		for (int i &#x3D; 0; i &lt;100 ; i++) &#123;</span><br><span class="line">			if (i%25&#x3D;&#x3D;0)&#123;</span><br><span class="line">				System.out.println();</span><br><span class="line">			&#125;</span><br><span class="line">			String temp &#x3D; RandomString();</span><br><span class="line">			if (hashSet.contains(temp))&#123;</span><br><span class="line">				hashSet1.add(temp);</span><br><span class="line">			&#125;</span><br><span class="line">			hashSet.add(temp);</span><br><span class="line">			System.out.print(temp+&quot;\t&quot;);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println();</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;重复的个数为：&quot;+hashSet1.size()+&quot;\n重复的元素：&quot;+hashSet1);</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;hashSet的个数为：&quot;+hashSet.size());</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10、其他集合-JAVA-集合框架-COLLECTION"><a class="header-anchor" href="#10、其他集合-JAVA-集合框架-COLLECTION">¶</a>10、其他集合 - JAVA 集合框架 COLLECTION</h2>
<h3 id="步骤-1-Collection"><a class="header-anchor" href="#步骤-1-Collection">¶</a>步骤 1 : Collection</h3>
<p>Collection是 Set List Queue和 Deque的接口<br>
Queue: 先进先出队列<br>
Deque: 双向链表</p>
<p>**注：**Collection和Map之间没有关系，Collection是放一个一个对象的，Map 是放键值对的<br>
**注：**Deque 继承 Queue,间接的继承了 Collection</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/830.png" alt></p>
<h2 id="11、其他集合-JAVA-工具类-COLLECTIONS"><a class="header-anchor" href="#11、其他集合-JAVA-工具类-COLLECTIONS">¶</a>11、其他集合 - JAVA 工具类 COLLECTIONS</h2>
<p>Collections是一个类，容器的工具类,就如同Arrays是数组的工具类</p>
<h3 id="步骤-1-反转"><a class="header-anchor" href="#步骤-1-反转">¶</a>步骤 1 : 反转</h3>
<p><strong>reverse</strong> 使List中的数据发生翻转</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2498.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;初始化集合numbers</span><br><span class="line">        List&lt;Integer&gt; numbers &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">         </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            numbers.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line">         </span><br><span class="line">        Collections.reverse(numbers);</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;翻转后集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-混淆"><a class="header-anchor" href="#步骤-2-混淆">¶</a>步骤 2 : 混淆</h3>
<p><strong>shuffle</strong> 混淆List中数据的顺序</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2501.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;初始化集合numbers</span><br><span class="line">        List&lt;Integer&gt; numbers &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">         </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            numbers.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line">         </span><br><span class="line">        Collections.shuffle(numbers);</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;混淆后集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-排序"><a class="header-anchor" href="#步骤-3-排序">¶</a>步骤 3 : 排序</h3>
<p><strong>sort</strong> 对List中的数据进行排序</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2499.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;初始化集合numbers</span><br><span class="line">        List&lt;Integer&gt; numbers &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">         </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            numbers.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line"> </span><br><span class="line">        Collections.shuffle(numbers);</span><br><span class="line">        System.out.println(&quot;混淆后集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line"> </span><br><span class="line">        Collections.sort(numbers);</span><br><span class="line">        System.out.println(&quot;排序后集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-交换"><a class="header-anchor" href="#步骤-4-交换">¶</a>步骤 4 : 交换</h3>
<p><strong>swap</strong> 交换两个数据的位置</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2500.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;初始化集合numbers</span><br><span class="line">        List&lt;Integer&gt; numbers &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">         </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            numbers.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line"> </span><br><span class="line">        Collections.swap(numbers,0,5);</span><br><span class="line">        System.out.println(&quot;交换0和5下标的数据后，集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-滚动"><a class="header-anchor" href="#步骤-5-滚动">¶</a>步骤 5 : 滚动</h3>
<p><strong>rotate</strong> 把List中的数据，向右滚动指定单位的长度</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2497.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;初始化集合numbers</span><br><span class="line">        List&lt;Integer&gt; numbers &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">         </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            numbers.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line"> </span><br><span class="line">        Collections.rotate(numbers,2);</span><br><span class="line">        System.out.println(&quot;把集合向右滚动2个单位，标的数据后，集合中的数据:&quot;);</span><br><span class="line">        System.out.println(numbers);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-线程安全化"><a class="header-anchor" href="#步骤-6-线程安全化">¶</a>步骤 6 : 线程安全化</h3>
<p><strong>synchronizedList</strong> 把非线程安全的List转换为线程安全的List。 因为截至目前为止，还没有学习[线程安全]的内容，暂时不展开。 线程安全的内容将在[多线程]章节展开。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;把非线程安全的List转换为线程安全的List&quot;);</span><br><span class="line">        List&lt;Integer&gt; synchronizedNumbers &#x3D; (List&lt;Integer&gt;) Collections.synchronizedList(numbers);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-练习-统计概率"><a class="header-anchor" href="#步骤-7-练习-统计概率">¶</a>步骤 7 : 练习-统计概率</h3>
<p>首先初始化一个List,长度是10，值是0-9。<br>
然后不断的shuffle，直到前3位出现<br>
3 1 4</p>
<p>shuffle 1000,000 次，统计出现的概率</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package otherlist;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Integer&gt; numbers &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		for(int i &#x3D;0;i&lt;10;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			numbers.add(i);</span><br><span class="line">		&#125;</span><br><span class="line">		int num&#x3D;0;</span><br><span class="line">		for(int i&#x3D;1;i&lt;&#x3D;1000000;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			Collections.shuffle(numbers);</span><br><span class="line">			if(numbers.get(0)&#x3D;&#x3D;3&amp;&amp;numbers.get(1)&#x3D;&#x3D;1&amp;&amp;numbers.get(2)&#x3D;&#x3D;4)</span><br><span class="line">			&#123;</span><br><span class="line">				num++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		double rate &#x3D; num&#x2F;(1000000d);</span><br><span class="line">		System.out.println(&quot;出现314的概率为:&quot;+rate*100+&quot;%&quot;);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="12、关系与区别-JAVA-ARRAYLIST和HASHSET的区别"><a class="header-anchor" href="#12、关系与区别-JAVA-ARRAYLIST和HASHSET的区别">¶</a>12、关系与区别 - JAVA ARRAYLIST和HASHSET的区别</h2>
<h3 id="示例-1-是否有顺序"><a class="header-anchor" href="#示例-1-是否有顺序">¶</a>示例 1 : 是否有顺序</h3>
<p>ArrayList: 有顺序<br>
HashSet: 无顺序</p>
<p>HashSet的具体顺序，既不是按照插入顺序，也不是按照hashcode的顺序。关于hashcode有专门的章节讲解: [hashcode 原理]。</p>
<p>以下是<strong>HasetSet源代码</strong>中的部分注释</p>
<p>/**</p>
<p>* It makes no guarantees as to the iteration order of the set;</p>
<p>* in particular, it does not guarantee that the order will remain constant over time.</p>
<p>*/</p>
<p>不保证Set的迭代顺序; 确切的说，在不同条件下，元素的顺序都有可能不一样</p>
<p>换句话说，同样是插入0-9到HashSet中， 在JVM的不同版本中，看到的顺序都是不一样的。 所以在开发的时候，不能依赖于某种<strong>臆测的顺序</strong>，这个顺序本身是<strong>不稳定的</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/798.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.HashSet;</span><br><span class="line">    </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">           </span><br><span class="line">        ArrayList&lt;Integer&gt; numberList &#x3D;new ArrayList&lt;Integer&gt;();</span><br><span class="line">        &#x2F;&#x2F;List中的数据按照插入顺序存放</span><br><span class="line">        System.out.println(&quot;----------List----------&quot;);</span><br><span class="line">        System.out.println(&quot;向List 中插入 9 5 1&quot;);</span><br><span class="line">        numberList.add(9);</span><br><span class="line">        numberList.add(5);</span><br><span class="line">        numberList.add(1);</span><br><span class="line">        System.out.println(&quot;List 按照顺序存放数据:&quot;);</span><br><span class="line">        System.out.println(numberList);</span><br><span class="line">        System.out.println(&quot;----------Set----------&quot;);</span><br><span class="line">        HashSet&lt;Integer&gt; numberSet &#x3D;new HashSet&lt;Integer&gt;();</span><br><span class="line">        System.out.println(&quot;向Set 中插入9 5 1&quot;);</span><br><span class="line">        &#x2F;&#x2F;Set中的数据不是按照插入顺序存放</span><br><span class="line">        numberSet.add(9);</span><br><span class="line">        numberSet.add(5);</span><br><span class="line">        numberSet.add(1);</span><br><span class="line">        System.out.println(&quot;Set 不是按照顺序存放数据:&quot;);</span><br><span class="line">        System.out.println(numberSet);</span><br><span class="line">           </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-能否重复"><a class="header-anchor" href="#示例-2-能否重复">¶</a>示例 2 : 能否重复</h3>
<p>List中的数据可以重复<br>
Set中的数据不能够重复<br>
重复判断标准是:<br>
首先看hashcode是否相同<br>
如果hashcode不同，则认为是不同数据<br>
如果hashcode相同，再比较equals，如果equals相同，则是相同数据，否则是不同数据<br>
更多关系hashcode，请参考[hashcode原理]</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2513.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.HashSet;</span><br><span class="line">    </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">           </span><br><span class="line">        ArrayList&lt;Integer&gt; numberList &#x3D;new ArrayList&lt;Integer&gt;();</span><br><span class="line">        &#x2F;&#x2F;List中的数据可以重复</span><br><span class="line">        System.out.println(&quot;----------List----------&quot;);</span><br><span class="line">        System.out.println(&quot;向List 中插入 9 9&quot;);</span><br><span class="line">        numberList.add(9);</span><br><span class="line">        numberList.add(9);</span><br><span class="line">        System.out.println(&quot;List 中出现两个9:&quot;);</span><br><span class="line">        System.out.println(numberList);</span><br><span class="line">        System.out.println(&quot;----------Set----------&quot;);</span><br><span class="line">        HashSet&lt;Integer&gt; numberSet &#x3D;new HashSet&lt;Integer&gt;();</span><br><span class="line">        System.out.println(&quot;向Set 中插入9 9&quot;);</span><br><span class="line">        &#x2F;&#x2F;Set中的数据不能重复</span><br><span class="line">        numberSet.add(9);</span><br><span class="line">        numberSet.add(9);</span><br><span class="line">        System.out.println(&quot;Set 中只会保留一个9:&quot;);</span><br><span class="line">        System.out.println(numberSet);</span><br><span class="line">           </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-练习-不重复的随机数"><a class="header-anchor" href="#示例-3-练习-不重复的随机数">¶</a>示例 3 : 练习-不重复的随机数</h3>
<p>生成50个 0-9999之间的随机数，要求不能有重复的</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2520.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.HashSet;</span><br><span class="line">    </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;生成一个HashSet集合</span><br><span class="line">        HashSet&lt;Integer&gt; list&#x3D;new HashSet&lt;&gt;();</span><br><span class="line">        while(list.size()&lt;50) &#123;</span><br><span class="line">            Integer n&#x3D;(int)(Math.random()*9999);</span><br><span class="line">            list.add(n);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="13、关系与区别-ARRAYLIST和LINKEDLIST的区别详解"><a class="header-anchor" href="#13、关系与区别-ARRAYLIST和LINKEDLIST的区别详解">¶</a>13、关系与区别 - ARRAYLIST和LINKEDLIST的区别详解</h2>
<h3 id="步骤-1-ArrayList和LinkedList的区别"><a class="header-anchor" href="#步骤-1-ArrayList和LinkedList的区别">¶</a>步骤 1 : ArrayList和LinkedList的区别</h3>
<p>ArrayList <strong>插入，删除数据慢</strong><br>
LinkedList， <strong>插入，删除数据快</strong><br>
ArrayList是顺序结构，所以<strong>定位很快</strong>，指哪找哪。 就像电影院位置一样，有了电影票，一下就找到位置了。<br>
LinkedList 是链表结构，就像手里的一串佛珠，要找出第99个佛珠，必须得一个一个的数过去，所以<strong>定位慢</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/799.png" alt></p>
<h3 id="步骤-2-插入数据"><a class="header-anchor" href="#步骤-2-插入数据">¶</a>步骤 2 : 插入数据</h3>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2507.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Integer&gt; l;</span><br><span class="line">        l &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        insertFirst(l, &quot;ArrayList&quot;);</span><br><span class="line"> </span><br><span class="line">        l &#x3D; new LinkedList&lt;&gt;();</span><br><span class="line">        insertFirst(l, &quot;LinkedList&quot;);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void insertFirst(List&lt;Integer&gt; l, String type) &#123;</span><br><span class="line">        int total &#x3D; 1000 * 100;</span><br><span class="line">        final int number &#x3D; 5;</span><br><span class="line">        long start &#x3D; System.currentTimeMillis();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; total; i++) &#123;</span><br><span class="line">            l.add(0, number);</span><br><span class="line">        &#125;</span><br><span class="line">        long end &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.printf(&quot;在%s 最前面插入%d条数据，总共耗时 %d 毫秒 %n&quot;, type, total, end - start);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-定位数据"><a class="header-anchor" href="#步骤-3-定位数据">¶</a>步骤 3 : 定位数据</h3>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2508.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Integer&gt; l;</span><br><span class="line">        l &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        modify(l, &quot;ArrayList&quot;);</span><br><span class="line"> </span><br><span class="line">        l &#x3D; new LinkedList&lt;&gt;();</span><br><span class="line">        modify(l, &quot;LinkedList&quot;);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void modify(List&lt;Integer&gt; l, String type) &#123;</span><br><span class="line">        int total &#x3D; 100 * 1000;</span><br><span class="line">        int index &#x3D; total&#x2F;2;</span><br><span class="line">        final int number &#x3D; 5;</span><br><span class="line">        &#x2F;&#x2F;初始化</span><br><span class="line">        for (int i &#x3D; 0; i &lt; total; i++) &#123;</span><br><span class="line">            l.add(number);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        long start &#x3D; System.currentTimeMillis();</span><br><span class="line"> </span><br><span class="line">        for (int i &#x3D; 0; i &lt; total; i++) &#123;</span><br><span class="line">             int n &#x3D; l.get(index);</span><br><span class="line">             n++;</span><br><span class="line">             l.set(index, n);</span><br><span class="line">        &#125;</span><br><span class="line">        long end &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.printf(&quot;%s总长度是%d，定位到第%d个数据，取出来，加1，再放回去%n 重复%d遍，总共耗时 %d 毫秒 %n&quot;, type,total, index,total, end - start);</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-在后面插入数据"><a class="header-anchor" href="#步骤-4-练习-在后面插入数据">¶</a>步骤 4 : 练习-在后面插入数据</h3>
<p>比较 ArrayList和LinkedList <strong>在最后面插入</strong>100000条数据，谁快谁慢？为什么？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		ArrayList&lt;Integer&gt; arry &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		LinkedList&lt;Integer&gt; link &#x3D; new LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">		endFirst(arry, &quot;ArrayList&quot;, 1000000);</span><br><span class="line"></span><br><span class="line">		endFirst(link, &quot;LinkeList&quot;, 1000000);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		public static void endFirst(List&lt;Integer&gt; l, String n, int s) &#123;</span><br><span class="line">			long start &#x3D; System.currentTimeMillis();</span><br><span class="line">			for (int i &#x3D; 0; i &lt; s; i++) &#123;</span><br><span class="line">				l.add(5);</span><br><span class="line">			&#125;</span><br><span class="line">			long end &#x3D; System.currentTimeMillis();</span><br><span class="line">			System.out.println(&quot;在&quot; + n + &quot;最后面插入&quot; + s + &quot;条数据，总共耗时&quot; + (end - start) + &quot;毫秒&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在ArrayList最后面插入1000000条数据，总共耗时17毫秒</span><br><span class="line">在LinkeList最后面插入1000000条数据，总共耗时66毫秒</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-在中间插入数据"><a class="header-anchor" href="#步骤-5-练习-在中间插入数据">¶</a>步骤 5 : 练习-在中间插入数据</h3>
<p>在List的中间位置，插入数据，比较ArrayList快，还是LinkedList快，并解释为什么？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		&#x2F;&#x2F;第一题：比较 ArrayList和LinkedList 在最后面插入100000条数据，谁快谁慢？为什么？</span><br><span class="line">		List&lt;Integer&gt; list &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		long start1 &#x3D; System.currentTimeMillis();</span><br><span class="line">		for(int i &#x3D; 0;i&lt;100000;i++)&#123;</span><br><span class="line">			list.add(i);</span><br><span class="line">		&#125;</span><br><span class="line">		long end1 &#x3D; System.currentTimeMillis();</span><br><span class="line">		Long costTime1 &#x3D; end1 - start1;</span><br><span class="line">		List&lt;Integer&gt; list2 &#x3D; new LinkedList&lt;&gt;();</span><br><span class="line">		long start2 &#x3D; System.currentTimeMillis();</span><br><span class="line">		for (int i &#x3D; 0; i &lt; 100000;i++) &#123;</span><br><span class="line">			list2.add(i);</span><br><span class="line">		&#125;</span><br><span class="line">		long end2 &#x3D; System.currentTimeMillis();</span><br><span class="line">		Long costTime2 &#x3D; end2 - start2;</span><br><span class="line">		System.out.println(&quot;在后面加入数据，ArrayList花费的时间是：&quot;+costTime1);</span><br><span class="line">		System.out.println(&quot;在后面加入数据，LinkedList花费的时间是：&quot;+costTime2);</span><br><span class="line"></span><br><span class="line">		long start11 &#x3D; System.currentTimeMillis();</span><br><span class="line">		for(int i &#x3D; 0;i&lt;100000;i++)&#123;</span><br><span class="line">			list.add(5000,i);</span><br><span class="line">		&#125;</span><br><span class="line">		long end11 &#x3D; System.currentTimeMillis();</span><br><span class="line">		Long costTime11 &#x3D; end11 - start11;</span><br><span class="line">		long start22 &#x3D; System.currentTimeMillis();</span><br><span class="line">		for (int i &#x3D; 0; i &lt; 100000;i++) &#123;</span><br><span class="line">			list2.add(5000,i);</span><br><span class="line">		&#125;</span><br><span class="line">		long end22 &#x3D; System.currentTimeMillis();</span><br><span class="line">		Long costTime22 &#x3D; end22 - start22;</span><br><span class="line">		System.out.println(&quot;在中间加入数据，ArrayList花费的时间是：&quot;+costTime11);</span><br><span class="line">		System.out.println(&quot;在中间加入数据，LinkedList花费的时间是：&quot;+costTime22);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="14、关系与区别-HASHMAP和HASHTABLE之间的区别"><a class="header-anchor" href="#14、关系与区别-HASHMAP和HASHTABLE之间的区别">¶</a>14、关系与区别 - HASHMAP和HASHTABLE之间的区别</h2>
<h3 id="步骤-1-HashMap和Hashtable的区别"><a class="header-anchor" href="#步骤-1-HashMap和Hashtable的区别">¶</a>步骤 1 : HashMap和Hashtable的区别</h3>
<p>HashMap和Hashtable都实现了Map接口，都是键值对保存数据的方式<br>
区别1：<br>
HashMap可以存放 null<br>
Hashtable不能存放null<br>
区别2：<br>
HashMap不是[线程安全的类]<br>
Hashtable是线程安全的类</p>
<p>鉴于目前学习的进度，不对线程安全做展开，在[线程章节]会详细讲解</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Hashtable;</span><br><span class="line"> </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;HashMap和Hashtable都实现了Map接口，都是键值对保存数据的方式</span><br><span class="line">         </span><br><span class="line">        HashMap&lt;String,String&gt; hashMap &#x3D; new HashMap&lt;String,String&gt;();</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;HashMap可以用null作key,作value</span><br><span class="line">        hashMap.put(null, &quot;123&quot;);</span><br><span class="line">        hashMap.put(&quot;123&quot;, null);</span><br><span class="line">         </span><br><span class="line">        Hashtable&lt;String,String&gt; hashtable &#x3D; new Hashtable&lt;String,String&gt;();</span><br><span class="line">        &#x2F;&#x2F;Hashtable不能用null作key，不能用null作value</span><br><span class="line">        hashtable.put(null, &quot;123&quot;);</span><br><span class="line">        hashtable.put(&quot;123&quot;, null);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-反转key和value"><a class="header-anchor" href="#步骤-2-练习-反转key和value">¶</a>步骤 2 : 练习-反转key和value</h3>
<p>使用如下键值对，初始化一个HashMap：<br>
adc - 物理英雄<br>
apc - 魔法英雄<br>
t - 坦克</p>
<p>对这个HashMap进行反转，key变成value,value变成key<br>
<strong>提示</strong>： keySet()可以获取所有的key, values()可以获取所有的value</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"></span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Set;</span><br><span class="line"></span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		HashMap&lt;String,String&gt; hm &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">		HashMap&lt;String,String&gt; hm1 &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">		hm.put(&quot;adc&quot;,&quot;物理英雄&quot;);</span><br><span class="line">		hm.put(&quot;apc&quot;,&quot;魔法英雄&quot;);</span><br><span class="line">		hm.put(&quot;t&quot;,&quot;坦克&quot;);</span><br><span class="line">		System.out.println(hm);</span><br><span class="line">		Set&lt;String&gt;keys &#x3D; hm.keySet();</span><br><span class="line">		for(String key :keys)&#123;</span><br><span class="line">			String value &#x3D; hm.get(key);</span><br><span class="line">			hm1.put(value,key);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(hm1);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="15、关系与区别-HASHSET、-LINKEDHASHSET、TREESET之间的区别"><a class="header-anchor" href="#15、关系与区别-HASHSET、-LINKEDHASHSET、TREESET之间的区别">¶</a>15、关系与区别 - HASHSET、 LINKEDHASHSET、TREESET之间的区别</h2>
<h3 id="步骤-1-HashSet-LinkedHashSet-TreeSet"><a class="header-anchor" href="#步骤-1-HashSet-LinkedHashSet-TreeSet">¶</a>步骤 1 : HashSet LinkedHashSet TreeSet</h3>
<p>HashSet： 无序<br>
LinkedHashSet： 按照插入顺序<br>
TreeSet： 从小到大排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">import java.util.HashSet;</span><br><span class="line">import java.util.LinkedHashSet;</span><br><span class="line">import java.util.TreeSet;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        HashSet&lt;Integer&gt; numberSet1 &#x3D;new HashSet&lt;Integer&gt;();</span><br><span class="line">        &#x2F;&#x2F;HashSet中的数据不是按照插入顺序存放</span><br><span class="line">        numberSet1.add(88);</span><br><span class="line">        numberSet1.add(8);</span><br><span class="line">        numberSet1.add(888);</span><br><span class="line">          </span><br><span class="line">        System.out.println(numberSet1);</span><br><span class="line">          </span><br><span class="line">        LinkedHashSet&lt;Integer&gt; numberSet2 &#x3D;new LinkedHashSet&lt;Integer&gt;();</span><br><span class="line">        &#x2F;&#x2F;LinkedHashSet中的数据是按照插入顺序存放</span><br><span class="line">        numberSet2.add(88);</span><br><span class="line">        numberSet2.add(8);</span><br><span class="line">        numberSet2.add(888);</span><br><span class="line">          </span><br><span class="line">        System.out.println(numberSet2);</span><br><span class="line">        TreeSet&lt;Integer&gt; numberSet3 &#x3D;new TreeSet&lt;Integer&gt;();</span><br><span class="line">        &#x2F;&#x2F;TreeSet 中的数据是进行了排序的</span><br><span class="line">        numberSet3.add(88);</span><br><span class="line">        numberSet3.add(8);</span><br><span class="line">        numberSet3.add(888);</span><br><span class="line">          </span><br><span class="line">        System.out.println(numberSet3);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-既不重复，又有顺序"><a class="header-anchor" href="#步骤-2-练习-既不重复，又有顺序">¶</a>步骤 2 : 练习-既不重复，又有顺序</h3>
<p>利用LinkedHashSet的既不重复，又有顺序的特性，把Math.PI中的数字，按照出现顺序打印出来，相同数字，只出现一次</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">import java.util.LinkedHashSet;</span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		LinkedHashSet&lt;Integer&gt; set &#x3D; new LinkedHashSet&lt;&gt;();</span><br><span class="line">		double pi &#x3D; Math.PI;</span><br><span class="line">		while(set.size()&lt;10) &#123;</span><br><span class="line">			set.add((Integer)(int)(pi%10));</span><br><span class="line">			pi*&#x3D;10;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(set);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="16、其他-JAVA-HASHCODE原理详解"><a class="header-anchor" href="#16、其他-JAVA-HASHCODE原理详解">¶</a>16、其他 - JAVA HASHCODE原理详解</h2>
<h3 id="步骤-1-List查找的低效率"><a class="header-anchor" href="#步骤-1-List查找的低效率">¶</a>步骤 1 : List查找的低效率</h3>
<p>假设在List中存放着无重复名称，没有顺序的2000000个Hero<br>
要把名字叫做“hero 1000000”的对象找出来<br>
List的做法是对每一个进行挨个遍历，直到找到名字叫做“hero 1000000”的英雄。<br>
<strong>最差的情况下，需要遍历和比较2000000次</strong>，才能找到对应的英雄。<br>
测试逻辑：</p>
<ol>
<li>
<p>初始化2000000个对象到ArrayList中</p>
</li>
<li>
<p>打乱容器中的数据顺序</p>
</li>
<li>
<p>进行10次查询，统计每一次消耗的时间<br>
不同计算机的配置情况下，所花的时间是有区别的。 在本机上，花掉的时间大概是600毫秒左右</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/817.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">     </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">     </span><br><span class="line">import charactor.Hero;</span><br><span class="line">     </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">            </span><br><span class="line">        for (int j &#x3D; 0; j &lt; 2000000; j++) &#123;</span><br><span class="line">            Hero h &#x3D; new Hero(&quot;Hero &quot; + j);</span><br><span class="line">            heros.add(h);</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        &#x2F;&#x2F; 进行10次查找，观察大体的平均值</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            &#x2F;&#x2F; 打乱heros中元素的顺序</span><br><span class="line">            Collections.shuffle(heros);</span><br><span class="line">             </span><br><span class="line">            long start &#x3D; System.currentTimeMillis();</span><br><span class="line">     </span><br><span class="line">            String target &#x3D; &quot;Hero 1000000&quot;;</span><br><span class="line">     </span><br><span class="line">            for (Hero hero : heros) &#123;</span><br><span class="line">                if (hero.name.equals(target)) &#123;</span><br><span class="line">                    System.out.println(&quot;找到了 hero!&quot; );</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            long end &#x3D; System.currentTimeMillis();</span><br><span class="line">            long elapsed &#x3D; end - start;</span><br><span class="line">            System.out.println(&quot;一共花了：&quot; + elapsed + &quot; 毫秒&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">             </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-HashMap的性能表现"><a class="header-anchor" href="#步骤-2-HashMap的性能表现">¶</a>步骤 2 : HashMap的性能表现</h3>
<p>使用HashMap 做同样的查找</p>
<ol>
<li>
<p>初始化2000000个对象到HashMap中。</p>
</li>
<li>
<p>进行10次查询</p>
</li>
<li>
<p>统计每一次的查询消耗的时间<br>
可以观察到，几乎不花时间，花费的时间在1毫秒以内</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/818.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">import java.util.HashMap;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        HashMap&lt;String,Hero&gt; heroMap &#x3D; new HashMap&lt;String,Hero&gt;();</span><br><span class="line">        for (int j &#x3D; 0; j &lt; 2000000; j++) &#123;</span><br><span class="line">            Hero h &#x3D; new Hero(&quot;Hero &quot; + j);</span><br><span class="line">            heroMap.put(h.name, h);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;数据准备完成&quot;);</span><br><span class="line">  </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            long start &#x3D; System.currentTimeMillis();</span><br><span class="line">              </span><br><span class="line">            &#x2F;&#x2F;查找名字是Hero 1000000的对象</span><br><span class="line">            Hero target &#x3D; heroMap.get(&quot;Hero 1000000&quot;);</span><br><span class="line">            System.out.println(&quot;找到了 hero!&quot; + target.name);</span><br><span class="line">              </span><br><span class="line">            long end &#x3D; System.currentTimeMillis();</span><br><span class="line">            long elapsed &#x3D; end - start;</span><br><span class="line">            System.out.println(&quot;一共花了：&quot; + elapsed + &quot; 毫秒&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-HashMap原理与字典"><a class="header-anchor" href="#步骤-3-HashMap原理与字典">¶</a>步骤 3 : HashMap原理与字典</h3>
<p>在展开HashMap原理的讲解之前，首先回忆一下大家初中和高中使用的汉英字典。</p>
<p>比如要找一个单词对应的中文意思，假设单词是Lengendary,首先在目录找到Lengendary在第 555页。</p>
<p>然后，翻到第555页，这页不只一个单词，但是量已经很少了，逐一比较，很快就定位目标单词Lengendary。</p>
<p>555相当于就是Lengendary对应的<strong>hashcode</strong></p>
<h3 id="步骤-4-分析HashMap性能卓越的原因"><a class="header-anchor" href="#步骤-4-分析HashMap性能卓越的原因">¶</a>步骤 4 : 分析HashMap性能卓越的原因</h3>
<p><strong>-----hashcode概念-----</strong><br>
所有的对象，都有一个对应的<strong>hashcode（散列值）</strong><br>
比如字符串“gareen”对应的是1001 (实际上不是，这里是方便理解，假设的值)<br>
比如字符串“temoo”对应的是1004<br>
比如字符串“db”对应的是1008<br>
比如字符串“annie”对应的<strong>也 是1008</strong></p>
<p><strong>-----保存数据-----</strong><br>
准备一个数组，其长度是2000，并且设定特殊的hashcode算法，使得所有字符串对应的hashcode，都会落在0-1999之间<br>
要存放名字是&quot;gareen&quot;的英雄，就把该英雄和名称组成一个<strong>键值对</strong>，存放在数组的1001这个位置上<br>
要存放名字是&quot;temoo&quot;的英雄，就把该英雄存放在数组的1004这个位置上<br>
要存放名字是&quot;db&quot;的英雄，就把该英雄存放在数组的1008这个位置上<br>
要存放名字是&quot;annie&quot;的英雄，然而 &quot;annie&quot;的hashcode 1008对应的位置<strong>已经有db英雄了</strong>，那么就在这里创建一个链表，<strong>接在db英雄后面存放annie</strong></p>
<p><strong>-----查找数据-----</strong><br>
比如要查找gareen，首先计算&quot;gareen&quot;的hashcode是1001，根据1001这个下标，到数组中进行定位，（<strong>根据数组下标进行定位，是非常快速的</strong>） 发现1001这个位置就只有一个英雄，那么该英雄就是gareen.<br>
比如要查找annie，首先计算&quot;annie&quot;的hashcode是1008，根据1008这个下标，到数组中进行定位，发现1008这个位置<strong>有两个英雄</strong>，那么就对两个英雄的名字进行逐一比较(<strong>equals</strong>)，因为此时需要比较的量就已经少很多了，很快也就可以找出目标英雄<br>
这就是使用hashmap进行查询，非常快原理。</p>
<p>这是一种用<strong>空间换时间</strong>的思维方式</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/819.png" alt></p>
<h3 id="步骤-5-HashSet判断是否重复"><a class="header-anchor" href="#步骤-5-HashSet判断是否重复">¶</a>步骤 5 : HashSet判断是否重复</h3>
<p>HashSet的数据是不能重复的，相同数据不能保存在一起，到底如何判断是否是重复的呢？<br>
根据[HashSet和HashMap的关系]，我们了解到因为HashSet没有自身的实现，而是里面封装了一个HashMap，所以本质上就是判断HashMap的key是否重复。</p>
<p>再通过上一步的学习，key是否重复，是由两个步骤判断的：<br>
hashcode是否一样<br>
如果hashcode不一样，就是在<strong>不同的坑里</strong>，一定是不重复的<br>
如果hashcode一样，就是在<strong>同一个坑里</strong>，还需要进行equals比较<br>
如果equals一样，则是重复数据<br>
如果equals不一样，则是不同数据。</p>
<h3 id="步骤-6-练习-自定义字符串的hashcode"><a class="header-anchor" href="#步骤-6-练习-自定义字符串的hashcode">¶</a>步骤 6 : 练习-自定义字符串的hashcode</h3>
<p>如下是Java API提供的String的hashcode生成办法；</p>
<p>s[0]*31^(n-1) + s[1]*31^(n-2) + … + s[n-1]</p>
<p>s[0] 表示第一位字符<br>
n表示字符串的长度<br>
本练习并不是要求去理解这个算法，而是自定义一个<strong>简单的hashcode算法</strong>，计算任意字符串的hashcode<br>
因为String类不能被重写，所以我们通过一个静态方法来返回一个String的hashcode</p>
<p>public static int hashcode(String)</p>
<p>如果字符串长度是0，则返回0。<br>
否则： 获取每一位字符，转换成数字后，相加，最后乘以23</p>
<p>(s[0]+ s[1] + s[2] + s[3]+ s[n-1])*23.</p>
<p>如果值超过了1999，则取2000的余数，保证落在0-1999之间。<br>
如果是负数，则取绝对值。</p>
<p>随机生成长度是2-10的不等的100个字符串，打印用本hashcode获取的值分别是多少</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class TestHashSet &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        String str&#x3D;&quot;zxcvbnmlkjhgfdsaqwertyuiopQWERTYUIOPASDFGHJKLZXCVBNM1234567890&quot;;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 100; i++) &#123;</span><br><span class="line">            StringBuilder stringBuilder&#x3D;new StringBuilder(&quot;&quot;);</span><br><span class="line">            Random random&#x3D;new Random();</span><br><span class="line">            for (int j &#x3D; 0; j &lt; (2+(int)9*Math.random()); j++) &#123;</span><br><span class="line">                int number&#x3D;random.nextInt(str.length()-1);</span><br><span class="line">                stringBuilder.append(str.charAt(number));</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(stringBuilder.toString()+&quot; &quot;+hashcode(stringBuilder.toString()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public static int hashcode(String s)&#123;</span><br><span class="line">        int sum&#x3D;0;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; s.length(); i++) &#123;</span><br><span class="line">            sum&#x3D;sum+s.charAt(i);</span><br><span class="line">        &#125;</span><br><span class="line">        sum*&#x3D;23;</span><br><span class="line">        return sum&gt;1999?sum%2000:sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-练习-自定义MyHashMap"><a class="header-anchor" href="#步骤-7-练习-自定义MyHashMap">¶</a>步骤 7 : 练习-自定义MyHashMap</h3>
<p>根据前面学习的hashcode的原理和自定义hashcode, 设计一个MyHashMap，实现接口IHashMap</p>
<p>MyHashMap内部由一个长度是2000的对象数组实现。</p>
<p><strong>设计put(String key,Object value)方法</strong><br>
首先通过上一个[自定义字符串的hashcode练习]获取到该字符串的hashcode,然后把这个hashcode作为下标，定位到数组的指定位置。<br>
如果该位置没有数据，则把字符串和对象组合成<strong>键值对</strong>Entry，再创建一个LinkedList，把键值对，放进LinkedList中，最后把LinkedList 保存在这个位置。<br>
如果该位置有数据，一定是一个LinkedList,则把字符串和对象组合成<strong>键值对</strong>Entry，插入到LinkedList后面。</p>
<p><strong>设计 Object get(String key) 方法</strong><br>
首先通过上一个[自定义字符串的hashcode练习]获取到该字符串的hashcode,然后把这个hashcode作为下标，定位到数组的指定位置。<br>
如果这个位置没有数据，则返回空<br>
如果这个位置有数据，则挨个比较其中<strong>键值对</strong>的键-字符串，是否equals，找到匹配的，把键值对的值，返回出去。找不到匹配的，就返回空</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">public interface IHashMap &#123;</span><br><span class="line">    public void put(String key,Object object);</span><br><span class="line">    public Object get(String key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;键值对</span><br><span class="line">package collection;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;键值对</span><br><span class="line">public class Entry &#123;</span><br><span class="line"> </span><br><span class="line">    public Entry(Object key, Object value) &#123;</span><br><span class="line">        super();</span><br><span class="line">        this.key &#x3D; key;</span><br><span class="line">        this.value &#x3D; value;</span><br><span class="line">    &#125;</span><br><span class="line">    public Object key;</span><br><span class="line">    public Object value;</span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;[key&#x3D;&quot; + key + &quot;, value&#x3D;&quot; + value + &quot;]&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line"></span><br><span class="line">import java.util.LinkedList;</span><br><span class="line"></span><br><span class="line">public class MyHashMap implements IHashMap&#123;</span><br><span class="line">    public Object[] objects&#x3D;new Object[2000];</span><br><span class="line">    @Override</span><br><span class="line">    public void put(String key, Object object) &#123;</span><br><span class="line">        int hashcode&#x3D;TestHashSet.hashcode(key);</span><br><span class="line">        if (objects[hashcode]&#x3D;&#x3D;null)&#123;</span><br><span class="line">            Entry entry&#x3D;new Entry(key,object);</span><br><span class="line">            LinkedList&lt;Entry&gt; list&#x3D;new LinkedList&lt;Entry&gt;();</span><br><span class="line">            list.add(entry);</span><br><span class="line">            objects[hashcode]&#x3D;list;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            Entry entry&#x3D;new Entry(key,object);</span><br><span class="line">            @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">			LinkedList&lt;Entry&gt; list&#x3D;(LinkedList&lt;Entry&gt;)objects[hashcode];</span><br><span class="line">            list.addLast(entry);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public Object get(String key) &#123;</span><br><span class="line">        int hashcode&#x3D;TestHashSet.hashcode(key);</span><br><span class="line">        if (objects[hashcode]!&#x3D;null)&#123;</span><br><span class="line">            @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">			LinkedList&lt;Entry&gt; list&#x3D;(LinkedList&lt;Entry&gt;)objects[hashcode];</span><br><span class="line">            for (Entry entry :</span><br><span class="line">                    list) &#123;</span><br><span class="line">                if (key.equals(entry.key))&#123;</span><br><span class="line">                    return entry.value;</span><br><span class="line">                &#125;else &#123;</span><br><span class="line">                    return null;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        MyHashMap myHashMap&#x3D;new MyHashMap();</span><br><span class="line">        myHashMap.put(&quot;土拨鼠&quot;,12345);</span><br><span class="line">        &#x2F;*System.out.println(TestHashSet.hashcode(&quot;zhuzhu&quot;));</span><br><span class="line">        System.out.println(myHashMap.objects[1778]);*&#x2F;</span><br><span class="line">        System.out.println(myHashMap.get(&quot;土拨鼠&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-8-练习-内容查找性能比较"><a class="header-anchor" href="#步骤-8-练习-内容查找性能比较">¶</a>步骤 8 : 练习-内容查找性能比较</h3>
<p>重复前面的 [练习-查找内容性能比较]，不过不使用HashMap,而是使用上个练习中自定义的MyHashMap.</p>
<p>准备一个ArrayList其中存放100000(十万个)Hero对象，其名称是随机的,格式是hero-[4位随机数]<br>
hero-3229<br>
hero-6232<br>
hero-9365<br>
…</p>
<p>因为总数很大，所以几乎每种都有重复，把名字叫做 hero-5555的所有对象找出来<br>
要求使用两种办法来寻找</p>
<ol>
<li>
<p>不使用MyHashMap，直接使用for循环找出来，并统计花费的时间</p>
</li>
<li>
<p>借助MyHashMap，找出结果，并统计花费的时间</p>
</li>
</ol>
<h2 id="17、其他-JAVA-COMPARATOR和COMPARABLE-比较器"><a class="header-anchor" href="#17、其他-JAVA-COMPARATOR和COMPARABLE-比较器">¶</a>17、其他 - JAVA COMPARATOR和COMPARABLE 比较器</h2>
<h3 id="步骤-1-Comparator"><a class="header-anchor" href="#步骤-1-Comparator">¶</a>步骤 1 : Comparator</h3>
<p>假设Hero有三个属性 name,hp,damage<br>
一个集合中放存放10个Hero,通过Collections.sort对这10个进行排序<br>
那么<strong>到底是hp小的放前面？还是damage小的放前面？<strong>Collections.sort也无法确定<br>
所以要指定到底按照哪种属性进行排序<br>
这里就需要提供一个Comparator给定如何进行两个对象之间的</strong>大小</strong>比较</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/828.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">  </span><br><span class="line">public class Hero  &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">  </span><br><span class="line">    public int damage;</span><br><span class="line">  </span><br><span class="line">    public Hero() &#123;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public Hero(String name) &#123;</span><br><span class="line"> </span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Hero [name&#x3D;&quot; + name + &quot;, hp&#x3D;&quot; + hp + &quot;, damage&#x3D;&quot; + damage + &quot;]\r\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Hero(String name, int hp, int damage) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">        this.hp &#x3D; hp;</span><br><span class="line">        this.damage &#x3D; damage;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">     </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.Comparator;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line">    </span><br><span class="line">import charactor.Hero;</span><br><span class="line">     </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D;new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">            </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            &#x2F;&#x2F;通过随机值实例化hero的hp和damage</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot;+ i, r.nextInt(100), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">            </span><br><span class="line">        &#x2F;&#x2F;直接调用sort会出现编译错误，因为Hero有各种属性</span><br><span class="line">        &#x2F;&#x2F;到底按照哪种属性进行比较，Collections也不知道，不确定，所以没法排</span><br><span class="line">        &#x2F;&#x2F;Collections.sort(heros);</span><br><span class="line">            </span><br><span class="line">        &#x2F;&#x2F;引入Comparator，指定比较的算法</span><br><span class="line">        Comparator&lt;Hero&gt; c &#x3D; new Comparator&lt;Hero&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public int compare(Hero h1, Hero h2) &#123;</span><br><span class="line">                &#x2F;&#x2F;按照hp进行排序</span><br><span class="line">                if(h1.hp&gt;&#x3D;h2.hp)</span><br><span class="line">                    return 1;  &#x2F;&#x2F;正数表示h1比h2要大</span><br><span class="line">                else</span><br><span class="line">                    return -1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Collections.sort(heros,c);</span><br><span class="line">        System.out.println(&quot;按照血量排序后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-Comparable"><a class="header-anchor" href="#步骤-2-Comparable">¶</a>步骤 2 : Comparable</h3>
<p>使Hero类实现Comparable接口<br>
在类里面提供比较算法<br>
Collections.sort就有足够的信息进行排序了，也无需额外提供比较器Comparator<br>
<strong>注：</strong> 如果返回-1, 就表示当前的更小，否则就是更大</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/829.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">    </span><br><span class="line">public class Hero implements Comparable&lt;Hero&gt;&#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">       </span><br><span class="line">    public int damage;</span><br><span class="line">       </span><br><span class="line">    public Hero()&#123;</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    public Hero(String name) &#123;</span><br><span class="line">        this.name &#x3D;name;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    &#x2F;&#x2F;初始化name,hp,damage的构造方法</span><br><span class="line">    public Hero(String name,float hp, int damage) &#123;</span><br><span class="line">        this.name &#x3D;name;</span><br><span class="line">        this.hp &#x3D; hp;</span><br><span class="line">        this.damage &#x3D; damage;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    @Override</span><br><span class="line">    public int compareTo(Hero anotherHero) &#123;</span><br><span class="line">        if(damage&lt;anotherHero.damage)</span><br><span class="line">            return 1; </span><br><span class="line">        else</span><br><span class="line">            return -1;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Hero [name&#x3D;&quot; + name + &quot;, hp&#x3D;&quot; + hp + &quot;, damage&#x3D;&quot; + damage + &quot;]\r\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.Comparator;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D;new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">          </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            &#x2F;&#x2F;通过随机值实例化hero的hp和damage</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot;+ i, r.nextInt(100), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        System.out.println(&quot;初始化后的集合&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;Hero类实现了接口Comparable，即自带比较信息。</span><br><span class="line">        &#x2F;&#x2F;Collections直接进行排序，无需额外的Comparator</span><br><span class="line">        Collections.sort(heros);</span><br><span class="line">        System.out.println(&quot;按照伤害高低排序后的集合&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-自定义顺序的TreeSet"><a class="header-anchor" href="#步骤-3-练习-自定义顺序的TreeSet">¶</a>步骤 3 : 练习-自定义顺序的TreeSet</h3>
<p>默认情况下，TreeSet中的数据是从小到大排序的，不过TreeSet的构造方法支持传入一个Comparator</p>
<p>public TreeSet(Comparator comparator)</p>
<p>通过这个构造方法创建一个TreeSet，使得其中的的数字是倒排序的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.Comparator;</span><br><span class="line">import java.util.TreeSet;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">        Comparator&lt;Integer&gt;C&#x3D;new Comparator&lt;Integer&gt;()&#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public int compare(Integer o1, Integer o2) &#123;</span><br><span class="line">                if(o1&lt;&#x3D;o2)</span><br><span class="line">                    return 1;</span><br><span class="line">                else</span><br><span class="line">                    return -1;</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;;</span><br><span class="line">        TreeSet&lt;Integer&gt;t&#x3D;new TreeSet&lt;Integer&gt;(C);</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            t.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(t);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-Comparable"><a class="header-anchor" href="#步骤-4-练习-Comparable">¶</a>步骤 4 : 练习-Comparable</h3>
<p>借助Comparable接口，使Item具备按照价格从高到低排序。<br>
初始化10个Item,并且用Collections.sort进行排序，查看排序结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line"> </span><br><span class="line">public class Hero implements Comparable&lt;Hero&gt; &#123;</span><br><span class="line">    public  String Name;</span><br><span class="line">    public int hp;</span><br><span class="line">     </span><br><span class="line">    public Hero()&#123;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Hero(String name) &#123;</span><br><span class="line">        super();</span><br><span class="line">        Name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Hero(String name, int hp) &#123;</span><br><span class="line">        super();</span><br><span class="line">        Name &#x3D; name;</span><br><span class="line">        this.hp &#x3D; hp;</span><br><span class="line">     </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return Name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        Name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public int getHp() &#123;</span><br><span class="line">        return hp;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void setHp(int hp) &#123;</span><br><span class="line">        this.hp &#x3D; hp;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public int compareTo(Hero o) &#123;</span><br><span class="line">        &#x2F;&#x2F; 以血量进行排序</span><br><span class="line">        int sum &#x3D; this.hp - o.hp;</span><br><span class="line">&#x2F;&#x2F;      </span><br><span class="line">        &#x2F;&#x2F; 当hp相同时，按照名字排序</span><br><span class="line">        int sum2 &#x3D; sum &#x3D;&#x3D; 0 ? o.Name.compareTo(this.Name) : sum;</span><br><span class="line">        return sum;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Hero [hp&#x3D;&quot; + hp + &quot;]&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Hero&gt; ts &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">			Hero hero &#x3D; new Hero();</span><br><span class="line">			hero.Name&#x3D; &quot;Hero&quot;+i;</span><br><span class="line">			hero.hp&#x3D; (int) (Math.random()*100);</span><br><span class="line">			ts.add(hero);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(&quot;初始化后的Hero：&quot;);</span><br><span class="line">		for (Hero hero : ts) &#123;</span><br><span class="line">			System.out.println(hero.getName() + &quot; &quot; + hero.getHp());</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(&quot; ----------&quot;);</span><br><span class="line">		Collections.sort(ts);</span><br><span class="line">		System.out.println(&quot;排序之后的Hero&quot;);</span><br><span class="line">		for (Hero hero : ts) &#123;</span><br><span class="line">			System.out.println(hero.getName() + &quot; &quot; + hero.getHp());</span><br><span class="line">		&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">初始化后的Hero：</span><br><span class="line">Hero0 25</span><br><span class="line">Hero1 40</span><br><span class="line">Hero2 94</span><br><span class="line">Hero3 14</span><br><span class="line">Hero4 33</span><br><span class="line">Hero5 75</span><br><span class="line">Hero6 31</span><br><span class="line">Hero7 37</span><br><span class="line">Hero8 89</span><br><span class="line">Hero9 90</span><br><span class="line"> ----------</span><br><span class="line">排序之后的Hero</span><br><span class="line">Hero3 14</span><br><span class="line">Hero0 25</span><br><span class="line">Hero6 31</span><br><span class="line">Hero4 33</span><br><span class="line">Hero7 37</span><br><span class="line">Hero1 40</span><br><span class="line">Hero5 75</span><br><span class="line">Hero8 89</span><br><span class="line">Hero9 90</span><br><span class="line">Hero2 94</span><br></pre></td></tr></table></figure>
<h2 id="18、其他-聚合操作"><a class="header-anchor" href="#18、其他-聚合操作">¶</a>18、其他 - 聚合操作</h2>
<h3 id="步骤-1-聚合操作"><a class="header-anchor" href="#步骤-1-聚合操作">¶</a>步骤 1 : 聚合操作</h3>
<p>JDK8之后，引入了对集合的聚合操作，可以非常容易的遍历，筛选，比较集合中的元素。</p>
<p>像这样：</p>
<p>​        String name =heros</p>
<p>​            .stream()</p>
<p>​            .sorted((h1,h2)-&gt;h1.hp&gt;h2.hp?-1:1)</p>
<p>​            .skip(2)</p>
<p>​            .map(h-&gt;h.getName())</p>
<p>​            .findFirst()</p>
<p>​            .get();</p>
<p>但是要用好聚合，必须先掌握[Lambda表达式]，聚合的章节讲放在[Lambda与聚合操作]部分详细讲解</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2564.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.Comparator;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestAggregate &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;初始化集合后的数据 (最后一个数据重复)：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;传统方式</span><br><span class="line">        Collections.sort(heros,new Comparator&lt;Hero&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public int compare(Hero o1, Hero o2) &#123;</span><br><span class="line">                return (int) (o2.hp-o1.hp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">         </span><br><span class="line">        Hero hero &#x3D; heros.get(2);</span><br><span class="line">        System.out.println(&quot;通过传统方式找出来的hp第三高的英雄名称是:&quot; + hero.name);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;聚合方式</span><br><span class="line">        String name &#x3D;heros</span><br><span class="line">            .stream()</span><br><span class="line">            .sorted((h1,h2)-&gt;h1.hp&gt;h2.hp?-1:1)</span><br><span class="line">            .skip(2)</span><br><span class="line">            .map(h-&gt;h.getName())</span><br><span class="line">            .findFirst()</span><br><span class="line">            .get();</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;通过聚合操作找出来的hp第三高的英雄名称是:&quot; + name);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line"> </span><br><span class="line">public class Hero implements Comparable&lt;Hero&gt; &#123;</span><br><span class="line">    public  String Name;</span><br><span class="line">    public int hp;</span><br><span class="line">    public int damage;</span><br><span class="line">     </span><br><span class="line">    public Hero()&#123;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Hero(String name) &#123;</span><br><span class="line">        super();</span><br><span class="line">        Name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Hero(String name, int hp) &#123;</span><br><span class="line">        super();</span><br><span class="line">        Name &#x3D; name;</span><br><span class="line">        this.hp &#x3D; hp;</span><br><span class="line">     </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Hero(String i, int hp, int damage) &#123;</span><br><span class="line">		&#x2F;&#x2F; TODO Auto-generated constructor stub</span><br><span class="line">    	this.Name &#x3D; i;</span><br><span class="line">    	this.hp &#x3D; hp;</span><br><span class="line">    	this.damage &#x3D; damage;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getName() &#123;</span><br><span class="line">        return Name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        Name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public int getHp() &#123;</span><br><span class="line">        return hp;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void setHp(int hp) &#123;</span><br><span class="line">        this.hp &#x3D; hp;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public int compareTo(Hero o) &#123;</span><br><span class="line">        &#x2F;&#x2F; 以血量进行排序</span><br><span class="line">        int sum &#x3D; this.hp - o.hp;</span><br><span class="line">&#x2F;&#x2F;      </span><br><span class="line">        &#x2F;&#x2F; 当hp相同时，按照名字排序</span><br><span class="line">        int sum2 &#x3D; sum &#x3D;&#x3D; 0 ? o.Name.compareTo(this.Name) : sum;</span><br><span class="line">        return sum;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Hero [name&#x3D;&quot; + Name + &quot;,&quot; + &quot; hp&#x3D;&quot; + hp + &quot; damage&#x3D;&quot; + damage + &quot;]\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="四、泛型"><a class="header-anchor" href="#四、泛型">¶</a>四、泛型</h1>
<h2 id="1、JAVA-什么是-泛型？"><a class="header-anchor" href="#1、JAVA-什么是-泛型？">¶</a>1、JAVA 什么是 泛型？</h2>
<h3 id="示例-1-不使用泛型"><a class="header-anchor" href="#示例-1-不使用泛型">¶</a>示例 1 : 不使用泛型</h3>
<p>不使用泛型带来的问题<br>
ADHero（物理攻击英雄） APHero（魔法攻击英雄）都是Hero的子类<br>
ArrayList 默认接受Object类型的对象，所以所有对象都可以放进ArrayList中<br>
所以get(0) <strong>返回的类型是Object</strong><br>
接着，需要进行强制转换才可以得到APHero类型或者ADHero类型。<br>
如果软件开发人员记忆比较好，能<strong>记得哪个是哪个</strong>，还是可以的。 但是开发人员会犯错误，比如第20行，会记错，把第0个对象转换为ADHero,这样就会出现类型转换异常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.APHero;</span><br><span class="line"> </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        ArrayList heros &#x3D; new ArrayList();</span><br><span class="line">         </span><br><span class="line">        heros.add(new APHero());</span><br><span class="line">        heros.add(new ADHero());</span><br><span class="line">         </span><br><span class="line">        APHero apHero &#x3D;  (APHero) heros.get(0);</span><br><span class="line">        ADHero adHero &#x3D;  (ADHero) heros.get(1);</span><br><span class="line">         </span><br><span class="line">        ADHero adHero2 &#x3D;  (ADHero) heros.get(0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-使用泛型"><a class="header-anchor" href="#示例-2-使用泛型">¶</a>示例 2 : 使用泛型</h3>
<p>使用泛型的好处：<br>
泛型的用法是在容器后面添加<Type><br>
Type可以是类，抽象类，接口<br>
泛型表示这种容器，<strong>只能存放APHero</strong>，ADHero就放不进去了。</Type></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.APHero;</span><br><span class="line"> </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;APHero&gt; heros &#x3D; new ArrayList&lt;APHero&gt;();</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;只有APHero可以放进去    </span><br><span class="line">        heros.add(new APHero());</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;ADHero甚至放不进去</span><br><span class="line">        &#x2F;&#x2F;heros.add(new ADHero());</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;获取的时候也不需要进行转型，因为取出来一定是APHero</span><br><span class="line">        APHero apHero &#x3D;  heros.get(0);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-子类对象"><a class="header-anchor" href="#示例-3-子类对象">¶</a>示例 3 : 子类对象</h3>
<p>假设容器的泛型是Hero,那么<strong>Hero的子类</strong>APHero,ADHero<strong>都可以放进去</strong><br>
和Hero无关的类型Item还是放不进去</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import property.Item;</span><br><span class="line"> </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.APHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;只有作为Hero的子类可以放进去     </span><br><span class="line">        heros.add(new APHero());</span><br><span class="line">        heros.add(new ADHero());</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;和Hero无关的类型Item还是放不进去</span><br><span class="line">        &#x2F;&#x2F;heros.add(new Item());</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-泛型的简写"><a class="header-anchor" href="#示例-4-泛型的简写">¶</a>示例 4 : 泛型的简写</h3>
<p>为了不使编译器出现警告，需要前后都使用泛型，像这样：</p>
<p>ArrayList<Hero> heros = new ArrayList<Hero>();</Hero></Hero></p>
<p>不过JDK7提供了一个可以略微减少代码量的泛型简写方式</p>
<p>ArrayList<Hero> heros2 = new ArrayList&lt;&gt;();</Hero></p>
<p>后面的泛型可以用&lt;&gt;来代替，聊胜于无吧</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        &#x2F;&#x2F;后面可以只用&lt;&gt;</span><br><span class="line">        ArrayList&lt;Hero&gt; heros2 &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-5-练习-泛型"><a class="header-anchor" href="#示例-5-练习-泛型">¶</a>示例 5 : 练习-泛型</h3>
<p>根据[数字类]的知识，设计一个集合，这个集合里即可以放整数，也可以放浮点数，但是不能放字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"></span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		&#x2F;&#x2F;泛型使用Number</span><br><span class="line">		ArrayList&lt;Number&gt; aList &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		&#x2F;&#x2F;可以放入子类类型</span><br><span class="line">		aList.add(1);</span><br><span class="line">		aList.add(1f);</span><br><span class="line">		aList.add(1d);</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;非子类报错</span><br><span class="line">		&#x2F;&#x2F;aList.add(&quot;1&quot;);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、JAVA-如何设计支持泛型的类"><a class="header-anchor" href="#2、JAVA-如何设计支持泛型的类">¶</a>2、JAVA 如何设计支持泛型的类</h2>
<h3 id="步骤-1-不支持泛型的Stack"><a class="header-anchor" href="#步骤-1-不支持泛型的Stack">¶</a>步骤 1 : 不支持泛型的Stack</h3>
<p>以[Stack栈]为例子，如果不使用泛型<br>
当需要一个只能放Hero的栈的时候，就需要设计一个HeroStack<br>
当需要一个只能放Item的栈的时候，就需要一个ItemStack</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line">   </span><br><span class="line">import java.util.LinkedList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class HeroStack &#123;</span><br><span class="line">   </span><br><span class="line">    LinkedList&lt;Hero&gt; heros &#x3D; new LinkedList&lt;Hero&gt;();</span><br><span class="line">       </span><br><span class="line">    public void push(Hero h) &#123;</span><br><span class="line">        heros.addLast(h);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public Hero pull() &#123;</span><br><span class="line">        return heros.removeLast();</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public Hero peek() &#123;</span><br><span class="line">        return heros.getLast();</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">           </span><br><span class="line">        HeroStack heroStack &#x3D; new HeroStack();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            Hero h &#x3D; new Hero(&quot;hero name &quot; + i);</span><br><span class="line">            System.out.println(&quot;压入 hero:&quot; + h);</span><br><span class="line">            heroStack.push(h);</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            Hero h &#x3D;heroStack.pull();</span><br><span class="line">            System.out.println(&quot;弹出 hero&quot; + h);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line">   </span><br><span class="line">import java.util.LinkedList;</span><br><span class="line"> </span><br><span class="line">import property.Item;</span><br><span class="line">   </span><br><span class="line">public class ItemStack &#123;</span><br><span class="line">   </span><br><span class="line">    LinkedList&lt;Item&gt; Items &#x3D; new LinkedList&lt;Item&gt;();</span><br><span class="line">       </span><br><span class="line">    public void push(Item h) &#123;</span><br><span class="line">        Items.addLast(h);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public Item pull() &#123;</span><br><span class="line">        return Items.removeLast();</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public Item peek() &#123;</span><br><span class="line">        return Items.getLast();</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">           </span><br><span class="line">        ItemStack ItemStack &#x3D; new ItemStack();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            Item item &#x3D; new Item(&quot;Item name &quot; + i);</span><br><span class="line">            System.out.println(&quot;压入 Item:&quot; + item);</span><br><span class="line">            ItemStack.push(item);</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            Item item &#x3D;ItemStack.pull();</span><br><span class="line">            System.out.println(&quot;弹出 Item&quot; + item);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-支持泛型的Stack"><a class="header-anchor" href="#步骤-2-支持泛型的Stack">¶</a>步骤 2 : 支持泛型的Stack</h3>
<p>设计一个支持泛型的栈MyStack<br>
设计这个类的时候，在类的声明上，加上一个<T>，表示该类支持泛型。<br>
T是type的缩写，也可以使用任何其他的合法的变量，比如A,B,X都可以，但是一般约定成俗使用T，代表类型。</T></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line">   </span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">import property.Item;</span><br><span class="line">   </span><br><span class="line">public class MyStack&lt;T&gt; &#123;</span><br><span class="line">   </span><br><span class="line">    LinkedList&lt;T&gt; values &#x3D; new LinkedList&lt;T&gt;();</span><br><span class="line">       </span><br><span class="line">    public void push(T t) &#123;</span><br><span class="line">        values.addLast(t);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public T pull() &#123;</span><br><span class="line">        return values.removeLast();</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public T peek() &#123;</span><br><span class="line">        return values.getLast();</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;在声明这个Stack的时候，使用泛型&lt;Hero&gt;就表示该Stack只能放Hero</span><br><span class="line">        MyStack&lt;Hero&gt; heroStack &#x3D; new MyStack&lt;&gt;();</span><br><span class="line">        heroStack.push(new Hero());</span><br><span class="line">        &#x2F;&#x2F;不能放Item</span><br><span class="line">        heroStack.push(new Item());</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;在声明这个Stack的时候，使用泛型&lt;Item&gt;就表示该Stack只能放Item</span><br><span class="line">        MyStack&lt;Item&gt; itemStack &#x3D; new MyStack&lt;&gt;();</span><br><span class="line">        itemStack.push(new Item());</span><br><span class="line">        &#x2F;&#x2F;不能放Hero</span><br><span class="line">        itemStack.push(new Hero());</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-支持泛型的二叉树"><a class="header-anchor" href="#步骤-3-练习-支持泛型的二叉树">¶</a>步骤 3 : 练习-支持泛型的二叉树</h3>
<p>把[二叉树]中的Node类，改造成支持泛型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"></span><br><span class="line">import charactor.Hero;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"></span><br><span class="line">public class Node&lt;T extends Comparable&lt;T&gt;&gt; &#123;</span><br><span class="line">	public Node&lt;T&gt; left;</span><br><span class="line">	public Node&lt;T&gt; right;</span><br><span class="line">	public T value;</span><br><span class="line"></span><br><span class="line">	public void add(T e) &#123;</span><br><span class="line">		if (null &#x3D;&#x3D; value) &#123;</span><br><span class="line">			value &#x3D; e;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			if (e.compareTo(value) &lt;&#x3D; 0) &#123;</span><br><span class="line">				if (null &#x3D;&#x3D; left) left &#x3D; new Node&lt;&gt;();</span><br><span class="line">				left.add(e);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				if (null &#x3D;&#x3D; right) right &#x3D; new Node&lt;&gt;();</span><br><span class="line">				right.add(e);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public List&lt;T&gt; values() &#123;</span><br><span class="line">		List&lt;T&gt; values &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		if (null !&#x3D; left) &#123;</span><br><span class="line">			values.addAll(left.values());</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		values.add(value);</span><br><span class="line"></span><br><span class="line">		if (null !&#x3D; right) &#123;</span><br><span class="line">			values.addAll(right.values());</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return values;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		Node&lt;Integer&gt; is &#x3D; new Node&lt;&gt;();</span><br><span class="line">		is.add(3);</span><br><span class="line">		is.add(5);</span><br><span class="line">		is.add(1);</span><br><span class="line">		is.add(4);</span><br><span class="line">		is.add(2);</span><br><span class="line"></span><br><span class="line">		System.out.println(is.values());</span><br><span class="line"></span><br><span class="line">		System.out.println();</span><br><span class="line">		System.out.println(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;);</span><br><span class="line">		System.out.println();</span><br><span class="line"></span><br><span class="line">		Random r &#x3D; new Random();</span><br><span class="line">		Node&lt;Hero&gt; hs &#x3D; new Node&lt;&gt;();</span><br><span class="line">		for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">			hs.add(new Hero(&quot;hero&quot;+i, r.nextInt(100)));</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(hs.values());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、JAVA-泛型通配符-EXTENDS-SUPER-的用法"><a class="header-anchor" href="#3、JAVA-泛型通配符-EXTENDS-SUPER-的用法">¶</a>3、JAVA 泛型通配符 ? EXTENDS SUPER 的用法</h2>
<h3 id="示例-1-extends"><a class="header-anchor" href="#示例-1-extends">¶</a>示例 1 : ? extends</h3>
<p>ArrayList heroList&lt;? extends Hero&gt; 表示这是一个Hero泛型或者其子类泛型<br>
heroList 的泛型可能是Hero<br>
heroList 的泛型可能是APHero<br>
heroList 的泛型可能是ADHero<br>
所以 可以确凿的是，<strong>从heroList取出来的对象，一定是可以转型成Hero的</strong></p>
<p>但是，不能往里面放东西，因为<br>
放APHero就不满足<ADHero><br>
放ADHero又不满足<APHero></APHero></ADHero></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/837.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">  </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.APHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        ArrayList&lt;APHero&gt; apHeroList &#x3D; new ArrayList&lt;APHero&gt;();</span><br><span class="line">        apHeroList.add(new APHero());</span><br><span class="line">         </span><br><span class="line">        ArrayList&lt;? extends Hero&gt; heroList &#x3D; apHeroList;</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;? extends Hero 表示这是一个Hero泛型的子类泛型</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;heroList 的泛型可以是Hero</span><br><span class="line">        &#x2F;&#x2F;heroList 的泛型可以使APHero</span><br><span class="line">        &#x2F;&#x2F;heroList 的泛型可以使ADHero</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;可以确凿的是，从heroList取出来的对象，一定是可以转型成Hero的</span><br><span class="line">          </span><br><span class="line">        Hero h&#x3D; heroList.get(0);</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;但是，不能往里面放东西</span><br><span class="line">        heroList.add(new ADHero()); &#x2F;&#x2F;编译错误，因为heroList的泛型 有可能是APHero</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-super"><a class="header-anchor" href="#示例-2-super">¶</a>示例 2 : ? super</h3>
<p>ArrayList heroList&lt;? super Hero&gt; 表示这是一个Hero泛型或者其父类泛型<br>
heroList的泛型可能是Hero<br>
heroList的泛型可能是Object</p>
<p><strong>可以往里面插入Hero以及Hero的子类</strong><br>
但是取出来有风险，因为不确定取出来是Hero还是Object</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/838.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">  </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.APHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        ArrayList&lt;? super Hero&gt; heroList &#x3D; new ArrayList&lt;Object&gt;();</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;? super Hero 表示 heroList的泛型是Hero或者其父类泛型</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;heroList 的泛型可以是Hero</span><br><span class="line">        &#x2F;&#x2F;heroList 的泛型可以是Object</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;所以就可以插入Hero</span><br><span class="line">        heroList.add(new Hero());</span><br><span class="line">        &#x2F;&#x2F;也可以插入Hero的子类</span><br><span class="line">        heroList.add(new APHero());</span><br><span class="line">        heroList.add(new ADHero());</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;但是，不能从里面取数据出来,因为其泛型可能是Object,而Object是强转Hero会失败</span><br><span class="line">        Hero h&#x3D; heroList.get(0);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-泛型通配符"><a class="header-anchor" href="#示例-3-泛型通配符">¶</a>示例 3 : 泛型通配符?</h3>
<p>泛型通配符? 代表任意泛型<br>
既然?代表任意泛型，那么换句话说，这个容器什么泛型都有可能</p>
<p>所以只能以Object的形式取出来<br>
并且不能往里面放对象，因为不知道到底是一个什么泛型的容器</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/836.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import property.Item;</span><br><span class="line">import charactor.APHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        ArrayList&lt;APHero&gt; apHeroList &#x3D; new ArrayList&lt;APHero&gt;();</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;?泛型通配符，表示任意泛型</span><br><span class="line">        ArrayList&lt;?&gt; generalList &#x3D; apHeroList;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;?的缺陷1： 既然?代表任意泛型，那么换句话说，你就不知道这个容器里面是什么类型</span><br><span class="line">        &#x2F;&#x2F;所以只能以Object的形式取出来</span><br><span class="line">        Object o &#x3D; generalList.get(0);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;?的缺陷2： 既然?代表任意泛型，那么既有可能是Hero,也有可能是Item</span><br><span class="line">        &#x2F;&#x2F;所以，放哪种对象进去，都有风险，结果就什么什么类型的对象，都不能放进去</span><br><span class="line">        generalList.add(new Item()); &#x2F;&#x2F;编译错误 因为?代表任意泛型，很有可能不是Item</span><br><span class="line">        generalList.add(new Hero()); &#x2F;&#x2F;编译错误 因为?代表任意泛型，很有可能不是Hero</span><br><span class="line">        generalList.add(new APHero()); &#x2F;&#x2F;编译错误  因为?代表任意泛型，很有可能不是APHero</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-总结"><a class="header-anchor" href="#示例-4-总结">¶</a>示例 4 : 总结</h3>
<p>如果希望只取出，不插入，就使用? extends Hero<br>
如果希望只插入，不取出，就使用? super Hero<br>
如果希望，又能插入，又能取出，就不要用通配符？</p>
<h3 id="示例-5-练习-extends"><a class="header-anchor" href="#示例-5-练习-extends">¶</a>示例 5 : 练习- extends</h3>
<p>如代码所示，为了遍历不同泛型的3种集合，需要设计3个方法</p>
<p>借助? extends， 把代码减肥到只是用一种方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.APHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line"> </span><br><span class="line">    public static void iterate(ArrayList&lt;Hero&gt; list) &#123;</span><br><span class="line">        for (Hero hero : list) &#123;</span><br><span class="line">            System.out.println(hero.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void iterateAP(ArrayList&lt;APHero&gt; list) &#123;</span><br><span class="line">        for (Hero hero : list) &#123;</span><br><span class="line">            System.out.println(hero.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void iterateAD(ArrayList&lt;ADHero&gt; list) &#123;</span><br><span class="line">        for (Hero hero : list) &#123;</span><br><span class="line">            System.out.println(hero.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Hero&gt; hs &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;APHero&gt; aphs &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;ADHero&gt; adhs &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">        iterate(hs);</span><br><span class="line">        iterateAP(aphs);</span><br><span class="line">        iterateAD(adhs);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.APHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line"> </span><br><span class="line">    public static void iterate(ArrayList&lt;? extends Hero&gt; list) &#123;</span><br><span class="line">        for (Hero hero : list) &#123;</span><br><span class="line">            System.out.println(hero.Name);</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Hero&gt; hs &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;APHero&gt; aphs &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;ADHero&gt; adhs &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">        iterate(hs);</span><br><span class="line">        iterateAP(aphs);</span><br><span class="line">        iterateAD(adhs);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-6-练习-二叉树"><a class="header-anchor" href="#示例-6-练习-二叉树">¶</a>示例 6 : 练习-二叉树</h3>
<p>把[练习-支持泛型的二叉树]改造成 支持泛型 <T extends comparable>，并在比较的时候使用compare方法</T></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">  </span><br><span class="line">import charactor.GiantDragon;</span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class Nodes&lt;T extends Comparable&lt;T&gt;&gt; &#123;</span><br><span class="line">  </span><br><span class="line">    public Node&lt;T&gt; leftNode;</span><br><span class="line">  </span><br><span class="line">    public Node&lt;T&gt; rightNode;</span><br><span class="line">  </span><br><span class="line">    public T value;</span><br><span class="line">  </span><br><span class="line">    public void add(T t) &#123;</span><br><span class="line">  </span><br><span class="line">        if (null &#x3D;&#x3D; value)</span><br><span class="line">            value &#x3D; t;</span><br><span class="line">  </span><br><span class="line">        else &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F;t和value都是T 类型，而T类型extends Comparable，所以必然提供compare接口</span><br><span class="line">            if (t.compareTo(value) &lt;&#x3D; 0) &#123;</span><br><span class="line">                if (null &#x3D;&#x3D; leftNode)</span><br><span class="line">                    leftNode &#x3D; new Node&lt;T&gt;();</span><br><span class="line">                leftNode.add(t);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            else &#123;</span><br><span class="line">                if (null &#x3D;&#x3D; rightNode)</span><br><span class="line">                    rightNode &#x3D; new Node&lt;T&gt;();</span><br><span class="line">                rightNode.add(t);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public List&lt;T&gt; values() &#123;</span><br><span class="line">        List&lt;T&gt; values &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">        if (null !&#x3D; leftNode)</span><br><span class="line">            values.addAll(leftNode.values());</span><br><span class="line">  </span><br><span class="line">        values.add(value);</span><br><span class="line">  </span><br><span class="line">        if (null !&#x3D; rightNode)</span><br><span class="line">  </span><br><span class="line">            values.addAll(rightNode.values());</span><br><span class="line">  </span><br><span class="line">        return values;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        int randoms[] &#x3D; new int[] &#123; 67, 7, 30, 73, 10, 0, 78, 81, 10, 74 &#125;;</span><br><span class="line">  </span><br><span class="line">        Node&lt;Integer&gt; roots &#x3D; new Node&lt;&gt;();</span><br><span class="line">        for (int number : randoms) &#123;</span><br><span class="line">            roots.add(number);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        System.out.println(roots.values());</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;Hero实现了 Comparable接口，所以可以作为Node的泛型</span><br><span class="line">        Node&lt;Hero&gt; heros &#x3D; new Node&lt;&gt;();</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;GiantDragon 没有实现 Comparable接口，所以不能作为Node的泛型</span><br><span class="line">        Node&lt;GiantDragon&gt; dragons &#x3D; new Node&lt;&gt;();</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4、JAVA-中的子类泛型-转型-成父类泛型"><a class="header-anchor" href="#4、JAVA-中的子类泛型-转型-成父类泛型">¶</a>4、JAVA 中的子类泛型 转型 成父类泛型</h2>
<h3 id="步骤-1-对象转型"><a class="header-anchor" href="#步骤-1-对象转型">¶</a>步骤 1 : 对象转型</h3>
<p>根据面向对象学习的知识，[子类转父类]是一定可以成功的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"> </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        Hero h &#x3D; new Hero();</span><br><span class="line">        ADHero ad &#x3D; new ADHero();</span><br><span class="line">        &#x2F;&#x2F;子类转父类</span><br><span class="line">        h &#x3D; ad;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-子类泛型转父类泛型"><a class="header-anchor" href="#步骤-2-子类泛型转父类泛型">¶</a>步骤 2 : 子类泛型转父类泛型</h3>
<p>既然 子类对象 转 父类对象是可以成功的，那么子类泛型转父类泛型能成功吗？<br>
如代码<br>
hs的泛型是父类Hero<br>
adhs 的泛型是子类ADHero</p>
<p>那么 把adhs转换为hs能成功吗？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Hero&gt; hs &#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;ADHero&gt; adhs &#x3D;new ArrayList&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;子类泛型转父类泛型</span><br><span class="line">        hs &#x3D; adhs;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;&#x2F;&#x2F;不能</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-假设可以转型成功"><a class="header-anchor" href="#步骤-3-假设可以转型成功">¶</a>步骤 3 : 假设可以转型成功</h3>
<p>假设可以转型成功<br>
引用hs指向了ADHero泛型的容器<br>
作为Hero泛型的引用hs, 看上去是可以往里面加一个APHero的。<br>
但是hs这个引用，实际上是指向的一个ADHero泛型的容器<br>
如果能加进去，就变成了ADHero泛型的容器里放进了APHero，这就矛盾了</p>
<p>所以子类泛型<strong>不可以</strong>转换为父类泛型</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/835.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.APHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Hero&gt; hs &#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;ADHero&gt; adhs &#x3D;new ArrayList&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;假设能转换成功</span><br><span class="line">        hs &#x3D; adhs;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;作为Hero泛型的hs,是可以向其中加入APHero的</span><br><span class="line">        &#x2F;&#x2F;但是hs这个引用，实际上是指向的一个ADHero泛型的容器</span><br><span class="line">        &#x2F;&#x2F;如果能加进去，就变成了ADHero泛型的容器里放进了APHero，这就矛盾了</span><br><span class="line">        hs.add(new APHero());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-父类泛型能否转换为子类泛型？"><a class="header-anchor" href="#步骤-4-练习-父类泛型能否转换为子类泛型？">¶</a>步骤 4 : 练习-父类泛型能否转换为子类泛型？</h3>
<p>上面使用反证法分析了，子类泛型不能转换为父类泛型。</p>
<p>那么父类泛型又能否转换成子类泛型？ 为什么？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">  </span><br><span class="line">import charactor.ADHero;</span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Hero&gt; hs &#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;ADHero&gt; adhs &#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F;父类泛型转子类泛型，能否成功？为什么？</span><br><span class="line">        adhs &#x3D; hs;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;&#x2F;&#x2F;不能</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Hero&gt;hs&#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;APHero&gt;aphs&#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">        &#x2F;&#x2F;父类指向子类是不行的，一旦指向子类以后，hs就不能添加ADHero了</span><br><span class="line">&#x2F;&#x2F;      hs&#x3D;aphs; </span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;子类指向父类也不行，一旦指向父类以后，aphs也能添加ADHero了</span><br><span class="line">&#x2F;&#x2F;      aphs&#x3D;hs;</span><br><span class="line">&#x2F;&#x2F;      aphs.add(new ADHero());</span><br></pre></td></tr></table></figure>
<h1 id="五、Lambda"><a class="header-anchor" href="#五、Lambda">¶</a>五、Lambda</h1>
<h2 id="1、JAVA-LAMBDA-表达式教程"><a class="header-anchor" href="#1、JAVA-LAMBDA-表达式教程">¶</a>1、JAVA LAMBDA 表达式教程</h2>
<h3 id="步骤-1-普通方法"><a class="header-anchor" href="#步骤-1-普通方法">¶</a>步骤 1 : 普通方法</h3>
<p>使用一个普通方法，在for循环遍历中进行条件判断，筛选出满足条件的数据</p>
<p>hp&gt;100 &amp;&amp; damage&lt;50</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2551.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestLambda &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;筛选出 hp&gt;100 &amp;&amp; damange&lt;50的英雄&quot;);</span><br><span class="line">        filter(heros);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    private static void filter(List&lt;Hero&gt; heros) &#123;</span><br><span class="line">        for (Hero hero : heros) &#123;</span><br><span class="line">            if(hero.hp&gt;100 &amp;&amp; hero.damage&lt;50)</span><br><span class="line">                System.out.print(hero);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">     </span><br><span class="line">public class Hero implements Comparable&lt;Hero&gt;&#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">        </span><br><span class="line">    public int damage;</span><br><span class="line">        </span><br><span class="line">    public Hero()&#123;</span><br><span class="line">           </span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    public Hero(String name) &#123;</span><br><span class="line">        this.name &#x3D;name;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    &#x2F;&#x2F;初始化name,hp,damage的构造方法</span><br><span class="line">    public Hero(String name,float hp, int damage) &#123;</span><br><span class="line">        this.name &#x3D;name;</span><br><span class="line">        this.hp &#x3D; hp;</span><br><span class="line">        this.damage &#x3D; damage;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    @Override</span><br><span class="line">    public int compareTo(Hero anotherHero) &#123;</span><br><span class="line">        if(damage&lt;anotherHero.damage)</span><br><span class="line">            return 1; </span><br><span class="line">        else</span><br><span class="line">            return -1;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Hero [name&#x3D;&quot; + name + &quot;, hp&#x3D;&quot; + hp + &quot;, damage&#x3D;&quot; + damage + &quot;]\r\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-匿名类方式"><a class="header-anchor" href="#步骤-2-匿名类方式">¶</a>步骤 2 : 匿名类方式</h3>
<p>首先准备一个接口HeroChecker，提供一个test(Hero)方法<br>
然后通过匿名类的方式，实现这个接口</p>
<p>HeroChecker checker = new HeroChecker() {</p>
<p>​	public boolean test(Hero h) {</p>
<p>​		return (h.hp&gt;100 &amp;&amp; h.damage&lt;50);</p>
<p>​	}</p>
<p>};</p>
<p>接着调用filter，传递这个checker进去进行判断，这种方式就很像通过Collections.sort在对一个Hero集合排序，需要传一个[Comparator]的匿名类对象进去一样。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2552.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line">   </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestLambda &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;使用匿名类的方式，筛选出 hp&gt;100 &amp;&amp; damange&lt;50的英雄&quot;);</span><br><span class="line">        HeroChecker checker &#x3D; new HeroChecker() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public boolean test(Hero h) &#123;</span><br><span class="line">                return (h.hp&gt;100 &amp;&amp; h.damage&lt;50);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">           </span><br><span class="line">        filter(heros,checker);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    private static void filter(List&lt;Hero&gt; heros,HeroChecker checker) &#123;</span><br><span class="line">        for (Hero hero : heros) &#123;</span><br><span class="line">            if(checker.test(hero))</span><br><span class="line">                System.out.print(hero);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-Lambda方式"><a class="header-anchor" href="#步骤-3-Lambda方式">¶</a>步骤 3 : Lambda方式</h3>
<p>使用Lambda方式筛选出数据</p>
<p>filter(heros,(h)-&gt;h.hp&gt;100 &amp;&amp; h.damage&lt;50);</p>
<p>同样是调用filter方法，从上一步的传递匿名类对象，变成了传递一个Lambda表达式进去</p>
<p>h-&gt;h.hp&gt;100 &amp;&amp; h.damage&lt;50</p>
<p>咋一看Lambda表达式似乎不好理解，其实很简单，下一步讲解如何从一个匿名类一点点<strong>演变成</strong>Lambda表达式</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2553.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestLamdba &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;使用Lamdba的方式，筛选出 hp&gt;100 &amp;&amp; damange&lt;50的英雄&quot;);</span><br><span class="line">        filter(heros,h-&gt;h.hp&gt;100 &amp;&amp; h.damage&lt;50);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void filter(List&lt;Hero&gt; heros,HeroChecker checker) &#123;</span><br><span class="line">        for (Hero hero : heros) &#123;</span><br><span class="line">            if(checker.test(hero))</span><br><span class="line">                System.out.print(hero);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-设置eclipse以支持Lambda"><a class="header-anchor" href="#步骤-4-设置eclipse以支持Lambda">¶</a>步骤 4 : 设置eclipse以支持Lambda</h3>
<p>如果你的eclipse能够正常识别Lambda，那么就可以跳过这个章节了。<br>
因为Lambda是JDK8的内容，除了JDK需要使用1.8以上版本外([在JDK环境变量配置]下载的就是1.8了)，还需要在eclipse中把编译器设置为1.8才能够正常识别Lambda.</p>
<p>设置办法：<br>
菜单-&gt;Window-&gt;Preferences-&gt;Java-Compiler-&gt;Compiler compliance leve: 设置为1.8即可</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2570.png" alt></p>
<h3 id="步骤-5-从匿名类演变成Lambda表达式"><a class="header-anchor" href="#步骤-5-从匿名类演变成Lambda表达式">¶</a>步骤 5 : 从匿名类演变成Lambda表达式</h3>
<p>Lambda表达式可以看成是匿名类一点点<strong>演变过来</strong></p>
<ol>
<li>匿名类的正常写法</li>
</ol>
<p>HeroChecker c1 = new HeroChecker() {</p>
<p>​    public boolean test(Hero h) {</p>
<p>​        return (h.hp&gt;100 &amp;&amp; h.damage&lt;50);</p>
<p>​    }</p>
<p>};</p>
<ol start="2">
<li>把外面的壳子去掉<br>
只保留<strong>方法参数</strong>和<strong>方法体</strong><br>
参数和方法体之间加上符号 <strong>-&gt;</strong></li>
</ol>
<p>HeroChecker c2 = (Hero h) -&gt;{</p>
<p>​	return h.hp&gt;100 &amp;&amp; h.damage&lt;50;</p>
<p>};</p>
<ol start="3">
<li>把return和{}去掉</li>
</ol>
<p>HeroChecker c3 = (Hero h) -&gt;h.hp&gt;100 &amp;&amp; h.damage&lt;50;</p>
<ol start="4">
<li>把 参数类型和圆括号去掉(只有一个参数的时候，才可以去掉圆括号)</li>
</ol>
<p>HeroChecker c4 = h -&gt;h.hp&gt;100 &amp;&amp; h.damage&lt;50;</p>
<ol start="5">
<li>把c4作为参数传递进去</li>
</ol>
<p>filter(heros,c4);</p>
<ol start="6">
<li>直接把表达式传递进去</li>
</ol>
<p>filter(heros, h -&gt; h.hp &gt; 100 &amp;&amp; h.damage &lt; 50);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestLamdba &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;使用匿名类的方式，筛选出 hp&gt;100 &amp;&amp; damange&lt;50的英雄&quot;);</span><br><span class="line">        &#x2F;&#x2F; 匿名类的正常写法</span><br><span class="line">        HeroChecker c1 &#x3D; new HeroChecker() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public boolean test(Hero h) &#123;</span><br><span class="line">                return (h.hp &gt; 100 &amp;&amp; h.damage &lt; 50);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#x2F;&#x2F; 把new HeroChcekcer，方法名，方法返回类型信息去掉</span><br><span class="line">        &#x2F;&#x2F; 只保留方法参数和方法体</span><br><span class="line">        &#x2F;&#x2F; 参数和方法体之间加上符号 -&gt;</span><br><span class="line">        HeroChecker c2 &#x3D; (Hero h) -&gt; &#123;</span><br><span class="line">            return h.hp &gt; 100 &amp;&amp; h.damage &lt; 50;</span><br><span class="line">        &#125;;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把return和&#123;&#125;去掉</span><br><span class="line">        HeroChecker c3 &#x3D; (Hero h) -&gt; h.hp &gt; 100 &amp;&amp; h.damage &lt; 50;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把 参数类型和圆括号去掉</span><br><span class="line">        HeroChecker c4 &#x3D; h -&gt; h.hp &gt; 100 &amp;&amp; h.damage &lt; 50;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把c4作为参数传递进去</span><br><span class="line">        filter(heros, c4);</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F; 直接把表达式传递进去</span><br><span class="line">        filter(heros, h -&gt; h.hp &gt; 100 &amp;&amp; h.damage &lt; 50);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void filter(List&lt;Hero&gt; heros, HeroChecker checker) &#123;</span><br><span class="line">        for (Hero hero : heros) &#123;</span><br><span class="line">            if (checker.test(hero))</span><br><span class="line">                System.out.print(hero);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-匿名方法"><a class="header-anchor" href="#步骤-6-匿名方法">¶</a>步骤 6 : 匿名方法</h3>
<p>与[匿名类] 概念相比较，<br>
Lambda 其实就是<strong>匿名方法</strong>，这是一种<strong>把方法作为参数</strong>进行传递的编程思想。</p>
<p>虽然代码是这么写</p>
<p>filter(heros, h -&gt; h.hp &gt; 100 &amp;&amp; h.damage &lt; 50);</p>
<p>但是，Java会在背后，悄悄的，把这些都还原成[匿名类方式]。<br>
引入Lambda表达式，会使得代码更加紧凑，而不是各种接口和匿名类到处飞。</p>
<h3 id="步骤-7-Lambda的弊端"><a class="header-anchor" href="#步骤-7-Lambda的弊端">¶</a>步骤 7 : Lambda的弊端</h3>
<p>Lambda表达式虽然带来了代码的简洁，但是也有其局限性。</p>
<ol>
<li>
<p>可读性差，与<strong>啰嗦的</strong>但是<strong>清晰的</strong>匿名类代码结构比较起来，Lambda表达式一旦变得比较长，就难以理解</p>
</li>
<li>
<p>不便于调试，很难在Lambda表达式中增加调试信息，比如日志</p>
</li>
<li>
<p>版本支持，Lambda表达式在JDK8版本中才开始支持，如果系统使用的是以前的版本，考虑系统的稳定性等原因，而不愿意升级，那么就无法使用。</p>
</li>
</ol>
<p>Lambda比较适合用在简短的业务代码中，并不适合用在复杂的系统中，会加大维护成本。</p>
<h3 id="步骤-8-练习-Comparator"><a class="header-anchor" href="#步骤-8-练习-Comparator">¶</a>步骤 8 : 练习-Comparator</h3>
<p>把[比较器-Comparator] 章节中的代码，按照[从匿名类演变成Lambda表达式]的步骤，改写为Lambda表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Collections.sort(heros,(h1,h2)-&gt;h1.hp-h2.hp)</span><br></pre></td></tr></table></figure>
<h2 id="2、方法引用"><a class="header-anchor" href="#2、方法引用">¶</a>2、方法引用</h2>
<h3 id="步骤-1-引用静态方法"><a class="header-anchor" href="#步骤-1-引用静态方法">¶</a>步骤 1 : 引用静态方法</h3>
<p>首先为TestLambda添加一个静态方法：</p>
<p>public static boolean testHero(Hero h) {</p>
<p>return h.hp&gt;100 &amp;&amp; h.damage&lt;50;</p>
<p>}</p>
<p>Lambda表达式：</p>
<p>filter(heros, h-&gt;h.hp&gt;100 &amp;&amp; h.damage&lt;50);</p>
<p>在Lambda表达式中调用这个静态方法：</p>
<p>filter(heros, h -&gt; TestLambda.testHero(h) );</p>
<p>调用静态方法还可以改写为：</p>
<p>filter(heros, TestLambda::testHero);</p>
<p>这种方式就叫做<strong>引用静态方法</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2560.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line">   </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestLambda &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">           </span><br><span class="line">        HeroChecker c &#x3D; new HeroChecker() &#123;</span><br><span class="line">            public boolean test(Hero h) &#123;</span><br><span class="line">                return h.hp&gt;100 &amp;&amp; h.damage&lt;50;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">          </span><br><span class="line">        System.out.println(&quot;使用匿名类过滤&quot;);</span><br><span class="line">        filter(heros, c);</span><br><span class="line">        System.out.println(&quot;使用Lambda表达式&quot;);</span><br><span class="line">        filter(heros, h-&gt;h.hp&gt;100 &amp;&amp; h.damage&lt;50);</span><br><span class="line">        System.out.println(&quot;在Lambda表达式中使用静态方法&quot;);</span><br><span class="line">        filter(heros, h -&gt; TestLambda.testHero(h) );</span><br><span class="line">        System.out.println(&quot;直接引用静态方法&quot;);</span><br><span class="line">        filter(heros, TestLambda::testHero);</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    public static boolean testHero(Hero h) &#123;</span><br><span class="line">        return h.hp&gt;100 &amp;&amp; h.damage&lt;50;</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    private static void filter(List&lt;Hero&gt; heros, HeroChecker checker) &#123;</span><br><span class="line">        for (Hero hero : heros) &#123;</span><br><span class="line">            if (checker.test(hero))</span><br><span class="line">                System.out.print(hero);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-引用对象方法"><a class="header-anchor" href="#步骤-2-引用对象方法">¶</a>步骤 2 : 引用对象方法</h3>
<p>与引用静态方法很类似，只是传递方法的时候，需要一个对象的存在</p>
<p>TestLambda testLambda = new TestLambda();</p>
<p>filter(heros, testLambda::testHero);</p>
<p>这种方式叫做<strong>引用对象方法</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2561.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestLambda &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">     </span><br><span class="line">        System.out.println(&quot;使用引用对象方法  的过滤结果：&quot;);</span><br><span class="line">        &#x2F;&#x2F;使用类的对象方法</span><br><span class="line">        TestLambda testLambda &#x3D; new TestLambda();</span><br><span class="line">        filter(heros, testLambda::testHero);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public boolean testHero(Hero h) &#123;</span><br><span class="line">        return h.hp&gt;100 &amp;&amp; h.damage&lt;50;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    private static void filter(List&lt;Hero&gt; heros, HeroChecker checker) &#123;</span><br><span class="line">        for (Hero hero : heros) &#123;</span><br><span class="line">            if (checker.test(hero))</span><br><span class="line">                System.out.print(hero);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-引用容器中的对象的方法"><a class="header-anchor" href="#步骤-3-引用容器中的对象的方法">¶</a>步骤 3 : 引用容器中的对象的方法</h3>
<p>首先为Hero添加一个方法</p>
<p>public boolean matched(){</p>
<p>return this.hp&gt;100 &amp;&amp; this.damage&lt;50;</p>
<p>}</p>
<p>使用Lambda表达式</p>
<p>filter(heros,h-&gt; h.hp&gt;100 &amp;&amp; h.damage&lt;50 );</p>
<p>在Lambda表达式中调用容器中的对象Hero的方法matched</p>
<p>filter(heros,h-&gt; h.matched() );</p>
<p>matched恰好就是容器中的对象Hero的方法，那就可以进一步改写为</p>
<p>filter(heros, Hero::matched);</p>
<p>这种方式就叫做<strong>引用容器中的对象的方法</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2562.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line">   </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line">   </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestLambda &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;Lambda表达式：&quot;);       </span><br><span class="line">        filter(heros,h-&gt; h.hp&gt;100 &amp;&amp; h.damage&lt;50 );</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;Lambda表达式中调用容器中的对象的matched方法：&quot;);       </span><br><span class="line">        filter(heros,h-&gt; h.matched() );</span><br><span class="line">  </span><br><span class="line">        System.out.println(&quot;引用容器中对象的方法 之过滤结果：&quot;);       </span><br><span class="line">        filter(heros, Hero::matched);</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    public boolean testHero(Hero h) &#123;</span><br><span class="line">        return h.hp&gt;100 &amp;&amp; h.damage&lt;50;</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    private static void filter(List&lt;Hero&gt; heros, HeroChecker checker) &#123;</span><br><span class="line">        for (Hero hero : heros) &#123;</span><br><span class="line">            if (checker.test(hero))</span><br><span class="line">                System.out.print(hero);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-引用构造器"><a class="header-anchor" href="#步骤-4-引用构造器">¶</a>步骤 4 : 引用构造器</h3>
<p>有的接口中的方法会返回一个对象，比如<strong>java.util.function.Supplier</strong>提供<br>
了一个get方法，返回一个对象。</p>
<p>public interface Supplier<T> {</T></p>
<p>​    T get();</p>
<p>}</p>
<p>设计一个方法，参数是这个接口</p>
<p>public static List getList(Supplier<List> s){</List></p>
<p>return s.get();</p>
<p>}</p>
<p>为了调用这个方法，有3种方式<br>
第一种匿名类：</p>
<p>Supplier<List> s = new Supplier<List>() {</List></List></p>
<p>​	public List get() {</p>
<p>​		return new ArrayList();</p>
<p>​	}</p>
<p>};</p>
<p>List list1 = getList(s);</p>
<p>第二种：Lambda表达式</p>
<p>List list2 = getList(()-&gt;new ArrayList());</p>
<p>第三种：引用构造器</p>
<p>List list3 = getList(ArrayList::new);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.function.Supplier;</span><br><span class="line"> </span><br><span class="line">public class TestLambda &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">    Supplier&lt;List&gt; s &#x3D; new Supplier&lt;List&gt;() &#123;</span><br><span class="line">        public List get() &#123;</span><br><span class="line">            return new ArrayList();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;匿名类</span><br><span class="line">    List list1 &#x3D; getList(s);</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;Lambda表达式</span><br><span class="line">    List list2 &#x3D; getList(()-&gt;new ArrayList());</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;引用构造器</span><br><span class="line">    List list3 &#x3D; getList(ArrayList::new);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public static List getList(Supplier&lt;List&gt; s)&#123;</span><br><span class="line">        return s.get();</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-引用静态方法"><a class="header-anchor" href="#步骤-5-练习-引用静态方法">¶</a>步骤 5 : 练习-引用静态方法</h3>
<p>把[比较器-Comparator]章节中的代码，使用引用静态方法的方式来实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import charactor.Hero;</span><br><span class="line"></span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line">	public static int compareHero(Hero h1, Hero h2) &#123;</span><br><span class="line">		return h1.hp &gt;&#x3D; h2.hp ? 1 : -1;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Hero&gt; heroList &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		float hp;</span><br><span class="line">		int damage;</span><br><span class="line"></span><br><span class="line">		for (int i &#x3D; 1; i &lt;&#x3D; 10; i++) &#123;</span><br><span class="line">			hp &#x3D; (float) (Math.random() * 100);</span><br><span class="line">			damage &#x3D; (int) (Math.random() * 1000);</span><br><span class="line">			heroList.add(new Hero(&quot;hero&quot; + i, hp, damage));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">		for (Hero hero : heroList) &#123;</span><br><span class="line">			System.out.print(hero);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println();</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 使用两种静态方法来实现</span><br><span class="line">		Collections.sort(heroList, TestGeneric::compareHero);</span><br><span class="line">		Collections.sort(heroList, (h1, h2) -&gt; TestGeneric.compareHero(h1, h2));</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;按照血量排序后的集合：&quot;);</span><br><span class="line">		for (Hero hero : heroList) &#123;</span><br><span class="line">			System.out.print(hero);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-练习-引用容器中的对象的方法"><a class="header-anchor" href="#步骤-6-练习-引用容器中的对象的方法">¶</a>步骤 6 : 练习-引用容器中的对象的方法</h3>
<p>把[比较器-Comparator] 章节中的代码，使用 引用容器中的对象的方法 的方式来实现。<br>
<strong>提示</strong>: 为Hero提供一个compareHero方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"></span><br><span class="line">import charactor.Hero;</span><br><span class="line"></span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		Random r &#x3D;new Random();</span><br><span class="line">		List&lt;Hero&gt; aList &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">		for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">			aList.add(new Hero(&quot;hero &quot;+ i, r.nextInt(100), r.nextInt(100)));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">		for (Hero hero1 : aList) &#123;</span><br><span class="line">			System.out.println(hero1);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;方法引用，容器中类调用方法内容写入实现方法中</span><br><span class="line">		Collections.sort(aList,Hero::compareTo);</span><br><span class="line">		System.out.println(&quot;方法引用进行排序：&quot;);</span><br><span class="line">		for (Hero hero1 : aList) &#123;</span><br><span class="line">			System.out.println(hero1);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;Lambda表达式实现方法,方法参数-&gt;容器中的对象调用比较方法</span><br><span class="line">		Collections.sort(aList, (h1,h2)-&gt;h1.compareTo(h2));</span><br><span class="line">		System.out.println(&quot;Lambda进行排序：&quot;);</span><br><span class="line">		for (Hero hero1 : aList) &#123;</span><br><span class="line">			System.out.println(hero1);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-练习-引用构造器"><a class="header-anchor" href="#步骤-7-练习-引用构造器">¶</a>步骤 7 : 练习-引用构造器</h3>
<p>把[比较ArrayList和LinkedList的区别]这段代码，改造成引用构造器的模式。<br>
目前的调用方式是:</p>
<p>​        List<Integer> l;</Integer></p>
<p>​        l = new ArrayList&lt;&gt;();</p>
<p>​        insertFirst(l, “ArrayList”);</p>
<p>​        l = new LinkedList&lt;&gt;();</p>
<p>​        insertFirst(l, “LinkedList”);</p>
<p>改造后的调用方式将变为：</p>
<p>​        insertFirst(ArrayList::new, “ArrayList”);</p>
<p>​        insertFirst(LinkedList::new, “LinkedList”);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line">  </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Integer&gt; l;</span><br><span class="line">        l &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        insertFirst(l, &quot;ArrayList&quot;);</span><br><span class="line">  </span><br><span class="line">        l &#x3D; new LinkedList&lt;&gt;();</span><br><span class="line">        insertFirst(l, &quot;LinkedList&quot;);</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    private static void insertFirst(List&lt;Integer&gt; l, String type) &#123;</span><br><span class="line">        int total &#x3D; 1000 * 100;</span><br><span class="line">        final int number &#x3D; 5;</span><br><span class="line">        long start &#x3D; System.currentTimeMillis();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; total; i++) &#123;</span><br><span class="line">            l.add(0, number);</span><br><span class="line">        &#125;</span><br><span class="line">        long end &#x3D; System.currentTimeMillis();</span><br><span class="line">        System.out.printf(&quot;在%s 最前面插入%d条数据，总共耗时 %d 毫秒 %n&quot;, type, total, end - start);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package generic;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.function.Supplier;</span><br><span class="line"></span><br><span class="line">public class TestGeneric &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		&#x2F;&#x2F;构造器引用实现了匿名内部类中方法的返回内容：创建对象ArrayList</span><br><span class="line">		insertFirst(ArrayList::new, &quot;ArrayList&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;创建容器类插入数据，形参1是实现接口supplier，传入构造器引用来实现方法</span><br><span class="line">	private static void insertFirst(Supplier&lt;List&gt; s, String type) &#123;</span><br><span class="line">		int total &#x3D; 1000 * 100;</span><br><span class="line">		final int number &#x3D; 5;</span><br><span class="line">		long start &#x3D; System.currentTimeMillis();</span><br><span class="line">		&#x2F;&#x2F;调用Supplier的匿名内部类实现方法，进行创建对象new ArrayList</span><br><span class="line">		List list &#x3D; s.get();</span><br><span class="line">		for (int i &#x3D; 0; i &lt; total; i++) &#123;</span><br><span class="line">			&#x2F;&#x2F;给容器插入数据</span><br><span class="line">			list.add(0, number);</span><br><span class="line">		&#125;</span><br><span class="line">		long end &#x3D; System.currentTimeMillis();</span><br><span class="line">		System.out.printf(&quot;在%s 最前面插入%d条数据，总共耗时 %d 毫秒 %n&quot;, type, total, end - start);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、JAVA-集合的聚合操作"><a class="header-anchor" href="#3、JAVA-集合的聚合操作">¶</a>3、JAVA 集合的聚合操作</h2>
<h3 id="步骤-1-传统方式与聚合操作方式遍历数据"><a class="header-anchor" href="#步骤-1-传统方式与聚合操作方式遍历数据">¶</a>步骤 1 : 传统方式与聚合操作方式遍历数据</h3>
<p>遍历数据的传统方式就是使用for循环，然后条件判断，最后打印出满足条件的数据</p>
<p>for (Hero h : heros) {</p>
<p>if (h.hp &gt; 100 &amp;&amp; h.damage &lt; 50)</p>
<p>​      System.out.println(<a href="http://h.name" target="_blank" rel="noopener">h.name</a>);</p>
<p>}</p>
<p>使用聚合操作方式，<strong>画风</strong>就发生了变化：</p>
<p>heros</p>
<p>​	.stream()</p>
<p>​	.filter(h -&gt; h.hp &gt; 100 &amp;&amp; h.damage &lt; 50)</p>
<p>​	.forEach(h -&gt; System.out.println(<a href="http://h.name" target="_blank" rel="noopener">h.name</a>));</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2565.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestAggregate &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;初始化后的集合：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;查询条件：hp&gt;100 &amp;&amp; damage&lt;50&quot;);</span><br><span class="line">        System.out.println(&quot;通过传统操作方式找出满足条件的数据：&quot;);</span><br><span class="line"> </span><br><span class="line">        for (Hero h : heros) &#123;</span><br><span class="line">            if (h.hp &gt; 100 &amp;&amp; h.damage &lt; 50)</span><br><span class="line">                System.out.println(h.name);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;通过聚合操作方式找出满足条件的数据：&quot;);</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .filter(h -&gt; h.hp &gt; 100 &amp;&amp; h.damage &lt; 50)</span><br><span class="line">            .forEach(h -&gt; System.out.println(h.name));</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-Stream和管道的概念"><a class="header-anchor" href="#步骤-2-Stream和管道的概念">¶</a>步骤 2 : Stream和管道的概念</h3>
<p>heros</p>
<p>​	.stream()</p>
<p>​	.filter(h -&gt; h.hp &gt; 100 &amp;&amp; h.damage &lt; 50)</p>
<p>​	.forEach(h -&gt; System.out.println(<a href="http://h.name" target="_blank" rel="noopener">h.name</a>));</p>
<p>要了解聚合操作，首先要建立<strong>Stream</strong>和<strong>管道</strong>的概念<br>
<strong>Stream</strong> 和Collection结构化的数据不一样，Stream是一系列的元素，就像是生产线上的罐头一样，一串串的出来。<br>
<strong>管道</strong>指的是一系列的聚合操作。</p>
<p>管道又分3个部分<br>
<strong>管道源</strong>：在这个例子里，源是一个List<br>
<strong>中间操作</strong>： 每个中间操作，又会返回一个Stream，比如.filter()又返回一个Stream, 中间操作是“懒”操作，并不会真正进行遍历。<br>
<strong>结束操作</strong>：当这个操作执行后，流就被使用“光”了，无法再被操作。所以这必定是流的最后一个操作。 结束操作不会返回Stream，但是会返回int、float、String、 Collection或者像forEach，什么都不返回, 结束操作才进行真正的遍历行为，在遍历的时候，才会去进行中间操作的相关判断</p>
<p><strong>注：</strong> 这个Stream和I/O章节的InputStream,OutputStream是不一样的概念。</p>
<h3 id="步骤-3-管道源"><a class="header-anchor" href="#步骤-3-管道源">¶</a>步骤 3 : 管道源</h3>
<p>把Collection切换成管道源很简单，调用stream()就行了。</p>
<p>heros.stream()</p>
<p>但是数组却没有stream()方法，需要使用</p>
<p>Arrays.stream(hs)</p>
<p>或者</p>
<p>Stream.of(hs)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line"> </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestAggregate &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;管道源是集合</span><br><span class="line">        heros</span><br><span class="line">        .stream()</span><br><span class="line">        .forEach(h-&gt;System.out.println(h.name));</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;管道源是数组</span><br><span class="line">        Hero hs[] &#x3D; heros.toArray(new Hero[heros.size()]);</span><br><span class="line">        Arrays.stream(hs)</span><br><span class="line">        .forEach(h-&gt;System.out.println(h.name));</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-中间操作"><a class="header-anchor" href="#步骤-4-中间操作">¶</a>步骤 4 : 中间操作</h3>
<p>每个中间操作，又会返回一个Stream，比如.filter()又返回一个Stream, 中间操作是“懒”操作，并不会真正进行遍历。<br>
中间操作比较多，主要分两类<br>
对元素进行筛选 和 转换为其他形式的流<br>
<strong>对元素进行筛选：</strong><br>
filter 匹配<br>
distinct 去除重复(根据equals判断)<br>
sorted 自然排序<br>
sorted(Comparator<T>) 指定排序<br>
limit 保留<br>
skip 忽略<br>
<strong>转换为其他形式的流</strong><br>
mapToDouble 转换为double的流<br>
map 转换为任意类型的流</T></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2568.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">      </span><br><span class="line">public class Hero implements Comparable&lt;Hero&gt;&#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">         </span><br><span class="line">    public int damage;</span><br><span class="line">         </span><br><span class="line">    public Hero()&#123;</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line">    public float getHp() &#123;</span><br><span class="line">        return hp;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setHp(float hp) &#123;</span><br><span class="line">        this.hp &#x3D; hp;</span><br><span class="line">    &#125;</span><br><span class="line">    public int getDamage() &#123;</span><br><span class="line">        return damage;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setDamage(int damage) &#123;</span><br><span class="line">        this.damage &#x3D; damage;</span><br><span class="line">    &#125;</span><br><span class="line">    public Hero(String name) &#123;</span><br><span class="line">        this.name &#x3D;name;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;初始化name,hp,damage的构造方法</span><br><span class="line">    public Hero(String name,float hp, int damage) &#123;</span><br><span class="line">        this.name &#x3D;name;</span><br><span class="line">        this.hp &#x3D; hp;</span><br><span class="line">        this.damage &#x3D; damage;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public int compareTo(Hero anotherHero) &#123;</span><br><span class="line">        if(damage&lt;anotherHero.damage)</span><br><span class="line">            return 1; </span><br><span class="line">        else</span><br><span class="line">            return -1;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Hero [name&#x3D;&quot; + name + &quot;, hp&#x3D;&quot; + hp + &quot;, damage&#x3D;&quot; + damage + &quot;]\r\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestAggregate &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;制造一个重复数据</span><br><span class="line">        heros.add(heros.get(0));</span><br><span class="line">        System.out.println(&quot;初始化集合后的数据 (最后一个数据重复)：&quot;);</span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;满足条件hp&gt;100&amp;&amp;damage&lt;50的数据&quot;);</span><br><span class="line">          </span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .filter(h-&gt;h.hp&gt;100&amp;&amp;h.damage&lt;50)</span><br><span class="line">            .forEach(h-&gt;System.out.print(h));</span><br><span class="line">          </span><br><span class="line">        System.out.println(&quot;去除重复的数据，去除标准是看equals&quot;);</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .distinct()</span><br><span class="line">            .forEach(h-&gt;System.out.print(h));</span><br><span class="line">        System.out.println(&quot;按照血量排序&quot;);</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .sorted((h1,h2)-&gt;h1.hp&gt;&#x3D;h2.hp?1:-1)</span><br><span class="line">            .forEach(h-&gt;System.out.print(h));</span><br><span class="line">          </span><br><span class="line">        System.out.println(&quot;保留3个&quot;);</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .limit(3)</span><br><span class="line">            .forEach(h-&gt;System.out.print(h));</span><br><span class="line">          </span><br><span class="line">        System.out.println(&quot;忽略前3个&quot;);</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .skip(3)</span><br><span class="line">            .forEach(h-&gt;System.out.print(h));</span><br><span class="line">          </span><br><span class="line">        System.out.println(&quot;转换为double的Stream&quot;);</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .mapToDouble(Hero::getHp)</span><br><span class="line">            .forEach(h-&gt;System.out.println(h));</span><br><span class="line">          </span><br><span class="line">        System.out.println(&quot;转换任意类型的Stream&quot;);</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .map((h)-&gt; h.name + &quot; - &quot; + h.hp + &quot; - &quot; + h.damage)</span><br><span class="line">            .forEach(h-&gt;System.out.println(h));</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-结束操作"><a class="header-anchor" href="#步骤-5-结束操作">¶</a>步骤 5 : 结束操作</h3>
<p>当进行结束操作后，流就被使用“光”了，无法再被操作。所以这必定是流的最后一个操作。 结束操作不会返回Stream，但是会返回int、float、String、 Collection或者像forEach，什么都不返回,。<br>
结束操作才真正进行遍历行为，前面的中间操作也在这个时候，才真正的执行。<br>
常见结束操作如下：<br>
<strong>forEach()</strong> 遍历每个元素<br>
<strong>toArray()</strong> 转换为数组<br>
<strong>min(Comparator<T>)</T></strong> 取最小的元素<br>
<strong>max(Comparator<T>)</T></strong> 取最大的元素<br>
<strong>count()</strong> 总数<br>
<strong>findFirst()</strong> 第一个元素</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2569.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">package lambda;</span><br><span class="line">  </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line"> </span><br><span class="line">import org.omg.Messaging.SYNC_WITH_TRANSPORT;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestAggregate &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot; + i, r.nextInt(1000), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;遍历集合中的每个数据&quot;);</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .forEach(h-&gt;System.out.print(h));</span><br><span class="line">        System.out.println(&quot;返回一个数组&quot;);</span><br><span class="line">        Object[] hs&#x3D; heros</span><br><span class="line">            .stream()</span><br><span class="line">            .toArray();</span><br><span class="line">        System.out.println(Arrays.toString(hs));</span><br><span class="line">        System.out.println(&quot;返回伤害最低的那个英雄&quot;);</span><br><span class="line">        Hero minDamageHero &#x3D;</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .min((h1,h2)-&gt;h1.damage-h2.damage)</span><br><span class="line">            .get();</span><br><span class="line">        System.out.print(minDamageHero);</span><br><span class="line">        System.out.println(&quot;返回伤害最高的那个英雄&quot;);</span><br><span class="line"> </span><br><span class="line">        Hero mxnDamageHero &#x3D;</span><br><span class="line">                heros</span><br><span class="line">                .stream()</span><br><span class="line">                .max((h1,h2)-&gt;h1.damage-h2.damage)</span><br><span class="line">                .get();</span><br><span class="line">        System.out.print(mxnDamageHero);     </span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;流中数据的总数&quot;);</span><br><span class="line">        long count &#x3D; heros</span><br><span class="line">                .stream()</span><br><span class="line">                .count();</span><br><span class="line">        System.out.println(count);</span><br><span class="line"> </span><br><span class="line">        System.out.println(&quot;第一个英雄&quot;);</span><br><span class="line">        Hero firstHero &#x3D;</span><br><span class="line">                heros</span><br><span class="line">                .stream()</span><br><span class="line">                .findFirst()</span><br><span class="line">                .get();</span><br><span class="line">         </span><br><span class="line">        System.out.println(firstHero);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-练习-聚合操作"><a class="header-anchor" href="#步骤-6-练习-聚合操作">¶</a>步骤 6 : 练习-聚合操作</h3>
<p>首选准备10个Hero对象，hp和damage都是随机数。<br>
分别用传统方式和聚合操作的方式，把hp第三高的英雄名称打印出来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">      </span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Random;</span><br><span class="line">     </span><br><span class="line">import charactor.Hero;</span><br><span class="line">      </span><br><span class="line">public class TestCollection &#123;</span><br><span class="line">      </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Random r &#x3D;new Random();</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">             </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">            heros.add(new Hero(&quot;hero &quot;+ i, r.nextInt(100), r.nextInt(100)));</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;传统方式</span><br><span class="line">        System.out.println(&quot;排序后的集合&quot;);</span><br><span class="line">        Collections.sort(heros,(h1,h2)-&gt;h1.hp-h2.hp);</span><br><span class="line">         </span><br><span class="line">        System.out.println(heros);</span><br><span class="line">        System.out.println(&quot;传统方式查找的hp第三高的英雄：&quot;+heros.get(7));</span><br><span class="line">         </span><br><span class="line">        Collections.shuffle(heros);</span><br><span class="line">        &#x2F;&#x2F;聚合操作</span><br><span class="line">        System.out.println(&quot;重新打乱的集合：\n&quot;+heros);</span><br><span class="line">        Hero hp3 &#x3D;</span><br><span class="line">        heros</span><br><span class="line">            .stream()</span><br><span class="line">            .sorted((h1,h2)-&gt;h1.hp-h2.hp)</span><br><span class="line">            .skip(7)</span><br><span class="line">            .findFirst()</span><br><span class="line">            .get();</span><br><span class="line">        System.out.println(&quot;聚合操作查找的hp第三高的英雄：&quot;+hp3);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="六、多线程"><a class="header-anchor" href="#六、多线程">¶</a>六、多线程</h1>
<h2 id="1、JAVA-创建一个线程的三种方式"><a class="header-anchor" href="#1、JAVA-创建一个线程的三种方式">¶</a>1、JAVA 创建一个线程的三种方式</h2>
<h3 id="步骤-1-线程概念"><a class="header-anchor" href="#步骤-1-线程概念">¶</a>步骤 1 : 线程概念</h3>
<p>首先要理解进程(Processor)和线程(Thread)的区别<br>
**进程：**启动一个LOL.exe就叫一个进程。 接着又启动一个DOTA.exe，这叫两个进程。<br>
**线程：**线程是在进程内部同时做的事情，比如在LOL里，有很多事情要同时做，比如&quot;盖伦” 击杀“提莫”，<strong>同时</strong>“赏金猎人”又在击杀“盲僧”，这就是由多线程来实现的。</p>
<p>此处代码演示的是<strong>不使用多线程的情况</strong>：<br>
只有在盖伦杀掉提莫后，赏金猎人才开始杀盲僧</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/777.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line"> </span><br><span class="line">import java.io.Serializable;</span><br><span class="line">  </span><br><span class="line">public class Hero&#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">     </span><br><span class="line">    public int damage;</span><br><span class="line">     </span><br><span class="line">    public void attackHero(Hero h) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;为了表示攻击需要时间，每次攻击暂停1000毫秒</span><br><span class="line">            Thread.sleep(1000);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        h.hp-&#x3D;damage;</span><br><span class="line">        System.out.format(&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;,name,h.name,h.name,h.hp);</span><br><span class="line">         </span><br><span class="line">        if(h.isDead())</span><br><span class="line">            System.out.println(h.name +&quot;死了！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public boolean isDead() &#123;</span><br><span class="line">        return 0&gt;&#x3D;hp?true:false;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestThread &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 616;</span><br><span class="line">        gareen.damage &#x3D; 50;</span><br><span class="line"> </span><br><span class="line">        Hero teemo &#x3D; new Hero();</span><br><span class="line">        teemo.name &#x3D; &quot;提莫&quot;;</span><br><span class="line">        teemo.hp &#x3D; 300;</span><br><span class="line">        teemo.damage &#x3D; 30;</span><br><span class="line">         </span><br><span class="line">        Hero bh &#x3D; new Hero();</span><br><span class="line">        bh.name &#x3D; &quot;赏金猎人&quot;;</span><br><span class="line">        bh.hp &#x3D; 500;</span><br><span class="line">        bh.damage &#x3D; 65;</span><br><span class="line">         </span><br><span class="line">        Hero leesin &#x3D; new Hero();</span><br><span class="line">        leesin.name &#x3D; &quot;盲僧&quot;;</span><br><span class="line">        leesin.hp &#x3D; 455;</span><br><span class="line">        leesin.damage &#x3D; 80;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;盖伦攻击提莫</span><br><span class="line">        while(!teemo.isDead())&#123;</span><br><span class="line">            gareen.attackHero(teemo);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;赏金猎人攻击盲僧</span><br><span class="line">        while(!leesin.isDead())&#123;</span><br><span class="line">            bh.attackHero(leesin);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-创建多线程-继承线程类"><a class="header-anchor" href="#步骤-2-创建多线程-继承线程类">¶</a>步骤 2 : 创建多线程-继承线程类</h3>
<p>使用多线程，就可以做到盖伦在攻击提莫的<strong>同时</strong>，赏金猎人也在攻击盲僧<br>
设计一个类KillThread <strong>继承Thread</strong>，<strong>并且重写run方法</strong><br>
启动线程办法： 实例化一个KillThread对象，并且调用其<strong>start</strong>方法<br>
就可以观察到 赏金猎人攻击盲僧的<strong>同时</strong>，盖伦也在攻击提莫</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/778.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class KillThread extends Thread&#123;</span><br><span class="line">     </span><br><span class="line">    private Hero h1;</span><br><span class="line">    private Hero h2;</span><br><span class="line"> </span><br><span class="line">    public KillThread(Hero h1, Hero h2)&#123;</span><br><span class="line">        this.h1 &#x3D; h1;</span><br><span class="line">        this.h2 &#x3D; h2;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void run()&#123;</span><br><span class="line">        while(!h2.isDead())&#123;</span><br><span class="line">            h1.attackHero(h2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestThread &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 616;</span><br><span class="line">        gareen.damage &#x3D; 50;</span><br><span class="line"> </span><br><span class="line">        Hero teemo &#x3D; new Hero();</span><br><span class="line">        teemo.name &#x3D; &quot;提莫&quot;;</span><br><span class="line">        teemo.hp &#x3D; 300;</span><br><span class="line">        teemo.damage &#x3D; 30;</span><br><span class="line">         </span><br><span class="line">        Hero bh &#x3D; new Hero();</span><br><span class="line">        bh.name &#x3D; &quot;赏金猎人&quot;;</span><br><span class="line">        bh.hp &#x3D; 500;</span><br><span class="line">        bh.damage &#x3D; 65;</span><br><span class="line">         </span><br><span class="line">        Hero leesin &#x3D; new Hero();</span><br><span class="line">        leesin.name &#x3D; &quot;盲僧&quot;;</span><br><span class="line">        leesin.hp &#x3D; 455;</span><br><span class="line">        leesin.damage &#x3D; 80;</span><br><span class="line">         </span><br><span class="line">        KillThread killThread1 &#x3D; new KillThread(gareen,teemo);</span><br><span class="line">        killThread1.start();</span><br><span class="line">        KillThread killThread2 &#x3D; new KillThread(bh,leesin);</span><br><span class="line">        killThread2.start();</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-创建多线程-实现Runnable接口"><a class="header-anchor" href="#步骤-3-创建多线程-实现Runnable接口">¶</a>步骤 3 : 创建多线程-实现Runnable接口</h3>
<p>创建类Battle，实现Runnable接口<br>
启动的时候，首先创建一个Battle对象，然后再根据该battle对象创建一个线程对象，并启动</p>
<p>Battle battle1 = new Battle(gareen,teemo);</p>
<p>new Thread(battle1).start();</p>
<p>battle1 对象实现了Runnable接口，所以有run方法，但是直接调用run方法，并不会启动一个新的线程。<br>
必须，借助一个线程对象的start()方法，才会启动一个新的线程。<br>
所以，在创建Thread对象的时候，把battle1作为构造方法的参数传递进去，这个线程启动的时候，就会去执行battle1.run()方法了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class Battle implements Runnable&#123;</span><br><span class="line">     </span><br><span class="line">    private Hero h1;</span><br><span class="line">    private Hero h2;</span><br><span class="line"> </span><br><span class="line">    public Battle(Hero h1, Hero h2)&#123;</span><br><span class="line">        this.h1 &#x3D; h1;</span><br><span class="line">        this.h2 &#x3D; h2;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void run()&#123;</span><br><span class="line">        while(!h2.isDead())&#123;</span><br><span class="line">            h1.attackHero(h2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestThread &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 616;</span><br><span class="line">        gareen.damage &#x3D; 50;</span><br><span class="line"> </span><br><span class="line">        Hero teemo &#x3D; new Hero();</span><br><span class="line">        teemo.name &#x3D; &quot;提莫&quot;;</span><br><span class="line">        teemo.hp &#x3D; 300;</span><br><span class="line">        teemo.damage &#x3D; 30;</span><br><span class="line">         </span><br><span class="line">        Hero bh &#x3D; new Hero();</span><br><span class="line">        bh.name &#x3D; &quot;赏金猎人&quot;;</span><br><span class="line">        bh.hp &#x3D; 500;</span><br><span class="line">        bh.damage &#x3D; 65;</span><br><span class="line">         </span><br><span class="line">        Hero leesin &#x3D; new Hero();</span><br><span class="line">        leesin.name &#x3D; &quot;盲僧&quot;;</span><br><span class="line">        leesin.hp &#x3D; 455;</span><br><span class="line">        leesin.damage &#x3D; 80;</span><br><span class="line">         </span><br><span class="line">        Battle battle1 &#x3D; new Battle(gareen,teemo);</span><br><span class="line">         </span><br><span class="line">        new Thread(battle1).start();</span><br><span class="line"> </span><br><span class="line">        Battle battle2 &#x3D; new Battle(bh,leesin);</span><br><span class="line">        new Thread(battle2).start();</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-创建多线程-匿名类"><a class="header-anchor" href="#步骤-4-创建多线程-匿名类">¶</a>步骤 4 : 创建多线程-匿名类</h3>
<p>使用[匿名类]，继承Thread,重写run方法，直接在run方法中写业务代码<br>
匿名类的一个好处是可以很方便的访问外部的局部变量。<br>
前提是外部的局部变量需要被声明为final。(JDK7以后就不需要了)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 616;</span><br><span class="line">        gareen.damage &#x3D; 50;</span><br><span class="line">  </span><br><span class="line">        Hero teemo &#x3D; new Hero();</span><br><span class="line">        teemo.name &#x3D; &quot;提莫&quot;;</span><br><span class="line">        teemo.hp &#x3D; 300;</span><br><span class="line">        teemo.damage &#x3D; 30;</span><br><span class="line">          </span><br><span class="line">        Hero bh &#x3D; new Hero();</span><br><span class="line">        bh.name &#x3D; &quot;赏金猎人&quot;;</span><br><span class="line">        bh.hp &#x3D; 500;</span><br><span class="line">        bh.damage &#x3D; 65;</span><br><span class="line">          </span><br><span class="line">        Hero leesin &#x3D; new Hero();</span><br><span class="line">        leesin.name &#x3D; &quot;盲僧&quot;;</span><br><span class="line">        leesin.hp &#x3D; 455;</span><br><span class="line">        leesin.damage &#x3D; 80;</span><br><span class="line">          </span><br><span class="line">        &#x2F;&#x2F;匿名类</span><br><span class="line">        Thread t1&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                &#x2F;&#x2F;匿名类中用到外部的局部变量teemo，必须把teemo声明为final</span><br><span class="line">                &#x2F;&#x2F;但是在JDK7以后，就不是必须加final的了</span><br><span class="line">                while(!teemo.isDead())&#123;</span><br><span class="line">                    gareen.attackHero(teemo);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         </span><br><span class="line">        t1.start();</span><br><span class="line">          </span><br><span class="line">        Thread t2&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(!leesin.isDead())&#123;</span><br><span class="line">                    bh.attackHero(leesin);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.start();</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-创建多线程的三种方式"><a class="header-anchor" href="#步骤-5-创建多线程的三种方式">¶</a>步骤 5 : 创建多线程的三种方式</h3>
<p>把上述3种方式再整理一下：</p>
<ol>
<li>
<p>继承Thread类</p>
</li>
<li>
<p>实现Runnable接口</p>
</li>
<li>
<p>匿名类的方式</p>
</li>
</ol>
<p>注： 启动线程是start()方法，run()并不能启动一个新的线程</p>
<h3 id="步骤-6-练习-同步查找文件内容"><a class="header-anchor" href="#步骤-6-练习-同步查找文件内容">¶</a>步骤 6 : 练习-同步查找文件内容</h3>
<p>把 [练习-查找文件内容] 改为多线程查找文件内容<br>
原练习的思路是遍历所有文件，当遍历到文件是 .java的时候，查找这个文件的内容，查找完毕之后，再遍历下一个文件</p>
<p>现在通过多线程调整这个思路：<br>
遍历所有文件，当遍历到文件是.java的时候，创建一个线程去查找这个文件的内容，不必等待这个线程结束，继续遍历下一个文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileNotFoundException;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] asgs)&#123;</span><br><span class="line">		long jk &#x3D; System.currentTimeMillis();</span><br><span class="line">		quirefile(&quot;D:\\Java&quot;, &quot;你好&quot;);</span><br><span class="line">		long dk &#x3D; System.currentTimeMillis();</span><br><span class="line">		System.out.println(&quot;使用多线程的查询时间是：&quot; + (dk - jk));</span><br><span class="line">		System.out.println(&quot;-------------------------------------------------&quot;);</span><br><span class="line">		long jkk &#x3D; System.currentTimeMillis();</span><br><span class="line">		quirefile2(&quot;D:\\Java&quot;, &quot;你好&quot;);</span><br><span class="line">		long dkk &#x3D; System.currentTimeMillis();</span><br><span class="line">		System.out.println(&quot;不使用多线程的查询时间是：&quot; + (dkk - jkk));</span><br><span class="line">		&#125;</span><br><span class="line">		public static void quirefile(String filepath, String data)&#123;</span><br><span class="line">			File file1&#x3D;new File(filepath);</span><br><span class="line">			if (!file1.isDirectory())&#123;</span><br><span class="line">				System.out.println(&quot;请输入目录路径&quot;);</span><br><span class="line">				return;</span><br><span class="line">			&#125;</span><br><span class="line">			File[] files&#x3D;file1.listFiles();</span><br><span class="line">			for (int i &#x3D; 0; i &lt;files.length; i++) &#123;</span><br><span class="line">				if (files[i].isDirectory())&#123;</span><br><span class="line">					quirefile(files[i].getAbsolutePath(),data);</span><br><span class="line">				&#125;else &#123;</span><br><span class="line">					String name&#x3D;files[i].getName();</span><br><span class="line">					File fpath&#x3D;new File(files[i].getAbsolutePath());</span><br><span class="line">					String[] names&#x3D;name.split(&quot;\\.&quot;);</span><br><span class="line">					for (String name1:names)&#123;</span><br><span class="line">						if (name1.equals(&quot;txt&quot;))&#123;</span><br><span class="line">							new Thread(() -&gt; &#123;</span><br><span class="line">								try &#123;</span><br><span class="line">									FileInputStream in&#x3D;new FileInputStream(fpath);</span><br><span class="line">									byte[] buf&#x3D;new byte[1024];</span><br><span class="line">									int d;</span><br><span class="line">									while ((d&#x3D;in.read(buf))!&#x3D;-1)&#123;</span><br><span class="line">										if (data.equals(new String(buf,0,d)))&#123;</span><br><span class="line">											System.out.println(&quot;文件“&quot;+fpath.getName()+&quot;”中有“&quot;+data+&quot;”内容&quot;);</span><br><span class="line">										&#125;</span><br><span class="line">									&#125;</span><br><span class="line">									in.close();</span><br><span class="line">								&#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">									e.printStackTrace();</span><br><span class="line">								&#125;catch (IOException e) &#123;</span><br><span class="line">									e.printStackTrace();</span><br><span class="line">								&#125;</span><br><span class="line">							&#125;).start();</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		public static void quirefile2(String filepath, String data)&#123;</span><br><span class="line">			File file1&#x3D;new File(filepath);</span><br><span class="line">			if (!file1.isDirectory())&#123;</span><br><span class="line">				System.out.println(&quot;请输入目录路径&quot;);</span><br><span class="line">				return;</span><br><span class="line">			&#125;</span><br><span class="line">			File[] files&#x3D;file1.listFiles();</span><br><span class="line">			for (int i &#x3D; 0; i &lt;files.length; i++) &#123;</span><br><span class="line">				if (files[i].isDirectory())&#123;</span><br><span class="line">					quirefile(files[i].getAbsolutePath(),data);</span><br><span class="line">				&#125;else &#123;</span><br><span class="line">					String name&#x3D;files[i].getName();</span><br><span class="line">					File fpath&#x3D;new File(files[i].getAbsolutePath());</span><br><span class="line">					String[] names&#x3D;name.split(&quot;\\.&quot;);</span><br><span class="line">					for (String name1:names)&#123;</span><br><span class="line">						if (name1.equals(&quot;txt&quot;))&#123;</span><br><span class="line">							try &#123;</span><br><span class="line">								FileInputStream in&#x3D;new FileInputStream(fpath);</span><br><span class="line">								byte[] buf&#x3D;new byte[1024];</span><br><span class="line">								int d;</span><br><span class="line">								while ((d&#x3D;in.read(buf))!&#x3D;-1)&#123;</span><br><span class="line">									if (data.equals(new String(buf,0,d)))&#123;</span><br><span class="line">										System.out.println(&quot;文件“&quot;+fpath.getName()+&quot;”中有“&quot;+data+&quot;”内容&quot;);</span><br><span class="line">									&#125;</span><br><span class="line">								&#125;</span><br><span class="line">								in.close();</span><br><span class="line">							&#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">								e.printStackTrace();</span><br><span class="line">							&#125;catch (IOException e) &#123;</span><br><span class="line">									e.printStackTrace();</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"> </span><br><span class="line">public class SearchFileThread extends Thread&#123;</span><br><span class="line"> </span><br><span class="line">    private File file;</span><br><span class="line">    private String search;</span><br><span class="line">    public SearchFileThread(File file,String search) &#123;</span><br><span class="line">        this.file &#x3D; file;</span><br><span class="line">        this.search&#x3D; search;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public void run()&#123;</span><br><span class="line">        String fileContent &#x3D; readFileConent(file);</span><br><span class="line">        if(fileContent.contains(search))&#123;</span><br><span class="line">            System.out.printf(&quot;找到子目标字符串%s,在文件:%s%n&quot;,search,file);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public String readFileConent(File file)&#123;</span><br><span class="line">        try (FileReader fr &#x3D; new FileReader(file)) &#123;</span><br><span class="line">            char[] all &#x3D; new char[(int) file.length()];</span><br><span class="line">            fr.read(all);</span><br><span class="line">            return new String(all);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;  </span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import java.io.File;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">  </span><br><span class="line">    public static void search(File file, String search) &#123;</span><br><span class="line">        if (file.isFile()) &#123;</span><br><span class="line">            if(file.getName().toLowerCase().endsWith(&quot;.java&quot;))&#123;</span><br><span class="line">                &#x2F;&#x2F;当找到.java文件的时候，就启动一个线程，进行专门的查找</span><br><span class="line">                new SearchFileThread(file,search).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (file.isDirectory()) &#123;</span><br><span class="line">            File[] fs &#x3D; file.listFiles();</span><br><span class="line">            for (File f : fs) &#123;</span><br><span class="line">                search(f, search);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        File folder &#x3D;new File(&quot;e:\\project&quot;);</span><br><span class="line">        search(folder,&quot;Magic&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、JAVA-常见的线程方法"><a class="header-anchor" href="#2、JAVA-常见的线程方法">¶</a>2、JAVA 常见的线程方法</h2>
<h3 id="示例-1-当前线程暂停"><a class="header-anchor" href="#示例-1-当前线程暂停">¶</a>示例 1 : 当前线程暂停</h3>
<p>Thread.sleep(1000); 表示当前线程暂停1000毫秒 ，其他线程不受影响<br>
Thread.sleep(1000); 会抛出InterruptedException 中断异常，因为当前线程sleep的时候，有可能被停止，这时就会抛出 InterruptedException</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">public class TestThread &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        Thread t1&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                int seconds &#x3D;0;</span><br><span class="line">                while(true)&#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(1000);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.printf(&quot;已经玩了LOL %d 秒%n&quot;, seconds++);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.start();</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-加入到当前线程中"><a class="header-anchor" href="#示例-2-加入到当前线程中">¶</a>示例 2 : 加入到当前线程中</h3>
<p>首先解释一下<strong>主线程</strong>的概念<br>
所有进程，至少会有一个线程即主线程，即main方法开始执行，就会有一个<strong>看不见</strong>的主线程存在。<br>
在42行执行t.join，即表明<strong>在主线程中加入该线程</strong>。<br>
主线程会等待该线程结束完毕， 才会往下运行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        final Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 616;</span><br><span class="line">        gareen.damage &#x3D; 50;</span><br><span class="line">  </span><br><span class="line">        final Hero teemo &#x3D; new Hero();</span><br><span class="line">        teemo.name &#x3D; &quot;提莫&quot;;</span><br><span class="line">        teemo.hp &#x3D; 300;</span><br><span class="line">        teemo.damage &#x3D; 30;</span><br><span class="line">          </span><br><span class="line">        final Hero bh &#x3D; new Hero();</span><br><span class="line">        bh.name &#x3D; &quot;赏金猎人&quot;;</span><br><span class="line">        bh.hp &#x3D; 500;</span><br><span class="line">        bh.damage &#x3D; 65;</span><br><span class="line">          </span><br><span class="line">        final Hero leesin &#x3D; new Hero();</span><br><span class="line">        leesin.name &#x3D; &quot;盲僧&quot;;</span><br><span class="line">        leesin.hp &#x3D; 455;</span><br><span class="line">        leesin.damage &#x3D; 80;</span><br><span class="line">          </span><br><span class="line">        Thread t1&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(!teemo.isDead())&#123;</span><br><span class="line">                    gareen.attackHero(teemo);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">          </span><br><span class="line">        t1.start();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;代码执行到这里，一直是main线程在运行</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;t1线程加入到main线程中来，只有t1线程运行结束，才会继续往下走</span><br><span class="line">            t1.join();</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        Thread t2&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(!leesin.isDead())&#123;</span><br><span class="line">                    bh.attackHero(leesin);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#x2F;&#x2F;会观察到盖伦把提莫杀掉后，才运行t2线程</span><br><span class="line">        t2.start();</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-线程优先级"><a class="header-anchor" href="#示例-3-线程优先级">¶</a>示例 3 : 线程优先级</h3>
<p>当线程处于竞争关系的时候，优先级高的线程会有更大的几率获得CPU资源<br>
为了演示该效果，要把暂停时间去掉，多条线程各自会尽力去占有CPU资源<br>
同时把英雄的血量增加100倍，攻击减低到1，才有足够的时间观察到优先级的演示<br>
如图可见，线程1的优先级是MAX_PRIORITY，所以它争取到了更多的CPU资源执行代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">  </span><br><span class="line">import java.io.Serializable;</span><br><span class="line">   </span><br><span class="line">public class Hero&#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">      </span><br><span class="line">    public int damage;</span><br><span class="line">      </span><br><span class="line">    public void attackHero(Hero h) &#123;</span><br><span class="line">        &#x2F;&#x2F;把暂停时间去掉，多条线程各自会尽力去占有CPU资源</span><br><span class="line">        &#x2F;&#x2F;线程的优先级效果才可以看得出来</span><br><span class="line">&#x2F;&#x2F;        try &#123;</span><br><span class="line">&#x2F;&#x2F;           </span><br><span class="line">&#x2F;&#x2F;            Thread.sleep(0);</span><br><span class="line">&#x2F;&#x2F;        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">&#x2F;&#x2F;            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">&#x2F;&#x2F;            e.printStackTrace();</span><br><span class="line">&#x2F;&#x2F;        &#125;</span><br><span class="line">        h.hp-&#x3D;damage;</span><br><span class="line">        System.out.format(&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;,name,h.name,h.name,h.hp);</span><br><span class="line">          </span><br><span class="line">        if(h.isDead())</span><br><span class="line">            System.out.println(h.name +&quot;死了！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public boolean isDead() &#123;</span><br><span class="line">        return 0&gt;&#x3D;hp?true:false;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        final Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 6160;</span><br><span class="line">        gareen.damage &#x3D; 1;</span><br><span class="line">  </span><br><span class="line">        final Hero teemo &#x3D; new Hero();</span><br><span class="line">        teemo.name &#x3D; &quot;提莫&quot;;</span><br><span class="line">        teemo.hp &#x3D; 3000;</span><br><span class="line">        teemo.damage &#x3D; 1;</span><br><span class="line">          </span><br><span class="line">        final Hero bh &#x3D; new Hero();</span><br><span class="line">        bh.name &#x3D; &quot;赏金猎人&quot;;</span><br><span class="line">        bh.hp &#x3D; 5000;</span><br><span class="line">        bh.damage &#x3D; 1;</span><br><span class="line">          </span><br><span class="line">        final Hero leesin &#x3D; new Hero();</span><br><span class="line">        leesin.name &#x3D; &quot;盲僧&quot;;</span><br><span class="line">        leesin.hp &#x3D; 4505;</span><br><span class="line">        leesin.damage &#x3D; 1;</span><br><span class="line">          </span><br><span class="line">        Thread t1&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line"> </span><br><span class="line">                while(!teemo.isDead())&#123;</span><br><span class="line">                    gareen.attackHero(teemo);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">          </span><br><span class="line">        Thread t2&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(!leesin.isDead())&#123;</span><br><span class="line">                    bh.attackHero(leesin);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         </span><br><span class="line">        t1.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">        t2.setPriority(Thread.MIN_PRIORITY);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-临时暂停"><a class="header-anchor" href="#示例-4-临时暂停">¶</a>示例 4 : 临时暂停</h3>
<p>当前线程，临时暂停，使得其他线程可以有更多的机会占用CPU资源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        final Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 61600;</span><br><span class="line">        gareen.damage &#x3D; 1;</span><br><span class="line">  </span><br><span class="line">        final Hero teemo &#x3D; new Hero();</span><br><span class="line">        teemo.name &#x3D; &quot;提莫&quot;;</span><br><span class="line">        teemo.hp &#x3D; 30000;</span><br><span class="line">        teemo.damage &#x3D; 1;</span><br><span class="line">          </span><br><span class="line">        final Hero bh &#x3D; new Hero();</span><br><span class="line">        bh.name &#x3D; &quot;赏金猎人&quot;;</span><br><span class="line">        bh.hp &#x3D; 50000;</span><br><span class="line">        bh.damage &#x3D; 1;</span><br><span class="line">          </span><br><span class="line">        final Hero leesin &#x3D; new Hero();</span><br><span class="line">        leesin.name &#x3D; &quot;盲僧&quot;;</span><br><span class="line">        leesin.hp &#x3D; 45050;</span><br><span class="line">        leesin.damage &#x3D; 1;</span><br><span class="line">          </span><br><span class="line">        Thread t1&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line"> </span><br><span class="line">                while(!teemo.isDead())&#123;</span><br><span class="line">                    gareen.attackHero(teemo);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">          </span><br><span class="line">        Thread t2&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(!leesin.isDead())&#123;</span><br><span class="line">                    &#x2F;&#x2F;临时暂停，使得t1可以占用CPU资源</span><br><span class="line">                    Thread.yield();</span><br><span class="line">                     </span><br><span class="line">                    bh.attackHero(leesin);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">         </span><br><span class="line">        t1.setPriority(5);</span><br><span class="line">        t2.setPriority(5);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-5-守护线程"><a class="header-anchor" href="#示例-5-守护线程">¶</a>示例 5 : 守护线程</h3>
<p>守护线程的概念是： 当一个进程里，所有的线程都是守护线程的时候，结束当前进程。</p>
<p>就好像一个公司有销售部，生产部这些和业务挂钩的部门。<br>
除此之外，还有后勤，行政等这些支持部门。</p>
<p>如果一家公司销售部，生产部都解散了，那么只剩下后勤和行政，那么这家公司也可以解散了。</p>
<p>守护线程就相当于那些支持部门，如果一个进程只剩下守护线程，那么进程就会自动结束。</p>
<p>守护线程通常会被用来做日志，性能统计等工作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        Thread t1&#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                int seconds &#x3D;0;</span><br><span class="line">                 </span><br><span class="line">                while(true)&#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(1000);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.printf(&quot;已经玩了LOL %d 秒%n&quot;, seconds++);</span><br><span class="line">                     </span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.setDaemon(true);</span><br><span class="line">        t1.start();</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-6-练习-英雄充能"><a class="header-anchor" href="#示例-6-练习-英雄充能">¶</a>示例 6 : 练习-英雄充能</h3>
<p>英雄有可以放一个技能叫做: 波动拳-a du gen。<br>
每隔一秒钟，可以发一次，但是只能连续发3次。</p>
<p>发完3次之后，需要充能5秒钟，充满，再继续发。</p>
<p>借助本章节学习到的知识点，实现这个效果</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2589.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">          </span><br><span class="line">	public static void main(String[] asgs) &#123;</span><br><span class="line">		new Thread(() -&gt; &#123;</span><br><span class="line">			while (true)&#123;</span><br><span class="line">				for (int i &#x3D; 1; i &lt;4; i++) &#123;</span><br><span class="line">					try &#123;</span><br><span class="line">						System.out.println(&quot;波动拳第&quot;+i+&quot;发&quot;);</span><br><span class="line">						Thread.sleep(1000);</span><br><span class="line">					&#125; catch (InterruptedException e) &#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				try &#123;</span><br><span class="line">					System.out.println(&quot;开始为时5秒的充能&quot;);</span><br><span class="line">					Thread.sleep(5000);</span><br><span class="line">				&#125; catch (InterruptedException e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;).start();</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-7-练习-破解密码"><a class="header-anchor" href="#示例-7-练习-破解密码">¶</a>示例 7 : 练习-破解密码</h3>
<ol>
<li>
<p>生成一个长度是3的[随机字符串]，把这个字符串当作 <strong>密码</strong></p>
</li>
<li>
<p>创建一个破解线程，使用穷举法，匹配这个密码</p>
</li>
<li>
<p>创建一个日志线程，打印都用过哪些字符串去匹配，这个日志线程设计为守护线程</p>
</li>
</ol>
<p><strong>提示</strong>： 破解线程把穷举法生成的<strong>可能密码</strong>放在一个容器中，日志线程不断的从这个容器中拿出可能密码，并打印出来。 如果发现容器是空的，就休息1秒，如果发现不是空的，就不停的取出，并打印。</p>
<p>参考： [穷举法破解密码]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"></span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.Random;</span><br><span class="line"></span><br><span class="line">public class TestThread &#123;</span><br><span class="line">	public static LinkedList&lt;String&gt; list &#x3D; new LinkedList&lt;&gt;();</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		calcPassword(randomString(3));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static void calcPassword(String password)&#123;</span><br><span class="line">		Thread thread1 &#x3D; new Thread()&#123;</span><br><span class="line">			@Override</span><br><span class="line">			public void run() &#123;</span><br><span class="line">				char[] c&#x3D;new char[3];</span><br><span class="line">				for(int i&#x3D;33;i&lt;127;i++)</span><br><span class="line">					for(int j&#x3D;33;j&lt;127;j++)</span><br><span class="line">						for(int k&#x3D;33;k&lt;127;k++) &#123;</span><br><span class="line">							c[0]&#x3D;(char)i;</span><br><span class="line">							c[1]&#x3D;(char)j;</span><br><span class="line">							c[2]&#x3D;(char)k;</span><br><span class="line">							list.add(new String(c));</span><br><span class="line">						&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		Thread thread2&#x3D;new Thread() &#123;</span><br><span class="line">			public void run() &#123;</span><br><span class="line">				while(true) &#123;</span><br><span class="line">					if(list.isEmpty())&#123;</span><br><span class="line">						try &#123;</span><br><span class="line">							Thread.sleep(500);</span><br><span class="line">						&#125;catch(InterruptedException e) &#123;</span><br><span class="line">							e.printStackTrace();</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">					String s &#x3D; list.removeFirst();</span><br><span class="line">					System.out.println(&quot;尝试密码：&quot; + s);</span><br><span class="line">					if(s.equals(password))&#123;</span><br><span class="line">						System.out.println(&quot;破解密码成功，密码为：&quot; + s);</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		thread1.setDaemon(true);</span><br><span class="line">		thread1.start();</span><br><span class="line">		thread2.start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static String randomString(int len)&#123;</span><br><span class="line">		Random random &#x3D; new Random();</span><br><span class="line">		StringBuffer sb &#x3D; new StringBuffer();</span><br><span class="line">		for(int i &#x3D; 0; i &lt; len; i++)&#123;</span><br><span class="line">			char at &#x3D; (char) (random.nextInt(127-33) + 33);</span><br><span class="line">			sb.append(at);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return sb.toString();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、JAVA-多线程同步-SYNCHRONIZED-详解"><a class="header-anchor" href="#3、JAVA-多线程同步-SYNCHRONIZED-详解">¶</a>3、JAVA 多线程同步 SYNCHRONIZED 详解</h2>
<h3 id="步骤-1-演示同步问题"><a class="header-anchor" href="#步骤-1-演示同步问题">¶</a>步骤 1 : 演示同步问题</h3>
<p>假设盖伦有10000滴血，并且在基地里，同时又被对方多个英雄攻击<br>
就是<strong>有多个线程在减少盖伦的hp</strong><br>
同时又有<strong>多个线程在恢复盖伦的hp</strong><br>
假设线程的数量是一样的，并且每次改变的值都是1，那么所有线程结束后，盖伦应该还是10000滴血。<br>
但是。。。</p>
<p><strong>注意</strong>： 不是每一次运行都会看到错误的数据产生，多运行几次，或者增加运行的次数</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/786.png" alt></p>
<h3 id="步骤-2-分析同步问题产生的原因"><a class="header-anchor" href="#步骤-2-分析同步问题产生的原因">¶</a>步骤 2 : 分析同步问题产生的原因</h3>
<ol>
<li>
<p>假设<strong>增加线程</strong>先进入，得到的hp是10000</p>
</li>
<li>
<p>进行增加运算</p>
</li>
<li>
<p>正在做增加运算的时候，<strong>还没有来得及修改hp的值</strong>，<strong>减少线程</strong>来了</p>
</li>
<li>
<p>减少线程得到的hp的值也是10000</p>
</li>
<li>
<p>减少线程进行减少运算</p>
</li>
<li>
<p>增加线程运算结束，得到值10001，并把这个值赋予hp</p>
</li>
<li>
<p>减少线程也运算结束，得到值9999，并把这个值赋予hp<br>
hp，最后的值就是9999<br>
虽然经历了两个线程各自增减了一次，本来期望还是原值10000，但是却得到了一个9999<br>
这个时候的值9999是一个错误的值，在业务上又叫做<strong>脏数据</strong></p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/787.png" alt></p>
<h3 id="步骤-3-解决思路"><a class="header-anchor" href="#步骤-3-解决思路">¶</a>步骤 3 : 解决思路</h3>
<p>总体解决思路是： 在增加线程访问hp期间，其他线程不可以访问hp</p>
<ol>
<li>
<p>增加线程获取到hp的值，并进行运算</p>
</li>
<li>
<p>在运算期间，减少线程试图来获取hp的值，但是<strong>不被允许</strong></p>
</li>
<li>
<p>增加线程运算结束，并成功修改hp的值为10001</p>
</li>
<li>
<p>减少线程，在增加线程做完后，才能访问hp的值，即10001</p>
</li>
<li>
<p>减少线程运算，并得到新的值10000</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/788.png" alt></p>
<h3 id="步骤-4-synchronized-同步对象概念"><a class="header-anchor" href="#步骤-4-synchronized-同步对象概念">¶</a>步骤 4 : synchronized 同步对象概念</h3>
<p>解决上述问题之前，先理解<br>
<strong>synchronized</strong>关键字的意义<br>
如下代码：</p>
<p>Object someObject =new Object();</p>
<p>synchronized (someObject){</p>
<p>//此处的代码只有占有了someObject后才可以执行</p>
<p>}</p>
<p><strong>synchronized表示当前线程，独占 对象 someObject</strong><br>
当前线程<strong>独占</strong> 了对象someObject，如果有<strong>其他线程试图占有对象</strong>someObject，<strong>就会等待</strong>，直到当前线程释放对someObject的占用。<br>
someObject 又叫同步对象，所有的对象，都可以作为同步对象<br>
为了达到同步的效果，必须使用同一个同步对象</p>
<p><strong>释放同步对象</strong>的方式： synchronized 块自然结束，或者有异常抛出</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/789.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line">   </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">     </span><br><span class="line">    public static String now()&#123;</span><br><span class="line">        return new SimpleDateFormat(&quot;HH:mm:ss&quot;).format(new Date());</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        final Object someObject &#x3D; new Object();</span><br><span class="line">          </span><br><span class="line">        Thread t1 &#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    System.out.println( now()+&quot; t1 线程已经运行&quot;);</span><br><span class="line">                    System.out.println( now()+this.getName()+ &quot; 试图占有对象：someObject&quot;);</span><br><span class="line">                    synchronized (someObject) &#123;</span><br><span class="line">                          </span><br><span class="line">                        System.out.println( now()+this.getName()+ &quot; 占有对象：someObject&quot;);</span><br><span class="line">                        Thread.sleep(5000);</span><br><span class="line">                        System.out.println( now()+this.getName()+ &quot; 释放对象：someObject&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(now()+&quot; t1 线程结束&quot;);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.setName(&quot; t1&quot;);</span><br><span class="line">        t1.start();</span><br><span class="line">        Thread t2 &#x3D; new Thread()&#123;</span><br><span class="line">  </span><br><span class="line">            public void run()&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    System.out.println( now()+&quot; t2 线程已经运行&quot;);</span><br><span class="line">                    System.out.println( now()+this.getName()+ &quot; 试图占有对象：someObject&quot;);</span><br><span class="line">                    synchronized (someObject) &#123;</span><br><span class="line">                        System.out.println( now()+this.getName()+ &quot; 占有对象：someObject&quot;);</span><br><span class="line">                        Thread.sleep(5000);</span><br><span class="line">                        System.out.println( now()+this.getName()+ &quot; 释放对象：someObject&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(now()+&quot; t2 线程结束&quot;);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.setName(&quot; t2&quot;);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-使用synchronized-解决同步问题"><a class="header-anchor" href="#步骤-5-使用synchronized-解决同步问题">¶</a>步骤 5 : 使用synchronized 解决同步问题</h3>
<p>所有需要修改hp的地方，有要<strong>建立在占有someObject的基础上</strong>。<br>
而对象 someObject在同一时间，只能被一个线程占有。 间接地，<strong>导致同一时间，hp只能被一个线程修改。</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/790.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">   </span><br><span class="line">import java.awt.GradientPaint;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        final Object someObject &#x3D; new Object();</span><br><span class="line">         </span><br><span class="line">        final Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 10000;</span><br><span class="line">          </span><br><span class="line">        int n &#x3D; 10000;</span><br><span class="line">  </span><br><span class="line">        Thread[] addThreads &#x3D; new Thread[n];</span><br><span class="line">        Thread[] reduceThreads &#x3D; new Thread[n];</span><br><span class="line">          </span><br><span class="line">        for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">            Thread t &#x3D; new Thread()&#123;</span><br><span class="line">                public void run()&#123;</span><br><span class="line">                     </span><br><span class="line">                    &#x2F;&#x2F;任何线程要修改hp的值，必须先占用someObject</span><br><span class="line">                    synchronized (someObject) &#123;</span><br><span class="line">                        gareen.recover();</span><br><span class="line">                    &#125;</span><br><span class="line">                     </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            t.start();</span><br><span class="line">            addThreads[i] &#x3D; t;</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">            Thread t &#x3D; new Thread()&#123;</span><br><span class="line">                public void run()&#123;</span><br><span class="line">                    &#x2F;&#x2F;任何线程要修改hp的值，必须先占用someObject</span><br><span class="line">                    synchronized (someObject) &#123;</span><br><span class="line">                        gareen.hurt();</span><br><span class="line">                    &#125;</span><br><span class="line">                     </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            t.start();</span><br><span class="line">            reduceThreads[i] &#x3D; t;</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        for (Thread t : addThreads) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                t.join();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for (Thread t : reduceThreads) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                t.join();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        System.out.printf(&quot;%d个增加线程和%d个减少线程结束后%n盖伦的血量是 %.0f%n&quot;, n,n,gareen.hp);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-使用hero对象作为同步对象"><a class="header-anchor" href="#步骤-6-使用hero对象作为同步对象">¶</a>步骤 6 : 使用hero对象作为同步对象</h3>
<p>既然任意对象都可以用来作为同步对象，而所有的线程访问的都是同一个hero对象，<strong>索性就使用gareen来作为同步对象</strong><br>
进一步的，对于Hero的hurt方法，加上：<br>
synchronized (this) {<br>
}<br>
表示当前对象为同步对象，即也是gareen为同步对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">   </span><br><span class="line">import java.awt.GradientPaint;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        final Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 10000;</span><br><span class="line">          </span><br><span class="line">        int n &#x3D; 10000;</span><br><span class="line">  </span><br><span class="line">        Thread[] addThreads &#x3D; new Thread[n];</span><br><span class="line">        Thread[] reduceThreads &#x3D; new Thread[n];</span><br><span class="line">          </span><br><span class="line">        for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">            Thread t &#x3D; new Thread()&#123;</span><br><span class="line">                public void run()&#123;</span><br><span class="line">                     </span><br><span class="line">                    &#x2F;&#x2F;使用gareen作为synchronized</span><br><span class="line">                    synchronized (gareen) &#123;</span><br><span class="line">                        gareen.recover();</span><br><span class="line">                    &#125;</span><br><span class="line">                     </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            t.start();</span><br><span class="line">            addThreads[i] &#x3D; t;</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">            Thread t &#x3D; new Thread()&#123;</span><br><span class="line">                public void run()&#123;</span><br><span class="line">                    &#x2F;&#x2F;使用gareen作为synchronized</span><br><span class="line">                    &#x2F;&#x2F;在方法hurt中有synchronized(this)</span><br><span class="line">                    gareen.hurt();</span><br><span class="line">                     </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            t.start();</span><br><span class="line">            reduceThreads[i] &#x3D; t;</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        for (Thread t : addThreads) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                t.join();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for (Thread t : reduceThreads) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                t.join();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        System.out.printf(&quot;%d个增加线程和%d个减少线程结束后%n盖伦的血量是 %.0f%n&quot;, n,n,gareen.hp);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">  </span><br><span class="line">public class Hero&#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">     </span><br><span class="line">    public int damage;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;回血</span><br><span class="line">    public void recover()&#123;</span><br><span class="line">        hp&#x3D;hp+1;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;掉血</span><br><span class="line">    public void hurt()&#123;</span><br><span class="line">        &#x2F;&#x2F;使用this作为同步对象</span><br><span class="line">        synchronized (this) &#123;</span><br><span class="line">            hp&#x3D;hp-1;   </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public void attackHero(Hero h) &#123;</span><br><span class="line">        h.hp-&#x3D;damage;</span><br><span class="line">        System.out.format(&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;,name,h.name,h.name,h.hp);</span><br><span class="line">        if(h.isDead())</span><br><span class="line">            System.out.println(h.name +&quot;死了！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public boolean isDead() &#123;</span><br><span class="line">        return 0&gt;&#x3D;hp?true:false;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-在方法前，加上修饰符synchronized"><a class="header-anchor" href="#步骤-7-在方法前，加上修饰符synchronized">¶</a>步骤 7 : 在方法前，加上修饰符synchronized</h3>
<p>在recover前，直接加上synchronized ，其所对应的同步对象，就是this<br>
和hurt方法达到的效果是一样<br>
外部线程访问gareen的方法，就不需要额外使用synchronized 了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">  </span><br><span class="line">public class Hero&#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">     </span><br><span class="line">    public int damage;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;回血</span><br><span class="line">    &#x2F;&#x2F;直接在方法前加上修饰符synchronized</span><br><span class="line">    &#x2F;&#x2F;其所对应的同步对象，就是this</span><br><span class="line">    &#x2F;&#x2F;和hurt方法达到的效果一样</span><br><span class="line">    public synchronized void recover()&#123;</span><br><span class="line">        hp&#x3D;hp+1;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;掉血</span><br><span class="line">    public void hurt()&#123;</span><br><span class="line">        &#x2F;&#x2F;使用this作为同步对象</span><br><span class="line">        synchronized (this) &#123;</span><br><span class="line">            hp&#x3D;hp-1;   </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public void attackHero(Hero h) &#123;</span><br><span class="line">        h.hp-&#x3D;damage;</span><br><span class="line">        System.out.format(&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;,name,h.name,h.name,h.hp);</span><br><span class="line">        if(h.isDead())</span><br><span class="line">            System.out.println(h.name +&quot;死了！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public boolean isDead() &#123;</span><br><span class="line">        return 0&gt;&#x3D;hp?true:false;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">   </span><br><span class="line">import java.awt.GradientPaint;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        final Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 10000;</span><br><span class="line">          </span><br><span class="line">        int n &#x3D; 10000;</span><br><span class="line">  </span><br><span class="line">        Thread[] addThreads &#x3D; new Thread[n];</span><br><span class="line">        Thread[] reduceThreads &#x3D; new Thread[n];</span><br><span class="line">          </span><br><span class="line">        for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">            Thread t &#x3D; new Thread()&#123;</span><br><span class="line">                public void run()&#123;</span><br><span class="line">                     </span><br><span class="line">                    &#x2F;&#x2F;recover自带synchronized</span><br><span class="line">                    gareen.recover();</span><br><span class="line">                     </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            t.start();</span><br><span class="line">            addThreads[i] &#x3D; t;</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">            Thread t &#x3D; new Thread()&#123;</span><br><span class="line">                public void run()&#123;</span><br><span class="line">                    &#x2F;&#x2F;hurt自带synchronized</span><br><span class="line">                    gareen.hurt();</span><br><span class="line">                     </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            t.start();</span><br><span class="line">            reduceThreads[i] &#x3D; t;</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        for (Thread t : addThreads) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                t.join();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for (Thread t : reduceThreads) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                t.join();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        System.out.printf(&quot;%d个增加线程和%d个减少线程结束后%n盖伦的血量是 %.0f%n&quot;, n,n,gareen.hp);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-8-线程安全的类"><a class="header-anchor" href="#步骤-8-线程安全的类">¶</a>步骤 8 : 线程安全的类</h3>
<p>如果一个类，其<strong>方法都是有synchronized修饰的</strong>，那么该类就叫做<strong>线程安全的类</strong></p>
<p>同一时间，只有一个线程能够进入 <strong>这种类的一个实例</strong> 的去修改数据，进而保证了这个实例中的数据的安全(不会同时被多线程修改而变成脏数据)</p>
<p>比如StringBuffer和StringBuilder的区别<br>
StringBuffer的方法都是有synchronized修饰的，StringBuffer就叫做线程安全的类<br>
而StringBuilder就不是线程安全的类</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/793.png" alt></p>
<h3 id="步骤-9-练习-在类方法前面加修饰符synchronized"><a class="header-anchor" href="#步骤-9-练习-在类方法前面加修饰符synchronized">¶</a>步骤 9 : 练习-在类方法前面加修饰符synchronized</h3>
<p>[在对象方法前，加上修饰符synchronized]，同步对象是当前实例。<br>
那么如果在类方法前，加上修饰符 synchronized，同步对象是什么呢？</p>
<p>提示：要完成本练习，需要[反射reflection]的知识，如果未学习反射，可以暂时不做</p>
<h3 id="步骤-10-练习-线程安全的MyStack"><a class="header-anchor" href="#步骤-10-练习-线程安全的MyStack">¶</a>步骤 10 : 练习-线程安全的MyStack</h3>
<p>把[答案-使用LinkedList实现Stack栈] 中的MyStack类，改造为线程安全的类。</p>
<h2 id="4、常见的线程安全相关的面试题"><a class="header-anchor" href="#4、常见的线程安全相关的面试题">¶</a>4、常见的线程安全相关的面试题</h2>
<h3 id="步骤-1-HashMap和Hashtable的区别-v2"><a class="header-anchor" href="#步骤-1-HashMap和Hashtable的区别-v2">¶</a>步骤 1 : HashMap和Hashtable的区别</h3>
<p>HashMap和Hashtable都实现了Map接口，都是键值对保存数据的方式<br>
区别1：<br>
HashMap可以存放 null<br>
Hashtable不能存放null<br>
区别2：<br>
HashMap不是[线程安全的类]<br>
Hashtable是线程安全的类</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2595.png" alt></p>
<h3 id="步骤-2-StringBuffer和StringBuilder的区别"><a class="header-anchor" href="#步骤-2-StringBuffer和StringBuilder的区别">¶</a>步骤 2 : StringBuffer和StringBuilder的区别</h3>
<p>StringBuffer 是线程安全的<br>
StringBuilder 是非线程安全的</p>
<p>所以当进行大量字符串拼接操作的时候，如果是单线程就用StringBuilder会更快些，如果是多线程，就需要用StringBuffer 保证数据的安全性</p>
<p><strong>非线程安全的</strong>为什么会比<strong>线程安全的</strong> 快？ 因为不需要同步嘛，省略了些时间</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2596.png" alt></p>
<h3 id="步骤-3-ArrayList和Vector的区别"><a class="header-anchor" href="#步骤-3-ArrayList和Vector的区别">¶</a>步骤 3 : ArrayList和Vector的区别</h3>
<p>通过在[eclipse中查看源代码]可以得知：</p>
<p>ArrayList类的声明：</p>
<p>public class ArrayList<E> extends AbstractList<E></E></E></p>
<p>​        implements List<E>, RandomAccess, Cloneable, java.io.Serializable</E></p>
<p>Vector类的声明：</p>
<p>public class Vector<E>    extends AbstractList<E></E></E></p>
<p>​    implements List<E>, RandomAccess, Cloneable, java.io.Serializable</E></p>
<p>一模一样的~<br>
他们的区别也在于，Vector是线程安全的类，而ArrayList是非线程安全的。</p>
<h3 id="步骤-4-把非线程安全的集合转换为线程安全"><a class="header-anchor" href="#步骤-4-把非线程安全的集合转换为线程安全">¶</a>步骤 4 : 把非线程安全的集合转换为线程安全</h3>
<p>ArrayList是非线程安全的，换句话说，多个线程可以同时进入<strong>一个ArrayList对象</strong>的add方法</p>
<p>借助Collections.synchronizedList，可以把ArrayList转换为线程安全的List。</p>
<p>与此类似的，还有HashSet,LinkedList,HashMap等等非线程安全的类，都通过[工具类Collections]转换为线程安全的</p>
<h3 id="步骤-5-练习-线程安全的MyStack"><a class="header-anchor" href="#步骤-5-练习-线程安全的MyStack">¶</a>步骤 5 : 练习-线程安全的MyStack</h3>
<p>借助把非线程安全的集合转换为线程安全，用另一个方式完成 练习-线程安全的MyStack</p>
<p>把LinkedList通过 Collections.synchronizedList转换成了一个线程安全的List</p>
<p>List<Hero> heros = (List<Hero>) Collections.synchronizedList(new LinkedList<Hero>());</Hero></Hero></Hero></p>
<p>不需要在push上加synchronized修饰符<br>
虽然多个线程可以同时进入push方法，但是调用heros.add方法的时候<br>
同一时间，只有一个线程可以进入</p>
<p>public void push(Hero h) {</p>
<p>heros.add(h);</p>
<p>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package collection;</span><br><span class="line">     </span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">     </span><br><span class="line">public class MyStack implements Stack&#123;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;把LinkedList通过 Collections.synchronizedList转换成了一个线程安全的List</span><br><span class="line">    List&lt;Hero&gt; heros &#x3D; (List&lt;Hero&gt;) Collections.synchronizedList(new LinkedList&lt;Hero&gt;());</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F;不需要在push上加synchronized修饰符</span><br><span class="line">    &#x2F;&#x2F;虽然多个线程可以同时进入push方法，但是调用heros.add方法的时候</span><br><span class="line">    &#x2F;&#x2F;同一时间，只有一个线程可以进入</span><br><span class="line">    public void push(Hero h) &#123;</span><br><span class="line">        heros.add(h);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public Hero pull() &#123;</span><br><span class="line">        return heros.remove(heros.size()-1);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public Hero peek() &#123;</span><br><span class="line">        return heros.get(heros.size()-1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5、JAVA-演示多线程死锁"><a class="header-anchor" href="#5、JAVA-演示多线程死锁">¶</a>5、JAVA 演示多线程死锁</h2>
<h3 id="步骤-1-演示死锁"><a class="header-anchor" href="#步骤-1-演示死锁">¶</a>步骤 1 : 演示死锁</h3>
<ol>
<li>
<p>线程1 首先占有对象1，接着试图占有对象2</p>
</li>
<li>
<p>线程2 首先占有对象2，接着试图占有对象1</p>
</li>
<li>
<p>线程1 等待线程2释放对象2</p>
</li>
<li>
<p>与此同时，线程2等待线程1释放对象1</p>
<p>就会。。。一直等待下去，直到天荒地老，海枯石烂，山无棱 ，天地合。。。</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/794.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">   </span><br><span class="line">import charactor.Hero;</span><br><span class="line">    </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">      </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        final Hero ahri &#x3D; new Hero();</span><br><span class="line">        ahri.name &#x3D; &quot;九尾妖狐&quot;;</span><br><span class="line">        final Hero annie &#x3D; new Hero();</span><br><span class="line">        annie.name &#x3D; &quot;安妮&quot;;</span><br><span class="line">         </span><br><span class="line">        Thread t1 &#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                &#x2F;&#x2F;占有九尾妖狐</span><br><span class="line">                synchronized (ahri) &#123;</span><br><span class="line">                    System.out.println(&quot;t1 已占有九尾妖狐&quot;);</span><br><span class="line">                    try &#123;</span><br><span class="line">                        &#x2F;&#x2F;停顿1000毫秒，另一个线程有足够的时间占有安妮</span><br><span class="line">                        Thread.sleep(1000);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                     </span><br><span class="line">                    System.out.println(&quot;t1 试图占有安妮&quot;);</span><br><span class="line">                    System.out.println(&quot;t1 等待中 。。。。&quot;);</span><br><span class="line">                    synchronized (annie) &#123;</span><br><span class="line">                        System.out.println(&quot;do something&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;  </span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.start();</span><br><span class="line">        Thread t2 &#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                &#x2F;&#x2F;占有安妮</span><br><span class="line">                synchronized (annie) &#123;</span><br><span class="line">                    System.out.println(&quot;t2 已占有安妮&quot;);</span><br><span class="line">                    try &#123;</span><br><span class="line">                         </span><br><span class="line">                        &#x2F;&#x2F;停顿1000毫秒，另一个线程有足够的时间占有暂用九尾妖狐</span><br><span class="line">                        Thread.sleep(1000);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(&quot;t2 试图占有九尾妖狐&quot;);</span><br><span class="line">                    System.out.println(&quot;t2 等待中 。。。。&quot;);</span><br><span class="line">                    synchronized (ahri) &#123;</span><br><span class="line">                        System.out.println(&quot;do something&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;  </span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.start();</span><br><span class="line">   &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-死锁"><a class="header-anchor" href="#步骤-2-练习-死锁">¶</a>步骤 2 : 练习-死锁</h3>
<p>3个同步对象a, b, c<br>
3个线程 t1,t2,t3</p>
<p>故意设计场景，使这3个线程彼此死锁</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"></span><br><span class="line">import charactor.Hero;</span><br><span class="line"></span><br><span class="line">public class TestThread &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		Hero timo&#x3D;new Hero();</span><br><span class="line">		timo.name&#x3D;&quot;提莫&quot;;</span><br><span class="line">		Hero xiazi&#x3D;new Hero();</span><br><span class="line">		xiazi.name&#x3D;&quot;盲僧&quot;;</span><br><span class="line">		Hero jie&#x3D;new Hero();</span><br><span class="line">		jie.name&#x3D;&quot;劫&quot;;</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;1.创建第一个线程 t1</span><br><span class="line">		Thread t1&#x3D;new Thread() &#123;</span><br><span class="line">			public void run() &#123;</span><br><span class="line">				&#x2F;&#x2F;1.1占用提莫</span><br><span class="line">				synchronized (timo) &#123;</span><br><span class="line">					System.out.println(&quot;t1线程抢到了提莫!&quot;);</span><br><span class="line">					try &#123;</span><br><span class="line">						Thread.sleep(1000);</span><br><span class="line">					&#125; catch (InterruptedException e) &#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					System.out.println(&quot;t1线程想拥有盲僧!&quot;);</span><br><span class="line">					System.out.println(&quot;t1线程等待...&quot;);</span><br><span class="line">					synchronized (xiazi) &#123;</span><br><span class="line">						System.out.println(&quot;被其他线程占据中...&quot;);</span><br><span class="line"></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t1.start();</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;2.创建第二个线程 t2</span><br><span class="line">		Thread t2&#x3D;new Thread() &#123;</span><br><span class="line">			public void run() &#123;</span><br><span class="line">				&#x2F;&#x2F;2.1占用提莫</span><br><span class="line">				synchronized (xiazi) &#123;</span><br><span class="line">					System.out.println(&quot;t2线程抢到了盲僧!&quot;);</span><br><span class="line">					try &#123;</span><br><span class="line">						&#x2F;&#x2F;2.2线程短暂睡眠</span><br><span class="line">						Thread.sleep(1000);</span><br><span class="line">					&#125; catch (InterruptedException e) &#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					System.out.println(&quot;t2线程想拥有劫!&quot;);</span><br><span class="line">					System.out.println(&quot;t2线程等待...&quot;);</span><br><span class="line">					synchronized (jie) &#123;</span><br><span class="line">						System.out.println(&quot;被其他线程占据中...&quot;);</span><br><span class="line"></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t2.start();</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;3.创建第三个线程 t3</span><br><span class="line">		Thread t3&#x3D;new Thread() &#123;</span><br><span class="line">			public void run() &#123;</span><br><span class="line">				&#x2F;&#x2F;3.1占用劫</span><br><span class="line">				synchronized (jie) &#123;</span><br><span class="line">					System.out.println(&quot;t3线程抢到了劫!&quot;);</span><br><span class="line">					try &#123;</span><br><span class="line">						Thread.sleep(1000);</span><br><span class="line">					&#125; catch (InterruptedException e) &#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					System.out.println(&quot;t3线程想拥有提莫!&quot;);</span><br><span class="line">					System.out.println(&quot;t3线程等待...&quot;);</span><br><span class="line">					synchronized (timo) &#123;</span><br><span class="line">						System.out.println(&quot;被其他线程占据中...&quot;);</span><br><span class="line"></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t3.start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6、JAVA-线程之间的交互-WAIT和NOTIFY"><a class="header-anchor" href="#6、JAVA-线程之间的交互-WAIT和NOTIFY">¶</a>6、JAVA 线程之间的交互 WAIT和NOTIFY</h2>
<h3 id="步骤-1-不好的解决方式"><a class="header-anchor" href="#步骤-1-不好的解决方式">¶</a>步骤 1 : 不好的解决方式</h3>
<p>故意设计减血线程频率更高，盖伦的血量迟早会到达1<br>
减血线程中<strong>使用while循环判断是否是1</strong>，如果是1就不停的循环,直到加血线程回复了血量<br>
这是不好的解决方式，因为会大量占用CPU,拖慢性能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">    </span><br><span class="line">import java.awt.GradientPaint;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">    </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">    </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        final Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 616;</span><br><span class="line">           </span><br><span class="line">        Thread t1 &#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(true)&#123;</span><br><span class="line">                     </span><br><span class="line">                    &#x2F;&#x2F;因为减血更快，所以盖伦的血量迟早会到达1</span><br><span class="line">                    &#x2F;&#x2F;使用while循环判断是否是1，如果是1就不停的循环</span><br><span class="line">                    &#x2F;&#x2F;直到加血线程回复了血量</span><br><span class="line">                    while(gareen.hp&#x3D;&#x3D;1)&#123;</span><br><span class="line">                        continue;</span><br><span class="line">                    &#125;</span><br><span class="line">                     </span><br><span class="line">                    gareen.hurt();</span><br><span class="line">                    System.out.printf(&quot;t1 为%s 减血1点,减少血后，%s的血量是%.0f%n&quot;,gareen.name,gareen.name,gareen.hp);</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(10);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.start();</span><br><span class="line"> </span><br><span class="line">        Thread t2 &#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(true)&#123;</span><br><span class="line">                    gareen.recover();</span><br><span class="line">                    System.out.printf(&quot;t2 为%s 回血1点,增加血后，%s的血量是%.0f%n&quot;,gareen.name,gareen.name,gareen.hp);</span><br><span class="line"> </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.start();</span><br><span class="line">           </span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line">   </span><br><span class="line">public class Hero&#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">      </span><br><span class="line">    public int damage;</span><br><span class="line">      </span><br><span class="line">    public synchronized void recover()&#123;</span><br><span class="line">        hp&#x3D;hp+1;</span><br><span class="line">    &#125;    </span><br><span class="line"> </span><br><span class="line">    public synchronized void hurt()&#123;</span><br><span class="line">            hp&#x3D;hp-1;   </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    public void attackHero(Hero h) &#123;</span><br><span class="line">        h.hp-&#x3D;damage;</span><br><span class="line">        System.out.format(&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;,name,h.name,h.name,h.hp);</span><br><span class="line">        if(h.isDead())</span><br><span class="line">            System.out.println(h.name +&quot;死了！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public boolean isDead() &#123;</span><br><span class="line">        return 0&gt;&#x3D;hp?true:false;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-使用wait和notify进行线程交互"><a class="header-anchor" href="#步骤-2-使用wait和notify进行线程交互">¶</a>步骤 2 : 使用wait和notify进行线程交互</h3>
<p>在Hero类中：hurt()减血方法：当hp=1的时候，执行this.wait().<br>
this.wait()<strong>表示 让占有this的线程等待，并临时释放占有</strong><br>
进入hurt方法的线程必然是减血线程，this.wait()会让减血线程临时释放对this的占有。 <strong>这样加血线程，就有机会进入recover()加血方法了</strong>。</p>
<p>recover() 加血方法：增加了血量，执行this.notify();<br>
this.notify() 表示通知那些<strong>等待在this的线程</strong>，可以苏醒过来了。 等待在this的线程，恰恰就是减血线程。 一旦recover()结束， 加血线程释放了this，减血线程，就可以重新占有this，并执行后面的减血工作。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/796.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line"> </span><br><span class="line">public class Hero &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line"> </span><br><span class="line">    public int damage;</span><br><span class="line"> </span><br><span class="line">    public synchronized void recover() &#123;</span><br><span class="line">        hp &#x3D; hp + 1;</span><br><span class="line">        System.out.printf(&quot;%s 回血1点,增加血后，%s的血量是%.0f%n&quot;, name, name, hp);</span><br><span class="line">        &#x2F;&#x2F; 通知那些等待在this对象上的线程，可以醒过来了，如第20行，等待着的减血线程，苏醒过来</span><br><span class="line">        this.notify();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public synchronized void hurt() &#123;</span><br><span class="line">        if (hp &#x3D;&#x3D; 1) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                &#x2F;&#x2F; 让占有this的减血线程，暂时释放对this的占有，并等待</span><br><span class="line">                this.wait();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        hp &#x3D; hp - 1;</span><br><span class="line">        System.out.printf(&quot;%s 减血1点,减少血后，%s的血量是%.0f%n&quot;, name, name, hp);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void attackHero(Hero h) &#123;</span><br><span class="line">        h.hp -&#x3D; damage;</span><br><span class="line">        System.out.format(&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;, name, h.name, h.name, h.hp);</span><br><span class="line">        if (h.isDead())</span><br><span class="line">            System.out.println(h.name + &quot;死了！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public boolean isDead() &#123;</span><br><span class="line">        return 0 &gt;&#x3D; hp ? true : false;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">      </span><br><span class="line">import java.awt.GradientPaint;</span><br><span class="line">    </span><br><span class="line">import charactor.Hero;</span><br><span class="line">      </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">      </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">    </span><br><span class="line">        final Hero gareen &#x3D; new Hero();</span><br><span class="line">        gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">        gareen.hp &#x3D; 616;</span><br><span class="line">             </span><br><span class="line">        Thread t1 &#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(true)&#123;</span><br><span class="line">                       </span><br><span class="line">                    &#x2F;&#x2F;无需循环判断</span><br><span class="line">&#x2F;&#x2F;                    while(gareen.hp&#x3D;&#x3D;1)&#123;</span><br><span class="line">&#x2F;&#x2F;                        continue;</span><br><span class="line">&#x2F;&#x2F;                    &#125;</span><br><span class="line">                       </span><br><span class="line">                    gareen.hurt();</span><br><span class="line">                     </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(10);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">   </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.start();</span><br><span class="line">   </span><br><span class="line">        Thread t2 &#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(true)&#123;</span><br><span class="line">                    gareen.recover();</span><br><span class="line">   </span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">   </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.start();</span><br><span class="line">             </span><br><span class="line">    &#125;</span><br><span class="line">          </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-关于wait、notify和notifyAll"><a class="header-anchor" href="#步骤-3-关于wait、notify和notifyAll">¶</a>步骤 3 : 关于wait、notify和notifyAll</h3>
<p>留意wait()和notify() 这两个方法是什么对象上的？</p>
<p>public synchronized void hurt() {</p>
<p>。。。</p>
<p>this.wait();</p>
<p>。。。</p>
<p>}</p>
<p>public synchronized void recover() {</p>
<p>。。。</p>
<p>this.notify();</p>
<p>}</p>
<p>这里需要强调的是，wait方法和notify方法，并<strong>不是Thread线程上的方法</strong>，它们是Object上的方法。</p>
<p>因为所有的Object都可以被用来作为同步对象，所以准确的讲，wait和notify是同步对象上的方法。</p>
<p>wait()的意思是： 让占用了这个同步对象的<strong>线程</strong>，临时释放当前的占用，并且等待。 所以调用wait是有前提条件的，一定是在synchronized块里，否则就会出错。</p>
<p>notify() 的意思是，通知<strong>一个</strong>等待在这个同步对象上的线程，<strong>你</strong>可以苏醒过来了，有机会重新占用当前对象了。</p>
<p>notifyAll() 的意思是，通知<strong>所有的</strong>等待在这个同步对象上的线程，<strong>你们</strong>可以苏醒过来了，有机会重新占用当前对象了。</p>
<h3 id="步骤-4-练习-线程交互"><a class="header-anchor" href="#步骤-4-练习-线程交互">¶</a>步骤 4 : 练习-线程交互</h3>
<p>假设加血线程运行得更加频繁，英雄的最大血量是1000</p>
<p>设计加血线程和减血线程的交互，让回血回满之后，加血线程等待，直到有减血线程减血</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">import charactor.Hero;</span><br><span class="line">public class TestThread &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        final Hero gareen&#x3D;new Hero();</span><br><span class="line">        gareen.name&#x3D;&quot;盖伦&quot;;</span><br><span class="line">        gareen.hp&#x3D;616;</span><br><span class="line">        Thread t1&#x3D;new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(true)&#123;</span><br><span class="line">                        gareen.recover();</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(10);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.start();</span><br><span class="line">        Thread t2&#x3D;new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                while(true)&#123;</span><br><span class="line">                        gareen.hurt();</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(100);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line"> </span><br><span class="line">public class Hero&#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">      </span><br><span class="line">    public int damage;</span><br><span class="line">      </span><br><span class="line">    &#x2F;&#x2F;回血</span><br><span class="line">    &#x2F;&#x2F;直接在方法前加上修饰符synchronized</span><br><span class="line">    &#x2F;&#x2F;其所对应的同步对象，就是this</span><br><span class="line">    &#x2F;&#x2F;和hurt方法达到的效果一样</span><br><span class="line">    public synchronized void recover()&#123;</span><br><span class="line">        if(hp&#x3D;&#x3D;1000)&#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                this.wait();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        hp&#x3D;hp+1;</span><br><span class="line">        System.out.printf(&quot;%s 回血1点,增加血后，%s的血量是%.0f%n&quot;, name, name, hp);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F;掉血</span><br><span class="line">    public synchronized void hurt()&#123;        </span><br><span class="line">            hp&#x3D;hp-1;        </span><br><span class="line">            System.out.printf(&quot;%s 减血1点,减少血后，%s的血量是%.0f%n&quot;, name, name, hp);</span><br><span class="line">            this.notify();</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    public void attackHero(Hero h) &#123;</span><br><span class="line">        h.hp-&#x3D;damage;</span><br><span class="line">        System.out.format(&quot;%s 正在攻击 %s, %s的血变成了 %.0f%n&quot;, name, h.name, h.name, h.hp);</span><br><span class="line">        if(h.isDead())</span><br><span class="line">            System.out.println(h.name +&quot;死了！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public boolean isDead() &#123;</span><br><span class="line">        return 0&gt;&#x3D;hp?true:false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-多线程交互"><a class="header-anchor" href="#步骤-5-练习-多线程交互">¶</a>步骤 5 : 练习-多线程交互</h3>
<p>在上面的练习的基础上，增加回血线程到2条，减血线程到5条，同时运行。</p>
<p>运行一段时间，观察会发生的错误，分析错误原因，并考虑解决办法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"></span><br><span class="line">import charactor.*;</span><br><span class="line"></span><br><span class="line">public class TestThread &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">		final Hero gareen &#x3D; new Hero();</span><br><span class="line">		gareen.name &#x3D; &quot;盖伦&quot;;</span><br><span class="line">		gareen.hp &#x3D; 616;</span><br><span class="line">		Thread[] addf&#x3D;new Thread[2];</span><br><span class="line">		Thread[] jianf&#x3D;new Thread[5];</span><br><span class="line">		for(int i&#x3D;0;i&lt;addf.length;i++) &#123;</span><br><span class="line">			Thread t1 &#x3D; new Thread() &#123;</span><br><span class="line">				public void run() &#123;</span><br><span class="line">					while (true) &#123;</span><br><span class="line"></span><br><span class="line">						gareen.hurt();</span><br><span class="line"></span><br><span class="line">						try &#123;</span><br><span class="line">							Thread.sleep(100);</span><br><span class="line">						&#125; catch (InterruptedException e) &#123;</span><br><span class="line">							&#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">							e.printStackTrace();</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line">			t1.start();</span><br><span class="line">			addf[i]&#x3D;t1;</span><br><span class="line">		&#125;</span><br><span class="line">		for(int i&#x3D;0;i&lt;jianf.length;i++) &#123;</span><br><span class="line">			Thread t2 &#x3D; new Thread() &#123;</span><br><span class="line">				public void run() &#123;</span><br><span class="line">					while (true) &#123;</span><br><span class="line">						gareen.recover();</span><br><span class="line"></span><br><span class="line">						try &#123;</span><br><span class="line">							Thread.sleep(10);</span><br><span class="line">						&#125; catch (InterruptedException e) &#123;</span><br><span class="line">							&#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">							e.printStackTrace();</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line">			t2.start();</span><br><span class="line">			jianf[i]&#x3D;t2;</span><br><span class="line">		&#125;</span><br><span class="line">		for(Thread f:addf)&#123;</span><br><span class="line">			try&#123;</span><br><span class="line">				f.join();</span><br><span class="line">			&#125;catch (InterruptedException e)&#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		for(Thread f2:jianf)&#123;</span><br><span class="line">			try&#123;</span><br><span class="line">				f2.join();</span><br><span class="line">			&#125;catch (InterruptedException e)&#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-练习-生产者消费者问题"><a class="header-anchor" href="#步骤-6-练习-生产者消费者问题">¶</a>步骤 6 : 练习-生产者消费者问题</h3>
<p>生产者消费者问题是一个非常典型性的线程交互的问题。</p>
<ol>
<li>
<p>使用[栈]来存放数据<br>
1.1 把栈改造为支持线程安全<br>
1.2 把栈的边界操作进行处理，当栈里的数据是0的时候，访问pull的线程就会等待。 当栈里的数据是200的时候，访问push的线程就会等待</p>
</li>
<li>
<p>提供一个生产者（Producer）线程类，生产随机大写字符压入到堆栈</p>
</li>
<li>
<p>提供一个消费者（Consumer）线程类，从堆栈中弹出字符并打印到控制台</p>
</li>
<li>
<p>提供一个测试类，使两个生产者和三个消费者线程同时运行，结果类似如下 ：</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2591.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"></span><br><span class="line">import java.util.EmptyStackException;</span><br><span class="line">import java.util.Random;</span><br><span class="line">import java.util.Vector;</span><br><span class="line"></span><br><span class="line">public class TestThread &#123;</span><br><span class="line"></span><br><span class="line">	class MyStack&#123;</span><br><span class="line">		Vector&lt;Character&gt; v&#x3D;new Vector&lt;Character&gt;();&#x2F;&#x2F;vecotr是线程安全的类</span><br><span class="line"></span><br><span class="line">		public synchronized void push(char c)&#123;</span><br><span class="line">			v.addElement(c);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		public synchronized char peek()&#123;</span><br><span class="line">			int size&#x3D;v.size();</span><br><span class="line">			if(size&#x3D;&#x3D;0)&#123;</span><br><span class="line">				throw new EmptyStackException();</span><br><span class="line">			&#125;</span><br><span class="line">			return v.get(size-1);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		public synchronized char pop()&#123;</span><br><span class="line">			int size&#x3D;v.size();</span><br><span class="line">			char ans&#x3D;peek();</span><br><span class="line">			v.removeElementAt(size-1);</span><br><span class="line">			return ans;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		public synchronized int size() &#123;&#x2F;&#x2F;没有synchronized会报错</span><br><span class="line">			&#x2F;&#x2F; TODO 自动生成的方法存根</span><br><span class="line">			return v.size();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	class Producer extends Thread&#123;</span><br><span class="line">		MyStack stack&#x3D;new MyStack();</span><br><span class="line">		String name;</span><br><span class="line"></span><br><span class="line">		public Producer(String name)&#123;</span><br><span class="line">			this.name&#x3D;name;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		public Producer()&#123;&#125;</span><br><span class="line"></span><br><span class="line">		public synchronized void run()&#123;</span><br><span class="line">			Random r&#x3D;new Random();</span><br><span class="line">			char c;</span><br><span class="line">			while(true)&#123;</span><br><span class="line">				c&#x3D;(char)(r.nextInt(27)+65);</span><br><span class="line">				try&#123;</span><br><span class="line">					Thread.sleep(100);</span><br><span class="line">				&#125;catch(InterruptedException e)&#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				while(stack.size()&#x3D;&#x3D;200)&#123;</span><br><span class="line">					try&#123;</span><br><span class="line">						this.wait();</span><br><span class="line">					&#125;catch(InterruptedException e)&#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				stack.push(c);</span><br><span class="line">				System.out.println(name+&quot;压入：&quot;+c);</span><br><span class="line">				this.notify();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	class Consumer extends Thread&#123;</span><br><span class="line">		MyStack stack&#x3D;new MyStack();</span><br><span class="line">		String name;</span><br><span class="line"></span><br><span class="line">		public Consumer()&#123;&#125;</span><br><span class="line"></span><br><span class="line">		public Consumer(String name)&#123;</span><br><span class="line">			this.name&#x3D;name;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		public synchronized void run()&#123;</span><br><span class="line">			char c;</span><br><span class="line">			while(true)&#123;</span><br><span class="line">				try&#123;</span><br><span class="line">					Thread.sleep(100);</span><br><span class="line">				&#125;catch(InterruptedException e)&#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				while(stack.size()&#x3D;&#x3D;0)&#123;</span><br><span class="line">					try&#123;</span><br><span class="line">						this.wait();</span><br><span class="line">					&#125;catch(InterruptedException e)&#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				c&#x3D;stack.pop();</span><br><span class="line">				System.out.println(name+&quot;弹出：&quot;+c);</span><br><span class="line">				this.notify();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args)&#123;</span><br><span class="line">		TestThread t&#x3D;new TestThread();</span><br><span class="line">		MyStack stack&#x3D;t.new MyStack();</span><br><span class="line">		Producer p1&#x3D;t.new Producer(&quot;p1&quot;);</span><br><span class="line">		Producer p2&#x3D;t.new Producer(&quot;p2&quot;);</span><br><span class="line">		Consumer c1&#x3D;t.new Consumer(&quot;c1&quot;);</span><br><span class="line">		Consumer c2&#x3D;t.new Consumer(&quot;c2&quot;);</span><br><span class="line">		Consumer c3&#x3D;t.new Consumer(&quot;c3&quot;);</span><br><span class="line"></span><br><span class="line">		p1.stack&#x3D;p2.stack&#x3D;c1.stack&#x3D;c2.stack&#x3D;c3.stack&#x3D;stack;</span><br><span class="line"></span><br><span class="line">		p1.start();</span><br><span class="line">		p2.start();</span><br><span class="line">		c1.start();</span><br><span class="line">		c2.start();</span><br><span class="line">		c3.start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7、JAVA-如何开发一个自定义线程池"><a class="header-anchor" href="#7、JAVA-如何开发一个自定义线程池">¶</a>7、JAVA 如何开发一个自定义线程池</h2>
<h3 id="步骤-1-线程池设计思路"><a class="header-anchor" href="#步骤-1-线程池设计思路">¶</a>步骤 1 : 线程池设计思路</h3>
<p>线程池的思路和[生产者消费者模型]是很接近的。</p>
<ol>
<li>
<p>准备一个任务容器</p>
</li>
<li>
<p>一次性启动10个 消费者线程</p>
</li>
<li>
<p>刚开始任务容器是空的，所以线程都<strong>wait</strong>在上面。</p>
</li>
<li>
<p>直到一个外部线程往这个任务容器中扔了一个“任务”，就会有一个消费者线程被[唤醒notify]</p>
</li>
<li>
<p>这个消费者线程取出“任务”，并且<strong>执行这个任务</strong>，执行完毕后，继续等待下一次任务的到来。</p>
</li>
<li>
<p>如果短时间内，有较多的任务加入，那么就会有多个线程被<strong>唤醒</strong>，去执行这些任务。</p>
</li>
</ol>
<p>在整个过程中，都不需要创建新的线程，而是<strong>循环使用这些已经存在的线程</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2600.png" alt></p>
<h3 id="步骤-2-开发一个自定义线程池"><a class="header-anchor" href="#步骤-2-开发一个自定义线程池">¶</a>步骤 2 : 开发一个自定义线程池</h3>
<p>这是一个自定义的线程池，虽然不够完善和健壮，但是已经足以说明线程池的工作原理</p>
<p>缓慢的给这个线程池添加任务，会看到有多条线程来执行这些任务。<br>
线程7执行完毕任务后，<strong>又回到池子里</strong>，下一次任务来的时候，线程7又来执行新的任务。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">  </span><br><span class="line">public class ThreadPool &#123;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 线程池大小</span><br><span class="line">    int threadPoolSize;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 任务容器</span><br><span class="line">    LinkedList&lt;Runnable&gt; tasks &#x3D; new LinkedList&lt;Runnable&gt;();</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 试图消费任务的线程</span><br><span class="line">  </span><br><span class="line">    public ThreadPool() &#123;</span><br><span class="line">        threadPoolSize &#x3D; 10;</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 启动10个任务消费者线程</span><br><span class="line">        synchronized (tasks) &#123;</span><br><span class="line">            for (int i &#x3D; 0; i &lt; threadPoolSize; i++) &#123;</span><br><span class="line">                new TaskConsumeThread(&quot;任务消费者线程 &quot; + i).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public void add(Runnable r) &#123;</span><br><span class="line">        synchronized (tasks) &#123;</span><br><span class="line">            tasks.add(r);</span><br><span class="line">            &#x2F;&#x2F; 唤醒等待的任务消费者线程</span><br><span class="line">            tasks.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    class TaskConsumeThread extends Thread &#123;</span><br><span class="line">        public TaskConsumeThread(String name) &#123;</span><br><span class="line">            super(name);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        Runnable task;</span><br><span class="line">  </span><br><span class="line">        public void run() &#123;</span><br><span class="line">            System.out.println(&quot;启动： &quot; + this.getName());</span><br><span class="line">            while (true) &#123;</span><br><span class="line">                synchronized (tasks) &#123;</span><br><span class="line">                    while (tasks.isEmpty()) &#123;</span><br><span class="line">                        try &#123;</span><br><span class="line">                            tasks.wait();</span><br><span class="line">                        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    task &#x3D; tasks.removeLast();</span><br><span class="line">                    &#x2F;&#x2F; 允许添加任务的线程可以继续添加任务</span><br><span class="line">                    tasks.notifyAll();</span><br><span class="line">  </span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(this.getName() + &quot; 获取到任务，并执行&quot;);</span><br><span class="line">                task.run();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">       </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ThreadPool pool &#x3D; new ThreadPool();</span><br><span class="line">  </span><br><span class="line">        for (int i &#x3D; 0; i &lt; 5; i++) &#123;</span><br><span class="line">            Runnable task &#x3D; new Runnable() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void run() &#123;</span><br><span class="line">                    &#x2F;&#x2F;System.out.println(&quot;执行任务&quot;);</span><br><span class="line">                    &#x2F;&#x2F;任务可能是打印一句话</span><br><span class="line">                    &#x2F;&#x2F;可能是访问文件</span><br><span class="line">                    &#x2F;&#x2F;可能是做排序</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">             </span><br><span class="line">            pool.add(task);</span><br><span class="line">             </span><br><span class="line">            try &#123;</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">           </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-测试线程池"><a class="header-anchor" href="#步骤-3-测试线程池">¶</a>步骤 3 : 测试线程池</h3>
<p>创造一个情景，每个任务执行的时间都是1秒<br>
刚开始是间隔1秒钟向线程池中添加任务</p>
<p>然后间隔时间越来越短，执行任务的线程还没有来得及结束，新的任务又来了。<br>
就会观察到线程池里的其他线程被唤醒来执行这些任务</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2601.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ThreadPool pool&#x3D; new ThreadPool();</span><br><span class="line">        int sleep&#x3D;1000;</span><br><span class="line">        while(true)&#123;</span><br><span class="line">            pool.add(new Runnable()&#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void run() &#123;</span><br><span class="line">                    &#x2F;&#x2F;System.out.println(&quot;执行任务&quot;);</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(1000);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            try &#123;</span><br><span class="line">                Thread.sleep(sleep);</span><br><span class="line">                sleep &#x3D; sleep&gt;100?sleep-100:sleep;</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-使用java自带线程池"><a class="header-anchor" href="#步骤-4-使用java自带线程池">¶</a>步骤 4 : 使用java自带线程池</h3>
<p>java提供自带的线程池，而不需要自己去开发一个自定义线程池了。</p>
<p>线程池类<strong>ThreadPoolExecutor</strong>在包<strong>java.util.concurrent</strong></p>
<p>ThreadPoolExecutor threadPool= new ThreadPoolExecutor(10, 15, 60, TimeUnit.SECONDS, new LinkedBlockingQueue<Runnable>());</Runnable></p>
<p><strong>第一个</strong>参数10 表示这个线程池<strong>初始化了10个</strong>线程在里面工作<br>
<strong>第二个</strong>参数15 表示如果10个线程不够用了，就会自动增加到<strong>最多15个线程</strong><br>
<strong>第三个</strong>参数60 结合第四个参数TimeUnit.SECONDS，表示经过<strong>60秒</strong>，多出来的线程还没有接到活儿，就会回收，最后保持池子里就10个<br>
<strong>第四个</strong>参数TimeUnit.SECONDS 如上<br>
<strong>第五个</strong>参数 new LinkedBlockingQueue() 用来放任务的集合</p>
<p><strong>execute</strong>方法用于添加新的任务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">   </span><br><span class="line">import java.util.concurrent.LinkedBlockingQueue;</span><br><span class="line">import java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line">import java.util.concurrent.TimeUnit;</span><br><span class="line">   </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line">           </span><br><span class="line">        ThreadPoolExecutor threadPool&#x3D; new ThreadPoolExecutor(10, 15, 60, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line">           </span><br><span class="line">        threadPool.execute(new Runnable()&#123;</span><br><span class="line">   </span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">                System.out.println(&quot;任务1&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">               </span><br><span class="line">        &#125;);</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-借助线程池同步查找文件内容"><a class="header-anchor" href="#步骤-5-练习-借助线程池同步查找文件内容">¶</a>步骤 5 : 练习- 借助线程池同步查找文件内容</h3>
<p>在 [练习-同步查找文件内容] ，如果文件特别多，就会创建很多的线程。 改写这个练习，使用线程池的方式来完成。</p>
<p>初始化一个大小是10的线程池</p>
<p>遍历所有文件，当遍历到文件是.java的时候，创建一个查找文件的任务，把这个任务<strong>扔进线程池</strong>去执行，继续遍历下一个文件</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2604.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"> </span><br><span class="line">public class SearchFileTask implements Runnable&#123;</span><br><span class="line"> </span><br><span class="line">    private File file;</span><br><span class="line">    private String search;</span><br><span class="line">    public SearchFileTask(File file,String search) &#123;</span><br><span class="line">        this.file &#x3D; file;</span><br><span class="line">        this.search&#x3D; search;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public void run()&#123;</span><br><span class="line">         </span><br><span class="line">        String fileContent &#x3D; readFileConent(file);</span><br><span class="line">        if(fileContent.contains(search))&#123;</span><br><span class="line">            System.out.printf( &quot;线程: %s 找到子目标字符串%s,在文件:%s%n&quot;,Thread.currentThread().getName(), search,file);</span><br><span class="line">             </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public String readFileConent(File file)&#123;</span><br><span class="line">        try (FileReader fr &#x3D; new FileReader(file)) &#123;</span><br><span class="line">            char[] all &#x3D; new char[(int) file.length()];</span><br><span class="line">            fr.read(all);</span><br><span class="line">            return new String(all);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;  </span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">  </span><br><span class="line">public class ThreadPool &#123;</span><br><span class="line">    &#x2F;&#x2F; 线程池大小</span><br><span class="line">    int threadPoolSize;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 任务容器</span><br><span class="line">    LinkedList&lt;Runnable&gt; tasks &#x3D; new LinkedList&lt;Runnable&gt;();</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 试图消费任务的线程</span><br><span class="line">  </span><br><span class="line">    public ThreadPool() &#123;</span><br><span class="line">        threadPoolSize &#x3D; 10;</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 启动10个任务消费者线程</span><br><span class="line">        synchronized (tasks) &#123;</span><br><span class="line">            for (int i &#x3D; 0; i &lt; threadPoolSize; i++) &#123;</span><br><span class="line">                new TaskConsumeThread(&quot;任务消费者线程 &quot; + i).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public void add(Runnable r) &#123;</span><br><span class="line">        synchronized (tasks) &#123;</span><br><span class="line">            tasks.add(r);</span><br><span class="line">            &#x2F;&#x2F; 唤醒等待的任务消费者线程</span><br><span class="line">            tasks.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    class TaskConsumeThread extends Thread &#123;</span><br><span class="line">        public TaskConsumeThread(String name) &#123;</span><br><span class="line">            super(name);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        Runnable task;</span><br><span class="line">  </span><br><span class="line">        public void run() &#123;</span><br><span class="line">            while (true) &#123;</span><br><span class="line">                synchronized (tasks) &#123;</span><br><span class="line">                    while (tasks.isEmpty()) &#123;</span><br><span class="line">                        try &#123;</span><br><span class="line">                            tasks.wait();</span><br><span class="line">                        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    task &#x3D; tasks.removeLast();</span><br><span class="line">                    &#x2F;&#x2F; 允许添加任务的线程可以继续添加任务</span><br><span class="line">                    tasks.notifyAll();</span><br><span class="line">  </span><br><span class="line">                &#125;</span><br><span class="line">                task.run();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">   </span><br><span class="line">import java.io.File;</span><br><span class="line">   </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">   </span><br><span class="line">    static ThreadPool pool&#x3D; new ThreadPool();</span><br><span class="line">    public static void search(File file, String search) &#123;</span><br><span class="line">         </span><br><span class="line">        if (file.isFile()) &#123;</span><br><span class="line">            if(file.getName().toLowerCase().endsWith(&quot;.java&quot;))&#123;</span><br><span class="line">                SearchFileTask task &#x3D; new SearchFileTask(file, search);</span><br><span class="line">                pool.add(task);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (file.isDirectory()) &#123;</span><br><span class="line">            File[] fs &#x3D; file.listFiles();</span><br><span class="line">            for (File f : fs) &#123;</span><br><span class="line">                search(f, search);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        File folder &#x3D;new File(&quot;e:\\project&quot;);</span><br><span class="line">        search(folder,&quot;Magic&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8、LOCK对象"><a class="header-anchor" href="#8、LOCK对象">¶</a>8、LOCK对象</h2>
<h3 id="步骤-1-回忆-synchronized-同步的方式"><a class="header-anchor" href="#步骤-1-回忆-synchronized-同步的方式">¶</a>步骤 1 : 回忆 synchronized 同步的方式</h3>
<p>首先回忆一下 [synchronized 同步对象]的方式</p>
<p>当一个线程占用 synchronized 同步对象，其他线程就不能占用了，直到释放这个同步对象为止</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2610.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">   </span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line">    </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">      </span><br><span class="line">    public static String now()&#123;</span><br><span class="line">        return new SimpleDateFormat(&quot;HH:mm:ss&quot;).format(new Date());</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        final Object someObject &#x3D; new Object();</span><br><span class="line">           </span><br><span class="line">        Thread t1 &#x3D; new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    System.out.println( now()+&quot; t1 线程已经运行&quot;);</span><br><span class="line">                    System.out.println( now()+this.getName()+ &quot; 试图占有对象：someObject&quot;);</span><br><span class="line">                    synchronized (someObject) &#123;</span><br><span class="line">                           </span><br><span class="line">                        System.out.println( now()+this.getName()+ &quot; 占有对象：someObject&quot;);</span><br><span class="line">                        Thread.sleep(5000);</span><br><span class="line">                        System.out.println( now()+this.getName()+ &quot; 释放对象：someObject&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(now()+&quot; t1 线程结束&quot;);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.setName(&quot; t1&quot;);</span><br><span class="line">        t1.start();</span><br><span class="line">        Thread t2 &#x3D; new Thread()&#123;</span><br><span class="line">   </span><br><span class="line">            public void run()&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    System.out.println( now()+&quot; t2 线程已经运行&quot;);</span><br><span class="line">                    System.out.println( now()+this.getName()+ &quot; 试图占有对象：someObject&quot;);</span><br><span class="line">                    synchronized (someObject) &#123;</span><br><span class="line">                        System.out.println( now()+this.getName()+ &quot; 占有对象：someObject&quot;);</span><br><span class="line">                        Thread.sleep(5000);</span><br><span class="line">                        System.out.println( now()+this.getName()+ &quot; 释放对象：someObject&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(now()+&quot; t2 线程结束&quot;);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.setName(&quot; t2&quot;);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-使用Lock对象实现同步效果"><a class="header-anchor" href="#步骤-2-使用Lock对象实现同步效果">¶</a>步骤 2 : 使用Lock对象实现同步效果</h3>
<p>Lock是一个接口，为了使用一个Lock对象，需要用到</p>
<p>Lock lock = new ReentrantLock();</p>
<p>与 <strong>synchronized (someObject)</strong> 类似的，<strong>lock()<strong>方法，表示当前线程占用lock对象，一旦占用，其他线程就不能占用了。<br>
与 <strong>synchronized</strong> 不同的是，一旦synchronized 块结束，就会自动释放对</strong>someObject</strong>的占用。 lock却必须调用<strong>unlock</strong>方法进行手动释放，为了保证释放的执行，往往会把unlock() 放在finally中进行。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2611.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.concurrent.locks.Lock;</span><br><span class="line">import java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"> </span><br><span class="line">public class TestThread &#123;</span><br><span class="line"> </span><br><span class="line">    public static String now() &#123;</span><br><span class="line">        return new SimpleDateFormat(&quot;HH:mm:ss&quot;).format(new Date());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void log(String msg) &#123;</span><br><span class="line">        System.out.printf(&quot;%s %s %s %n&quot;, now() , Thread.currentThread().getName() , msg);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Lock lock &#x3D; new ReentrantLock();</span><br><span class="line"> </span><br><span class="line">        Thread t1 &#x3D; new Thread() &#123;</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    log(&quot;线程启动&quot;);</span><br><span class="line">                    log(&quot;试图占有对象：lock&quot;);</span><br><span class="line"> </span><br><span class="line">                    lock.lock();</span><br><span class="line"> </span><br><span class="line">                    log(&quot;占有对象：lock&quot;);</span><br><span class="line">                    log(&quot;进行5秒的业务操作&quot;);</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line"> </span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    log(&quot;释放对象：lock&quot;);</span><br><span class="line">                    lock.unlock();</span><br><span class="line">                &#125;</span><br><span class="line">                log(&quot;线程结束&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.setName(&quot;t1&quot;);</span><br><span class="line">        t1.start();</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;先让t1飞2秒</span><br><span class="line">            Thread.sleep(2000);</span><br><span class="line">        &#125; catch (InterruptedException e1) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Thread t2 &#x3D; new Thread() &#123;</span><br><span class="line"> </span><br><span class="line">            public void run() &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    log(&quot;线程启动&quot;);</span><br><span class="line">                    log(&quot;试图占有对象：lock&quot;);</span><br><span class="line"> </span><br><span class="line">                    lock.lock();</span><br><span class="line"> </span><br><span class="line">                    log(&quot;占有对象：lock&quot;);</span><br><span class="line">                    log(&quot;进行5秒的业务操作&quot;);</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line"> </span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    log(&quot;释放对象：lock&quot;);</span><br><span class="line">                    lock.unlock();</span><br><span class="line">                &#125;</span><br><span class="line">                log(&quot;线程结束&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.setName(&quot;t2&quot;);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-trylock方法"><a class="header-anchor" href="#步骤-3-trylock方法">¶</a>步骤 3 : trylock方法</h3>
<p>synchronized 是<strong>不占用到手不罢休</strong>的，会一直试图占用下去。<br>
与 synchronized 的<strong>钻牛角尖</strong>不一样，Lock接口还提供了一个trylock方法。<br>
trylock会在指定时间范围内<strong>试图占用</strong>，占成功了，就啪啪啪。 如果时间到了，还占用不成功，扭头就走~</p>
<p>注意： 因为使用trylock有可能成功，有可能失败，所以后面unlock释放锁的时候，需要判断是否占用成功了，如果没占用成功也unlock,就会抛出异常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.concurrent.TimeUnit;</span><br><span class="line">import java.util.concurrent.locks.Lock;</span><br><span class="line">import java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"> </span><br><span class="line">public class TestThread &#123;</span><br><span class="line"> </span><br><span class="line">    public static String now() &#123;</span><br><span class="line">        return new SimpleDateFormat(&quot;HH:mm:ss&quot;).format(new Date());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void log(String msg) &#123;</span><br><span class="line">        System.out.printf(&quot;%s %s %s %n&quot;, now() , Thread.currentThread().getName() , msg);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Lock lock &#x3D; new ReentrantLock();</span><br><span class="line"> </span><br><span class="line">        Thread t1 &#x3D; new Thread() &#123;</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                boolean locked &#x3D; false;</span><br><span class="line">                try &#123;</span><br><span class="line">                    log(&quot;线程启动&quot;);</span><br><span class="line">                    log(&quot;试图占有对象：lock&quot;);</span><br><span class="line"> </span><br><span class="line">                    locked &#x3D; lock.tryLock(1,TimeUnit.SECONDS);</span><br><span class="line">                    if(locked)&#123;</span><br><span class="line">                        log(&quot;占有对象：lock&quot;);</span><br><span class="line">                        log(&quot;进行5秒的业务操作&quot;);</span><br><span class="line">                        Thread.sleep(5000);</span><br><span class="line">                    &#125;</span><br><span class="line">                    else&#123;</span><br><span class="line">                        log(&quot;经过1秒钟的努力，还没有占有对象，放弃占有&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line"> </span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                     </span><br><span class="line">                    if(locked)&#123;</span><br><span class="line">                        log(&quot;释放对象：lock&quot;);</span><br><span class="line">                        lock.unlock();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                log(&quot;线程结束&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.setName(&quot;t1&quot;);</span><br><span class="line">        t1.start();</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;先让t1飞2秒</span><br><span class="line">            Thread.sleep(2000);</span><br><span class="line">        &#125; catch (InterruptedException e1) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Thread t2 &#x3D; new Thread() &#123;</span><br><span class="line"> </span><br><span class="line">            public void run() &#123;</span><br><span class="line">                boolean locked &#x3D; false;</span><br><span class="line">                try &#123;</span><br><span class="line">                    log(&quot;线程启动&quot;);</span><br><span class="line">                    log(&quot;试图占有对象：lock&quot;);</span><br><span class="line"> </span><br><span class="line">                    locked &#x3D; lock.tryLock(1,TimeUnit.SECONDS);</span><br><span class="line">                    if(locked)&#123;</span><br><span class="line">                        log(&quot;占有对象：lock&quot;);</span><br><span class="line">                        log(&quot;进行5秒的业务操作&quot;);</span><br><span class="line">                        Thread.sleep(5000);</span><br><span class="line">                    &#125;</span><br><span class="line">                    else&#123;</span><br><span class="line">                        log(&quot;经过1秒钟的努力，还没有占有对象，放弃占有&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line"> </span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                     </span><br><span class="line">                    if(locked)&#123;</span><br><span class="line">                        log(&quot;释放对象：lock&quot;);</span><br><span class="line">                        lock.unlock();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                log(&quot;线程结束&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.setName(&quot;t2&quot;);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-线程交互"><a class="header-anchor" href="#步骤-4-线程交互">¶</a>步骤 4 : 线程交互</h3>
<p>使用synchronized方式进行线程交互，用到的是同步对象的wait,notify和notifyAll方法</p>
<p>Lock也提供了类似的解决办法，首先通过lock对象得到一个Condition对象，然后分别调用这个Condition对象的：<strong>await</strong>, <strong>signal</strong>,<strong>signalAll</strong> 方法</p>
<p><strong>注意</strong>： 不是Condition对象的wait,nofity,notifyAll方法,是await,signal,signalAll</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2617.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">  </span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.concurrent.locks.Condition;</span><br><span class="line">import java.util.concurrent.locks.Lock;</span><br><span class="line">import java.util.concurrent.locks.ReentrantLock;</span><br><span class="line">  </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">  </span><br><span class="line">    public static String now() &#123;</span><br><span class="line">        return new SimpleDateFormat(&quot;HH:mm:ss&quot;).format(new Date());</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public static void log(String msg) &#123;</span><br><span class="line">        System.out.printf(&quot;%s %s %s %n&quot;, now() , Thread.currentThread().getName() , msg);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Lock lock &#x3D; new ReentrantLock();</span><br><span class="line">        Condition condition &#x3D; lock.newCondition();</span><br><span class="line">         </span><br><span class="line">        Thread t1 &#x3D; new Thread() &#123;</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    log(&quot;线程启动&quot;);</span><br><span class="line">                    log(&quot;试图占有对象：lock&quot;);</span><br><span class="line">  </span><br><span class="line">                    lock.lock();</span><br><span class="line">  </span><br><span class="line">                    log(&quot;占有对象：lock&quot;);</span><br><span class="line">                    log(&quot;进行5秒的业务操作&quot;);</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line">                    log(&quot;临时释放对象 lock， 并等待&quot;);</span><br><span class="line">                    condition.await();</span><br><span class="line">                    log(&quot;重新占有对象 lock，并进行5秒的业务操作&quot;);</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line">  </span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    log(&quot;释放对象：lock&quot;);</span><br><span class="line">                    lock.unlock();</span><br><span class="line">                &#125;</span><br><span class="line">                log(&quot;线程结束&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.setName(&quot;t1&quot;);</span><br><span class="line">        t1.start();</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;先让t1飞2秒</span><br><span class="line">            Thread.sleep(2000);</span><br><span class="line">        &#125; catch (InterruptedException e1) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Thread t2 &#x3D; new Thread() &#123;</span><br><span class="line">  </span><br><span class="line">            public void run() &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    log(&quot;线程启动&quot;);</span><br><span class="line">                    log(&quot;试图占有对象：lock&quot;);</span><br><span class="line">  </span><br><span class="line">                    lock.lock();</span><br><span class="line">  </span><br><span class="line">                    log(&quot;占有对象：lock&quot;);</span><br><span class="line">                    log(&quot;进行5秒的业务操作&quot;);</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line">                    log(&quot;唤醒等待中的线程&quot;);</span><br><span class="line">                    condition.signal();</span><br><span class="line">  </span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    log(&quot;释放对象：lock&quot;);</span><br><span class="line">                    lock.unlock();</span><br><span class="line">                &#125;</span><br><span class="line">                log(&quot;线程结束&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.setName(&quot;t2&quot;);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-总结Lock和synchronized的区别"><a class="header-anchor" href="#步骤-5-总结Lock和synchronized的区别">¶</a>步骤 5 : 总结Lock和synchronized的区别</h3>
<ol>
<li>
<p>Lock是一个接口，而synchronized是Java中的关键字，synchronized是内置的语言实现，Lock是代码层面的实现。</p>
</li>
<li>
<p>Lock可以选择性的获取锁，如果一段时间获取不到，可以放弃。synchronized不行，会一根筋一直获取下去。 借助Lock的这个特性，就能够规避死锁，synchronized必须通过谨慎和良好的设计，才能减少死锁的发生。</p>
</li>
<li>
<p>synchronized在发生异常和同步块结束的时候，会自动释放锁。而Lock必须手动释放， 所以如果忘记了释放锁，一样会造成死锁。</p>
</li>
</ol>
<h3 id="步骤-6-练习-借助Lock，把MyStack修改为线程安全的类"><a class="header-anchor" href="#步骤-6-练习-借助Lock，把MyStack修改为线程安全的类">¶</a>步骤 6 : 练习-借助Lock，把MyStack修改为线程安全的类</h3>
<p>在[练习-线程安全的MyStack ]练习中，使用synchronized把MyStack修改为了线程安全的类。</p>
<p>接下来，借助Lock把MyStack修改为线程安全的类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import charactor.*;</span><br><span class="line">import jdk.nashorn.internal.runtime.regexp.joni.constants.StackType;</span><br><span class="line"></span><br><span class="line">import java.util.concurrent.locks.Lock;</span><br><span class="line">import java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"> </span><br><span class="line">public class clock_mystack implements StackType&#123;</span><br><span class="line"> </span><br><span class="line">    private static LinkedList&lt;Hero&gt; ll&#x3D;new LinkedList&lt;Hero&gt;();</span><br><span class="line">    private Lock lock&#x3D;new ReentrantLock();</span><br><span class="line">    public void push(Hero h) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            ll.addLast(h);</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">            &#x2F;&#x2F;unlock释放锁操作必须放在finally执行，万一heros.addLast抛出异常也会执行</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Hero pull() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            return ll.removeLast();</span><br><span class="line">        &#125;finally&#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Hero peek() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            return ll.peekLast();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-练习-借助tryLock-解决死锁问题"><a class="header-anchor" href="#步骤-7-练习-借助tryLock-解决死锁问题">¶</a>步骤 7 : 练习-借助tryLock 解决死锁问题</h3>
<p>当多个线程按照不同顺序占用多个同步对象的时候，就有可能产生[死锁]现象。</p>
<p>[死锁]之所以会发生，就是因为synchronized 如果占用不到同步对象，就会苦苦的一直等待下去，借助tryLock的有限等待时间，解决死锁问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"></span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.concurrent.TimeUnit;</span><br><span class="line">import java.util.concurrent.locks.Condition;</span><br><span class="line">import java.util.concurrent.locks.Lock;</span><br><span class="line">import java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line">public class TestTryLock &#123;</span><br><span class="line">	private static Lock lockB;</span><br><span class="line">	private static Lock lockA;</span><br><span class="line">	static Condition conditionA;</span><br><span class="line">	public static String now() &#123;</span><br><span class="line">		return new SimpleDateFormat(&quot;HH:mm:ss&quot;).format(new Date());</span><br><span class="line">	&#125;</span><br><span class="line">	public static void log(String msg) &#123;</span><br><span class="line">		System.out.println(now()+&quot;: &quot;+Thread.currentThread().getName()+msg);</span><br><span class="line">	&#125;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		lockA &#x3D; new ReentrantLock();</span><br><span class="line">		lockB &#x3D; new ReentrantLock();</span><br><span class="line">		conditionA&#x3D;lockA.newCondition();</span><br><span class="line">		Thread t1&#x3D;new Thread() &#123;  &#x2F;&#x2F;线程t1</span><br><span class="line">			public void run() &#123;</span><br><span class="line">				boolean aLock&#x3D;false;</span><br><span class="line">				boolean bLock&#x3D;false;</span><br><span class="line">				try &#123;</span><br><span class="line">					log(&quot;准备获取锁A&quot;);</span><br><span class="line">					aLock&#x3D;lockA.tryLock(2, TimeUnit.SECONDS);</span><br><span class="line">					if(aLock) &#123;</span><br><span class="line">						log(&quot;获取了锁A&quot;);</span><br><span class="line">						Thread.sleep(1000);</span><br><span class="line">						log(&quot;准备获取锁B&quot;);</span><br><span class="line">						bLock&#x3D;lockB.tryLock(1, TimeUnit.SECONDS);</span><br><span class="line">						while(!bLock) &#123;</span><br><span class="line">							log(&quot;无法获取锁B&quot;);</span><br><span class="line">							log(&quot;临时释放锁A，并等待&quot;);</span><br><span class="line">							aLock&#x3D;false;</span><br><span class="line">							conditionA.await();</span><br><span class="line">							aLock&#x3D;true;</span><br><span class="line">							log(&quot;重新获取了锁A&quot;);</span><br><span class="line">							bLock&#x3D;lockB.tryLock(1, TimeUnit.SECONDS);</span><br><span class="line">						&#125;</span><br><span class="line">						log(&quot;获取了锁B&quot;);</span><br><span class="line">					&#125;</span><br><span class="line">					else &#123;</span><br><span class="line">						log(&quot;无法获取锁A，放弃&quot;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125; catch (InterruptedException e) &#123;</span><br><span class="line">					&#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;finally &#123;</span><br><span class="line">					if(aLock) &#123;</span><br><span class="line">						log(&quot;释放锁A&quot;);</span><br><span class="line">						lockA.unlock();</span><br><span class="line">					&#125;</span><br><span class="line">					if(bLock) &#123;</span><br><span class="line">						log(&quot;释放锁B&quot;);</span><br><span class="line">						lockB.unlock();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t1.setName(&quot;t1&quot;);</span><br><span class="line">		t1.start();</span><br><span class="line">		Thread t2&#x3D;new Thread() &#123;  &#x2F;&#x2F;线程t2</span><br><span class="line">			public void run() &#123;</span><br><span class="line">				boolean aLock&#x3D;false;</span><br><span class="line">				boolean bLock&#x3D;false;</span><br><span class="line">				try &#123;</span><br><span class="line">					log(&quot;准备获取锁B&quot;);</span><br><span class="line">					bLock&#x3D;lockB.tryLock(2, TimeUnit.SECONDS);</span><br><span class="line">					if(bLock) &#123;</span><br><span class="line">						log(&quot;获取了锁B&quot;);</span><br><span class="line">						Thread.sleep(500);</span><br><span class="line">						log(&quot;准备获取锁A&quot;);</span><br><span class="line">						aLock&#x3D;lockA.tryLock(1,TimeUnit.SECONDS);</span><br><span class="line">						while(!aLock) &#123;</span><br><span class="line">							log(&quot;无法获取锁A&quot;);</span><br><span class="line">							aLock&#x3D;lockA.tryLock(1,TimeUnit.SECONDS);</span><br><span class="line">						&#125;</span><br><span class="line">						log(&quot;获取了锁A&quot;);</span><br><span class="line">						conditionA.signal();</span><br><span class="line">					&#125;</span><br><span class="line">					else &#123;</span><br><span class="line">						log(&quot;无法获取锁B&quot;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125; catch (InterruptedException e) &#123;</span><br><span class="line">					&#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;finally &#123;</span><br><span class="line">					if(aLock) &#123;</span><br><span class="line">						log(&quot;释放锁A&quot;);</span><br><span class="line">						lockA.unlock();</span><br><span class="line">					&#125;</span><br><span class="line">					if(bLock) &#123;</span><br><span class="line">						log(&quot;释放锁B&quot;);</span><br><span class="line">						lockB.unlock();</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t2.setName(&quot;t2&quot;);</span><br><span class="line">		t2.start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-8-练习-生产者消费者问题"><a class="header-anchor" href="#步骤-8-练习-生产者消费者问题">¶</a>步骤 8 : 练习-生产者消费者问题</h3>
<p>在[练习-生产者消费者问题]这个练习中，是用wait(), notify(), notifyAll实现了。</p>
<p>接下来使用Condition对象的：<strong>await</strong>, <strong>signal</strong>,<strong>signalAll</strong> 方法实现同样的效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.concurrent.locks.Condition;</span><br><span class="line">import java.util.concurrent.locks.Lock;</span><br><span class="line">import java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"> </span><br><span class="line">public class MyStack&lt;T&gt; &#123;</span><br><span class="line"> </span><br><span class="line">    LinkedList&lt;T&gt; values &#x3D; new LinkedList&lt;T&gt;();</span><br><span class="line"> </span><br><span class="line">    Lock lock &#x3D; new ReentrantLock();</span><br><span class="line">    Condition condition &#x3D; lock.newCondition();</span><br><span class="line"> </span><br><span class="line">    public void push(T t) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            while (values.size() &gt;&#x3D; 200) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    condition.await();</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            condition.signalAll();</span><br><span class="line">            values.addLast(t);</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public T pull() &#123;</span><br><span class="line">        T t&#x3D;null;</span><br><span class="line">        try &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            while (values.isEmpty()) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    condition.await();</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            condition.signalAll();</span><br><span class="line">            t&#x3D; values.removeLast();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        return t;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public T peek() &#123;</span><br><span class="line">        return values.getLast();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9、原子访问"><a class="header-anchor" href="#9、原子访问">¶</a>9、原子访问</h2>
<h3 id="步骤-1-原子性操作概念"><a class="header-anchor" href="#步骤-1-原子性操作概念">¶</a>步骤 1 : 原子性操作概念</h3>
<p>所谓的<strong>原子性操作</strong>即不可中断的操作，比如赋值操作</p>
<p>int i = 5;</p>
<p><strong>原子性操作本身是线程安全的</strong><br>
但是 i++ 这个行为，事实上是有3个原子性操作组成的。<br>
步骤 1. 取 i 的值<br>
步骤 2. i + 1<br>
步骤 3. 把新的值赋予i<br>
这三个步骤，每一步都是一个原子操作，但是合在一起，就不是原子操作。就<strong>不是线程安全</strong>的。<br>
换句话说，一个线程在步骤1 取i 的值结束后，还没有来得及进行步骤2，另一个线程也可以取 i的值了。<br>
这也是[分析同步问题产生的原因] 中的原理。<br>
i++ ，i–， i = i+1 这些都是非原子性操作。<br>
只有int i = 1,这个赋值操作是原子性的。</p>
<h3 id="步骤-2-AtomicInteger"><a class="header-anchor" href="#步骤-2-AtomicInteger">¶</a>步骤 2 : AtomicInteger</h3>
<p>JDK6 以后，新增加了一个包<strong>java.util.concurrent.atomic</strong>，里面有各种原子类，比如<strong>AtomicInteger</strong>。<br>
而AtomicInteger提供了各种自增，自减等方法，这些方法都是原子性的。 换句话说，自增方法<strong>incrementAndGet</strong> 是线程安全的，同一个时间，只有一个线程可以调用这个方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line">   </span><br><span class="line">import java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line">   </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line">        AtomicInteger atomicI &#x3D;new AtomicInteger();</span><br><span class="line">        int i &#x3D; atomicI.decrementAndGet();</span><br><span class="line">        int j &#x3D; atomicI.incrementAndGet();</span><br><span class="line">        int k &#x3D; atomicI.addAndGet(3);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-同步测试"><a class="header-anchor" href="#步骤-3-同步测试">¶</a>步骤 3 : 同步测试</h3>
<p>分别使用基本变量的非原子性的**++<strong>运算符和 原子性的</strong>AtomicInteger对象的 incrementAndGet** 来进行多线程测试。<br>
测试结果如图所示</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2626.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">package multiplethread;</span><br><span class="line"> </span><br><span class="line">import java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"> </span><br><span class="line">public class TestThread &#123;</span><br><span class="line">    </span><br><span class="line">    private static int value &#x3D; 0;</span><br><span class="line">    private static AtomicInteger atomicValue &#x3D;new AtomicInteger();</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int number &#x3D; 100000;</span><br><span class="line">        Thread[] ts1 &#x3D; new Thread[number];</span><br><span class="line">        for (int i &#x3D; 0; i &lt; number; i++) &#123;</span><br><span class="line">            Thread t &#x3D;new Thread()&#123;</span><br><span class="line">                public void run()&#123;</span><br><span class="line">                    value++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            t.start();</span><br><span class="line">            ts1[i] &#x3D; t;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;等待这些线程全部结束</span><br><span class="line">        for (Thread t : ts1) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                t.join();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        System.out.printf(&quot;%d个线程进行value++后，value的值变成:%d%n&quot;, number,value);</span><br><span class="line">        Thread[] ts2 &#x3D; new Thread[number];</span><br><span class="line">        for (int i &#x3D; 0; i &lt; number; i++) &#123;</span><br><span class="line">            Thread t &#x3D;new Thread()&#123;</span><br><span class="line">                public void run()&#123;</span><br><span class="line">                    atomicValue.incrementAndGet();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            t.start();</span><br><span class="line">            ts2[i] &#x3D; t;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;等待这些线程全部结束</span><br><span class="line">        for (Thread t : ts2) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                t.join();</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(&quot;%d个线程进行atomicValue.incrementAndGet();后，atomicValue的值变成:%d%n&quot;, number,atomicValue.intValue());</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-使用AtomicInteger来替换Hero类中的synchronized"><a class="header-anchor" href="#步骤-4-练习-使用AtomicInteger来替换Hero类中的synchronized">¶</a>步骤 4 : 练习-使用AtomicInteger来替换Hero类中的synchronized</h3>
<p>在[给Hero的方法加上修饰符synchronized]这个知识点中，通过给hurt和 recover方法加上synchronized来达到线程安全的效果。</p>
<p>这一次换成使用AtomicInteger来解决这个问题</p>
<p><strong>提示</strong>：int基本类型对应的是AtomicInteger，但是float基本类型没有对应的AtomicFloat。 所以在这个练习中，把hp改为AtomicInteger即可。</p>
<h1 id="七、JDBC"><a class="header-anchor" href="#七、JDBC">¶</a>七、JDBC</h1>
<h2 id="1、JAVA-使用JDBC之前，先要准备MYSQL"><a class="header-anchor" href="#1、JAVA-使用JDBC之前，先要准备MYSQL">¶</a>1、JAVA 使用JDBC之前，先要准备MYSQL</h2>
<h3 id="步骤-1-MySQL"><a class="header-anchor" href="#步骤-1-MySQL">¶</a>步骤 1 : MySQL</h3>
<p><strong>Mysql</strong>是常见的数据库,在中小型网站经常被使用。<br>
如果以前没有接触过Mysql,请参考 [MySQL入门] 章节的学习<br>
其中包含了[mysql 服务器安装]，[客户端安装]，[创建数据库]，[创建表]，以及[常用的sql语句]</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/855.png" alt></p>
<h2 id="2、教程"><a class="header-anchor" href="#2、教程">¶</a>2、教程</h2>
<h3 id="步骤-1-为项目导入mysql-jdbc的jar包"><a class="header-anchor" href="#步骤-1-为项目导入mysql-jdbc的jar包">¶</a>步骤 1 : 为项目导入mysql-jdbc的jar包</h3>
<p>访问MySQL数据库需要用到第三方的类，这些第三方的类，都被压缩在一个叫做Jar的文件里。<br>
为了代码能够使用第三方的类，需要为项目导入mysql的专用Jar包。<br>
该包mysql-connector-java-5.0.8-bin.jar可以在右边下载<br>
通常都会把项目用到的jar包统一放在项目的lib目录下，在本例就会放在<br>
<strong>E:\project\j2se\lib</strong> 这个位置<br>
然后在eclipse中导入这个jar包</p>
<p>导包步骤： 右键project-&gt;property-&gt;java build path-&gt;libaries-&gt;add external jars</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/856.png" alt></p>
<h3 id="步骤-2-初始化驱动"><a class="header-anchor" href="#步骤-2-初始化驱动">¶</a>步骤 2 : 初始化驱动</h3>
<p>通过<strong>Class.forName</strong>(“com.mysql.jdbc.Driver”);<br>
初始化驱动类<strong>com.mysql.jdbc.Driver</strong><br>
就在 mysql-connector-java-5.0.8-bin.jar中<br>
如果忘记了[第一个步骤的导包]，就会抛出ClassNotFoundException</p>
<p>Class.forName是把这个类加载到JVM中，加载的时候，就会执行其中的静态初始化块，完成驱动的初始化的相关工作。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/857.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">   </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">           </span><br><span class="line">        &#x2F;&#x2F;初始化驱动</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;驱动类com.mysql.jdbc.Driver</span><br><span class="line">            &#x2F;&#x2F;就在 mysql-connector-java-5.0.8-bin.jar中</span><br><span class="line">            &#x2F;&#x2F;如果忘记了第一个步骤的导包，就会抛出ClassNotFoundException</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">              </span><br><span class="line">            System.out.println(&quot;数据库驱动加载成功 ！&quot;);</span><br><span class="line">   </span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">           </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版初始化驱动类<strong>Class.forName(“com.mysql.cj.jdbc.Driver”);</strong></p>
<h3 id="步骤-3-建立与数据库的连接"><a class="header-anchor" href="#步骤-3-建立与数据库的连接">¶</a>步骤 3 : 建立与数据库的连接</h3>
<p>建立与数据库的Connection连接<br>
这里需要提供：<br>
数据库所处于的ip:127.0.0.1 (本机)<br>
数据库的端口号： 3306 （mysql专用端口号）<br>
数据库名称 how2java<br>
编码方式 UTF-8<br>
账号 root<br>
密码 admin</p>
<p>注： 这一步要成功执行，必须建立在mysql中有数据库how2java的基础上，如果没有，点击[创建数据库]查看如何进行数据库的创建。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/858.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 建立与数据库的Connection连接</span><br><span class="line">            &#x2F;&#x2F; 这里需要提供：</span><br><span class="line">            &#x2F;&#x2F; 数据库所处于的ip:127.0.0.1 (本机)</span><br><span class="line">            &#x2F;&#x2F; 数据库的端口号： 3306 （mysql专用端口号）</span><br><span class="line">            &#x2F;&#x2F; 数据库名称 how2java</span><br><span class="line">            &#x2F;&#x2F; 编码方式 UTF-8</span><br><span class="line">            &#x2F;&#x2F; 账号 root</span><br><span class="line">            &#x2F;&#x2F; 密码 admin</span><br><span class="line">  </span><br><span class="line">            Connection c &#x3D; DriverManager</span><br><span class="line">                    .getConnection(</span><br><span class="line">                            &quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,</span><br><span class="line">                            &quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;连接成功，获取连接对象： &quot; + c);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">            System.out.println(&quot;数据库加载成功!&quot;);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 建立与数据库的Connection连接</span><br><span class="line">            &#x2F;&#x2F; 这里需要提供：</span><br><span class="line">            &#x2F;&#x2F; 数据库所处于的ip:127.0.0.1 (本机)</span><br><span class="line">            &#x2F;&#x2F; 数据库的端口号： 3306 （mysql专用端口号）</span><br><span class="line">            &#x2F;&#x2F; 数据库名称 how2java</span><br><span class="line">            &#x2F;&#x2F; 编码方式 UTF-8</span><br><span class="line">            &#x2F;&#x2F; 账号 root</span><br><span class="line">            &#x2F;&#x2F; 密码 admin</span><br><span class="line">  </span><br><span class="line">            Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;连接成功，获取连接对象： &quot; + c);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-创建Statement"><a class="header-anchor" href="#步骤-4-创建Statement">¶</a>步骤 4 : 创建Statement</h3>
<p>Statement是用于执行SQL语句的，比如增加，删除</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/859.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">  </span><br><span class="line">            Connection c &#x3D; DriverManager</span><br><span class="line">                    .getConnection(</span><br><span class="line">                            &quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,</span><br><span class="line">                            &quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 注意：使用的是 java.sql.Statement</span><br><span class="line">            &#x2F;&#x2F; 不要不小心使用到： com.mysql.jdbc.Statement;</span><br><span class="line">            Statement s &#x3D; c.createStatement();</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;获取 Statement对象： &quot; + s);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">            System.out.println(&quot;数据库加载成功!&quot;);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 建立与数据库的Connection连接</span><br><span class="line">            &#x2F;&#x2F; 这里需要提供：</span><br><span class="line">            &#x2F;&#x2F; 数据库所处于的ip:127.0.0.1 (本机)</span><br><span class="line">            &#x2F;&#x2F; 数据库的端口号： 3306 （mysql专用端口号）</span><br><span class="line">            &#x2F;&#x2F; 数据库名称 how2java</span><br><span class="line">            &#x2F;&#x2F; 编码方式 UTF-8</span><br><span class="line">            &#x2F;&#x2F; 账号 root</span><br><span class="line">            &#x2F;&#x2F; 密码 admin</span><br><span class="line">  </span><br><span class="line">            Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;连接成功，获取连接对象： &quot; + c);</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F; 注意：使用的是 java.sql.Statement</span><br><span class="line">            &#x2F;&#x2F; 不要不小心使用到： com.mysql.jdbc.Statement;</span><br><span class="line">            Statement s &#x3D; c.createStatement();</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;获取 Statement对象： &quot; + s);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-执行SQL语句"><a class="header-anchor" href="#步骤-5-执行SQL语句">¶</a>步骤 5 : 执行SQL语句</h3>
<p>s.execute执行sql语句<br>
执行成功后，用mysql-front进行查看，明确插入成功</p>
<p>执行SQL语句之前要确保数据库how2java中有表hero的存在，如果没有，需要事先[创建表]</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/860.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">  </span><br><span class="line">            Connection c &#x3D; DriverManager</span><br><span class="line">                    .getConnection(</span><br><span class="line">                            &quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,</span><br><span class="line">                            &quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">  </span><br><span class="line">            Statement s &#x3D; c.createStatement();</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 准备sql语句</span><br><span class="line">            &#x2F;&#x2F; 注意： 字符串要用单引号&#39;</span><br><span class="line">            String sql &#x3D; &quot;insert into hero values(null,&quot;+&quot;&#39;提莫&#39;&quot;+&quot;,&quot;+313.0f+&quot;,&quot;+50+&quot;)&quot;;</span><br><span class="line">            s.execute(sql);</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;执行插入语句成功&quot;);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-关闭连接"><a class="header-anchor" href="#步骤-6-关闭连接">¶</a>步骤 6 : 关闭连接</h3>
<p>数据库的连接是有限资源，相关操作结束后，养成关闭数据库的好习惯<br>
先关闭Statement<br>
后关闭Connection</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line"> </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"> </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        Connection c &#x3D; null;</span><br><span class="line">        Statement s &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line"> </span><br><span class="line">            c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;, &quot;root&quot;,</span><br><span class="line">                    &quot;admin&quot;);</span><br><span class="line"> </span><br><span class="line">            s &#x3D; c.createStatement();</span><br><span class="line"> </span><br><span class="line">            String sql &#x3D; &quot;insert into hero values(null,&quot; + &quot;&#39;提莫&#39;&quot; + &quot;,&quot; + 313.0f + &quot;,&quot; + 50 + &quot;)&quot;;</span><br><span class="line"> </span><br><span class="line">            s.execute(sql);</span><br><span class="line"> </span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            &#x2F;&#x2F; 数据库的连接时有限资源，相关操作结束后，养成关闭数据库的好习惯</span><br><span class="line">            &#x2F;&#x2F; 先关闭Statement</span><br><span class="line">            if (s !&#x3D; null)</span><br><span class="line">                try &#123;</span><br><span class="line">                    s.close();</span><br><span class="line">                &#125; catch (SQLException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#x2F;&#x2F; 后关闭Connection</span><br><span class="line">            if (c !&#x3D; null)</span><br><span class="line">                try &#123;</span><br><span class="line">                    c.close();</span><br><span class="line">                &#125; catch (SQLException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">    	</span><br><span class="line">    	Connection c &#x3D; null;</span><br><span class="line">        Statement s &#x3D; null;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">            System.out.println(&quot;数据库加载成功!&quot;);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 建立与数据库的Connection连接</span><br><span class="line">            &#x2F;&#x2F; 这里需要提供：</span><br><span class="line">            &#x2F;&#x2F; 数据库所处于的ip:127.0.0.1 (本机)</span><br><span class="line">            &#x2F;&#x2F; 数据库的端口号： 3306 （mysql专用端口号）</span><br><span class="line">            &#x2F;&#x2F; 数据库名称 how2java</span><br><span class="line">            &#x2F;&#x2F; 编码方式 UTF-8</span><br><span class="line">            &#x2F;&#x2F; 账号 root</span><br><span class="line">            &#x2F;&#x2F; 密码 admin</span><br><span class="line">  </span><br><span class="line">            c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;连接成功，获取连接对象： &quot; + c);</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F; 注意：使用的是 java.sql.Statement</span><br><span class="line">            &#x2F;&#x2F; 不要不小心使用到： com.mysql.jdbc.Statement;</span><br><span class="line">            s &#x3D; c.createStatement();</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;获取 Statement对象： &quot; + s);</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F; 准备sql语句</span><br><span class="line">            &#x2F;&#x2F; 注意： 字符串要用单引号&#39;</span><br><span class="line">            String sql &#x3D; &quot;insert into hero values(null,&quot;+&quot;&#39;提莫&#39;&quot;+&quot;,&quot;+313.0f+&quot;,&quot;+50+&quot;)&quot;;</span><br><span class="line">            s.execute(sql);</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;执行插入语句成功&quot;);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            &#x2F;&#x2F; 数据库的连接时有限资源，相关操作结束后，养成关闭数据库的好习惯</span><br><span class="line">            &#x2F;&#x2F; 先关闭Statement</span><br><span class="line">            if (s !&#x3D; null)</span><br><span class="line">                try &#123;</span><br><span class="line">                    s.close();</span><br><span class="line">                &#125; catch (SQLException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#x2F;&#x2F; 后关闭Connection</span><br><span class="line">            if (c !&#x3D; null)</span><br><span class="line">                try &#123;</span><br><span class="line">                    c.close();</span><br><span class="line">                &#125; catch (SQLException e) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-使用try-with-resource的方式自动关闭连接"><a class="header-anchor" href="#步骤-7-使用try-with-resource的方式自动关闭连接">¶</a>步骤 7 : 使用try-with-resource的方式自动关闭连接</h3>
<p>如果觉得上一步的关闭连接的方式很麻烦，可以参考[关闭流]的方式，使用<strong>try-with-resource</strong>的方式自动关闭连接，因为Connection和Statement都实现了AutoCloseable接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        try (</span><br><span class="line">            Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,</span><br><span class="line">                &quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();             </span><br><span class="line">        )</span><br><span class="line">        &#123;</span><br><span class="line">            String sql &#x3D; &quot;insert into hero values(null,&quot; + &quot;&#39;提莫&#39;&quot; + &quot;,&quot; + 313.0f + &quot;,&quot; + 50 + &quot;)&quot;;</span><br><span class="line">            s.execute(sql);</span><br><span class="line">              </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        try (</span><br><span class="line">            Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();             </span><br><span class="line">        )</span><br><span class="line">        &#123;</span><br><span class="line">            String sql &#x3D; &quot;insert into hero values(null,&quot; + &quot;&#39;提莫&#39;&quot; + &quot;,&quot; + 313.0f + &quot;,&quot; + 50 + &quot;)&quot;;</span><br><span class="line">            s.execute(sql);</span><br><span class="line">              </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-8-练习-一次性-插入100条数据"><a class="header-anchor" href="#步骤-8-练习-一次性-插入100条数据">¶</a>步骤 8 : 练习-一次性 插入100条数据</h3>
<p>借助循环，和上面学习到的JDBC的知识，向数据库中插入100条数据，并在mysql-front中观察查询结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        try (</span><br><span class="line">            Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;, &quot;885400&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();             </span><br><span class="line">        )</span><br><span class="line">        &#123;</span><br><span class="line">        	for (int i &#x3D; 0; i &lt;100; i++) &#123;</span><br><span class="line">                String name&#x3D;&quot;&#39;&quot;+&quot;英雄 &quot;+i+&quot;&#39;&quot;;</span><br><span class="line">                String sql&#x3D;&quot;insert into hero values(null,&quot;+name+&quot;,&quot;+100.0f+&quot;,&quot;+40+&quot;)&quot;;</span><br><span class="line">                s.execute(sql);</span><br><span class="line">            &#125;</span><br><span class="line">              </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、增、删、改"><a class="header-anchor" href="#3、增、删、改">¶</a>3、增、删、改</h2>
<h3 id="步骤-1-增加-v2"><a class="header-anchor" href="#步骤-1-增加-v2">¶</a>步骤 1 : 增加</h3>
<p>这段代码就是[Hello JDBC]中的代码，用于向数据库中插入数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdbc;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">            Connection c = DriverManager.getConnection(<span class="string">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class="line">                <span class="string">"root"</span>, <span class="string">"admin"</span>);</span><br><span class="line">            Statement s = c.createStatement();             </span><br><span class="line">        )</span><br><span class="line">        &#123;</span><br><span class="line">            String sql = <span class="string">"insert into hero values(null,"</span> + <span class="string">"'提莫'"</span> + <span class="string">","</span> + <span class="number">313.0f</span> + <span class="string">","</span> + <span class="number">50</span> + <span class="string">")"</span>;</span><br><span class="line">            s.execute(sql);</span><br><span class="line">               </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-删除"><a class="header-anchor" href="#步骤-2-删除">¶</a>步骤 2 : 删除</h3>
<p>删除和增加很类似，只不过是执行的SQL语句不一样罢了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdbc;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">            Connection c = DriverManager.getConnection(<span class="string">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class="line">                <span class="string">"root"</span>, <span class="string">"admin"</span>);</span><br><span class="line">            Statement s = c.createStatement();             </span><br><span class="line">        )</span><br><span class="line">        &#123;</span><br><span class="line">            String sql = <span class="string">"delete from hero where id = 5"</span>;</span><br><span class="line">            s.execute(sql);</span><br><span class="line">               </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdbc;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">            Connection c = DriverManager.getConnection(<span class="string">"jdbc:mysql://127.0.0.1:3306/how2java?"</span>+<span class="string">"useUnicode=true&amp;characterEncoding=utf8&amp;"</span>+<span class="string">"useSSL=false&amp;serverTimezone=Hongkong"</span>,<span class="string">"root"</span>, <span class="string">"admin"</span>);</span><br><span class="line">            Statement s = c.createStatement();             </span><br><span class="line">        )</span><br><span class="line">        &#123;</span><br><span class="line">                String sql=<span class="string">"delete from hero where id = 5"</span>;</span><br><span class="line">                s.execute(sql);</span><br><span class="line">            </span><br><span class="line">              </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-修改"><a class="header-anchor" href="#步骤-3-修改">¶</a>步骤 3 : 修改</h3>
<p>修改也一样，执行另一条SQL语句就可以了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">   </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">   </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">   </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">        try (</span><br><span class="line">            Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,</span><br><span class="line">                &quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();             </span><br><span class="line">        )</span><br><span class="line">        &#123;</span><br><span class="line">            String sql &#x3D; &quot;update hero set name &#x3D; &#39;name 5&#39; where id &#x3D; 3&quot;;</span><br><span class="line">            s.execute(sql);</span><br><span class="line">               </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        try (</span><br><span class="line">            Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();             </span><br><span class="line">        )</span><br><span class="line">        &#123;</span><br><span class="line">                String sql&#x3D;&quot;update hero set name &#x3D; &#39;name 5&#39; where id &#x3D; 3&quot;;</span><br><span class="line">                s.execute(sql);</span><br><span class="line">            </span><br><span class="line">              </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-增-删-改"><a class="header-anchor" href="#步骤-4-练习-增-删-改">¶</a>步骤 4 : 练习-增 删 改</h3>
<p>设计一个方法</p>
<p>public static void execute(String sql)</p>
<p>方法接受的参数是SQL语句，无论是增加，删除，还是修改，都调用这个方法，每次传不同的SQL语句作为参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class Test3 &#123;</span><br><span class="line">    public static void execute(String sql)&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">            System.out.println(&quot;数据库驱动加载成功&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        try &#123;</span><br><span class="line">            Connection c&#x3D;DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,</span><br><span class="line">                    &quot;root&quot;,</span><br><span class="line">                    &quot;admin&quot;);</span><br><span class="line">            System.out.println(&quot;数据库连接成功&quot;);</span><br><span class="line">            Statement s&#x3D;c.createStatement();</span><br><span class="line">            s.execute(sql);</span><br><span class="line">            System.out.println(&quot;写入数据成功&quot;);</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;       </span><br><span class="line">        execute(&quot;insert into hero values(null,&quot;+&quot;&#39;卡莉斯塔&#39;&quot;+&quot;,&quot;+570+&quot;,&quot;+69+&quot;)&quot;);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdbc;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(String sql)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">            System.out.println(<span class="string">"数据库驱动加载成功"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Connection c=DriverManager.getConnection(<span class="string">"jdbc:mysql://127.0.0.1:3306/how2java?"</span>+<span class="string">"useUnicode=true&amp;characterEncoding=utf8&amp;"</span>+<span class="string">"useSSL=false&amp;serverTimezone=Hongkong"</span>,<span class="string">"root"</span>, <span class="string">"admin"</span>);</span><br><span class="line">            System.out.println(<span class="string">"数据库连接成功"</span>);</span><br><span class="line">            Statement s=c.createStatement();</span><br><span class="line">            s.execute(sql);</span><br><span class="line">            System.out.println(<span class="string">"写入数据成功"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;       </span><br><span class="line">        execute(<span class="string">"insert into hero values(null,"</span>+<span class="string">"'卡莉斯塔'"</span>+<span class="string">","</span>+<span class="number">570</span>+<span class="string">","</span>+<span class="number">69</span>+<span class="string">")"</span>);</span><br><span class="line">        execute(<span class="string">"delete from hero where id = 99"</span>);</span><br><span class="line">        execute(<span class="string">"update hero set name = '提莫' where id = 98"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4、在JDBC中使用RESULTSET查询SQL语句"><a class="header-anchor" href="#4、在JDBC中使用RESULTSET查询SQL语句">¶</a>4、在JDBC中使用RESULTSET查询SQL语句</h2>
<h3 id="步骤-1-查询语句"><a class="header-anchor" href="#步骤-1-查询语句">¶</a>步骤 1 : 查询语句</h3>
<p>executeQuery 执行SQL查询语句</p>
<p><strong>注意：</strong> 在取第二列的数据的时候，用的是rs.get(2) ，而不是get(1). 这个是整个Java自带的api里<strong>唯二</strong>的地方，使用<strong>基1</strong>的，即2就代表第二个。</p>
<p>另一个地方是在[PreparedStatement]这里</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/866.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdbc;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DriverManager.getConnection(<span class="string">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class="line">                <span class="string">"root"</span>, <span class="string">"admin"</span>); Statement s = c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql = <span class="string">"select * from hero"</span>;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// 执行查询语句，并把结果集返回给ResultSet</span></span><br><span class="line">            ResultSet rs = s.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);<span class="comment">// 可以使用字段名</span></span><br><span class="line">                String name = rs.getString(<span class="number">2</span>);<span class="comment">// 也可以使用字段的顺序</span></span><br><span class="line">                <span class="keyword">float</span> hp = rs.getFloat(<span class="string">"hp"</span>);</span><br><span class="line">                <span class="keyword">int</span> damage = rs.getInt(<span class="number">4</span>);</span><br><span class="line">                System.out.printf(<span class="string">"%d\t%s\t%f\t%d%n"</span>, id, name, hp, damage);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 不一定要在这里关闭ReultSet，因为Statement关闭的时候，会自动关闭ResultSet</span></span><br><span class="line">            <span class="comment">// rs.close();</span></span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdbc;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> (Connection c = DriverManager.getConnection(<span class="string">"jdbc:mysql://127.0.0.1:3306/how2java?"</span>+<span class="string">"useUnicode=true&amp;characterEncoding=utf8&amp;"</span>+<span class="string">"useSSL=false&amp;serverTimezone=Hongkong"</span>,<span class="string">"root"</span>,<span class="string">"admin"</span>); </span><br><span class="line">        	</span><br><span class="line">        	Statement s = c.createStatement();) &#123;</span><br><span class="line">        	</span><br><span class="line">            String sql = <span class="string">"select * from hero"</span>;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// 执行查询语句，并把结果集返回给ResultSet</span></span><br><span class="line">            ResultSet rs = s.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);<span class="comment">// 可以使用字段名</span></span><br><span class="line">                String name = rs.getString(<span class="number">2</span>);<span class="comment">// 也可以使用字段的顺序</span></span><br><span class="line">                <span class="keyword">float</span> hp = rs.getFloat(<span class="string">"hp"</span>);</span><br><span class="line">                <span class="keyword">int</span> damage = rs.getInt(<span class="number">4</span>);</span><br><span class="line">                System.out.printf(<span class="string">"%d\t%s\t%f\t%d%n"</span>, id, name, hp, damage);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 不一定要在这里关闭ReultSet，因为Statement关闭的时候，会自动关闭ResultSet</span></span><br><span class="line">            <span class="comment">// rs.close();</span></span><br><span class="line"> </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-SQL语句判断账号密码是否正确"><a class="header-anchor" href="#步骤-2-SQL语句判断账号密码是否正确">¶</a>步骤 2 : SQL语句判断账号密码是否正确</h3>
<ol>
<li>
<p>创建一个用户表，有字段name,password</p>
</li>
<li>
<p>插入一条数据</p>
</li>
</ol>
<p>insert into user values(null,‘dashen’,‘thisispassword’);</p>
<ol start="3">
<li>SQL语句判断账号密码是否正确</li>
</ol>
<p>判断账号密码的<strong>正确方式</strong>是根据账号和密码到表中去找数据，如果有数据，就表明密码正确了，如果没数据，就表明密码错误。</p>
<p><strong>不恰当的方式</strong> 是把uers表的数据全部查到内存中，挨个进行比较。 如果users表里有100万条数据呢？ 内存都不够用的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE user (</span><br><span class="line">  id int(11) AUTO_INCREMENT,</span><br><span class="line">  name varchar(30) ,</span><br><span class="line">  password varchar(30),</span><br><span class="line">  PRIMARY KEY (id)</span><br><span class="line">) ;</span><br><span class="line">insert into user values(null,&#39;dashen&#39;,&#39;thisispassword&#39;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">   </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">   </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,</span><br><span class="line">                &quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">                Statement s &#x3D; c.createStatement();</span><br><span class="line">                 </span><br><span class="line">                ) &#123;</span><br><span class="line">            String name &#x3D; &quot;dashen&quot;;</span><br><span class="line">            &#x2F;&#x2F;正确的密码是：thisispassword</span><br><span class="line">            String password &#x3D; &quot;thisispassword1&quot;;</span><br><span class="line">   </span><br><span class="line">            String sql &#x3D; &quot;select * from user where name &#x3D; &#39;&quot; + name +&quot;&#39; and password &#x3D; &#39;&quot; + password+&quot;&#39;&quot;;</span><br><span class="line">              </span><br><span class="line">            &#x2F;&#x2F; 执行查询语句，并把结果集返回给ResultSet</span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">              </span><br><span class="line">            if(rs.next())</span><br><span class="line">                System.out.println(&quot;账号密码正确&quot;);</span><br><span class="line">            else</span><br><span class="line">                System.out.println(&quot;账号密码错误&quot;);</span><br><span class="line">             </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">   </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">   </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">                Statement s &#x3D; c.createStatement();</span><br><span class="line">                 </span><br><span class="line">                ) &#123;</span><br><span class="line">            String name &#x3D; &quot;dashen&quot;;</span><br><span class="line">            &#x2F;&#x2F;正确的密码是：thisispassword</span><br><span class="line">            String password &#x3D; &quot;thisispassword&quot;;</span><br><span class="line">   </span><br><span class="line">            String sql &#x3D; &quot;select * from user where name &#x3D; &#39;&quot; + name +&quot;&#39; and password &#x3D; &#39;&quot; + password+&quot;&#39;&quot;;</span><br><span class="line">              </span><br><span class="line">            &#x2F;&#x2F; 执行查询语句，并把结果集返回给ResultSet</span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">              </span><br><span class="line">            if(rs.next())</span><br><span class="line">                System.out.println(&quot;账号密码正确&quot;);</span><br><span class="line">            else</span><br><span class="line">                System.out.println(&quot;账号密码错误&quot;);</span><br><span class="line">             </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-获取总数"><a class="header-anchor" href="#步骤-3-获取总数">¶</a>步骤 3 : 获取总数</h3>
<p>执行的sql语句为</p>
<p>select count(*) from hero</p>
<p>然后通过ResultSet获取出来</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1714.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line"> </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"> </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,</span><br><span class="line">                &quot;root&quot;, &quot;admin&quot;); Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql &#x3D; &quot;select count(*) from hero&quot;;</span><br><span class="line"> </span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">            int total &#x3D; 0;</span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                total &#x3D; rs.getInt(1);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            System.out.println(&quot;表Hero中总共有:&quot; + total+&quot; 条数据&quot;);</span><br><span class="line"> </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line"> </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"> </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;); </span><br><span class="line">        	Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql &#x3D; &quot;select count(*) from hero&quot;;</span><br><span class="line"> </span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">            int total &#x3D; 0;</span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                total &#x3D; rs.getInt(1);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            System.out.println(&quot;表Hero中总共有:&quot; + total+&quot; 条数据&quot;);</span><br><span class="line"> </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-分页查询"><a class="header-anchor" href="#步骤-4-练习-分页查询">¶</a>步骤 4 : 练习-分页查询</h3>
<p>设计一个方法，进行分页查询</p>
<p>public static void list(int start, int count)</p>
<p>start 表示开始页数，count表示一页显示的总数<br>
<strong>list(0,5)</strong> 表示第一页，一共显示5条数据<br>
<strong>list(10,5)</strong> 表示第三页，一共显示5条数据<br>
进行分页查询用到的SQL语句参考 ： [查询数据]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void list(int start,int count)&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;); </span><br><span class="line">        	Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">        	String sql &#x3D; &quot;select * from hero limit &quot;+start+&quot;,&quot;+count+&quot;&quot;;</span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">            while(rs.next())&#123;</span><br><span class="line">                int id &#x3D; rs.getInt(&quot;id&quot;);&#x2F;&#x2F; 可以使用字段名</span><br><span class="line">                String name &#x3D; rs.getString(2);&#x2F;&#x2F; 也可以使用字段的顺序</span><br><span class="line">                float hp &#x3D; rs.getFloat(&quot;hp&quot;);</span><br><span class="line">                int damage &#x3D; rs.getInt(4);</span><br><span class="line">                System.out.printf(&quot;%d\t%s\t%f\t%d%n&quot;, id, name, hp, damage);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        list(0,5);</span><br><span class="line">        list(10,5);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5、在JDBC中使用预编译STATEMENT-以及它的优点"><a class="header-anchor" href="#5、在JDBC中使用预编译STATEMENT-以及它的优点">¶</a>5、在JDBC中使用预编译STATEMENT 以及它的优点</h2>
<h3 id="步骤-1-使用PreparedStatement"><a class="header-anchor" href="#步骤-1-使用PreparedStatement">¶</a>步骤 1 : 使用PreparedStatement</h3>
<p>和 Statement一样，PreparedStatement也是用来执行sql语句的<br>
与创建Statement不同的是，需要根据sql语句创建PreparedStatement<br>
除此之外，还能够通过设置参数，指定相应的值，而不是Statement那样使用字符串拼接</p>
<p>注： 这是JAVA里唯二的基1的地方，另一个是[查询语句]中的ResultSet也是基1的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">    </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">    </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            &#x2F;&#x2F; 根据sql语句创建PreparedStatement</span><br><span class="line">            PreparedStatement ps &#x3D; c.prepareStatement(sql);</span><br><span class="line">        ) &#123;</span><br><span class="line">             </span><br><span class="line">            &#x2F;&#x2F; 设置参数</span><br><span class="line">            ps.setString(1, &quot;提莫&quot;);</span><br><span class="line">            ps.setFloat(2, 313.0f);</span><br><span class="line">            ps.setInt(3, 50);</span><br><span class="line">            &#x2F;&#x2F; 执行</span><br><span class="line">            ps.execute();</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">    </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">    </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">            &#x2F;&#x2F; 根据sql语句创建PreparedStatement</span><br><span class="line">            PreparedStatement ps &#x3D; c.prepareStatement(sql);</span><br><span class="line">        ) &#123;</span><br><span class="line">             </span><br><span class="line">            &#x2F;&#x2F; 设置参数</span><br><span class="line">            ps.setString(1, &quot;提莫&quot;);</span><br><span class="line">            ps.setFloat(2, 313.0f);</span><br><span class="line">            ps.setInt(3, 50);</span><br><span class="line">            &#x2F;&#x2F; 执行</span><br><span class="line">            ps.execute();</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-PreparedStatement的优点1-参数设置"><a class="header-anchor" href="#步骤-2-PreparedStatement的优点1-参数设置">¶</a>步骤 2 : PreparedStatement的优点1-参数设置</h3>
<p><strong>Statement</strong> 需要进行字符串拼接，可读性和维护性比较差</p>
<p>String sql = “insert into hero values(null,”+&quot;‘提莫’&quot;+&quot;,&quot;+313.0f+&quot;,&quot;+50+&quot;)&quot;;</p>
<p><strong>PreparedStatement</strong> 使用参数设置，可读性好，不易犯错</p>
<p>String sql = “insert into hero values(null,?,?,?)”;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();</span><br><span class="line">            PreparedStatement ps &#x3D; c.prepareStatement(sql);</span><br><span class="line">        ) &#123;</span><br><span class="line">            &#x2F;&#x2F; Statement需要进行字符串拼接，可读性和维修性比较差</span><br><span class="line">            String sql0 &#x3D; &quot;insert into hero values(null,&quot; + &quot;&#39;提莫&#39;&quot; + &quot;,&quot; + 313.0f + &quot;,&quot; + 50 + &quot;)&quot;;</span><br><span class="line">            s.execute(sql0);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; PreparedStatement 使用参数设置，可读性好，不易犯错</span><br><span class="line">            &#x2F;&#x2F; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">            ps.setString(1, &quot;提莫&quot;);</span><br><span class="line">            ps.setFloat(2, 313.0f);</span><br><span class="line">            ps.setInt(3, 50);</span><br><span class="line">            ps.execute();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-PreparedStatement的优点2-性能表现"><a class="header-anchor" href="#步骤-3-PreparedStatement的优点2-性能表现">¶</a>步骤 3 : PreparedStatement的优点2-性能表现</h3>
<p>PreparedStatement有预编译机制，性能比Statement更快</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">                Statement s &#x3D; c.createStatement();</span><br><span class="line">                PreparedStatement ps &#x3D; c.prepareStatement(sql);</span><br><span class="line">            ) &#123;</span><br><span class="line">            &#x2F;&#x2F; Statement执行10次，需要10次把SQL语句传输到数据库端</span><br><span class="line">            &#x2F;&#x2F; 数据库要对每一次来的SQL语句进行编译处理</span><br><span class="line">            for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">                String sql0 &#x3D; &quot;insert into hero values(null,&quot; + &quot;&#39;提莫&#39;&quot; + &quot;,&quot;</span><br><span class="line">                        + 313.0f + &quot;,&quot; + 50 + &quot;)&quot;;</span><br><span class="line">                s.execute(sql0);</span><br><span class="line">            &#125;</span><br><span class="line">            s.close();</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; PreparedStatement 执行10次，只需要1次把SQL语句传输到数据库端</span><br><span class="line">            &#x2F;&#x2F; 数据库对带?的SQL进行预编译</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 每次执行，只需要传输参数到数据库端</span><br><span class="line">            &#x2F;&#x2F; 1. 网络传输量比Statement更小</span><br><span class="line">            &#x2F;&#x2F; 2. 数据库不需要再进行编译，响应更快</span><br><span class="line">            for (int i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">                ps.setString(1, &quot;提莫&quot;);</span><br><span class="line">                ps.setFloat(2, 313.0f);</span><br><span class="line">                ps.setInt(3, 50);</span><br><span class="line">                ps.execute();</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-PreparedStatement的优点3-防止SQL注入式攻击"><a class="header-anchor" href="#步骤-4-PreparedStatement的优点3-防止SQL注入式攻击">¶</a>步骤 4 : PreparedStatement的优点3-防止SQL注入式攻击</h3>
<p>假设name是用户提交来的数据</p>
<p>String name = “‘盖伦’ OR 1=1”;</p>
<p>使用Statement就需要进行字符串拼接<br>
拼接出来的语句是：</p>
<p>select * from hero where name = ‘盖伦’ OR 1=1</p>
<p>因为有OR 1=1，这是恒成立的<br>
那么就会把所有的英雄都查出来，而不只是盖伦<br>
如果Hero表里的数据是海量的，比如几百万条，<strong>把这个表里的数据全部查出来</strong><br>
会让数据库负载变高，CPU100%，内存消耗光，<strong>响应变得极其缓慢</strong></p>
<p>而PreparedStatement使用的是<strong>参数设置</strong>，就不会有这个问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;select * from hero where name &#x3D; ?&quot;;</span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">                Statement s &#x3D; c.createStatement();</span><br><span class="line">            PreparedStatement ps &#x3D; c.prepareStatement(sql);</span><br><span class="line">        ) &#123;</span><br><span class="line">            &#x2F;&#x2F; 假设name是用户提交来的数据</span><br><span class="line">            String name &#x3D; &quot;&#39;盖伦&#39; OR 1&#x3D;1&quot;;</span><br><span class="line">            String sql0 &#x3D; &quot;select * from hero where name &#x3D; &quot; + name;</span><br><span class="line">            &#x2F;&#x2F; 拼接出来的SQL语句就是</span><br><span class="line">            &#x2F;&#x2F; select * from hero where name &#x3D; &#39;盖伦&#39; OR 1&#x3D;1</span><br><span class="line">            &#x2F;&#x2F; 因为有OR 1&#x3D;1，所以恒成立</span><br><span class="line">            &#x2F;&#x2F; 那么就会把所有的英雄都查出来，而不只是盖伦</span><br><span class="line">            &#x2F;&#x2F; 如果Hero表里的数据是海量的，比如几百万条，把这个表里的数据全部查出来</span><br><span class="line">            &#x2F;&#x2F; 会让数据库负载变高，CPU100%，内存消耗光，响应变得极其缓慢</span><br><span class="line">            System.out.println(sql0);</span><br><span class="line">  </span><br><span class="line">            ResultSet rs0 &#x3D; s.executeQuery(sql0);</span><br><span class="line">            while (rs0.next()) &#123;</span><br><span class="line">                String heroName &#x3D; rs0.getString(&quot;name&quot;);</span><br><span class="line">                System.out.println(heroName);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            s.execute(sql0);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 使用预编译Statement就可以杜绝SQL注入</span><br><span class="line">  </span><br><span class="line">            ps.setString(1, name);</span><br><span class="line">  </span><br><span class="line">            ResultSet rs &#x3D; ps.executeQuery();</span><br><span class="line">            &#x2F;&#x2F; 查不出数据出来</span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                String heroName &#x3D; rs.getString(&quot;name&quot;);</span><br><span class="line">                System.out.println(heroName);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-性能比较"><a class="header-anchor" href="#步骤-5-练习-性能比较">¶</a>步骤 5 : 练习-性能比较</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">    </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">    </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		quiter();</span><br><span class="line">	&#125;</span><br><span class="line">	public static void quiter()&#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">		&#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		String sqll&#x3D;&quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">		try(Connection connection &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,</span><br><span class="line">				&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">				Statement statement&#x3D;connection.createStatement();</span><br><span class="line">				PreparedStatement ps&#x3D;connection.prepareStatement(sqll)</span><br><span class="line">				)&#123;</span><br><span class="line">			System.out.println(&quot;获取到statement对象&quot;+statement);</span><br><span class="line">			long dk&#x3D; System.currentTimeMillis();</span><br><span class="line">			for (int i &#x3D; 0; i &lt; 10000; i++) &#123;</span><br><span class="line">				String sql&#x3D;&quot;insert into hero values(null,name&#x3D;&#39;英雄&#39;,122,50)&quot;;</span><br><span class="line">				statement.execute(sql);</span><br><span class="line">			&#125;</span><br><span class="line">			long jk&#x3D; System.currentTimeMillis();</span><br><span class="line">			System.out.println(&quot;使用Statement插入数据的时间是：&quot;+(jk-dk));</span><br><span class="line">			long jkk&#x3D; System.currentTimeMillis();</span><br><span class="line">			for (int i &#x3D; 0; i &lt;10000; i++) &#123;</span><br><span class="line">				ps.setString(1,&quot;英雄&quot;);</span><br><span class="line">				ps.setLong(2,122);</span><br><span class="line">				ps.setInt(3,50);</span><br><span class="line">			&#125;</span><br><span class="line">			long dkk&#x3D; System.currentTimeMillis();</span><br><span class="line">			System.out.println(&quot;使用PreparedStatement插入数据的时间是：&quot;+(dkk-jkk));</span><br><span class="line">		&#125; catch (SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">    </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">    </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		quiter();</span><br><span class="line">	&#125;</span><br><span class="line">	public static void quiter()&#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">		&#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		String sqll&#x3D;&quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">		try(Connection connection &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">				Statement statement&#x3D;connection.createStatement();</span><br><span class="line">				PreparedStatement ps&#x3D;connection.prepareStatement(sqll)</span><br><span class="line">				)&#123;</span><br><span class="line">			System.out.println(&quot;获取到statement对象&quot;+statement);</span><br><span class="line">			long dk&#x3D; System.currentTimeMillis();</span><br><span class="line">			for (int i &#x3D; 0; i &lt; 10000; i++) &#123;</span><br><span class="line">				String sql&#x3D;&quot;insert into hero values(null,name&#x3D;&#39;英雄&#39;,122,50)&quot;;</span><br><span class="line">				statement.execute(sql);</span><br><span class="line">			&#125;</span><br><span class="line">			long jk&#x3D; System.currentTimeMillis();</span><br><span class="line">			System.out.println(&quot;使用Statement插入数据的时间是：&quot;+(jk-dk));</span><br><span class="line">			long jkk&#x3D; System.currentTimeMillis();</span><br><span class="line">			for (int i &#x3D; 0; i &lt;10000; i++) &#123;</span><br><span class="line">				ps.setString(1,&quot;英雄&quot;);</span><br><span class="line">				ps.setLong(2,122);</span><br><span class="line">				ps.setInt(3,50);</span><br><span class="line">			&#125;</span><br><span class="line">			long dkk&#x3D; System.currentTimeMillis();</span><br><span class="line">			System.out.println(&quot;使用PreparedStatement插入数据的时间是：&quot;+(dkk-jkk));</span><br><span class="line">		&#125; catch (SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">获取到statement对象com.mysql.cj.jdbc.StatementImpl@2ef9b8bc</span><br><span class="line">使用Statement插入数据的时间是：1305025</span><br><span class="line">使用PreparedStatement插入数据的时间是：46</span><br></pre></td></tr></table></figure>
<h2 id="6、EXECUTE与EXECUTEUPDATE的区别"><a class="header-anchor" href="#6、EXECUTE与EXECUTEUPDATE的区别">¶</a>6、EXECUTE与EXECUTEUPDATE的区别</h2>
<h3 id="步骤-1-相同点"><a class="header-anchor" href="#步骤-1-相同点">¶</a>步骤 1 : 相同点</h3>
<p><strong>execute</strong>与<strong>executeUpdate</strong>的相同点：都可以执行增加，删除，修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line"> </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"> </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sqlInsert &#x3D; &quot;insert into Hero values (null,&#39;盖伦&#39;,616,100)&quot;;</span><br><span class="line">            String sqlDelete &#x3D; &quot;delete from Hero where id &#x3D; 100&quot;;</span><br><span class="line">            String sqlUpdate &#x3D; &quot;update Hero set hp &#x3D; 300 where id &#x3D; 100&quot;;</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; 相同点：都可以执行增加，删除，修改</span><br><span class="line"> </span><br><span class="line">            s.execute(sqlInsert);</span><br><span class="line">            s.execute(sqlDelete);</span><br><span class="line">            s.execute(sqlUpdate);</span><br><span class="line">            s.executeUpdate(sqlInsert);</span><br><span class="line">            s.executeUpdate(sqlDelete);</span><br><span class="line">            s.executeUpdate(sqlUpdate);</span><br><span class="line"> </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line"> </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"> </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sqlInsert &#x3D; &quot;insert into Hero values (null,&#39;盖伦&#39;,616,100)&quot;;</span><br><span class="line">            String sqlDelete &#x3D; &quot;delete from Hero where id &#x3D; 100&quot;;</span><br><span class="line">            String sqlUpdate &#x3D; &quot;update Hero set hp &#x3D; 300 where id &#x3D; 100&quot;;</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; 相同点：都可以执行增加，删除，修改</span><br><span class="line"> </span><br><span class="line">            s.execute(sqlInsert);</span><br><span class="line">            s.execute(sqlDelete);</span><br><span class="line">            s.execute(sqlUpdate);</span><br><span class="line">            s.executeUpdate(sqlInsert);</span><br><span class="line">            s.executeUpdate(sqlDelete);</span><br><span class="line">            s.executeUpdate(sqlUpdate);</span><br><span class="line"> </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-不同点"><a class="header-anchor" href="#步骤-2-不同点">¶</a>步骤 2 : 不同点</h3>
<p>不同1：<br>
execute<strong>可以执行查询语句</strong><br>
然后通过getResultSet，把结果集取出来<br>
executeUpdate<strong>不能执行查询语句</strong><br>
不同2:<br>
execute<strong>返回boolean类型</strong>，true表示执行的是查询语句，false表示执行的是insert,delete,update等等<br>
executeUpdate<strong>返回的是int</strong>，表示有多少条数据受到了影响</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 不同1：execute可以执行查询语句</span><br><span class="line">            &#x2F;&#x2F; 然后通过getResultSet，把结果集取出来</span><br><span class="line">            String sqlSelect &#x3D; &quot;select * from hero&quot;;</span><br><span class="line">  </span><br><span class="line">            s.execute(sqlSelect);</span><br><span class="line">            ResultSet rs &#x3D; s.getResultSet();</span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                System.out.println(rs.getInt(&quot;id&quot;));</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; executeUpdate不能执行查询语句</span><br><span class="line">            &#x2F;&#x2F; s.executeUpdate(sqlSelect);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 不同2:</span><br><span class="line">            &#x2F;&#x2F; execute返回boolean类型，true表示执行的是查询语句，false表示执行的是insert,delete,update等等</span><br><span class="line">            boolean isSelect &#x3D; s.execute(sqlSelect);</span><br><span class="line">            System.out.println(isSelect);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; executeUpdate返回的是int，表示有多少条数据受到了影响</span><br><span class="line">            String sqlUpdate &#x3D; &quot;update Hero set hp &#x3D; 300 where id &lt; 100&quot;;</span><br><span class="line">            int number &#x3D; s.executeUpdate(sqlUpdate);</span><br><span class="line">            System.out.println(number);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 不同1：execute可以执行查询语句</span><br><span class="line">            &#x2F;&#x2F; 然后通过getResultSet，把结果集取出来</span><br><span class="line">            String sqlSelect &#x3D; &quot;select * from hero&quot;;</span><br><span class="line">  </span><br><span class="line">            s.execute(sqlSelect);</span><br><span class="line">            ResultSet rs &#x3D; s.getResultSet();</span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                System.out.println(rs.getInt(&quot;id&quot;));</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; executeUpdate不能执行查询语句</span><br><span class="line">            &#x2F;&#x2F; s.executeUpdate(sqlSelect);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 不同2:</span><br><span class="line">            &#x2F;&#x2F; execute返回boolean类型，true表示执行的是查询语句，false表示执行的是insert,delete,update等等</span><br><span class="line">            boolean isSelect &#x3D; s.execute(sqlSelect);</span><br><span class="line">            System.out.println(isSelect);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; executeUpdate返回的是int，表示有多少条数据受到了影响</span><br><span class="line">            String sqlUpdate &#x3D; &quot;update Hero set hp &#x3D; 300 where id &lt; 100&quot;;</span><br><span class="line">            int number &#x3D; s.executeUpdate(sqlUpdate);</span><br><span class="line">            System.out.println(number);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-分页查询"><a class="header-anchor" href="#步骤-3-练习-分页查询">¶</a>步骤 3 : 练习-分页查询</h3>
<p>使用execute方式，而不是executeQuery方式完成练习 [练习-分页查询]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line"> </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"> </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void search(int start,int count)&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">            System.out.println(&quot;载入驱动&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        try &#123;</span><br><span class="line">            Connection c&#x3D;DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">            System.out.println(&quot;建立连接&quot;);</span><br><span class="line">            Statement s&#x3D;c.createStatement();</span><br><span class="line">            String sql&#x3D;&quot;select *from hero limit &quot;+(start-1)*count+&#39;,&#39;+count+&quot;  &quot;;</span><br><span class="line">            s.execute(sql);</span><br><span class="line">            ResultSet rs&#x3D;s.getResultSet();     </span><br><span class="line">            while(rs.next())&#123;</span><br><span class="line">                int id&#x3D;rs.getInt(1);</span><br><span class="line">                String name&#x3D;rs.getString(2);</span><br><span class="line">                float hp&#x3D;rs.getFloat(3);</span><br><span class="line">                int damage&#x3D;rs.getInt(4);</span><br><span class="line">                System.out.printf(&quot;%d,%s,%f,%d%n&quot;,id,name,hp,damage);</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        search(4,5);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7、获取自增长ID以及表的元数据"><a class="header-anchor" href="#7、获取自增长ID以及表的元数据">¶</a>7、获取自增长ID以及表的元数据</h2>
<h3 id="步骤-1-获取自增长id"><a class="header-anchor" href="#步骤-1-获取自增长id">¶</a>步骤 1 : 获取自增长id</h3>
<p>在Statement通过execute或者executeUpdate执行完插入语句后，MySQL会为新插入的数据分配一个自增长id，(前提是这个表的id设置为了自增长,在Mysql创建表的时候，AUTO_INCREMENT就表示自增长)</p>
<p>CREATE TABLE hero (</p>
<p>id int(11) AUTO_INCREMENT,</p>
<p>…</p>
<p>}</p>
<p>但是无论是execute还是executeUpdate都不会返回这个自增长id是多少。需要通过<strong>Statement</strong>的<strong>getGeneratedKeys</strong>获取该id<br>
<strong>注：</strong> 第20行的代码，后面加了个<strong>Statement.RETURN_GENERATED_KEYS</strong>参数，以确保会返回自增长ID。 通常情况下不需要加这个，有的时候需要加，所以先加上，保险一些</p>
<p>PreparedStatement ps = c.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">   </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">   </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         String sql &#x3D; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">                PreparedStatement ps &#x3D; c.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);          </span><br><span class="line">                ) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setString(1, &quot;盖伦&quot;);</span><br><span class="line">            ps.setFloat(2, 616);</span><br><span class="line">            ps.setInt(3, 100);</span><br><span class="line">   </span><br><span class="line">            &#x2F;&#x2F; 执行插入语句</span><br><span class="line">            ps.execute();</span><br><span class="line">   </span><br><span class="line">            &#x2F;&#x2F; 在执行完插入语句后，MySQL会为新插入的数据分配一个自增长id</span><br><span class="line">            &#x2F;&#x2F; JDBC通过getGeneratedKeys获取该id</span><br><span class="line">            ResultSet rs &#x3D; ps.getGeneratedKeys();</span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">                int id &#x3D; rs.getInt(1);</span><br><span class="line">                System.out.println(id);</span><br><span class="line">            &#125;</span><br><span class="line">   </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">   </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">   </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         String sql &#x3D; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">                PreparedStatement ps &#x3D; c.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);          </span><br><span class="line">                ) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setString(1, &quot;盖伦&quot;);</span><br><span class="line">            ps.setFloat(2, 616);</span><br><span class="line">            ps.setInt(3, 100);</span><br><span class="line">   </span><br><span class="line">            &#x2F;&#x2F; 执行插入语句</span><br><span class="line">            ps.execute();</span><br><span class="line">   </span><br><span class="line">            &#x2F;&#x2F; 在执行完插入语句后，MySQL会为新插入的数据分配一个自增长id</span><br><span class="line">            &#x2F;&#x2F; JDBC通过getGeneratedKeys获取该id</span><br><span class="line">            ResultSet rs &#x3D; ps.getGeneratedKeys();</span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">                int id &#x3D; rs.getInt(1);</span><br><span class="line">                System.out.println(id);</span><br><span class="line">            &#125;</span><br><span class="line">   </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-获取表的元数据"><a class="header-anchor" href="#步骤-2-获取表的元数据">¶</a>步骤 2 : 获取表的元数据</h3>
<p>元数据概念：<br>
和数据库服务器相关的数据，比如数据库版本，有哪些表，表有哪些字段，字段类型是什么等等。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/878.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DatabaseMetaData;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);) &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 查看数据库层面的元数据</span><br><span class="line">            &#x2F;&#x2F; 即数据库服务器版本，驱动版本，都有哪些数据库等等</span><br><span class="line">  </span><br><span class="line">            DatabaseMetaData dbmd &#x3D; c.getMetaData();</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 获取数据库服务器产品名称</span><br><span class="line">            System.out.println(&quot;数据库产品名称:\t&quot;+dbmd.getDatabaseProductName());</span><br><span class="line">            &#x2F;&#x2F; 获取数据库服务器产品版本号</span><br><span class="line">            System.out.println(&quot;数据库产品版本:\t&quot;+dbmd.getDatabaseProductVersion());</span><br><span class="line">            &#x2F;&#x2F; 获取数据库服务器用作类别和表名之间的分隔符 如test.user</span><br><span class="line">            System.out.println(&quot;数据库和表分隔符:\t&quot;+dbmd.getCatalogSeparator());</span><br><span class="line">            &#x2F;&#x2F; 获取驱动版本</span><br><span class="line">            System.out.println(&quot;驱动版本:\t&quot;+dbmd.getDriverVersion());</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;可用的数据库列表：&quot;);</span><br><span class="line">            &#x2F;&#x2F; 获取数据库名称</span><br><span class="line">            ResultSet rs &#x3D; dbmd.getCatalogs();</span><br><span class="line">  </span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                System.out.println(&quot;数据库名称:\t&quot;+rs.getString(1));</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DatabaseMetaData;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);) &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 查看数据库层面的元数据</span><br><span class="line">            &#x2F;&#x2F; 即数据库服务器版本，驱动版本，都有哪些数据库等等</span><br><span class="line">  </span><br><span class="line">            DatabaseMetaData dbmd &#x3D; c.getMetaData();</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 获取数据库服务器产品名称</span><br><span class="line">            System.out.println(&quot;数据库产品名称:\t&quot;+dbmd.getDatabaseProductName());</span><br><span class="line">            &#x2F;&#x2F; 获取数据库服务器产品版本号</span><br><span class="line">            System.out.println(&quot;数据库产品版本:\t&quot;+dbmd.getDatabaseProductVersion());</span><br><span class="line">            &#x2F;&#x2F; 获取数据库服务器用作类别和表名之间的分隔符 如test.user</span><br><span class="line">            System.out.println(&quot;数据库和表分隔符:\t&quot;+dbmd.getCatalogSeparator());</span><br><span class="line">            &#x2F;&#x2F; 获取驱动版本</span><br><span class="line">            System.out.println(&quot;驱动版本:\t&quot;+dbmd.getDriverVersion());</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;可用的数据库列表：&quot;);</span><br><span class="line">            &#x2F;&#x2F; 获取数据库名称</span><br><span class="line">            ResultSet rs &#x3D; dbmd.getCatalogs();</span><br><span class="line">  </span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                System.out.println(&quot;数据库名称:\t&quot;+rs.getString(1));</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-自增长id"><a class="header-anchor" href="#步骤-3-练习-自增长id">¶</a>步骤 3 : 练习-自增长id</h3>
<p>当插入一条数据之后，通过获取自增长id，得到这条数据的id，比如说是55.</p>
<p>删除这条数据的前一条，54.</p>
<p>如果54不存在，则删除53，以此类推直到删除上一条数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">   </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">   </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         String sql &#x3D; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">                PreparedStatement ps &#x3D; c.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);          </span><br><span class="line">        		Statement s&#x3D;c.createStatement();</span><br><span class="line">        		) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setString(1, &quot;盖伦&quot;);</span><br><span class="line">            ps.setFloat(2, 616);</span><br><span class="line">            ps.setInt(3, 100);</span><br><span class="line">   </span><br><span class="line">            &#x2F;&#x2F; 执行插入语句</span><br><span class="line">            ps.execute();</span><br><span class="line">   </span><br><span class="line">            &#x2F;&#x2F; 在执行完插入语句后，MySQL会为新插入的数据分配一个自增长id</span><br><span class="line">            &#x2F;&#x2F; JDBC通过getGeneratedKeys获取该id</span><br><span class="line">            ResultSet rs &#x3D; ps.getGeneratedKeys();</span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">            	</span><br><span class="line">                int id &#x3D; rs.getInt(1);</span><br><span class="line">                System.out.println(id);</span><br><span class="line">                </span><br><span class="line">                for (int i &#x3D; 0; i &lt; id; i++) &#123;</span><br><span class="line">                    String sqlSelect&#x3D;&quot;select*from hero where id&#x3D;&quot;+(id-1-i)+&quot;&quot;;</span><br><span class="line">                    String sqlDelete&#x3D;&quot;delete from hero where id&#x3D;&quot;+(id-1-i)+&quot;&quot;;</span><br><span class="line">                    rs&#x3D;s.executeQuery(sqlSelect);</span><br><span class="line">                    if(rs.next())&#123;</span><br><span class="line">                        s.execute(sqlDelete);</span><br><span class="line">                        System.out.println(&quot;删除成功&quot;);</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">   </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8、如何在JDBC中使用事务"><a class="header-anchor" href="#8、如何在JDBC中使用事务">¶</a>8、如何在JDBC中使用事务</h2>
<h3 id="步骤-1-不使用事务的情况"><a class="header-anchor" href="#步骤-1-不使用事务的情况">¶</a>步骤 1 : 不使用事务的情况</h3>
<p><strong>没有事务的前提下</strong><br>
假设业务操作是：加血，减血各做一次<br>
结束后，英雄的血量不变<br>
而减血的SQL<br>
不小心写错写成了 updat<strong>a</strong>(而非update)<br>
那么最后结果是血量增加了，而非期望的不变</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F;没有事务的前提下</span><br><span class="line">            &#x2F;&#x2F;假设业务操作时，加血，减血各做一次</span><br><span class="line">            &#x2F;&#x2F;结束后，英雄的血量不变</span><br><span class="line">              </span><br><span class="line">            &#x2F;&#x2F;加血的SQL</span><br><span class="line">            String sql1 &#x3D; &quot;update hero set hp &#x3D; hp +1 where id &#x3D; 22&quot;;</span><br><span class="line">            s.execute(sql1);</span><br><span class="line">              </span><br><span class="line">            &#x2F;&#x2F;减血的SQL</span><br><span class="line">            &#x2F;&#x2F;不小心写错写成了 updata(而非update)</span><br><span class="line">              </span><br><span class="line">            String sql2 &#x3D; &quot;updata hero set hp &#x3D; hp -1 where id &#x3D; 22&quot;;</span><br><span class="line">            s.execute(sql2);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F;没有事务的前提下</span><br><span class="line">            &#x2F;&#x2F;假设业务操作时，加血，减血各做一次</span><br><span class="line">            &#x2F;&#x2F;结束后，英雄的血量不变</span><br><span class="line">              </span><br><span class="line">            &#x2F;&#x2F;加血的SQL</span><br><span class="line">            String sql1 &#x3D; &quot;update hero set hp &#x3D; hp +1 where id &#x3D; 22&quot;;</span><br><span class="line">            s.execute(sql1);</span><br><span class="line">              </span><br><span class="line">            &#x2F;&#x2F;减血的SQL</span><br><span class="line">            &#x2F;&#x2F;不小心写错写成了 updata(而非update)</span><br><span class="line">              </span><br><span class="line">            String sql2 &#x3D; &quot;updata hero set hp &#x3D; hp -1 where id &#x3D; 22&quot;;</span><br><span class="line">            s.execute(sql2);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-使用事务"><a class="header-anchor" href="#步骤-2-使用事务">¶</a>步骤 2 : 使用事务</h3>
<p>在事务中的多个操作，<strong>要么都成功，要么都失败</strong><br>
通过 c.setAutoCommit(false);<strong>关闭自动提交</strong><br>
使用 c.commit();进行<strong>手动提交</strong><br>
在22行-35行之间的数据库操作，就处于同一个事务当中，要么都成功，要么都失败<br>
所以，虽然第一条SQL语句是可以执行的，但是第二条SQL语句有错误，其结果就是两条SQL语句<strong>都没有被提交</strong>。 除非两条SQL语句都是正确的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 有事务的前提下</span><br><span class="line">            &#x2F;&#x2F; 在事务中的多个操作，要么都成功，要么都失败</span><br><span class="line">  </span><br><span class="line">            c.setAutoCommit(false);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 加血的SQL</span><br><span class="line">            String sql1 &#x3D; &quot;update hero set hp &#x3D; hp +1 where id &#x3D; 22&quot;;</span><br><span class="line">            s.execute(sql1);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 减血的SQL</span><br><span class="line">            &#x2F;&#x2F; 不小心写错写成了 updata(而非update)</span><br><span class="line">  </span><br><span class="line">            String sql2 &#x3D; &quot;updata hero set hp &#x3D; hp -1 where id &#x3D; 22&quot;;</span><br><span class="line">            s.execute(sql2);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 手动提交</span><br><span class="line">            c.commit();</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 有事务的前提下</span><br><span class="line">            &#x2F;&#x2F; 在事务中的多个操作，要么都成功，要么都失败</span><br><span class="line">  </span><br><span class="line">            c.setAutoCommit(false);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 加血的SQL</span><br><span class="line">            String sql1 &#x3D; &quot;update hero set hp &#x3D; hp +1 where id &#x3D; 22&quot;;</span><br><span class="line">            s.execute(sql1);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 减血的SQL</span><br><span class="line">            &#x2F;&#x2F; 不小心写错写成了 updata(而非update)</span><br><span class="line">  </span><br><span class="line">            String sql2 &#x3D; &quot;updata hero set hp &#x3D; hp -1 where id &#x3D; 22&quot;;</span><br><span class="line">            s.execute(sql2);</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 手动提交</span><br><span class="line">            c.commit();</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-MYSQL-表的类型必须是INNODB才支持事务"><a class="header-anchor" href="#步骤-3-MYSQL-表的类型必须是INNODB才支持事务">¶</a>步骤 3 : MYSQL 表的类型必须是INNODB才支持事务</h3>
<p>在Mysql中，只有当表的类型是INNODB的时候，才支持事务，所以需要把表的类型设置为INNODB,否则无法观察到事务.</p>
<p>修改表的类型为INNODB的SQL：</p>
<p>alter table hero ENGINE  = innodb;</p>
<p>查看表的类型的SQL</p>
<p>show table status from how2java;</p>
<p>不过有个前提，就是当前的MYSQL服务器本身要支持INNODB,如果不支持，请看 [开启MYSQL INNODB的办法]</p>
<h3 id="步骤-4-练习-事务"><a class="header-anchor" href="#步骤-4-练习-事务">¶</a>步骤 4 : 练习-事务</h3>
<p>当**c.setAutoCommit(false);**时，事务是不会提交的<br>
只有执行使用 <strong>c.commit();</strong> 才会提交进行</p>
<p>设计一个代码，删除表中<strong>前10条数据</strong>，但是删除前会在控制台弹出一个提示：<br>
是否要删除数据(<strong>Y/N</strong>)<br>
如果用户输入<strong>Y</strong>，则删除<br>
如果输入<strong>N</strong>则不删除。<br>
如果输入的既不是Y也不是N，则重复提示</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2650.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line"> </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"> </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        try &#123;</span><br><span class="line">            Connection c&#x3D;DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">            Statement s&#x3D;c.createStatement();</span><br><span class="line">            String sql&#x3D;&quot;select*from hero limit 0,10&quot;;</span><br><span class="line">            ResultSet rs&#x3D;s.executeQuery(sql);</span><br><span class="line">            int id&#x3D;0;</span><br><span class="line">            ArrayList&lt;Integer&gt; al&#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">            while(rs.next())&#123;</span><br><span class="line">                id&#x3D;rs.getInt(1);</span><br><span class="line">                System.out.println(&quot;试图删除id&#x3D;&quot;+id+&quot;的数据&quot;);</span><br><span class="line">                al.add(id);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;是否删除前十个数据?(y&#x2F;n)&quot;);</span><br><span class="line">            Scanner scan&#x3D;new Scanner(System.in);</span><br><span class="line">            String yesORno&#x3D;scan.next();</span><br><span class="line">            if(yesORno.equals(&quot;y&quot;))&#123;</span><br><span class="line">                System.out.println(&quot;提交删除&quot;);</span><br><span class="line">                c.setAutoCommit(yesORno.equals(&quot;y&quot;));          </span><br><span class="line">                for (Integer integer : al) &#123;</span><br><span class="line">                    String sqlDelete&#x3D;&quot;delete from hero where id&#x3D;&quot;+integer+&quot;&quot;;</span><br><span class="line">                    s.execute(sqlDelete);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(&quot;删除成功&quot;);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                System.out.println(&quot;不进行删除操作&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            scan.close();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9、使用JDBC做一个ORM例子"><a class="header-anchor" href="#9、使用JDBC做一个ORM例子">¶</a>9、使用JDBC做一个ORM例子</h2>
<p>ORM=Object Relationship Database Mapping</p>
<p>对象和关系数据库的映射</p>
<p>简单说，<strong>一个对象</strong>，对应数据库里的<strong>一条记录</strong></p>
<h3 id="步骤-1-根据id返回一个Hero对象"><a class="header-anchor" href="#步骤-1-根据id返回一个Hero对象">¶</a>步骤 1 : 根据id返回一个Hero对象</h3>
<p>提供方法get(int id)<br>
返回一个Hero对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package charactor;</span><br><span class="line"> </span><br><span class="line">public class Hero &#123;</span><br><span class="line">    &#x2F;&#x2F;增加id属性</span><br><span class="line">    public int id;</span><br><span class="line">    public String name;</span><br><span class="line">    public float hp;</span><br><span class="line">    public int damage;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">   </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">   </span><br><span class="line">    public static Hero get(int id) &#123;</span><br><span class="line">        Hero hero &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;,&quot;root&quot;, &quot;admin&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql &#x3D; &quot;select * from hero where id &#x3D; &quot; + id;</span><br><span class="line">   </span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">   </span><br><span class="line">            &#x2F;&#x2F; 因为id是唯一的，ResultSet最多只能有一条记录</span><br><span class="line">            &#x2F;&#x2F; 所以使用if代替while</span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">                hero &#x3D; new Hero();</span><br><span class="line">                String name &#x3D; rs.getString(2);</span><br><span class="line">                float hp &#x3D; rs.getFloat(&quot;hp&quot;);</span><br><span class="line">                int damage &#x3D; rs.getInt(4);</span><br><span class="line">                hero.name &#x3D; name;</span><br><span class="line">                hero.hp &#x3D; hp;</span><br><span class="line">                hero.damage &#x3D; damage;</span><br><span class="line">                hero.id &#x3D; id;</span><br><span class="line">            &#125;</span><br><span class="line">   </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return hero;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">           </span><br><span class="line">        Hero h &#x3D; get(22);</span><br><span class="line">        System.out.println(h.name);</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">   </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">   </span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">   </span><br><span class="line">    public static Hero get(int id) &#123;</span><br><span class="line">        Hero hero &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;885400&quot;);</span><br><span class="line">            Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line"> </span><br><span class="line">            String sql &#x3D; &quot;select * from hero where id &#x3D; &quot; + id;</span><br><span class="line">   </span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">   </span><br><span class="line">            &#x2F;&#x2F; 因为id是唯一的，ResultSet最多只能有一条记录</span><br><span class="line">            &#x2F;&#x2F; 所以使用if代替while</span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">                hero &#x3D; new Hero();</span><br><span class="line">                String name &#x3D; rs.getString(2);</span><br><span class="line">                float hp &#x3D; rs.getFloat(&quot;hp&quot;);</span><br><span class="line">                int damage &#x3D; rs.getInt(4);</span><br><span class="line">                hero.name &#x3D; name;</span><br><span class="line">                hero.hp &#x3D; hp;</span><br><span class="line">                hero.damage &#x3D; damage;</span><br><span class="line">                hero.id &#x3D; id;</span><br><span class="line">            &#125;</span><br><span class="line">   </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return hero;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">           </span><br><span class="line">        Hero h &#x3D; get(22);</span><br><span class="line">        System.out.println(h.name);</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-ORM"><a class="header-anchor" href="#步骤-2-练习-ORM">¶</a>步骤 2 : 练习-ORM</h3>
<p>根据ORM的思想，设计其他几个常见的ORM方法：</p>
<p>把一个Hero对象插入到数据库中</p>
<p>public static void add(Hero h)</p>
<p>把这个Hero对象对应的数据删除掉</p>
<p>public static void delete(Hero h)</p>
<p>更新这条Hero对象</p>
<p>public static void update(Hero h)</p>
<p>把所有的Hero数据查询出来，转换为Hero对象后，放在一个集合中返回</p>
<p>public static List<Hero> list();</Hero></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line"></span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import charactor.Hero;</span><br><span class="line"></span><br><span class="line">public class TestJDBC &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Hero&gt; list&#x3D;null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">		&#125;catch(ClassNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		list&#x3D;list();</span><br><span class="line">		System.out.printf(&quot;数据库中总共有%d条数据%n&quot;,list.size());</span><br><span class="line">		Hero h&#x3D;new Hero(401,&quot;女警&quot;,430.0f,60);</span><br><span class="line">		add(h);</span><br><span class="line">		System.out.println(&quot;添加一条数据&quot;);</span><br><span class="line">		list&#x3D;list();</span><br><span class="line">		System.out.printf(&quot;数据库中总共有%d条数据%n&quot;,list.size());</span><br><span class="line">		System.out.printf(&quot;取出id&#x3D;%d的数据，它的name&#x3D;%s%n&quot;,h.id,h.name);</span><br><span class="line">		Hero h1&#x3D;new Hero(404,&quot;凤凰&quot;,430.0f,60);</span><br><span class="line">		System.out.printf(&quot;把名字改为%s，并且更新到数据库%n&quot;,h1.name);</span><br><span class="line">		update(h1);</span><br><span class="line">		System.out.printf(&quot;取出id&#x3D;%d的数据，它的name&#x3D;%s%n&quot;,h1.id,h1.name);</span><br><span class="line">		delete(h1);</span><br><span class="line">		list&#x3D;list();</span><br><span class="line">		System.out.printf(&quot;数据库中总共有%d条数据%n&quot;,list.size());</span><br><span class="line">	&#125;</span><br><span class="line">	public static void add(Hero h)&#123;</span><br><span class="line">		try(</span><br><span class="line">				Connection c&#x3D;DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">				)&#123;</span><br><span class="line">			String sql&#x3D;&quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">			PreparedStatement ps&#x3D;c.prepareStatement(sql);</span><br><span class="line">			c.setAutoCommit(false);</span><br><span class="line">			ps.setString(1,h.name);</span><br><span class="line">			ps.setFloat(2,h.hp);</span><br><span class="line">			ps.setInt(3,h.damage);</span><br><span class="line">			ps.execute();</span><br><span class="line">			c.commit();</span><br><span class="line">			System.out.println(&quot;插入成功&quot;);</span><br><span class="line">		&#125;catch(SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	public static void delete(Hero h) &#123;</span><br><span class="line">		try(</span><br><span class="line">				Connection c&#x3D;DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">				)&#123;</span><br><span class="line">			String sql&#x3D;&quot;delete from hero where id&#x3D;&quot;+h.id;</span><br><span class="line">			c.setAutoCommit(false);</span><br><span class="line">			Statement s&#x3D;c.createStatement();</span><br><span class="line">			int bl&#x3D;s.executeUpdate(sql);</span><br><span class="line">			c.commit();</span><br><span class="line">			if(bl&#x3D;&#x3D;0) &#123;</span><br><span class="line">				System.out.println(&quot;删除失败，未找到该条数据&quot;);</span><br><span class="line">			&#125;else &#123;</span><br><span class="line">				System.out.println(&quot;删除成功&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;catch(SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	public static void update(Hero h) &#123;</span><br><span class="line">		try(</span><br><span class="line">				Connection c&#x3D;DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">				)&#123;</span><br><span class="line">			String sql&#x3D; &quot;update hero set name &#x3D; ? , hp &#x3D; ? , damage &#x3D; ? where id &#x3D; ?&quot;;</span><br><span class="line">			PreparedStatement ps&#x3D;c.prepareStatement(sql);</span><br><span class="line">			c.setAutoCommit(false);</span><br><span class="line">			ps.setString(1,h.name);</span><br><span class="line">			ps.setFloat(2,h.hp);</span><br><span class="line">			ps.setInt(3,h.damage);</span><br><span class="line">			ps.setInt(4,h.id);</span><br><span class="line">			int bl&#x3D;ps.executeUpdate();</span><br><span class="line">			c.commit();</span><br><span class="line">			if(bl&#x3D;&#x3D;0) &#123;</span><br><span class="line">				System.out.println(&quot;修改失败，未找到该条数据&quot;);</span><br><span class="line">			&#125;else &#123;</span><br><span class="line">				System.out.println(&quot;修改成功&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;catch(SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">		public static List&lt;Hero&gt; list()&#123;</span><br><span class="line">			List&lt;Hero&gt; list&#x3D;new ArrayList&lt;Hero&gt;();</span><br><span class="line">			try(</span><br><span class="line">					Connection c&#x3D;DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">					)&#123;</span><br><span class="line">				String sql&#x3D;&quot;select * from hero&quot;;</span><br><span class="line">				Statement s&#x3D;c.createStatement();</span><br><span class="line">				c.setAutoCommit(false);</span><br><span class="line">				s.execute(sql);</span><br><span class="line">				ResultSet rs&#x3D;s.getResultSet();</span><br><span class="line">				while(rs.next()) &#123;</span><br><span class="line">					Hero h&#x3D;new Hero();</span><br><span class="line">					h.id&#x3D;rs.getInt(&quot;id&quot;);</span><br><span class="line">					h.name&#x3D;rs.getString(&quot;name&quot;);</span><br><span class="line">					h.hp&#x3D;rs.getFloat(&quot;hp&quot;);</span><br><span class="line">					h.damage&#x3D;rs.getInt(&quot;damage&quot;);</span><br><span class="line">					list.add(h);</span><br><span class="line">				&#125;</span><br><span class="line">				c.commit();</span><br><span class="line">			&#125;catch(SQLException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			return list;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10、基于JDBC设计DAO的实例"><a class="header-anchor" href="#10、基于JDBC设计DAO的实例">¶</a>10、基于JDBC设计DAO的实例</h2>
<p>DAO=<strong>D</strong>ata<strong>A</strong>ccess <strong>O</strong>bject</p>
<p>数据访问对象</p>
<p>实际上就是运用了[练习-ORM]中的思路，把数据库相关的操作都封装在这个类里面，其他地方看不到JDBC的代码</p>
<h3 id="步骤-1-DAO接口"><a class="header-anchor" href="#步骤-1-DAO接口">¶</a>步骤 1 : DAO接口</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public interface DAO&#123;</span><br><span class="line">    &#x2F;&#x2F;增加</span><br><span class="line">    public void add(Hero hero);</span><br><span class="line">    &#x2F;&#x2F;修改</span><br><span class="line">    public void update(Hero hero);</span><br><span class="line">    &#x2F;&#x2F;删除</span><br><span class="line">    public void delete(int id);</span><br><span class="line">    &#x2F;&#x2F;获取</span><br><span class="line">    public Hero get(int id);</span><br><span class="line">    &#x2F;&#x2F;查询</span><br><span class="line">    public List&lt;Hero&gt; list();</span><br><span class="line">    &#x2F;&#x2F;分页查询</span><br><span class="line">    public List&lt;Hero&gt; list(int start, int count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-HeroDAO"><a class="header-anchor" href="#步骤-2-HeroDAO">¶</a>步骤 2 : HeroDAO</h3>
<p>设计类HeroDAO，实现接口[DAO]</p>
<p>这个HeroDAO和[答案-ORM]很接近，做了几个改进：</p>
<ol>
<li>把驱动的初始化放在了构造方法HeroDAO里：</li>
</ol>
<p>public HeroDAO() {</p>
<p>​	try {</p>
<p>​		Class.forName(“com.mysql.jdbc.Driver”);</p>
<p>​	} catch (ClassNotFoundException e) {</p>
<p>​		e.printStackTrace();</p>
<p>​	}</p>
<p>}<br>
因为驱动初始化只需要执行一次，所以放在这里更合适，其他方法里也不需要写了，代码更简洁</p>
<ol start="2">
<li>提供了一个getConnection方法返回连接<br>
所有的数据库操作都需要事先拿到一个数据库连接Connection，以前的做法每个方法里都会写一个，如果要改动密码，那么每个地方都需要修改。 通过这种方式，只需要修改这一个地方就可以了。 代码变得更容易维护，而且也更加简洁。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line"> </span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class HeroDAO implements DAO&#123;</span><br><span class="line">  </span><br><span class="line">    public HeroDAO() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public Connection getConnection() throws SQLException &#123;</span><br><span class="line">        return DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?characterEncoding&#x3D;UTF-8&quot;, &quot;root&quot;,</span><br><span class="line">                &quot;admin&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public int getTotal() &#123;</span><br><span class="line">        int total &#x3D; 0;</span><br><span class="line">        try (Connection c &#x3D; getConnection(); Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            String sql &#x3D; &quot;select count(*) from hero&quot;;</span><br><span class="line">  </span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                total &#x3D; rs.getInt(1);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;total:&quot; + total);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return total;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public void add(Hero hero) &#123;</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">        try (Connection c &#x3D; getConnection(); PreparedStatement ps &#x3D; c.prepareStatement(sql);) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setString(1, hero.name);</span><br><span class="line">            ps.setFloat(2, hero.hp);</span><br><span class="line">            ps.setInt(3, hero.damage);</span><br><span class="line">  </span><br><span class="line">            ps.execute();</span><br><span class="line">  </span><br><span class="line">            ResultSet rs &#x3D; ps.getGeneratedKeys();</span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">                int id &#x3D; rs.getInt(1);</span><br><span class="line">                hero.id &#x3D; id;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public void update(Hero hero) &#123;</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;update hero set name&#x3D; ?, hp &#x3D; ? , damage &#x3D; ? where id &#x3D; ?&quot;;</span><br><span class="line">        try (Connection c &#x3D; getConnection(); PreparedStatement ps &#x3D; c.prepareStatement(sql);) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setString(1, hero.name);</span><br><span class="line">            ps.setFloat(2, hero.hp);</span><br><span class="line">            ps.setInt(3, hero.damage);</span><br><span class="line">            ps.setInt(4, hero.id);</span><br><span class="line">  </span><br><span class="line">            ps.execute();</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public void delete(int id) &#123;</span><br><span class="line">  </span><br><span class="line">        try (Connection c &#x3D; getConnection(); Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            String sql &#x3D; &quot;delete from hero where id &#x3D; &quot; + id;</span><br><span class="line">  </span><br><span class="line">            s.execute(sql);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public Hero get(int id) &#123;</span><br><span class="line">        Hero hero &#x3D; null;</span><br><span class="line">  </span><br><span class="line">        try (Connection c &#x3D; getConnection(); Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            String sql &#x3D; &quot;select * from hero where id &#x3D; &quot; + id;</span><br><span class="line">  </span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">  </span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">                hero &#x3D; new Hero();</span><br><span class="line">                String name &#x3D; rs.getString(2);</span><br><span class="line">                float hp &#x3D; rs.getFloat(&quot;hp&quot;);</span><br><span class="line">                int damage &#x3D; rs.getInt(4);</span><br><span class="line">                hero.name &#x3D; name;</span><br><span class="line">                hero.hp &#x3D; hp;</span><br><span class="line">                hero.damage &#x3D; damage;</span><br><span class="line">                hero.id &#x3D; id;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return hero;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public List&lt;Hero&gt; list() &#123;</span><br><span class="line">        return list(0, Short.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public List&lt;Hero&gt; list(int start, int count) &#123;</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;select * from hero order by id desc limit ?,? &quot;;</span><br><span class="line">  </span><br><span class="line">        try (Connection c &#x3D; getConnection(); PreparedStatement ps &#x3D; c.prepareStatement(sql);) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setInt(1, start);</span><br><span class="line">            ps.setInt(2, count);</span><br><span class="line">  </span><br><span class="line">            ResultSet rs &#x3D; ps.executeQuery();</span><br><span class="line">  </span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                Hero hero &#x3D; new Hero();</span><br><span class="line">                int id &#x3D; rs.getInt(1);</span><br><span class="line">                String name &#x3D; rs.getString(2);</span><br><span class="line">                float hp &#x3D; rs.getFloat(&quot;hp&quot;);</span><br><span class="line">                int damage &#x3D; rs.getInt(4);</span><br><span class="line">                hero.id &#x3D; id;</span><br><span class="line">                hero.name &#x3D; name;</span><br><span class="line">                hero.hp &#x3D; hp;</span><br><span class="line">                hero.damage &#x3D; damage;</span><br><span class="line">                heros.add(hero);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return heros;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line"> </span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class HeroDAO implements DAO&#123;</span><br><span class="line">  </span><br><span class="line">    public HeroDAO() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public Connection getConnection() throws SQLException &#123;</span><br><span class="line">        return DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public int getTotal() &#123;</span><br><span class="line">        int total &#x3D; 0;</span><br><span class="line">        try (Connection c &#x3D; getConnection(); Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            String sql &#x3D; &quot;select count(*) from hero&quot;;</span><br><span class="line">  </span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                total &#x3D; rs.getInt(1);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            System.out.println(&quot;total:&quot; + total);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return total;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public void add(Hero hero) &#123;</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">        try (Connection c &#x3D; getConnection(); PreparedStatement ps &#x3D; c.prepareStatement(sql);) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setString(1, hero.name);</span><br><span class="line">            ps.setFloat(2, hero.hp);</span><br><span class="line">            ps.setInt(3, hero.damage);</span><br><span class="line">  </span><br><span class="line">            ps.execute();</span><br><span class="line">  </span><br><span class="line">            ResultSet rs &#x3D; ps.getGeneratedKeys();</span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">                int id &#x3D; rs.getInt(1);</span><br><span class="line">                hero.id &#x3D; id;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public void update(Hero hero) &#123;</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;update hero set name&#x3D; ?, hp &#x3D; ? , damage &#x3D; ? where id &#x3D; ?&quot;;</span><br><span class="line">        try (Connection c &#x3D; getConnection(); PreparedStatement ps &#x3D; c.prepareStatement(sql);) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setString(1, hero.name);</span><br><span class="line">            ps.setFloat(2, hero.hp);</span><br><span class="line">            ps.setInt(3, hero.damage);</span><br><span class="line">            ps.setInt(4, hero.id);</span><br><span class="line">  </span><br><span class="line">            ps.execute();</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public void delete(int id) &#123;</span><br><span class="line">  </span><br><span class="line">        try (Connection c &#x3D; getConnection(); Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            String sql &#x3D; &quot;delete from hero where id &#x3D; &quot; + id;</span><br><span class="line">  </span><br><span class="line">            s.execute(sql);</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public Hero get(int id) &#123;</span><br><span class="line">        Hero hero &#x3D; null;</span><br><span class="line">  </span><br><span class="line">        try (Connection c &#x3D; getConnection(); Statement s &#x3D; c.createStatement();) &#123;</span><br><span class="line">  </span><br><span class="line">            String sql &#x3D; &quot;select * from hero where id &#x3D; &quot; + id;</span><br><span class="line">  </span><br><span class="line">            ResultSet rs &#x3D; s.executeQuery(sql);</span><br><span class="line">  </span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">                hero &#x3D; new Hero();</span><br><span class="line">                String name &#x3D; rs.getString(2);</span><br><span class="line">                float hp &#x3D; rs.getFloat(&quot;hp&quot;);</span><br><span class="line">                int damage &#x3D; rs.getInt(4);</span><br><span class="line">                hero.name &#x3D; name;</span><br><span class="line">                hero.hp &#x3D; hp;</span><br><span class="line">                hero.damage &#x3D; damage;</span><br><span class="line">                hero.id &#x3D; id;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return hero;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public List&lt;Hero&gt; list() &#123;</span><br><span class="line">        return list(0, Short.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    public List&lt;Hero&gt; list(int start, int count) &#123;</span><br><span class="line">        List&lt;Hero&gt; heros &#x3D; new ArrayList&lt;Hero&gt;();</span><br><span class="line">  </span><br><span class="line">        String sql &#x3D; &quot;select * from hero order by id desc limit ?,? &quot;;</span><br><span class="line">  </span><br><span class="line">        try (Connection c &#x3D; getConnection(); PreparedStatement ps &#x3D; c.prepareStatement(sql);) &#123;</span><br><span class="line">  </span><br><span class="line">            ps.setInt(1, start);</span><br><span class="line">            ps.setInt(2, count);</span><br><span class="line">  </span><br><span class="line">            ResultSet rs &#x3D; ps.executeQuery();</span><br><span class="line">  </span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                Hero hero &#x3D; new Hero();</span><br><span class="line">                int id &#x3D; rs.getInt(1);</span><br><span class="line">                String name &#x3D; rs.getString(2);</span><br><span class="line">                float hp &#x3D; rs.getFloat(&quot;hp&quot;);</span><br><span class="line">                int damage &#x3D; rs.getInt(4);</span><br><span class="line">                hero.id &#x3D; id;</span><br><span class="line">                hero.name &#x3D; name;</span><br><span class="line">                hero.hp &#x3D; hp;</span><br><span class="line">                hero.damage &#x3D; damage;</span><br><span class="line">                heros.add(hero);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">  </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return heros;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-ItemDAO"><a class="header-anchor" href="#步骤-3-练习-ItemDAO">¶</a>步骤 3 : 练习-ItemDAO</h3>
<p>设计一个ItemDAO，实现了DAO接口，提供相应的功能实现Item类的ORM</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line"> </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import property.Item;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">public class ItemDAO implements DAO&#123;</span><br><span class="line">	</span><br><span class="line">    public ItemDAO()&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public Connection getConnection()throws SQLException&#123;</span><br><span class="line">        return DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public int getTotal()&#123;</span><br><span class="line">        int total&#x3D;0;</span><br><span class="line">        try &#123;</span><br><span class="line">            Connection c&#x3D;getConnection();</span><br><span class="line">            Statement s&#x3D;c.createStatement();</span><br><span class="line">            String sql&#x3D;&quot;select count(*)from item&quot;;</span><br><span class="line">            ResultSet rs&#x3D;s.executeQuery(sql);</span><br><span class="line">            while(rs.next())&#123;</span><br><span class="line">                total&#x3D;rs.getInt(1);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;物品总数为：&quot;+total);</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return total;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void add(Item i) &#123;</span><br><span class="line">        String sql&#x3D;&quot;insert into item values(null,?,?)&quot;;</span><br><span class="line">        try(Connection c&#x3D;getConnection();</span><br><span class="line">            PreparedStatement ps &#x3D; c.prepareStatement(sql);</span><br><span class="line">        )&#123;</span><br><span class="line">            ps.setString(1, i.name);</span><br><span class="line">            ps.setInt(2, i.price);</span><br><span class="line">            ps.execute();</span><br><span class="line">            ResultSet rs&#x3D;ps.getGeneratedKeys();</span><br><span class="line">            if(rs.next())&#123;</span><br><span class="line">                i.id&#x3D;rs.getInt(1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;添加对象成功&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public void delete(int id) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Connection c&#x3D;getConnection();</span><br><span class="line">            Statement s&#x3D;c.createStatement();</span><br><span class="line">            String sql&#x3D;&quot;delete from item where id&#x3D;&quot;+id;</span><br><span class="line">            s.execute(sql);</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;删除对象成功&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public void update(Item i) &#123;</span><br><span class="line">        String sql&#x3D;&quot;update item set name&#x3D; ?, price&#x3D;? where id&#x3D;?&quot;;</span><br><span class="line">        try(Connection c&#x3D;getConnection();</span><br><span class="line">            PreparedStatement ps&#x3D;c.prepareStatement(sql);</span><br><span class="line">        )&#123;</span><br><span class="line">            ps.setString(1, i.name);</span><br><span class="line">            ps.setInt(2, i.price);</span><br><span class="line">            ps.setInt(3, i.id);</span><br><span class="line">            ps.execute();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;修改对象成功&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public Item get(int id) &#123;</span><br><span class="line">        String sql&#x3D;&quot;select*from item where id&#x3D;&quot;+id;</span><br><span class="line">        Item i&#x3D;new Item();</span><br><span class="line">        try &#123;</span><br><span class="line">            Connection c&#x3D;getConnection();</span><br><span class="line">            Statement s&#x3D;c.createStatement();</span><br><span class="line">            ResultSet rs&#x3D;s.executeQuery(sql);</span><br><span class="line">            if(rs.next())&#123;</span><br><span class="line">                i.id&#x3D;id;</span><br><span class="line">                i.name&#x3D;rs.getString(2);</span><br><span class="line">                i.price&#x3D;rs.getInt(3);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return i;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;Item&gt; list() &#123;</span><br><span class="line">        List&lt;Item&gt;list&#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">        String sql&#x3D;&quot;select*from item&quot;;</span><br><span class="line">        try(Connection c&#x3D;getConnection();</span><br><span class="line">            PreparedStatement ps&#x3D;c.prepareStatement(sql);</span><br><span class="line">        )&#123;</span><br><span class="line">            ResultSet rs&#x3D;ps.executeQuery();</span><br><span class="line">            while(rs.next())&#123;</span><br><span class="line">                Item i&#x3D;new Item();</span><br><span class="line">                i.id&#x3D;rs.getInt(1);</span><br><span class="line">                i.name&#x3D;rs.getString(2);</span><br><span class="line">                i.price&#x3D;rs.getInt(3);</span><br><span class="line">                list.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return list;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;Item&gt; list(int start, int count) &#123;</span><br><span class="line">        List&lt;Item&gt;list&#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">        String sql&#x3D;&quot;select*from item limit ?,?&quot;;</span><br><span class="line">        try(Connection c&#x3D;getConnection();</span><br><span class="line">            PreparedStatement ps&#x3D;c.prepareStatement(sql);</span><br><span class="line">        )&#123;</span><br><span class="line">            ps.setInt(1, start);</span><br><span class="line">            ps.setInt(2, count);</span><br><span class="line">            ResultSet rs&#x3D;ps.executeQuery();</span><br><span class="line">            while(rs.next())&#123;</span><br><span class="line">                Item i&#x3D;new Item();</span><br><span class="line">                i.id&#x3D;rs.getInt(1);</span><br><span class="line">                i.name&#x3D;rs.getString(2);</span><br><span class="line">                i.price&#x3D;rs.getInt(3);</span><br><span class="line">                list.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO: handle exception</span><br><span class="line">        &#125;</span><br><span class="line">        return list;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">&#x2F;&#x2F;      Item i&#x3D;new Item(&quot;无尽&quot;,3600);</span><br><span class="line">&#x2F;&#x2F;      Item i2&#x3D;new Item(&quot;吸蓝刀&quot;,3400,1);</span><br><span class="line">&#x2F;&#x2F;      ItemDAO iDAO&#x3D;new ItemDAO();</span><br><span class="line">&#x2F;&#x2F;      &#x2F;&#x2F;获取总数</span><br><span class="line">&#x2F;&#x2F;      iDAO.getTotal();</span><br><span class="line">        &#x2F;&#x2F;增</span><br><span class="line">&#x2F;&#x2F;      iDAO.add(i);</span><br><span class="line">        &#x2F;&#x2F;删</span><br><span class="line">&#x2F;&#x2F;      iDAO.delete(7);</span><br><span class="line">        &#x2F;&#x2F;改</span><br><span class="line">&#x2F;&#x2F;      iDAO.update(i2);</span><br><span class="line">        &#x2F;&#x2F;查</span><br><span class="line">&#x2F;&#x2F;      System.out.println(iDAO.list());</span><br><span class="line">        &#x2F;&#x2F;获取</span><br><span class="line">&#x2F;&#x2F;      System.out.println(iDAO.get(1));</span><br><span class="line">        &#x2F;&#x2F;分页查询</span><br><span class="line">&#x2F;&#x2F;      System.out.println(iDAO.list(1, 8));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;import charactor.Hero;</span><br><span class="line">import property.Item;</span><br><span class="line">  </span><br><span class="line">public interface DAO&#123;</span><br><span class="line">&#x2F;&#x2F;    &#x2F;&#x2F;增加</span><br><span class="line">&#x2F;&#x2F;    public void add(Hero hero);</span><br><span class="line">&#x2F;&#x2F;    &#x2F;&#x2F;修改</span><br><span class="line">&#x2F;&#x2F;    public void update(Hero hero);</span><br><span class="line">&#x2F;&#x2F;    &#x2F;&#x2F;删除</span><br><span class="line">&#x2F;&#x2F;    public void delete(int id);</span><br><span class="line">&#x2F;&#x2F;    &#x2F;&#x2F;获取</span><br><span class="line">&#x2F;&#x2F;    public Hero get(int id);</span><br><span class="line">&#x2F;&#x2F;    &#x2F;&#x2F;查询</span><br><span class="line">&#x2F;&#x2F;    public List&lt;Hero&gt; list();</span><br><span class="line">&#x2F;&#x2F;    &#x2F;&#x2F;分页查询</span><br><span class="line">&#x2F;&#x2F;    public List&lt;Hero&gt; list(int start, int count);</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;增加</span><br><span class="line">    public void add(Item item);</span><br><span class="line">    &#x2F;&#x2F;修改</span><br><span class="line">    public void update(Item item);</span><br><span class="line">    &#x2F;&#x2F;删除</span><br><span class="line">    public void delete(int id);</span><br><span class="line">    &#x2F;&#x2F;获取</span><br><span class="line">    public Item get(int id);</span><br><span class="line">    &#x2F;&#x2F;查询</span><br><span class="line">    public List&lt;Item&gt; list();</span><br><span class="line">    &#x2F;&#x2F;分页查询</span><br><span class="line">    public List&lt;Item&gt; list(int start, int count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package property;</span><br><span class="line"></span><br><span class="line">public class Item &#123;</span><br><span class="line">    public Item(int id,String name,int price) &#123;</span><br><span class="line">    	</span><br><span class="line">    	this.id &#x3D; id;</span><br><span class="line">    	this.name &#x3D; name;</span><br><span class="line">    	this.price &#x3D; price;</span><br><span class="line">    	</span><br><span class="line">		&#x2F;&#x2F; TODO Auto-generated constructor stub</span><br><span class="line">	&#125;</span><br><span class="line">	public Item() &#123;</span><br><span class="line">		&#x2F;&#x2F; TODO Auto-generated constructor stub</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;增加id属性</span><br><span class="line">    public int id;</span><br><span class="line">    public String name;</span><br><span class="line">    public int price;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11、数据库连接池"><a class="header-anchor" href="#11、数据库连接池">¶</a>11、数据库连接池</h2>
<h3 id="步骤-1-数据库连接池原理-传统方式"><a class="header-anchor" href="#步骤-1-数据库连接池原理-传统方式">¶</a>步骤 1 : 数据库连接池原理-传统方式</h3>
<p>当有多个线程，每个线程都需要连接数据库执行SQL语句的话，那么每个线程都会创建一个连接，并且在使用完毕后，关闭连接。</p>
<p>创建连接和关闭连接的过程也是比较消耗时间的，当多线程并发的时候，系统就会变得很卡顿。</p>
<p>同时，一个数据库同时支持的连接总数也是有限的，如果多线程并发量很大，那么数据库连接的总数就会被消耗光，后续线程发起的数据库连接就会失败。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2654.png" alt></p>
<h3 id="步骤-2-数据库连接池原理-使用池"><a class="header-anchor" href="#步骤-2-数据库连接池原理-使用池">¶</a>步骤 2 : 数据库连接池原理-使用池</h3>
<p>与传统方式不同，连接池在使用之前，就会创建好一定数量的连接。<br>
如果有任何线程需要使用连接，那么就从连接池里面<strong>借用</strong>，<strong>而不是自己重新创建</strong>.<br>
使用完毕后，又把这个连接<strong>归还</strong>给连接池供下一次或者其他线程使用。<br>
倘若发生多线程并发情况，连接池里的连接被<strong>借用光</strong>了，那么其他线程就会临时等待，直到有连接被<strong>归还</strong>回来，再继续使用。<br>
整个过程，这些连接都<strong>不会被关闭</strong>，而是不断的被循环使用，从而节约了启动和关闭连接的时间。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2655.png" alt></p>
<h3 id="步骤-3-ConnectionPool构造方法和初始化"><a class="header-anchor" href="#步骤-3-ConnectionPool构造方法和初始化">¶</a>步骤 3 : ConnectionPool构造方法和初始化</h3>
<ol>
<li>
<p>ConnectionPool() 构造方法约定了这个连接池一共有多少连接</p>
</li>
<li>
<p>在init() 初始化方法中，创建了size条连接。 注意，这里不能使用try-with-resource这种自动关闭连接的方式，因为连接恰恰需要保持不关闭状态，供后续循环使用</p>
</li>
<li>
<p>getConnection， 判断是否为空，如果是空的就wait等待，否则就借用一条连接出去</p>
</li>
<li>
<p>returnConnection， 在使用完毕后，归还这个连接到连接池，并且在归还完毕后，调用notifyAll，通知那些等待的线程，有新的连接可以借用了。</p>
</li>
</ol>
<p>注：连接池设计用到了多线程的wait和notifyAll，这些内容可以在[多线程交互]章节查阅学习。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdbc;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionPool</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    List&lt;Connection&gt; cs = <span class="keyword">new</span> ArrayList&lt;Connection&gt;();</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConnectionPool</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.size = size;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          </span><br><span class="line">        <span class="comment">//这里恰恰不能使用try-with-resource的方式，因为这些连接都需要是"活"的，不要被自动关闭了</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">                Connection c = DriverManager</span><br><span class="line">                        .getConnection(<span class="string">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>, <span class="string">"root"</span>, <span class="string">"admin"</span>);</span><br><span class="line">  </span><br><span class="line">                cs.add(c);</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> Connection <span class="title">getConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (cs.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Connection c = cs.remove(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">returnConnection</span><span class="params">(Connection c)</span> </span>&#123;</span><br><span class="line">        cs.add(c);</span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新版</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdbc;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionPool</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    List&lt;Connection&gt; cs = <span class="keyword">new</span> ArrayList&lt;Connection&gt;();</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConnectionPool</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.size = size;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          </span><br><span class="line">        <span class="comment">//这里恰恰不能使用try-with-resource的方式，因为这些连接都需要是"活"的，不要被自动关闭了</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">                Connection c = DriverManager</span><br><span class="line">                        .getConnection(<span class="string">"jdbc:mysql://127.0.0.1:3306/how2java?"</span>+<span class="string">"useUnicode=true&amp;characterEncoding=utf8&amp;"</span>+<span class="string">"useSSL=false&amp;serverTimezone=Hongkong"</span>,<span class="string">"root"</span>,<span class="string">"admin"</span>);</span><br><span class="line">  </span><br><span class="line">                cs.add(c);</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> Connection <span class="title">getConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (cs.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Connection c = cs.remove(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">returnConnection</span><span class="params">(Connection c)</span> </span>&#123;</span><br><span class="line">        cs.add(c);</span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-测试类"><a class="header-anchor" href="#步骤-4-测试类">¶</a>步骤 4 : 测试类</h3>
<p>首先初始化一个有3条连接的数据库连接池<br>
然后创建100个线程，每个线程都会从连接池中<strong>借用连接</strong>，并且在借用之后，归还连接。 拿到连接之后，执行一个耗时1秒的SQL语句。</p>
<p>运行程序，就可以观察到如图所示的效果</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1833.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdbc;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> jdbc.ConnectionPool;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestConnectionPool</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ConnectionPool cp = <span class="keyword">new</span> ConnectionPool(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> WorkingThread(<span class="string">"working thread"</span> + i, cp).start();</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WorkingThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ConnectionPool cp;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WorkingThread</span><span class="params">(String name, ConnectionPool cp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">        <span class="keyword">this</span>.cp = cp;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection c = cp.getConnection();</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.getName()+ <span class="string">":\t 获取了一根连接，并开始工作"</span>  );</span><br><span class="line">        <span class="keyword">try</span> (Statement st = c.createStatement())&#123;</span><br><span class="line">             </span><br><span class="line">            <span class="comment">//模拟时耗１秒的数据库ＳＱＬ语句</span></span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            st.execute(<span class="string">"select * from hero"</span>);</span><br><span class="line">   </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException | InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        cp.returnConnection(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-数据库连接池"><a class="header-anchor" href="#步骤-5-练习-数据库连接池">¶</a>步骤 5 : 练习-数据库连接池</h3>
<p>向数据库中插入100条数据，比较传统方式和数据库连接池方式的性能差异</p>
<ol>
<li>
<p>使用<strong>传统方式</strong>创建100个线程，每个线程都会创建新的连接，通过这个连接向数据库插入1条数据，然后关闭这个连接。</p>
</li>
<li>
<p>使用<strong>数据库连接池的方式</strong>，创建一个有10条连接的连接池，然后创建100个线程，每个线程都会向连接池<strong>借用</strong>连接，借用到后，向数据库插入1条数据，然后<strong>归还</strong>这个连接。</p>
</li>
</ol>
<p>通过时间统计，比较这两种方式的性能表现差异。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">package jdbc;</span><br><span class="line">  </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"> </span><br><span class="line">import jdbc.ConnectionPool;</span><br><span class="line">   </span><br><span class="line">public class TestConnectionPool &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		d();</span><br><span class="line">		dd();</span><br><span class="line">	&#125;</span><br><span class="line">	public static void d()&#123;</span><br><span class="line">		ConnectionPool connectionPool&#x3D;new ConnectionPool(10);</span><br><span class="line">		long jk&#x3D;System.currentTimeMillis();</span><br><span class="line">		for (int i &#x3D; 0; i &lt;100; i++) &#123;</span><br><span class="line">			new Thread(()-&gt;&#123;</span><br><span class="line">				Connection c&#x3D;connectionPool.getConnection();</span><br><span class="line">				String sql&#x3D;&quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">				try(PreparedStatement ps&#x3D; c.prepareStatement(sql);) &#123;</span><br><span class="line">					ps.setString(1,&quot;英雄&quot;);</span><br><span class="line">					ps.setFloat(2,300);</span><br><span class="line">					ps.setInt(3,20);</span><br><span class="line">					ps.execute();</span><br><span class="line">				&#125; catch (SQLException e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				connectionPool.returnConnection(c);</span><br><span class="line">			&#125;).start();</span><br><span class="line">		&#125;</span><br><span class="line">		long dk&#x3D;System.currentTimeMillis();</span><br><span class="line">		System.out.println(&quot;使用连接池插入数据的时间为：&quot;+(dk-jk));</span><br><span class="line">	&#125;</span><br><span class="line">	public static void dd()&#123;</span><br><span class="line">		long jkk&#x3D;System.currentTimeMillis();</span><br><span class="line">		try &#123;</span><br><span class="line">			Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">		&#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		for (int i &#x3D; 0; i &lt;100; i++) &#123;</span><br><span class="line">			new Thread(() -&gt; &#123;</span><br><span class="line">				String sql&#x3D;&quot;insert into hero values(null,?,?,?)&quot;;</span><br><span class="line">				try( Connection c&#x3D;DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;885400&quot;);</span><br><span class="line">						PreparedStatement ps&#x3D;c.prepareStatement(sql);</span><br><span class="line">						)&#123;</span><br><span class="line">					ps.setString(1,&quot;英雄&quot;);</span><br><span class="line">					ps.setFloat(2,300);</span><br><span class="line">					ps.setInt(3,20);</span><br><span class="line">					ps.execute();</span><br><span class="line">				&#125; catch (SQLException e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;).start();</span><br><span class="line">		&#125;</span><br><span class="line">		long dkk&#x3D;System.currentTimeMillis();</span><br><span class="line">		System.out.println(&quot;不使用连接池插入数据的时间为：&quot;+(dkk-jkk));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用连接池插入数据的时间为：5<br>
不使用连接池插入数据的时间为：7</p>
<h1 id="八、图形界面"><a class="header-anchor" href="#八、图形界面">¶</a>八、图形界面</h1>
<h2 id="1、一个简单的-SWING-例子"><a class="header-anchor" href="#1、一个简单的-SWING-例子">¶</a>1、一个简单的 SWING 例子</h2>
<p><strong>GUI</strong>-<strong>G</strong>raphic <strong>U</strong>ser <strong>I</strong>nterface 图形用户界面</p>
<h3 id="步骤-1-简单的例子"><a class="header-anchor" href="#步骤-1-简单的例子">¶</a>步骤 1 : 简单的例子</h3>
<p>JFrame是GUI中的容器<br>
JButton是最常见的组件- 按钮<br>
注意：f.setVisible(true); 会对所有的组件进行渲染，所以一定要<strong>放在最后面</strong></p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/915.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; 主窗体</span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 主窗体设置大小</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 主窗体设置位置</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 主窗体中的组件设置为绝对定位</span><br><span class="line">        f.setLayout(null);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 按钮组件</span><br><span class="line">        JButton b &#x3D; new JButton(&quot;一键秒对方基地挂&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 同时设置组件的大小和位置</span><br><span class="line">        b.setBounds(50, 50, 280, 30);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把按钮加入到主窗体中</span><br><span class="line">        f.add(b);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 关闭窗体的时候，退出程序</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        &#x2F;&#x2F; 让窗体变得可见</span><br><span class="line">        f.setVisible(true);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-在上次关闭位置启动窗口"><a class="header-anchor" href="#步骤-2-练习-在上次关闭位置启动窗口">¶</a>步骤 2 : 练习-在上次关闭位置启动窗口</h3>
<p>比如这次使用这个窗口，导致窗口被移动到了右下角。 关闭这个窗口，下一次再启动的时候，就会自动出现在右下角。</p>
<p><strong>思路提示：</strong><br>
启动一个线程，每个100毫秒读取当前的位置信息，保存在文件中，比如location.txt文件。<br>
启动的时候，从这个文件中读取位置信息，如果是空的，就使用默认位置，如果不是空的，就把位置信息设置在窗口上。<br>
读取位置信息的办法： f.getX() 读取横坐标信息，f.getY()读取纵坐标信息。</p>
<p>**注：**这个练习要求使用多线程来完成。 还有另一个思路来完成，就是使用监听器，因为刚开始学习GUI，还没有掌握监听器的使用，所以暂时使用多线程来完成这个功能。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"></span><br><span class="line">import java.io.BufferedReader;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.FileWriter;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"></span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		&#x2F;&#x2F;保存位置的文件</span><br><span class="line">		File file &#x3D; new File(&quot;C:\\Users\\Lenovo\\Desktop\\location.txt&quot;);</span><br><span class="line">		JFrame frame &#x3D; new JFrame(&quot;LOL&quot;);</span><br><span class="line">		&#x2F;&#x2F;读取上一次的位置</span><br><span class="line">		try &#123;</span><br><span class="line">			BufferedReader br &#x3D; new BufferedReader(new FileReader(file));</span><br><span class="line">			frame.setLocation(Integer.valueOf(br.readLine()).intValue(), Integer.valueOf(br.readLine()).intValue());</span><br><span class="line">		&#125; catch (Exception e2) &#123;</span><br><span class="line">			e2.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		&#x2F;&#x2F; 设置窗口大小</span><br><span class="line">		frame.setSize(400, 300);</span><br><span class="line">		&#x2F;&#x2F; 设置窗口位置</span><br><span class="line">		&#x2F;&#x2F;frame.setLocation(550, 250);</span><br><span class="line">		frame.setLayout(null);</span><br><span class="line">		JButton button &#x3D; new JButton(&quot;开启&quot;);</span><br><span class="line">		button.setBounds(50, 50, 280, 30);</span><br><span class="line">		frame.add(button);</span><br><span class="line">		&#x2F;&#x2F; 关闭窗体的时候，退出程序</span><br><span class="line">		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">		frame.setVisible(true);</span><br><span class="line">		&#x2F;&#x2F;开启一个线程记录实时位置</span><br><span class="line">		new Thread() &#123;</span><br><span class="line">			public void run() &#123;</span><br><span class="line">				while (true) &#123;</span><br><span class="line">					try &#123;</span><br><span class="line">						Thread.sleep(100);</span><br><span class="line">					&#125; catch (InterruptedException e1) &#123;</span><br><span class="line">						&#x2F;&#x2F; TODO 自动生成的 catch 块</span><br><span class="line">						e1.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					&#x2F;&#x2F;缓冲流写操作</span><br><span class="line">					&#x2F;&#x2F;为什么只有两行数据呢，是因为每次new printwriter的时候会抹除之前的内容并从第一行的第一个位置开始写</span><br><span class="line">					try (PrintWriter pw &#x3D; new PrintWriter(new FileWriter(file))) &#123;</span><br><span class="line">						pw.println(frame.getX());</span><br><span class="line">						pw.println(frame.getY());</span><br><span class="line">						pw.flush();</span><br><span class="line">					&#125; catch (Exception e) &#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;.start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、SWING-如何进行事件监听"><a class="header-anchor" href="#2、SWING-如何进行事件监听">¶</a>2、SWING 如何进行事件监听</h2>
<h3 id="示例-1-按钮监听"><a class="header-anchor" href="#示例-1-按钮监听">¶</a>示例 1 : 按钮监听</h3>
<p>创建一个[匿名类]实现ActionListener接口，当按钮被点击时，actionPerformed方法就会被调用</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/924.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">  </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(580, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">  </span><br><span class="line">        final JLabel l &#x3D; new JLabel();</span><br><span class="line">  </span><br><span class="line">        ImageIcon i &#x3D; new ImageIcon(&quot;D:\\java\\workspace\\shana.png&quot;);</span><br><span class="line">        l.setIcon(i);</span><br><span class="line">        l.setBounds(50, 50, i.getIconWidth(), i.getIconHeight());</span><br><span class="line">  </span><br><span class="line">        JButton b &#x3D; new JButton(&quot;隐藏图片&quot;);</span><br><span class="line">        b.setBounds(150, 200, 100, 30);</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 给按钮 增加 监听</span><br><span class="line">        b.addActionListener(new ActionListener() &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 当按钮被点击时，就会触发 ActionEvent事件</span><br><span class="line">            &#x2F;&#x2F; actionPerformed 方法就会被执行</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                l.setVisible(false);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  </span><br><span class="line">        f.add(l);</span><br><span class="line">        f.add(b);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-键盘监听"><a class="header-anchor" href="#示例-2-键盘监听">¶</a>示例 2 : 键盘监听</h3>
<p>键盘监听器： KeyListener<br>
keyPressed 代表 键被按下<br>
keyReleased 代表 键被弹起<br>
keyTyped 代表 一个按下弹起的组合动作<br>
KeyEvent.getKeyCode() 可以获取当前点下了哪个键</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/925.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.awt.event.KeyEvent;</span><br><span class="line">import java.awt.event.KeyListener;</span><br><span class="line">  </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(580, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">  </span><br><span class="line">        final JLabel l &#x3D; new JLabel();</span><br><span class="line">  </span><br><span class="line">        ImageIcon i &#x3D; new ImageIcon(&quot;D:\\java\\workspace\\shana.png&quot;);</span><br><span class="line">        l.setIcon(i);</span><br><span class="line">        l.setBounds(50, 50, i.getIconWidth(), i.getIconHeight());</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 增加键盘监听</span><br><span class="line">        f.addKeyListener(new KeyListener() &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 键被弹起</span><br><span class="line">            public void keyReleased(KeyEvent e) &#123;</span><br><span class="line">  </span><br><span class="line">                &#x2F;&#x2F; 39代表按下了 “右键”</span><br><span class="line">                if (e.getKeyCode() &#x3D;&#x3D; 39) &#123;</span><br><span class="line">                    &#x2F;&#x2F; 图片向右移动 （y坐标不变，x坐标增加）</span><br><span class="line">                    l.setLocation(l.getX() + 10, l.getY());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F;键被按下</span><br><span class="line">            public void keyPressed(KeyEvent e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 一个按下弹起的组合动作</span><br><span class="line">            public void keyTyped(KeyEvent e) &#123;</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  </span><br><span class="line">        f.add(l);</span><br><span class="line">  </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-鼠标监听"><a class="header-anchor" href="#示例-3-鼠标监听">¶</a>示例 3 : 鼠标监听</h3>
<p>MouseListener 鼠标监听器<br>
mouseReleased 鼠标释放<br>
mousePressed 鼠标按下<br>
mouseExited 鼠标退出<br>
mouseEntered 鼠标进入<br>
mouseClicked 鼠标点击<br>
在本例中，使用mouseEntered，当鼠标进入图片的时候，图片就移动位置</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/926.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.event.MouseEvent;</span><br><span class="line">import java.awt.event.MouseListener;</span><br><span class="line">import java.util.Random;</span><br><span class="line">  </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        final JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(800, 600);</span><br><span class="line">        f.setLocationRelativeTo(null);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">  </span><br><span class="line">        final JLabel l &#x3D; new JLabel();</span><br><span class="line">        ImageIcon i &#x3D; new ImageIcon(&quot;D:\\java\\workspace\\shana_heiheihei.png&quot;);</span><br><span class="line">        l.setIcon(i);</span><br><span class="line">        l.setBounds(375, 275, i.getIconWidth(), i.getIconHeight());</span><br><span class="line">  </span><br><span class="line">        f.add(l);</span><br><span class="line">  </span><br><span class="line">        l.addMouseListener(new MouseListener() &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 释放鼠标</span><br><span class="line">            public void mouseReleased(MouseEvent e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 按下鼠标</span><br><span class="line">            public void mousePressed(MouseEvent e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 鼠标退出</span><br><span class="line">            public void mouseExited(MouseEvent e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 鼠标进入</span><br><span class="line">            public void mouseEntered(MouseEvent e) &#123;</span><br><span class="line">  </span><br><span class="line">                Random r &#x3D; new Random();</span><br><span class="line">  </span><br><span class="line">                int x &#x3D; r.nextInt(f.getWidth() - l.getWidth());</span><br><span class="line">                int y &#x3D; r.nextInt(f.getHeight() - l.getHeight());</span><br><span class="line">  </span><br><span class="line">                l.setLocation(x, y);</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 按下释放组合动作为点击鼠标</span><br><span class="line">            public void mouseClicked(MouseEvent e) &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-适配器"><a class="header-anchor" href="#示例-4-适配器">¶</a>示例 4 : 适配器</h3>
<p><strong>MouseAdapter</strong> 鼠标监听适配器<br>
一般说来在写监听器的时候，会实现MouseListener。<br>
但是MouseListener里面有很多方法实际上都没有用到，比如mouseReleased ，mousePressed，mouseExited等等。<br>
这个时候就可以使用 鼠标监听适配器，MouseAdapter <strong>只需要重写必要的方法即可</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.event.MouseAdapter;</span><br><span class="line">import java.awt.event.MouseEvent;</span><br><span class="line">import java.util.Random;</span><br><span class="line">  </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        final JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(800, 600);</span><br><span class="line">        f.setLocationRelativeTo(null);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">  </span><br><span class="line">        final JLabel l &#x3D; new JLabel(&quot;&quot;);</span><br><span class="line">  </span><br><span class="line">        ImageIcon i &#x3D; new ImageIcon(&quot;&quot;D:\\java\\workspace\\shana_heiheihei.png&quot;);</span><br><span class="line">        l.setIcon(i);</span><br><span class="line">        l.setBounds(375, 275, i.getIconWidth(), i.getIconHeight());</span><br><span class="line">  </span><br><span class="line">        f.add(l);</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; MouseAdapter 适配器，只需要重写用到的方法，没有用到的就不用写了</span><br><span class="line">        l.addMouseListener(new MouseAdapter() &#123;</span><br><span class="line">  </span><br><span class="line">            &#x2F;&#x2F; 只有mouseEntered用到了</span><br><span class="line">            public void mouseEntered(MouseEvent e) &#123;</span><br><span class="line">  </span><br><span class="line">                Random r &#x3D; new Random();</span><br><span class="line">  </span><br><span class="line">                int x &#x3D; r.nextInt(f.getWidth() - l.getWidth());</span><br><span class="line">                int y &#x3D; r.nextInt(f.getHeight() - l.getHeight());</span><br><span class="line">  </span><br><span class="line">                l.setLocation(x, y);</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-5-练习-切换显示"><a class="header-anchor" href="#示例-5-练习-切换显示">¶</a>示例 5 : 练习-切换显示</h3>
<p>把[按钮监听]中的按钮上的文字从“隐藏图片” 改为 “显示图片”。</p>
<p>第一次点击的时候，会使得图片隐藏，第二次点击的时候，会使得图片显示，如此循环下去。</p>
<p>一旦点击了&quot;隐藏图片&quot;，按钮上的文字就要变成“显示图片” 。。。 如此循环</p>
<p><strong>提示：</strong> 调用JButton对象的<strong>setText</strong>改变按钮上的文字</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2662.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"></span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"></span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400,300);</span><br><span class="line">        f.setLocation(300, 300);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        ImageIcon i&#x3D;new ImageIcon(&quot;D:\\java\\workspace\\shana.png&quot;);</span><br><span class="line">        JLabel L&#x3D;new JLabel();</span><br><span class="line">        L.setBounds(50, 50, i.getIconWidth(),i.getIconWidth());</span><br><span class="line">        L.setIcon(i);</span><br><span class="line">        L.setVisible(true);</span><br><span class="line">        JButton b&#x3D;new JButton(&quot;隐藏图片&quot;);</span><br><span class="line">        b.setBounds(150, 200, 100, 30);</span><br><span class="line">        b.addActionListener(new ActionListener()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                if(b.getText().equals(&quot;隐藏图片&quot;))&#123;</span><br><span class="line">                    b.setText(&quot;显示图片&quot;);</span><br><span class="line">                    L.setVisible(false);</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    b.setText(&quot;隐藏图片&quot;);</span><br><span class="line">                    L.setVisible(true);</span><br><span class="line">                &#125;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">        f.add(b);</span><br><span class="line">        f.add(L);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-6-练习-上下左右移动"><a class="header-anchor" href="#示例-6-练习-上下左右移动">¶</a>示例 6 : 练习-上下左右移动</h3>
<p>把[键盘监听]中的代码完善，使得由当前的只能向右移动，完善为上下左右移动都可以。</p>
<p>提示：keyCode与方向的对应关系<br>
38 上<br>
40 下<br>
37 左<br>
39 右</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"></span><br><span class="line">import java.awt.event.KeyAdapter;</span><br><span class="line">import java.awt.event.KeyEvent;</span><br><span class="line"></span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line"></span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;lol&quot;);</span><br><span class="line">        f.setSize(400, 500);</span><br><span class="line">        f.setLocation(300, 300);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JLabel L&#x3D;new JLabel();</span><br><span class="line">        ImageIcon i&#x3D;new ImageIcon(&quot;D:\\java\\workspace\\shana.png&quot;);</span><br><span class="line">        L.setIcon(i);</span><br><span class="line">        L.setBounds(50, 50, i.getIconWidth(), i.getIconHeight());</span><br><span class="line">        f.addKeyListener(new KeyAdapter()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void keyPressed(KeyEvent e) &#123;</span><br><span class="line">                if(e.getKeyCode()&#x3D;&#x3D;39)&#123;</span><br><span class="line">                    L.setLocation(L.getX()+10, L.getY());</span><br><span class="line">                &#125;else if(e.getKeyCode()&#x3D;&#x3D;37)&#123;</span><br><span class="line">                    L.setLocation(L.getX()-10, L.getY());</span><br><span class="line">                &#125;else if(e.getKeyCode()&#x3D;&#x3D;38)&#123;</span><br><span class="line">                    L.setLocation(L.getX(), L.getY()-10);</span><br><span class="line">                &#125;else if(e.getKeyCode()&#x3D;&#x3D;40)&#123;</span><br><span class="line">                    L.setLocation(L.getX(), L.getY()+10);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        f.add(L);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、SWING-的容器-JFRAME和JDIALOG"><a class="header-anchor" href="#3、SWING-的容器-JFRAME和JDIALOG">¶</a>3、SWING 的容器 JFRAME和JDIALOG</h2>
<p>java的图形界面中，容器是用来存放 按钮，输入框等组件的。</p>
<p>窗体型容器有两个，一个是JFrame,一个是JDialog</p>
<h3 id="步骤-1-JFrame"><a class="header-anchor" href="#步骤-1-JFrame">¶</a>步骤 1 : JFrame</h3>
<p>JFrame是最常用的窗体型容器，默认情况下，在右上角有最大化最小化按钮</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/887.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;普通的窗体，带最大和最小化按钮</span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JButton b &#x3D; new JButton(&quot;一键秒对方基地挂&quot;);</span><br><span class="line">        b.setBounds(50, 50, 280, 30);</span><br><span class="line"> </span><br><span class="line">        f.add(b);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-JDialog"><a class="header-anchor" href="#步骤-2-JDialog">¶</a>步骤 2 : JDialog</h3>
<p>JDialog也是窗体型容器，右上角没有最大和最小化按钮</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/888.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JDialog;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;普通的窗体，带最大和最小化按钮，而对话框却不带</span><br><span class="line">        JDialog d &#x3D; new JDialog();</span><br><span class="line">        d.setTitle(&quot;LOL&quot;);</span><br><span class="line">        d.setSize(400, 300);</span><br><span class="line">        d.setLocation(200, 200);</span><br><span class="line">        d.setLayout(null);</span><br><span class="line">        JButton b &#x3D; new JButton(&quot;一键秒对方基地挂&quot;);</span><br><span class="line">        b.setBounds(50, 50, 280, 30);</span><br><span class="line"> </span><br><span class="line">        d.add(b);</span><br><span class="line"> </span><br><span class="line">        d.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-模态JDialog"><a class="header-anchor" href="#步骤-3-模态JDialog">¶</a>步骤 3 : 模态JDialog</h3>
<p>当一个对话框被设置为模态的时候，其<strong>背后</strong>的父窗体，是不能被激活的，除非该对话框被关闭</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JDialog;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;外部窗体&quot;);</span><br><span class="line">        f.setSize(800, 600);</span><br><span class="line">        f.setLocation(100, 100);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 根据外部窗体实例化JDialog</span><br><span class="line">        JDialog d &#x3D; new JDialog(f);</span><br><span class="line">        &#x2F;&#x2F; 设置为模态</span><br><span class="line">        d.setModal(true);</span><br><span class="line"> </span><br><span class="line">        d.setTitle(&quot;模态的对话框&quot;);</span><br><span class="line">        d.setSize(400, 300);</span><br><span class="line">        d.setLocation(200, 200);</span><br><span class="line">        d.setLayout(null);</span><br><span class="line">        JButton b &#x3D; new JButton(&quot;一键秒对方基地挂&quot;);</span><br><span class="line">        b.setBounds(50, 50, 280, 30);</span><br><span class="line">        d.add(b);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">        d.setVisible(true);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-窗体大小不可变化"><a class="header-anchor" href="#步骤-4-窗体大小不可变化">¶</a>步骤 4 : 窗体大小不可变化</h3>
<p>通过调用方法 setResizable(false); 做到窗体大小不可变化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JButton b &#x3D; new JButton(&quot;一键秒对方基地挂&quot;);</span><br><span class="line">        b.setBounds(50, 50, 280, 30);</span><br><span class="line"> </span><br><span class="line">        f.add(b);</span><br><span class="line">        &#x2F;&#x2F; 窗体大小不可变化</span><br><span class="line">        f.setResizable(false);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-模态与大小变化"><a class="header-anchor" href="#步骤-5-练习-模态与大小变化">¶</a>步骤 5 : 练习-模态与大小变化</h3>
<p>首先设计一个JFrame,上面有一个按钮，文字是 “打开一个模态窗口”。</p>
<p>点击该按钮后，随即打开一个模态窗口。</p>
<p>在这个模态窗口中有一个按钮，文本是 “锁定大小”, 点击后，这个模态窗口的大小就被锁定住，不能改变。 再次点击，就回复能够改变大小</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2666.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JDialog;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;LOL&quot;);</span><br><span class="line">        f.setSize(800, 600);</span><br><span class="line">        f.setLocation(100, 100);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JButton b&#x3D;new JButton(&quot;打开一个模态窗口&quot;);</span><br><span class="line">        b.setBounds(200, 20, 150, 50);</span><br><span class="line">        f.add(b);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">        b.addActionListener(new ActionListener()&#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                JDialog d&#x3D;new JDialog(f);</span><br><span class="line">                d.setTitle(&quot;模态对话框&quot;);</span><br><span class="line">                d.setModal(true);</span><br><span class="line">                d.setSize(400,300);</span><br><span class="line">                d.setLocation(200, 200);</span><br><span class="line">                d.setLayout(null);</span><br><span class="line">                JButton b1&#x3D;new JButton(&quot;锁定窗口&quot;);</span><br><span class="line">                b1.setBounds(100, 20, 200, 40);</span><br><span class="line">                b1.addActionListener(new ActionListener()&#123;</span><br><span class="line"> </span><br><span class="line">                    @Override</span><br><span class="line">                    public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                        if(b1.getText().equals(&quot;锁定窗口&quot;))&#123;</span><br><span class="line">                            b1.setText(&quot;解锁窗口&quot;);</span><br><span class="line">                            d.setResizable(false);</span><br><span class="line">                        &#125;else&#123;</span><br><span class="line">                            b1.setText(&quot;锁定窗口&quot;);</span><br><span class="line">                            d.setResizable(true);</span><br><span class="line">                        &#125;</span><br><span class="line">                         </span><br><span class="line">                    &#125;</span><br><span class="line">                     </span><br><span class="line">                &#125;);</span><br><span class="line">                d.add(b1);</span><br><span class="line">                d.setVisible(true);            </span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4、SWING五种常见的布局器"><a class="header-anchor" href="#4、SWING五种常见的布局器">¶</a>4、SWING五种常见的布局器</h2>
<p>布局器是用在容器上的。 用来决定容器上的组件摆放的位置和大小</p>
<h3 id="示例-1-绝对定位"><a class="header-anchor" href="#示例-1-绝对定位">¶</a>示例 1 : 绝对定位</h3>
<p>绝对定位就是指不使用布局器，组件的位置和大小需要单独指定</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/1344.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        &#x2F;&#x2F; 设置布局器为null，即进行绝对定位，容器上的组件都需要指定位置和大小</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JButton b1 &#x3D; new JButton(&quot;英雄1&quot;);</span><br><span class="line">        &#x2F;&#x2F; 指定位置和大小</span><br><span class="line">        b1.setBounds(50, 50, 80, 30);</span><br><span class="line">        JButton b2 &#x3D; new JButton(&quot;英雄2&quot;);</span><br><span class="line">        b2.setBounds(150, 50, 80, 30);</span><br><span class="line">        JButton b3 &#x3D; new JButton(&quot;英雄3&quot;);</span><br><span class="line">        b3.setBounds(250, 50, 80, 30);</span><br><span class="line">        &#x2F;&#x2F; 没有指定位置和大小，不会出现在容器上</span><br><span class="line">        JButton b4 &#x3D; new JButton(&quot;英雄3&quot;);</span><br><span class="line"> </span><br><span class="line">        f.add(b1);</span><br><span class="line">        f.add(b2);</span><br><span class="line">        f.add(b3);</span><br><span class="line">        &#x2F;&#x2F; b4没有指定位置和大小，不会出现在容器上</span><br><span class="line">        f.add(b4);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-FlowLayout"><a class="header-anchor" href="#示例-2-FlowLayout">¶</a>示例 2 : FlowLayout</h3>
<p>设置布局器为FlowLayout,顺序布局器<br>
容器上的组件水平摆放<br>
加入到容器即可，无需单独指定大小和位置</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/890.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        &#x2F;&#x2F; 设置布局器为FlowLayerout</span><br><span class="line">        &#x2F;&#x2F; 容器上的组件水平摆放</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line"> </span><br><span class="line">        JButton b1 &#x3D; new JButton(&quot;英雄1&quot;);</span><br><span class="line">        JButton b2 &#x3D; new JButton(&quot;英雄2&quot;);</span><br><span class="line">        JButton b3 &#x3D; new JButton(&quot;英雄3&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 加入到容器即可，无需单独指定大小和位置</span><br><span class="line">        f.add(b1);</span><br><span class="line">        f.add(b2);</span><br><span class="line">        f.add(b3);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-BorderLayout"><a class="header-anchor" href="#示例-3-BorderLayout">¶</a>示例 3 : BorderLayout</h3>
<p>设置布局器为BorderLayout<br>
容器上的组件按照<strong>上北 下南 左西 右东 中</strong>的顺序摆放</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/891.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        &#x2F;&#x2F; 设置布局器为BorderLayerout</span><br><span class="line">        &#x2F;&#x2F; 容器上的组件按照上北下南左西右东中的顺序摆放</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line"> </span><br><span class="line">        JButton b1 &#x3D; new JButton(&quot;洪七&quot;);</span><br><span class="line">        JButton b2 &#x3D; new JButton(&quot;段智兴&quot;);</span><br><span class="line">        JButton b3 &#x3D; new JButton(&quot;欧阳锋&quot;);</span><br><span class="line">        JButton b4 &#x3D; new JButton(&quot;黄药师&quot;);</span><br><span class="line">        JButton b5 &#x3D; new JButton(&quot;周伯通&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 加入到容器的时候，需要指定位置</span><br><span class="line">        f.add(b1, BorderLayout.NORTH);</span><br><span class="line">        f.add(b2, BorderLayout.SOUTH);</span><br><span class="line">        f.add(b3, BorderLayout.WEST);</span><br><span class="line">        f.add(b4, BorderLayout.EAST);</span><br><span class="line">        f.add(b5, BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-GridLayout"><a class="header-anchor" href="#示例-4-GridLayout">¶</a>示例 4 : GridLayout</h3>
<p>GridLayout，即网格布局器</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/892.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.GridLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        &#x2F;&#x2F; 设置布局器为GridLayerout，即网格布局器</span><br><span class="line">        &#x2F;&#x2F; 该GridLayerout的构造方法表示该网格是2行3列</span><br><span class="line">        f.setLayout(new GridLayout(2, 3));</span><br><span class="line"> </span><br><span class="line">        JButton b1 &#x3D; new JButton(&quot;洪七&quot;);</span><br><span class="line">        JButton b2 &#x3D; new JButton(&quot;段智兴&quot;);</span><br><span class="line">        JButton b3 &#x3D; new JButton(&quot;欧阳锋&quot;);</span><br><span class="line">        JButton b4 &#x3D; new JButton(&quot;黄药师&quot;);</span><br><span class="line">        JButton b5 &#x3D; new JButton(&quot;周伯通&quot;);</span><br><span class="line"> </span><br><span class="line">        f.add(b1);</span><br><span class="line">        f.add(b2);</span><br><span class="line">        f.add(b3);</span><br><span class="line">        f.add(b4);</span><br><span class="line">        f.add(b5);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-5-setPreferredSize"><a class="header-anchor" href="#示例-5-setPreferredSize">¶</a>示例 5 : setPreferredSize</h3>
<p>即便 使用 布局器 ，也可以 通过setPreferredSize，向布局器建议该组件显示的大小.<br>
<strong>注</strong> 只对部分布局器起作用，比如FlowLayout可以起作用。 比如GridLayout就不起作用，因为网格布局器必须对齐</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/919.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line"> </span><br><span class="line">        JButton b1 &#x3D; new JButton(&quot;英雄1&quot;);</span><br><span class="line">        JButton b2 &#x3D; new JButton(&quot;英雄2&quot;);</span><br><span class="line">        JButton b3 &#x3D; new JButton(&quot;英雄3&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 即便 使用 布局器 ，也可以 通过setPreferredSize，向布局器建议该组件显示的大小</span><br><span class="line">        b3.setPreferredSize(new Dimension(180, 40));</span><br><span class="line"> </span><br><span class="line">        f.add(b1);</span><br><span class="line">        f.add(b2);</span><br><span class="line">        f.add(b3);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-6-CardLayout"><a class="header-anchor" href="#示例-6-CardLayout">¶</a>示例 6 : CardLayout</h3>
<p>因为CardLayout需要用到[面板]，[JComboBox]这些内容暂时还没学的内容，所以放在后面讲：[CardLayout]</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2734.png" alt></p>
<h3 id="示例-7-练习-计算器上的按钮"><a class="header-anchor" href="#示例-7-练习-计算器上的按钮">¶</a>示例 7 : 练习-计算器上的按钮</h3>
<p>使用布局器做出计算器上的按钮效果</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2671.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.GridLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;计算器&quot;);</span><br><span class="line">        f.setBounds(300, 400, 400, 300);</span><br><span class="line">        f.setLayout(new GridLayout(4, 5));</span><br><span class="line">        JButton b1&#x3D;new JButton(&quot;7&quot;);</span><br><span class="line">        JButton b2&#x3D;new JButton(&quot;8&quot;);</span><br><span class="line">        JButton b3&#x3D;new JButton(&quot;9&quot;);</span><br><span class="line">        JButton b4&#x3D;new JButton(&quot;&#x2F;&quot;);</span><br><span class="line">        JButton b5&#x3D;new JButton(&quot;sq&quot;);</span><br><span class="line">        JButton b6&#x3D;new JButton(&quot;4&quot;);</span><br><span class="line">        JButton b7&#x3D;new JButton(&quot;5&quot;);</span><br><span class="line">        JButton b8&#x3D;new JButton(&quot;6&quot;);</span><br><span class="line">        JButton b9&#x3D;new JButton(&quot;*&quot;);</span><br><span class="line">        JButton b10&#x3D;new JButton(&quot;%&quot;);</span><br><span class="line">        JButton b11&#x3D;new JButton(&quot;1&quot;);</span><br><span class="line">        JButton b12&#x3D;new JButton(&quot;2&quot;);</span><br><span class="line">        JButton b13&#x3D;new JButton(&quot;3&quot;);</span><br><span class="line">        JButton b14&#x3D;new JButton(&quot;-&quot;);</span><br><span class="line">        JButton b15&#x3D;new JButton(&quot;1&#x2F;x&quot;);</span><br><span class="line">        JButton b16&#x3D;new JButton(&quot;0&quot;);</span><br><span class="line">        JButton b17&#x3D;new JButton(&quot;+&#x2F;-&quot;);</span><br><span class="line">        JButton b18&#x3D;new JButton(&quot;.&quot;);</span><br><span class="line">        JButton b19&#x3D;new JButton(&quot;+&quot;);</span><br><span class="line">        JButton b20&#x3D;new JButton(&quot;&#x3D;&quot;);</span><br><span class="line">        f.add(b1);f.add(b2);f.add(b3);</span><br><span class="line">        f.add(b4);f.add(b5);f.add(b6);</span><br><span class="line">        f.add(b7);f.add(b8);f.add(b9);</span><br><span class="line">        f.add(b10);f.add(b11);f.add(b12);</span><br><span class="line">        f.add(b13);f.add(b14);f.add(b15);</span><br><span class="line">        f.add(b16);f.add(b17);f.add(b18);</span><br><span class="line">        f.add(b19);f.add(b20);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.GridLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;计算器&quot;);</span><br><span class="line">        f.setBounds(300, 400, 400, 300);</span><br><span class="line">        f.setLayout(new GridLayout(4, 5));</span><br><span class="line">        String[]s&#x3D;new String[]&#123;&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;&#x2F;&quot;,&quot;sq&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;*&quot;,&quot;%&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;-&quot;,&quot;1&#x2F;x&quot;,&quot;0&quot;,&quot;+&#x2F;-&quot;,&quot;.&quot;,&quot;+&quot;,&quot;&#x3D;&quot;&#125;;</span><br><span class="line">        for (String string : s) &#123;</span><br><span class="line">            JButton b&#x3D;new JButton(string);</span><br><span class="line">            f.add(b);</span><br><span class="line">        &#125;</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5、SWING-中的组件列表"><a class="header-anchor" href="#5、SWING-中的组件列表">¶</a>5、SWING 中的组件列表</h2>
<p>JAVA的图形界面下有两组控件，一组是awt,一组是swing。<br>
一般都是使用swing</p>
<h3 id="示例-1-标签"><a class="header-anchor" href="#示例-1-标签">¶</a>示例 1 : 标签</h3>
<p>Label用于显示文字</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/918.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.Color;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JLabel l &#x3D; new JLabel(&quot;LOL文字&quot;);</span><br><span class="line">        &#x2F;&#x2F;文字颜色</span><br><span class="line">        l.setForeground(Color.red);</span><br><span class="line">        l.setBounds(50, 50, 280, 30);</span><br><span class="line">  </span><br><span class="line">        f.add(l);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-使用JLabel显示图片"><a class="header-anchor" href="#示例-2-使用JLabel显示图片">¶</a>示例 2 : 使用JLabel显示图片</h3>
<p>java GUI 显示图片是通过在label上设置图标实现的<br>
<strong>注：</strong> 这里的图片路径是<strong>e:/project/j2se/shana.png</strong>，所以要确保这里有图片，不然不会显示<br>
<strong>注：</strong> 图片的后缀名和真实格式，必须保持一致，否则很有可能无法正常显示。 什么意思呢？就是文件本来是jpg的，但是仅仅是把后缀名修改成了png,那么会导致显示失败。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/904.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(580, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line"> </span><br><span class="line">        JLabel l &#x3D; new JLabel();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;根据图片创建ImageIcon对象</span><br><span class="line">        ImageIcon i &#x3D; new ImageIcon(&quot;D:\\java\\workspace\\shana.png&quot;);</span><br><span class="line">        &#x2F;&#x2F;设置ImageIcon</span><br><span class="line">        l.setIcon(i);</span><br><span class="line">        &#x2F;&#x2F;label的大小设置为ImageIcon,否则显示不完整</span><br><span class="line">        l.setBounds(50, 50, i.getIconWidth(), i.getIconHeight());</span><br><span class="line"> </span><br><span class="line">        f.add(l);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-按钮"><a class="header-anchor" href="#示例-3-按钮">¶</a>示例 3 : 按钮</h3>
<p>JButton 普通按钮</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/905.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">          </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JButton b &#x3D; new JButton(&quot;一键秒对方基地挂&quot;);</span><br><span class="line">        b.setBounds(50, 50, 280, 30);</span><br><span class="line">  </span><br><span class="line">        f.add(b);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-复选框"><a class="header-anchor" href="#示例-4-复选框">¶</a>示例 4 : 复选框</h3>
<p>JCheckBox 复选框</p>
<p>使用isSelected来获取是否选中了</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/906.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JCheckBox;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(580, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JCheckBox bCheckBox &#x3D; new JCheckBox(&quot;物理英雄&quot;);</span><br><span class="line">        &#x2F;&#x2F;设置 为 默认被选中</span><br><span class="line">        bCheckBox.setSelected(true);</span><br><span class="line">        bCheckBox.setBounds(50, 50, 130, 30);</span><br><span class="line">        JCheckBox bCheckBox2 &#x3D; new JCheckBox(&quot;魔法 英雄&quot;);</span><br><span class="line">        bCheckBox2.setBounds(50, 100, 130, 30);</span><br><span class="line">        &#x2F;&#x2F;判断 是否 被 选中</span><br><span class="line">        System.out.println(bCheckBox2.isSelected());</span><br><span class="line"> </span><br><span class="line">        f.add(bCheckBox);</span><br><span class="line">        f.add(bCheckBox2);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-5-单选框"><a class="header-anchor" href="#示例-5-单选框">¶</a>示例 5 : 单选框</h3>
<p>JRadioButton 单选框<br>
使用isSelected来获取是否选中了</p>
<p>在这个例子里，两个单选框可以被同时选中，<strong>为了实现只能选中一个</strong>，还需要用到[ButtonGroup]</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/907.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JCheckBox;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JRadioButton;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(580, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JRadioButton b1 &#x3D; new JRadioButton(&quot;物理英雄&quot;);</span><br><span class="line">        &#x2F;&#x2F; 设置 为 默认被选中</span><br><span class="line">        b1.setSelected(true);</span><br><span class="line">        b1.setBounds(50, 50, 130, 30);</span><br><span class="line">        JRadioButton b2 &#x3D; new JRadioButton(&quot;魔法 英雄&quot;);</span><br><span class="line">        b2.setBounds(50, 100, 130, 30);</span><br><span class="line"> </span><br><span class="line">        System.out.println(b2.isSelected());</span><br><span class="line"> </span><br><span class="line">        f.add(b1);</span><br><span class="line">        f.add(b2);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-6-按钮组"><a class="header-anchor" href="#示例-6-按钮组">¶</a>示例 6 : 按钮组</h3>
<p>ButtonGroup 对按钮进行分组，把不同的按钮，放在同一个分组里 ，同一时间，只有一个 按钮 会被选中</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/908.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.ButtonGroup;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JRadioButton;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(580, 240);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JRadioButton b1 &#x3D; new JRadioButton(&quot;物理英雄&quot;);</span><br><span class="line">        b1.setSelected(true);</span><br><span class="line">        b1.setBounds(50, 50, 130, 30);</span><br><span class="line">        JRadioButton b2 &#x3D; new JRadioButton(&quot;魔法 英雄&quot;);</span><br><span class="line">        b2.setBounds(50, 100, 130, 30);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 按钮分组</span><br><span class="line">        ButtonGroup bg &#x3D; new ButtonGroup();</span><br><span class="line">        &#x2F;&#x2F; 把b1，b2放在 同一个 按钮分组对象里 ，这样同一时间，只有一个 按钮 会被选中</span><br><span class="line">        bg.add(b1);</span><br><span class="line">        bg.add(b2);</span><br><span class="line"> </span><br><span class="line">        f.add(b1);</span><br><span class="line">        f.add(b2);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-7-下拉框"><a class="header-anchor" href="#示例-7-下拉框">¶</a>示例 7 : 下拉框</h3>
<p>JComboBox 下拉框<br>
使用getSelectedItem来获取被选中项<br>
使用setSelectedItem() 来指定要选中项</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/909.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JComboBox;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(580, 240);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;下拉框出现的条目</span><br><span class="line">        String[] heros &#x3D; new String[] &#123; &quot;卡特琳娜&quot;, &quot;库奇&quot; &#125;;</span><br><span class="line">        JComboBox cb &#x3D; new JComboBox(heros);</span><br><span class="line"> </span><br><span class="line">        cb.setBounds(50, 50, 80, 30);</span><br><span class="line"> </span><br><span class="line">        f.add(cb);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-8-对话框"><a class="header-anchor" href="#示例-8-对话框">¶</a>示例 8 : 对话框</h3>
<p><strong>JOptionPane</strong> 用于弹出对话框</p>
<p>JOptionPane.<strong>showConfirmDialog</strong>(f, “是否 使用外挂 ？”);<br>
表示询问，第一个参数是该对话框以哪个组件<strong>对齐</strong><br>
JOptionPane.<strong>showInputDialog</strong>(f, “请输入yes，表明使用外挂后果自负”);<br>
接受用户的输入<br>
JOptionPane.<strong>showMessageDialog</strong>(f, “你使用外挂被抓住！ 罚拣肥皂3次！”);<br>
显示消息</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/910.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(580, 240);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line"> </span><br><span class="line">        int option &#x3D; JOptionPane.showConfirmDialog(f, &quot;是否 使用外挂 ？&quot;);</span><br><span class="line">        if (JOptionPane.OK_OPTION &#x3D;&#x3D; option) &#123;</span><br><span class="line">            String answer &#x3D; JOptionPane.showInputDialog(f, &quot;请输入yes，表明使用外挂后果自负&quot;);</span><br><span class="line">            if (&quot;yes&quot;.equals(answer))</span><br><span class="line">                JOptionPane.showMessageDialog(f, &quot;你使用外挂被抓住！ 罚拣肥皂3次！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-9-文本框"><a class="header-anchor" href="#示例-9-文本框">¶</a>示例 9 : 文本框</h3>
<p>JTextField 输入框<br>
setText 设置文本<br>
getText 获取文本<br>
JTextField 是单行文本框，如果要输入多行数据，请使用[JTextArea]</p>
<p><strong>tfPassword.grabFocus();</strong> 表示让密码输入框获取焦点</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/911.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line"> </span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line"> </span><br><span class="line">        JLabel lName &#x3D; new JLabel(&quot;账号：&quot;);</span><br><span class="line">        &#x2F;&#x2F; 输入框</span><br><span class="line">        JTextField tfName &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">        tfName.setText(&quot;请输入账号&quot;);</span><br><span class="line">        tfName.setPreferredSize(new Dimension(80, 30));</span><br><span class="line"> </span><br><span class="line">        JLabel lPassword &#x3D; new JLabel(&quot;密码：&quot;);</span><br><span class="line">        &#x2F;&#x2F; 输入框</span><br><span class="line">        JTextField tfPassword &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">        tfPassword.setText(&quot;请输入密码&quot;);</span><br><span class="line">        tfPassword.setPreferredSize(new Dimension(80, 30));</span><br><span class="line"> </span><br><span class="line">        f.add(lName);</span><br><span class="line">        f.add(tfName);</span><br><span class="line">        f.add(lPassword);</span><br><span class="line">        f.add(tfPassword);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">        tfPassword.grabFocus();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-10-密码框"><a class="header-anchor" href="#示例-10-密码框">¶</a>示例 10 : 密码框</h3>
<p>JPasswordField 密码框<br>
与文本框不同，获取密码框里的内容，推荐使用getPassword，该方法会返回一个<strong>字符数组</strong>，而非字符串</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/912.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JPasswordField;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line"> </span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line"> </span><br><span class="line">        JLabel l &#x3D; new JLabel(&quot;密码：&quot;);</span><br><span class="line">        &#x2F;&#x2F; 密码框</span><br><span class="line">        JPasswordField pf &#x3D; new JPasswordField(&quot;&quot;);</span><br><span class="line">        pf.setText(&quot;&amp;48kdh4@#&quot;);</span><br><span class="line">        pf.setPreferredSize(new Dimension(80, 30));</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 与文本框不同，获取密码框里的内容，推荐使用getPassword，该方法会返回一个字符数组，而非字符串</span><br><span class="line">        char[] password &#x3D; pf.getPassword();</span><br><span class="line">        String p &#x3D; String.valueOf(password);</span><br><span class="line">        System.out.println(p);</span><br><span class="line"> </span><br><span class="line">        f.add(l);</span><br><span class="line">        f.add(pf);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-11-文本域"><a class="header-anchor" href="#示例-11-文本域">¶</a>示例 11 : 文本域</h3>
<p>JTextArea：文本域。<br>
和[文本框JTextField]不同的是，文本域可以输入多行数据<br>
如果要给文本域初始文本，通过**\n<strong>来实现换行效果<br>
JTextArea通常会用到</strong>append<strong>来进行数据追加<br>
如果文本太长，会跑出去，可以通过</strong>setLineWrap(true)** 来做到自动换行</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/913.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JTextArea;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">  </span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line">  </span><br><span class="line">        JLabel l &#x3D; new JLabel(&quot;文本域：&quot;);</span><br><span class="line">  </span><br><span class="line">        JTextArea ta &#x3D; new JTextArea();</span><br><span class="line">        ta.setPreferredSize(new Dimension(200, 150));</span><br><span class="line">        &#x2F;&#x2F;\n换行符</span><br><span class="line">        ta.setText(&quot;抢人头！\n抢你妹啊抢！\n&quot;);</span><br><span class="line">        &#x2F;&#x2F;追加数据</span><br><span class="line">        ta.append(&quot;我去送了了了了了了了了了了了了了了了了了了了了了了了了&quot;);</span><br><span class="line">        &#x2F;&#x2F;设置自动换行</span><br><span class="line">        ta.setLineWrap(true);</span><br><span class="line">        f.add(l);</span><br><span class="line">        f.add(ta);</span><br><span class="line">  </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-12-进度条"><a class="header-anchor" href="#示例-12-进度条">¶</a>示例 12 : 进度条</h3>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2703.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JProgressBar;</span><br><span class="line">import javax.swing.JTextArea;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line"> </span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line"> </span><br><span class="line">        JProgressBar pb &#x3D; new JProgressBar();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;进度条最大100</span><br><span class="line">        pb.setMaximum(100);</span><br><span class="line">        &#x2F;&#x2F;当前进度是50</span><br><span class="line">        pb.setValue(50);</span><br><span class="line">        &#x2F;&#x2F;显示当前进度</span><br><span class="line">        pb.setStringPainted(true);</span><br><span class="line"> </span><br><span class="line">        f.add(pb);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-13-文件选择器"><a class="header-anchor" href="#示例-13-文件选择器">¶</a>示例 13 : 文件选择器</h3>
<p>JFileChooser 表示文件选择器<br>
使用FileFilter用于仅选择.txt文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fc.setFileFilter(new FileFilter() &#123;</span><br><span class="line">	public String getDescription() &#123;</span><br><span class="line">		return &quot;.txt&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">	public boolean accept(File f) &#123;</span><br><span class="line">		return f.getName().toLowerCase().endsWith(&quot;.txt&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>fc.showOpenDialog();</strong> 用于打开文件<br>
<strong>fc.showSaveDialog();</strong> 用于保存文件</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2736.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.io.File;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFileChooser;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.filechooser.FileFilter;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LOL&quot;);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line">        JFileChooser fc &#x3D; new JFileChooser();</span><br><span class="line">        fc.setFileFilter(new FileFilter() &#123;</span><br><span class="line">             </span><br><span class="line">            @Override</span><br><span class="line">            public String getDescription() &#123;</span><br><span class="line">                &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">                return &quot;.txt&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">            @Override</span><br><span class="line">            public boolean accept(File f) &#123;</span><br><span class="line">                return f.getName().toLowerCase().endsWith(&quot;.txt&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  </span><br><span class="line">        JButton bOpen &#x3D; new JButton(&quot;打开文件&quot;);</span><br><span class="line">  </span><br><span class="line">        JButton bSave &#x3D; new JButton(&quot;保存文件&quot;);</span><br><span class="line">  </span><br><span class="line">        f.add(bOpen);</span><br><span class="line">        f.add(bSave);</span><br><span class="line">  </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setSize(250, 150);</span><br><span class="line">        f.setLocationRelativeTo(null);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">          </span><br><span class="line">        bOpen.addActionListener(new ActionListener() &#123;</span><br><span class="line">              </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                 int returnVal &#x3D;  fc.showOpenDialog(f);</span><br><span class="line">                 File file &#x3D; fc.getSelectedFile();</span><br><span class="line">                 if (returnVal &#x3D;&#x3D; JFileChooser.APPROVE_OPTION) &#123;</span><br><span class="line">                     JOptionPane.showMessageDialog(f, &quot;计划打开文件:&quot; + file.getAbsolutePath());</span><br><span class="line">                 &#125;</span><br><span class="line">                  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bSave.addActionListener(new ActionListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                int returnVal &#x3D;  fc.showSaveDialog(f);</span><br><span class="line">                File file &#x3D; fc.getSelectedFile();</span><br><span class="line">                if (returnVal &#x3D;&#x3D; JFileChooser.APPROVE_OPTION) &#123;</span><br><span class="line">                    JOptionPane.showMessageDialog(f, &quot;计划保存到文件:&quot; + file.getAbsolutePath());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6、SWING-四种常见面板"><a class="header-anchor" href="#6、SWING-四种常见面板">¶</a>6、SWING 四种常见面板</h2>
<h3 id="示例-1-基本面板"><a class="header-anchor" href="#示例-1-基本面板">¶</a>示例 1 : 基本面板</h3>
<p>JPanel即为基本面板<br>
面板和JFrame一样都是容器，不过面板一般用来充当<strong>中间容器</strong>，把组件放在面板上，然后再把面板放在窗体上。<br>
一旦移动一个面板，其上面的组件，就会<strong>全部统一跟着移动</strong>，采用这种方式，便于进行整体界面的设计</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/893.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Color;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line"> </span><br><span class="line">        f.setLayout(null);</span><br><span class="line"> </span><br><span class="line">        JPanel p1 &#x3D; new JPanel();</span><br><span class="line">        &#x2F;&#x2F; 设置面板大小</span><br><span class="line">        p1.setBounds(50, 50, 300, 60);</span><br><span class="line">        &#x2F;&#x2F; 设置面板背景颜色</span><br><span class="line">        p1.setBackground(Color.RED);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 这一句可以没有，因为JPanel默认就是采用的FlowLayout</span><br><span class="line">        p1.setLayout(new FlowLayout());</span><br><span class="line"> </span><br><span class="line">        JButton b1 &#x3D; new JButton(&quot;英雄1&quot;);</span><br><span class="line">        JButton b2 &#x3D; new JButton(&quot;英雄2&quot;);</span><br><span class="line">        JButton b3 &#x3D; new JButton(&quot;英雄3&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把按钮加入面板</span><br><span class="line">        p1.add(b1);</span><br><span class="line">        p1.add(b2);</span><br><span class="line">        p1.add(b3);</span><br><span class="line"> </span><br><span class="line">        JPanel p2 &#x3D; new JPanel();</span><br><span class="line">        JButton b4 &#x3D; new JButton(&quot;英雄4&quot;);</span><br><span class="line">        JButton b5 &#x3D; new JButton(&quot;英雄5&quot;);</span><br><span class="line">        JButton b6 &#x3D; new JButton(&quot;英雄6&quot;);</span><br><span class="line"> </span><br><span class="line">        p2.add(b4);</span><br><span class="line">        p2.add(b5);</span><br><span class="line">        p2.add(b6);</span><br><span class="line"> </span><br><span class="line">        p2.setBackground(Color.BLUE);</span><br><span class="line">        p2.setBounds(10, 150, 300, 60);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把面板加入窗口</span><br><span class="line">        f.add(p1);</span><br><span class="line">        f.add(p2);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-ContentPane"><a class="header-anchor" href="#示例-2-ContentPane">¶</a>示例 2 : ContentPane</h3>
<p>JFrame上有一层面板，叫做ContentPane<br>
平时通过f.add()向JFrame增加组件，其实是向JFrame上的 ContentPane加东西</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JButton b &#x3D; new JButton(&quot;一键秒对方基地挂&quot;);</span><br><span class="line">        b.setBounds(50, 50, 280, 30);</span><br><span class="line"> </span><br><span class="line">        f.add(b);</span><br><span class="line">        &#x2F;&#x2F; JFrame上有一层面板，叫做ContentPane</span><br><span class="line">        &#x2F;&#x2F; 平时通过f.add()向JFrame增加组件，其实是向JFrame上的 ContentPane加东西</span><br><span class="line">        &#x2F;&#x2F; f.add等同于f.getContentPane().add(b);</span><br><span class="line">        f.getContentPane().add(b);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; b.getParent()获取按钮b所处于的容器</span><br><span class="line">        &#x2F;&#x2F; 打印出来可以看到，实际上是ContentPane而非JFrame</span><br><span class="line">        System.out.println(b.getParent());</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-SplitPanel"><a class="header-anchor" href="#示例-3-SplitPanel">¶</a>示例 3 : SplitPanel</h3>
<p>创建一个水平JSplitPane，左边是pLeft,右边是pRight</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/895.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.Color;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JSplitPane;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">  </span><br><span class="line">        f.setLayout(null);</span><br><span class="line">  </span><br><span class="line">        JPanel pLeft &#x3D; new JPanel();</span><br><span class="line">        pLeft.setBounds(50, 50, 300, 60);</span><br><span class="line">  </span><br><span class="line">        pLeft.setBackground(Color.RED);</span><br><span class="line">  </span><br><span class="line">        pLeft.setLayout(new FlowLayout());</span><br><span class="line">  </span><br><span class="line">        JButton b1 &#x3D; new JButton(&quot;盖伦&quot;);</span><br><span class="line">        JButton b2 &#x3D; new JButton(&quot;提莫&quot;);</span><br><span class="line">        JButton b3 &#x3D; new JButton(&quot;安妮&quot;);</span><br><span class="line">  </span><br><span class="line">        pLeft.add(b1);</span><br><span class="line">        pLeft.add(b2);</span><br><span class="line">        pLeft.add(b3);</span><br><span class="line">  </span><br><span class="line">        JPanel pRight &#x3D; new JPanel();</span><br><span class="line">        JButton b4 &#x3D; new JButton(&quot;英雄4&quot;);</span><br><span class="line">        JButton b5 &#x3D; new JButton(&quot;英雄5&quot;);</span><br><span class="line">        JButton b6 &#x3D; new JButton(&quot;英雄6&quot;);</span><br><span class="line">  </span><br><span class="line">        pRight.add(b4);</span><br><span class="line">        pRight.add(b5);</span><br><span class="line">        pRight.add(b6);</span><br><span class="line">  </span><br><span class="line">        pRight.setBackground(Color.BLUE);</span><br><span class="line">        pRight.setBounds(10, 150, 300, 60);</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 创建一个水平JSplitPane，左边是p1,右边是p2</span><br><span class="line">        JSplitPane sp &#x3D; new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, pLeft, pRight);</span><br><span class="line">        &#x2F;&#x2F; 设置分割条的位置</span><br><span class="line">        sp.setDividerLocation(80);</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 把sp当作ContentPane</span><br><span class="line">        f.setContentPane(sp);</span><br><span class="line">  </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-JScrollPanel"><a class="header-anchor" href="#示例-4-JScrollPanel">¶</a>示例 4 : JScrollPanel</h3>
<p>使用带滚动条的面板有两种方式</p>
<ol>
<li>在创建JScrollPane，把组件作为参数传进去</li>
</ol>
<p>JScrollPane sp = new JScrollPane(ta);</p>
<ol start="2">
<li>希望带滚动条的面板显示其他组件的时候，调用setViewportView</li>
</ol>
<p>sp.setViewportView(ta);</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2721.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTextArea;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line"> </span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        &#x2F;&#x2F;准备一个文本域，在里面放很多数据</span><br><span class="line">        JTextArea ta &#x3D; new JTextArea();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 1000; i++) &#123;</span><br><span class="line">            ta.append(String.valueOf(i));</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;自动换行</span><br><span class="line">        ta.setLineWrap(true);</span><br><span class="line">        JScrollPane sp &#x3D; new JScrollPane(ta);</span><br><span class="line"> </span><br><span class="line">        f.setContentPane(sp);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-5-TabbedPanel"><a class="header-anchor" href="#示例-5-TabbedPanel">¶</a>示例 5 : TabbedPanel</h3>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/896.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.Color;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JTabbedPane;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">  </span><br><span class="line">        f.setLayout(null);</span><br><span class="line">  </span><br><span class="line">        JPanel p1 &#x3D; new JPanel();</span><br><span class="line">        p1.setBounds(50, 50, 300, 60);</span><br><span class="line">  </span><br><span class="line">        p1.setBackground(Color.RED);</span><br><span class="line">  </span><br><span class="line">        p1.setLayout(new FlowLayout());</span><br><span class="line">  </span><br><span class="line">        JButton b1 &#x3D; new JButton(&quot;英雄1&quot;);</span><br><span class="line">        JButton b2 &#x3D; new JButton(&quot;英雄2&quot;);</span><br><span class="line">        JButton b3 &#x3D; new JButton(&quot;英雄3&quot;);</span><br><span class="line">  </span><br><span class="line">        p1.add(b1);</span><br><span class="line">        p1.add(b2);</span><br><span class="line">        p1.add(b3);</span><br><span class="line">  </span><br><span class="line">        JPanel p2 &#x3D; new JPanel();</span><br><span class="line">        JButton b4 &#x3D; new JButton(&quot;英雄4&quot;);</span><br><span class="line">        JButton b5 &#x3D; new JButton(&quot;英雄5&quot;);</span><br><span class="line">        JButton b6 &#x3D; new JButton(&quot;英雄6&quot;);</span><br><span class="line">  </span><br><span class="line">        p2.add(b4);</span><br><span class="line">        p2.add(b5);</span><br><span class="line">        p2.add(b6);</span><br><span class="line">  </span><br><span class="line">        p2.setBackground(Color.BLUE);</span><br><span class="line">        p2.setBounds(10, 150, 300, 60);</span><br><span class="line">  </span><br><span class="line">        JTabbedPane tp &#x3D; new JTabbedPane();</span><br><span class="line">        tp.add(p1);</span><br><span class="line">        tp.add(p2);</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 设置tab的标题</span><br><span class="line">        tp.setTitleAt(0, &quot;红色tab&quot;);</span><br><span class="line">        tp.setTitleAt(1, &quot;蓝色tab&quot;);</span><br><span class="line">         </span><br><span class="line">        ImageIcon i &#x3D; new ImageIcon(&quot;e:&#x2F;project&#x2F;j2se&#x2F;j.png&quot;);</span><br><span class="line">        tp.setIconAt(0,i );</span><br><span class="line">        tp.setIconAt(1,i );</span><br><span class="line">  </span><br><span class="line">        f.setContentPane(tp);</span><br><span class="line">  </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-6-CardLayerout"><a class="header-anchor" href="#示例-6-CardLayerout">¶</a>示例 6 : CardLayerout</h3>
<p>CardLayerout 布局器 很像[TabbedPanel] ，在本例里面上面是一个下拉框，下面是一个CardLayerout 的JPanel<br>
这个JPanel里有两个面板，可以通过CardLayerout方便的切换</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2735.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line">import java.awt.CardLayout;</span><br><span class="line">import java.awt.event.ItemEvent;</span><br><span class="line">import java.awt.event.ItemListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JComboBox;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;CardLayerout&quot;);</span><br><span class="line"> </span><br><span class="line">        JPanel comboBoxPane &#x3D; new JPanel();</span><br><span class="line">        String buttonPanel &#x3D; &quot;按钮面板&quot;;</span><br><span class="line">        String inputPanel &#x3D; &quot;输入框面板&quot;;</span><br><span class="line">        String comboBoxItems[] &#x3D; &#123; buttonPanel, inputPanel &#125;;</span><br><span class="line">        JComboBox&lt;String&gt; cb &#x3D; new JComboBox&lt;&gt;(comboBoxItems);</span><br><span class="line">        comboBoxPane.add(cb);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 两个Panel充当卡片</span><br><span class="line">        JPanel card1 &#x3D; new JPanel();</span><br><span class="line">        card1.add(new JButton(&quot;按钮 1&quot;));</span><br><span class="line">        card1.add(new JButton(&quot;按钮 2&quot;));</span><br><span class="line">        card1.add(new JButton(&quot;按钮 3&quot;));</span><br><span class="line"> </span><br><span class="line">        JPanel card2 &#x3D; new JPanel();</span><br><span class="line">        card2.add(new JTextField(&quot;输入框&quot;, 20));</span><br><span class="line"> </span><br><span class="line">        JPanel cards; &#x2F;&#x2F; a panel that uses CardLayout</span><br><span class="line">        cards &#x3D; new JPanel(new CardLayout());</span><br><span class="line">        cards.add(card1, buttonPanel);</span><br><span class="line">        cards.add(card2, inputPanel);</span><br><span class="line"> </span><br><span class="line">        f.add(comboBoxPane, BorderLayout.NORTH);</span><br><span class="line">        f.add(cards, BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setSize(250, 150);</span><br><span class="line">        f.setLocationRelativeTo(null);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line"> </span><br><span class="line">        cb.addItemListener(new ItemListener() &#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void itemStateChanged(ItemEvent evt) &#123;</span><br><span class="line">                CardLayout cl &#x3D; (CardLayout) (cards.getLayout());</span><br><span class="line">                cl.show(cards, (String) evt.getItem());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);    </span><br><span class="line">    &#125;</span><br><span class="line">         </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-7-练习-SplitPanel"><a class="header-anchor" href="#示例-7-练习-SplitPanel">¶</a>示例 7 : 练习-SplitPanel</h3>
<p>设计一个像[SplitPanel]的左右风格的SplitPanel<br>
左边放3个按钮，上面的文字分别是: 盖伦，提莫，安妮<br>
右边默认显示盖伦<br>
当左边按钮点击的时候，右边就会显示对应的图片</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2701.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JSplitPane;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;LOL&quot;);</span><br><span class="line">        f.setBounds(300, 300, 500, 400);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line">        JPanel p1&#x3D;new JPanel();</span><br><span class="line">        p1.setBounds(200, 100, 200, 200);</span><br><span class="line">        JPanel p2&#x3D;new JPanel();</span><br><span class="line">        p2.setBounds(100, 100, 200, 200);</span><br><span class="line">        JButton b1&#x3D;new JButton(&quot;安妮&quot;);</span><br><span class="line">        JButton b2&#x3D;new JButton(&quot;提莫&quot;);</span><br><span class="line">        JButton b3&#x3D;new JButton(&quot;盖伦&quot;);</span><br><span class="line">        p1.add(b1);</span><br><span class="line">        p1.add(b2);</span><br><span class="line">        p1.add(b3);</span><br><span class="line">        JLabel l1&#x3D;new JLabel();</span><br><span class="line">        JLabel l2&#x3D;new JLabel();</span><br><span class="line">        JLabel l3&#x3D;new JLabel();</span><br><span class="line">        ImageIcon i1&#x3D;new ImageIcon(&quot;D:\\java\\workspace\\annie.jpg&quot;);</span><br><span class="line">        ImageIcon i2&#x3D;new ImageIcon(&quot;D:\\java\\workspace\\gareen.jpg&quot;);</span><br><span class="line">        ImageIcon i3&#x3D;new ImageIcon(&quot;D:\\java\\workspace\\teemo.jpg&quot;);</span><br><span class="line">        l1.setIcon(i1);</span><br><span class="line">        l2.setIcon(i2);</span><br><span class="line">        l3.setIcon(i3);</span><br><span class="line">        l1.setVisible(false);</span><br><span class="line">        l2.setVisible(false);</span><br><span class="line">        l3.setVisible(false);</span><br><span class="line">        p2.add(l1);</span><br><span class="line">        p2.add(l2);</span><br><span class="line">        p2.add(l3);</span><br><span class="line">         </span><br><span class="line">        JSplitPane  sp&#x3D;new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,p1,p2);</span><br><span class="line">        sp.setDividerLocation(100);</span><br><span class="line">        f.setContentPane(sp);</span><br><span class="line">        b1.addActionListener(new ActionListener()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                l1.setVisible(true);   </span><br><span class="line">                l2.setVisible(false);</span><br><span class="line">                l3.setVisible(false);</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">        b2.addActionListener(new ActionListener()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                l2.setVisible(true);</span><br><span class="line">                l1.setVisible(false);</span><br><span class="line">                l3.setVisible(false);</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">        b3.addActionListener(new ActionListener()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                l3.setVisible(true);   </span><br><span class="line">                l1.setVisible(false);</span><br><span class="line">                l2.setVisible(false);</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-8-练习-按照eclipse的风格显示多个java文件"><a class="header-anchor" href="#示例-8-练习-按照eclipse的风格显示多个java文件">¶</a>示例 8 : 练习-按照eclipse的风格显示多个java文件</h3>
<p>参考eclipse的风格，借助TabbedPanel显示一个包下所有的java文件<br>
假设包 jdbc 中有如下java文件<br>
ConnectionPool.java<br>
DAO.java<br>
HeroDAO.java<br>
TestConnectionPool.java<br>
TestDAO.java<br>
TestJDBC.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTabbedPane;</span><br><span class="line">import javax.swing.JTextArea;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static String[] outputText(File f) &#123;</span><br><span class="line">        String[] fileNames &#x3D; f.list();</span><br><span class="line">        String[] s &#x3D; new String[fileNames.length];</span><br><span class="line">        for (int j &#x3D; 0; j &lt; fileNames.length; j++) &#123;</span><br><span class="line">            File file &#x3D; new File( &quot;D:\\java\\workspace\\zerozero\\src\\three\\&quot;+ fileNames[j]);</span><br><span class="line">            try (FileReader fr &#x3D; new FileReader(file)) &#123;</span><br><span class="line">                char[] all &#x3D; new char[(int)file.length()];</span><br><span class="line">                fr.read(all);</span><br><span class="line">                s[j] &#x3D; String.valueOf(all);</span><br><span class="line">                 </span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return s;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        File F&#x3D;new File(&quot;D:\\java\\workspace\\zerozero\\src\\three&quot;);</span><br><span class="line">        String[]fileName&#x3D;F.list();</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;LOL&quot;);</span><br><span class="line">        f.setBounds(0, 0, 1280, 720);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JTabbedPane tp&#x3D;new JTabbedPane();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; fileName.length; i++) &#123;</span><br><span class="line">            JTextArea ta&#x3D;new JTextArea();</span><br><span class="line">            JScrollPane sp&#x3D;new JScrollPane(ta);</span><br><span class="line">            ta.setText(outputText(F)[i]);</span><br><span class="line">            tp.add(sp);</span><br><span class="line">            tp.setTitleAt(i, fileName[i]);</span><br><span class="line">        &#125;  </span><br><span class="line">        f.setContentPane(tp);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7、组件综合练习"><a class="header-anchor" href="#7、组件综合练习">¶</a>7、组件综合练习</h2>
<h3 id="步骤-1-练习-为空判断"><a class="header-anchor" href="#步骤-1-练习-为空判断">¶</a>步骤 1 : 练习-为空判断</h3>
<p>在JTextField中输入数据，在旁边加一个按钮JButton,当点击按钮的时候，判断JTextFiled中有没有数据，并使用JOptionPane进行提示</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2673.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;测试题1&quot;);</span><br><span class="line">        f.setBounds(300, 300, 400, 300);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line">        JTextField tf&#x3D;new JTextField();</span><br><span class="line">        JButton b&#x3D;new JButton(&quot;检测&quot;);</span><br><span class="line">        tf.setPreferredSize(new Dimension(100,30));</span><br><span class="line">        f.add(tf);</span><br><span class="line">        f.add(b);</span><br><span class="line">        b.addActionListener(new ActionListener()&#123;</span><br><span class="line">             </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                if(tf.getText().equals(&quot;&quot;))&#123;</span><br><span class="line">                    JOptionPane.showMessageDialog(f, &quot;文本内容为空&quot;);</span><br><span class="line">                &#125;              </span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-数字校验"><a class="header-anchor" href="#步骤-2-练习-数字校验">¶</a>步骤 2 : 练习-数字校验</h3>
<p>在JTextField中输入数据，在旁边加一个按钮JButton,当点击按钮的时候，判断JTextFiled中的数据是否是数字，并使用JOptionPane进行提示</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2675.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"></span><br><span class="line">import javax.swing.*;</span><br><span class="line">import java.awt.*;</span><br><span class="line">import java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">	public static boolean isNumeric(String str)&#123;</span><br><span class="line">		Pattern pattern &#x3D; Pattern.compile(&quot;[0-9]*&quot;);</span><br><span class="line">		return pattern.matcher(str).matches();</span><br><span class="line">	&#125;</span><br><span class="line">	public static void main(String[] args)&#123;</span><br><span class="line"></span><br><span class="line">		JFrame jf &#x3D; new JFrame(&quot;LOL&quot;);</span><br><span class="line">		jf.setSize(416,300);</span><br><span class="line">		jf.setLocation(500,300);</span><br><span class="line">		jf.setLayout(null);</span><br><span class="line"></span><br><span class="line">		JPanel jp &#x3D; new JPanel();</span><br><span class="line">		jp.setBounds(8,8,400,300);</span><br><span class="line">		jp.setLayout(new FlowLayout());</span><br><span class="line"></span><br><span class="line">		JTextField content &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">		content.setPreferredSize(new Dimension(80,30));</span><br><span class="line"></span><br><span class="line">		JButton jb &#x3D; new JButton(&quot;检测&quot;);</span><br><span class="line">		jb.setSize(50,30);</span><br><span class="line">		jb.addActionListener(e-&gt;&#123;</span><br><span class="line">			String cont &#x3D; content.getText();</span><br><span class="line">			if(cont.isEmpty()) &#123;</span><br><span class="line">				JOptionPane.showMessageDialog(jf,&quot;输入框内容为空&quot;);&#125;</span><br><span class="line">			else&#123;</span><br><span class="line">				if(isNumeric(cont))</span><br><span class="line">					JOptionPane.showMessageDialog(jf,&quot;输入框内容是数字:&quot;+cont);</span><br><span class="line">				else</span><br><span class="line">					JOptionPane.showMessageDialog(jf,&quot;输入框内容不是数字&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">		jp.add(content);</span><br><span class="line">		jp.add(jb);</span><br><span class="line"></span><br><span class="line">		jf.add(jp);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">		jf.setVisible(true);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;测试题2&quot;);</span><br><span class="line">        f.setBounds(300, 300, 400, 300);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line">        JTextField tf&#x3D;new JTextField();</span><br><span class="line">        JButton b&#x3D;new JButton(&quot;检测&quot;);</span><br><span class="line">        tf.setPreferredSize(new Dimension(100,30));</span><br><span class="line">         </span><br><span class="line">        f.add(tf);</span><br><span class="line">        f.add(b);</span><br><span class="line">        b.addActionListener(new ActionListener()&#123;</span><br><span class="line">             </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                if(tf.getText().equals(&quot;&quot;))&#123;</span><br><span class="line">                    JOptionPane.showMessageDialog(f, &quot;文本内容为空&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                else&#123;</span><br><span class="line">                    String s&#x3D;tf.getText();</span><br><span class="line">                    for (int i &#x3D; 0; i &lt; s.length(); i++) &#123;</span><br><span class="line">                        if(!Character.isDigit(s.charAt(i)))&#123;</span><br><span class="line">                            JOptionPane.showMessageDialog(f, &quot;您输入的不是整数&quot;);</span><br><span class="line">                        &#125;  </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-账号密码验证"><a class="header-anchor" href="#步骤-3-练习-账号密码验证">¶</a>步骤 3 : 练习-账号密码验证</h3>
<p>准备两个JTextFiled,一个用于输入账号，一个用于输入密码。</p>
<p>再准备一个JButton，上面的文字是登陆</p>
<p>点击按钮之后，首先进行为空判断，如果都不为空，则把账号和密码，拿到数据库中进行比较([SQL语句判断账号密码是否正确])，根据判断结果，使用JOptionPane进行提示。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2677.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.JPasswordField;</span><br><span class="line">import javax.swing.JTextPane;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;登录界面&quot;);</span><br><span class="line">        f.setBounds(300, 300, 400, 300);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line">        JLabel l1&#x3D;new JLabel(&quot;账号：&quot;);</span><br><span class="line">        JLabel l2&#x3D;new JLabel(&quot;密码：&quot;);</span><br><span class="line">        JTextPane tp1&#x3D;new JTextPane();</span><br><span class="line">        tp1.setPreferredSize(new Dimension(120,30));</span><br><span class="line">        JPasswordField pf&#x3D;new JPasswordField();</span><br><span class="line">        pf.setPreferredSize(new Dimension(120,30));</span><br><span class="line">        JButton b&#x3D;new JButton(&quot;登录&quot;);</span><br><span class="line">        b.addActionListener(new ActionListener()&#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                char[]C&#x3D;pf.getPassword();</span><br><span class="line">                String str&#x3D;String.valueOf(C);</span><br><span class="line">                if((tp1.getText().equals(&quot;&quot;))||(C.length&#x3D;&#x3D;0))&#123;</span><br><span class="line">                    JOptionPane.showMessageDialog(f, &quot;账号或密码输入为空&quot;);</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">                    &#125; catch (ClassNotFoundException e2) &#123;</span><br><span class="line">                        e2.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Connection c&#x3D;DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;how2java?&quot;+&quot;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;&quot;+&quot;useSSL&#x3D;false&amp;serverTimezone&#x3D;Hongkong&quot;,&quot;root&quot;,&quot;admin&quot;);</span><br><span class="line">                        Statement s&#x3D;c.createStatement();</span><br><span class="line">                        String sql&#x3D;&quot;select*from user where name&#x3D;&#39;&quot;+tp1.getText()+&quot;&#39;and password&#x3D;&#39;&quot;+str+&quot;&#39; &quot;;</span><br><span class="line">                        ResultSet rs&#x3D;s.executeQuery(sql);</span><br><span class="line">                        if(rs.next())&#123;</span><br><span class="line">                            JOptionPane.showMessageDialog(f, &quot;登录成功&quot;);</span><br><span class="line">                        &#125;else&#123;</span><br><span class="line">                            JOptionPane.showMessageDialog(f, &quot;账号密码错误&quot;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; catch (SQLException e1) &#123;</span><br><span class="line">                         </span><br><span class="line">                        e1.printStackTrace();</span><br><span class="line">                    &#125;  </span><br><span class="line">                &#125;</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">        f.add(l1);</span><br><span class="line">        f.add(tp1);</span><br><span class="line">        f.add(l2);</span><br><span class="line">        f.add(pf);</span><br><span class="line">        f.add(b);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-练习-黄鹤"><a class="header-anchor" href="#步骤-4-练习-黄鹤">¶</a>步骤 4 : 练习-黄鹤</h3>
<p>把[练习-黄鹤]改成Swing来完成</p>
<p>要有为空和数字判断</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2679.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JTextArea;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;黄鹤：&quot;);</span><br><span class="line">        f.setBounds(300, 300, 500, 400);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JLabel l1&#x3D;new JLabel(&quot;地名：&quot;);</span><br><span class="line">        l1.setBounds(10, 10, 100, 30);</span><br><span class="line">        JLabel l2&#x3D;new JLabel(&quot;公司类型：&quot;);</span><br><span class="line">        l2.setBounds(260, 10, 100, 30);</span><br><span class="line">        JLabel l3&#x3D;new JLabel(&quot;公司名称：&quot;);</span><br><span class="line">        l3.setBounds(10, 40, 100, 30);</span><br><span class="line">        JLabel l4&#x3D;new JLabel(&quot;老板名称：&quot;);</span><br><span class="line">        l4.setBounds(260, 40, 100, 30);</span><br><span class="line">        JLabel l5&#x3D;new JLabel(&quot;金额：&quot;);</span><br><span class="line">        l5.setBounds(10, 70, 100, 30);</span><br><span class="line">        JLabel l6&#x3D;new JLabel(&quot;产品：&quot;);</span><br><span class="line">        l6.setBounds(260, 70, 100, 30);</span><br><span class="line">        JLabel l7&#x3D;new JLabel(&quot;价格计量单位&quot;);</span><br><span class="line">        l7.setBounds(10, 100, 100, 30);</span><br><span class="line">        JTextField tf1&#x3D;new JTextField();</span><br><span class="line">        tf1.setBounds(90, 15, 120, 20);</span><br><span class="line">        JTextField tf2&#x3D;new JTextField();</span><br><span class="line">        tf2.setBounds(320, 15, 120, 20);</span><br><span class="line">        JTextField tf3&#x3D;new JTextField();</span><br><span class="line">        tf3.setBounds(90, 45, 120, 20);</span><br><span class="line">        JTextField tf4&#x3D;new JTextField();</span><br><span class="line">        tf4.setBounds(320, 45, 120, 20);</span><br><span class="line">        JTextField tf5&#x3D;new JTextField();</span><br><span class="line">        tf5.setBounds(90, 75, 120, 20);</span><br><span class="line">        JTextField tf6&#x3D;new JTextField();</span><br><span class="line">        tf6.setBounds(320, 75, 120, 20);</span><br><span class="line">        JTextField tf7&#x3D;new JTextField();</span><br><span class="line">        tf7.setBounds(90, 105, 120, 20);</span><br><span class="line">        JButton b&#x3D;new JButton(&quot;生成&quot;);</span><br><span class="line">        JButton b1&#x3D;new JButton(&quot;重置&quot;);</span><br><span class="line">        b.setBounds(140,130,70,30);</span><br><span class="line">        b1.setBounds(270,130,70,30);</span><br><span class="line">        JTextArea ta&#x3D;new JTextArea();</span><br><span class="line">        ta.setBounds(5, 170, 475, 195);</span><br><span class="line">        f.add(l1);f.add(tf1);</span><br><span class="line">        f.add(l2);f.add(tf2);</span><br><span class="line">        f.add(l3);f.add(tf3);</span><br><span class="line">        f.add(l4);f.add(tf4);</span><br><span class="line">        f.add(l5);f.add(tf5);</span><br><span class="line">        f.add(l6);f.add(tf6);</span><br><span class="line">        f.add(l7);f.add(tf7);</span><br><span class="line">        f.add(b);</span><br><span class="line">        f.add(b1);</span><br><span class="line">        f.add(ta);</span><br><span class="line">        b.addActionListener(new ActionListener()&#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent arg0) &#123;</span><br><span class="line">                String s1&#x3D;&quot;&quot;+tf1.getText()+&quot;最大的&quot;+tf2.getText()+&quot;&quot;+tf3.getText()+&quot;倒闭了,&quot;;</span><br><span class="line">                String s2&#x3D;&quot;王八蛋老板&quot;+tf4.getText()+&quot;吃喝嫖赌，欠下了&quot;+tf5.getText()+&quot;个亿&quot;;</span><br><span class="line">                String s3&#x3D;&quot;带着他的小姨子跑了！我们没办法，拿着&quot;+tf6.getText()+&quot;抵工资！原价都是一&quot;+tf7.getText()+&quot;多、两&quot;+tf7.getText()+&quot;多、三&quot;+tf7.getText()+&quot;多的&quot;+tf6.getText()+&quot;&quot;;</span><br><span class="line">                String s4&#x3D;&quot;现在全部只卖二十块，统统只要二十块！&quot;;</span><br><span class="line">                String s5&#x3D;&quot;王八蛋，你不是人。我们辛辛苦苦给你干了大半年，你不发工资，你还我血汗钱，还我血汗钱！&quot;;</span><br><span class="line">                String str&#x3D;s1+s2+s3+s4+s5;</span><br><span class="line">                ta.setText(str);               </span><br><span class="line">                ta.setLineWrap(true);</span><br><span class="line">                 </span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">        b1.addActionListener(new ActionListener()&#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent arg0) &#123;</span><br><span class="line">                tf1.setText(&quot;&quot;);tf2.setText(&quot;&quot;);tf3.setText(&quot;&quot;);</span><br><span class="line">                tf4.setText(&quot;&quot;);tf5.setText(&quot;&quot;);tf6.setText(&quot;&quot;);</span><br><span class="line">                tf7.setText(&quot;&quot;);</span><br><span class="line">                ta.setText(&quot;&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">         </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">         </span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-复利计算器"><a class="header-anchor" href="#步骤-5-练习-复利计算器">¶</a>步骤 5 : 练习-复利计算器</h3>
<p>参考[练习-百万富翁]，把 [网页版的复利计算器]改成swing来做</p>
<p>复利公式：<br>
F = p* ( (1+r)^n );<br>
<strong>F</strong> 最终收入<br>
<strong>p</strong> 本金<br>
<strong>r</strong> 年利率<br>
<strong>n</strong> 存了多少年</p>
<p>假设情景一：<br>
p = 10000<br>
r = 0.05<br>
n = 1</p>
<p>解读：<br>
本金是10000<br>
年利率是5%<br>
存了一年 1次<br>
复利收入 10000*( (1+0.05)^1 ) = 10500</p>
<p>假设情景二：<br>
p = 10000<br>
r = 0.05<br>
n = 2</p>
<p>解读：<br>
本金是10000<br>
年利率是5%<br>
存了两年<br>
复利收入 10000*( (1+0.05)^2 ) = 11025</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2681.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.text.DecimalFormat;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[]args)&#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;复利计算器&quot;);</span><br><span class="line">        f.setBounds(300, 300, 250, 350);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line">        JPanel p1&#x3D;new JPanel();</span><br><span class="line">        JLabel l1&#x3D;new JLabel(&quot;起始资金&quot;);</span><br><span class="line">        JLabel l11&#x3D;new JLabel(&quot;￥&quot;);</span><br><span class="line">        JTextField tf1&#x3D;new JTextField();</span><br><span class="line">        tf1.setPreferredSize(new Dimension(120,20));</span><br><span class="line">        p1.add(l1);</span><br><span class="line">        p1.add(tf1);</span><br><span class="line">        p1.add(l11);</span><br><span class="line">         </span><br><span class="line">        JPanel p2&#x3D;new JPanel();</span><br><span class="line">        JLabel l2&#x3D;new JLabel(&quot;每年收益&quot;);</span><br><span class="line">        JLabel l22&#x3D;new JLabel(&quot;%&quot;);</span><br><span class="line">        JTextField tf2&#x3D;new JTextField();</span><br><span class="line">        tf2.setPreferredSize(new Dimension(120,20));</span><br><span class="line">        p2.add(l2);</span><br><span class="line">        p2.add(tf2);</span><br><span class="line">        p2.add(l22);</span><br><span class="line">         </span><br><span class="line">        JPanel p3&#x3D;new JPanel();</span><br><span class="line">        JLabel l3&#x3D;new JLabel(&quot;复利年数&quot;);</span><br><span class="line">        JLabel l33&#x3D;new JLabel(&quot;年&quot;);</span><br><span class="line">        JTextField tf3&#x3D;new JTextField();</span><br><span class="line">        tf3.setPreferredSize(new Dimension(120,20));</span><br><span class="line">        p3.add(l3);</span><br><span class="line">        p3.add(tf3);</span><br><span class="line">        p3.add(l33);</span><br><span class="line">         </span><br><span class="line">        JPanel p4&#x3D;new JPanel();</span><br><span class="line">        JLabel l4&#x3D;new JLabel(&quot;追加资金&quot;);</span><br><span class="line">        JLabel l44&#x3D;new JLabel(&quot;￥&quot;);</span><br><span class="line">        JTextField tf4&#x3D;new JTextField();</span><br><span class="line">        tf4.setPreferredSize(new Dimension(120,20));</span><br><span class="line">        p4.add(l4);</span><br><span class="line">        p4.add(tf4);</span><br><span class="line">        p4.add(l44);</span><br><span class="line">     </span><br><span class="line">        JButton b&#x3D;new JButton(&quot;计算&quot;);</span><br><span class="line">        b.setPreferredSize(new Dimension(80,30));</span><br><span class="line">         </span><br><span class="line">        JPanel p5&#x3D;new JPanel();</span><br><span class="line">        JLabel l5&#x3D;new JLabel(&quot;本金和&quot;);</span><br><span class="line">        JLabel l55&#x3D;new JLabel(&quot;￥&quot;);</span><br><span class="line">        JTextField tf5&#x3D;new JTextField();</span><br><span class="line">        tf5.setPreferredSize(new Dimension(120,20));</span><br><span class="line">        p5.add(l5);</span><br><span class="line">        p5.add(tf5);</span><br><span class="line">        p5.add(l55);</span><br><span class="line"> </span><br><span class="line">        JPanel p6&#x3D;new JPanel();</span><br><span class="line">        JLabel l6&#x3D;new JLabel(&quot;利息和&quot;);</span><br><span class="line">        JLabel l66&#x3D;new JLabel(&quot;￥&quot;);</span><br><span class="line">        JTextField tf6&#x3D;new JTextField();</span><br><span class="line">        tf6.setPreferredSize(new Dimension(120,20));</span><br><span class="line">        p6.add(l6);</span><br><span class="line">        p6.add(tf6);</span><br><span class="line">        p6.add(l66);</span><br><span class="line"> </span><br><span class="line">        JPanel p7&#x3D;new JPanel();</span><br><span class="line">        JLabel l7&#x3D;new JLabel(&quot;本息和&quot;);</span><br><span class="line">        JLabel l77&#x3D;new JLabel(&quot;￥&quot;);</span><br><span class="line">        JTextField tf7&#x3D;new JTextField();</span><br><span class="line">        tf7.setPreferredSize(new Dimension(120,20));</span><br><span class="line">        p7.add(l7);</span><br><span class="line">        p7.add(tf7);</span><br><span class="line">        p7.add(l77);</span><br><span class="line"> </span><br><span class="line">        f.add(p1);</span><br><span class="line">        f.add(p2);</span><br><span class="line">        f.add(p3);</span><br><span class="line">        f.add(p4);</span><br><span class="line">        f.add(b);</span><br><span class="line">        f.add(p5);</span><br><span class="line">        f.add(p6);</span><br><span class="line">        f.add(p7);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">         </span><br><span class="line">        b.addActionListener(new ActionListener()&#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent arg0) &#123;</span><br><span class="line">                String s1&#x3D;tf1.getText();</span><br><span class="line">                String s2&#x3D;tf2.getText();</span><br><span class="line">                String s3&#x3D;tf3.getText();</span><br><span class="line">                String s4&#x3D;tf4.getText();</span><br><span class="line">                if((!s1.equals(&quot;&quot;))&amp;&amp;(!s2.equals(&quot;&quot;))&amp;&amp;(!s3.equals(&quot;&quot;)))&#123;</span><br><span class="line">                    DecimalFormat df &#x3D; new DecimalFormat(&quot;,###,###.000&quot;);</span><br><span class="line">                    double p&#x3D;Double.valueOf(s1);</span><br><span class="line">                    double z;</span><br><span class="line">                    if(s4.equals(&quot;&quot;))&#123;</span><br><span class="line">                        z&#x3D;0;</span><br><span class="line">                    &#125;else&#123;</span><br><span class="line">                        z&#x3D;Double.valueOf(s4);  </span><br><span class="line">                    &#125;</span><br><span class="line">                    double r&#x3D;Double.valueOf(s2)&#x2F;100;</span><br><span class="line">                    int n&#x3D;Integer.valueOf(s3);</span><br><span class="line">                    double bcount&#x3D;(p+(n-1)*z);</span><br><span class="line">                    tf5.setText(String.valueOf(df.format(bcount)));</span><br><span class="line">                        for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">                            if(i&#x3D;&#x3D;1)&#123;</span><br><span class="line">                                p&#x3D;p*(1+r);</span><br><span class="line">                            &#125;else&#123;</span><br><span class="line">                                p&#x3D;(p+z)*(1+r);</span><br><span class="line">                            &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    tf7.setText(String.valueOf(df.format(p)));</span><br><span class="line">                    tf6.setText(String.valueOf(df.format(p-bcount)));  </span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    JOptionPane.showMessageDialog(f, &quot;输入信息不完整&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">        &#125;);</span><br><span class="line">                 </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-练习-进度条"><a class="header-anchor" href="#步骤-6-练习-进度条">¶</a>步骤 6 : 练习-进度条</h3>
<p>设计一个线程，每隔100毫秒，就把进度条的进度+1。</p>
<p>从0%一直加到100%</p>
<p>刚开始加的比较快，以每隔100毫秒的速度增加，随着进度的增加，越加越慢，让处女座的使用者，干着急</p>
<p>变得多慢，根据你们和处女座同学，朋友的相处体验，自己把控</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2704.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JProgressBar;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;进度条&quot;);</span><br><span class="line">        f.setBounds(300, 300, 400, 300);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line">        JProgressBar pb&#x3D;new JProgressBar();</span><br><span class="line">        pb.setPreferredSize(new Dimension(150,30));</span><br><span class="line">        pb.setMaximum(100);</span><br><span class="line">        pb.setValue(0);</span><br><span class="line">        pb.setStringPainted(true);</span><br><span class="line">        Thread t1&#x3D;new Thread()&#123;</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                int i&#x3D;1;</span><br><span class="line">                int t&#x3D;10;</span><br><span class="line">                while(i&lt;&#x3D;100)&#123;</span><br><span class="line">                    t&#x3D;t+i;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(t);</span><br><span class="line">                    &#125; catch (Exception e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    pb.setValue(i);</span><br><span class="line">                    i&#x3D;i+1;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t1.start();</span><br><span class="line">        f.add(pb);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">         </span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-7-练习-显示文件夹复制进度条"><a class="header-anchor" href="#步骤-7-练习-显示文件夹复制进度条">¶</a>步骤 7 : 练习-显示文件夹复制进度条</h3>
<p>改进[练习-复制文件夹]提供进度条，把文件复制的进度显示出来。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2449.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"></span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JProgressBar;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">		public static long size &#x3D; 0;</span><br><span class="line">		public static long copySize &#x3D; 0;</span><br><span class="line">		public static void folderSize(String Folder) &#123;</span><br><span class="line">			File f &#x3D; new File(Folder);</span><br><span class="line">			if (!f.exists()) &#123;</span><br><span class="line">				System.out.println(&quot;源文件夹不存在！&quot;);</span><br><span class="line">				return;</span><br><span class="line">			&#125;</span><br><span class="line">			File[] allFiles &#x3D; f.listFiles();</span><br><span class="line">			if (null &#x3D;&#x3D; allFiles)</span><br><span class="line">				return;</span><br><span class="line">			for (File eachFile : allFiles) &#123;</span><br><span class="line">				if (eachFile.isDirectory()) &#123;</span><br><span class="line">					String folder &#x3D; new String(eachFile.getAbsolutePath());</span><br><span class="line">					folderSize(folder);</span><br><span class="line">				&#125; else if (eachFile.isFile()) &#123;</span><br><span class="line">					size +&#x3D; eachFile.length();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		public static void main(String[] args) &#123;</span><br><span class="line">			JFrame f&#x3D;new JFrame();</span><br><span class="line">			f.setLocation(200,200);</span><br><span class="line">			f.setSize(500,150);</span><br><span class="line">			f.setLayout(null);</span><br><span class="line">			JLabel l1&#x3D;new JLabel(&quot;源文件地址：&quot;);</span><br><span class="line">			JLabel l2&#x3D;new JLabel(&quot;目标文件地址：&quot;);</span><br><span class="line">			JLabel l3&#x3D;new JLabel(&quot;文件复制进度：&quot;);</span><br><span class="line">			JTextField t1&#x3D;new JTextField();</span><br><span class="line">			JTextField t2&#x3D;new JTextField();</span><br><span class="line">			JButton b&#x3D;new JButton(&quot;开始复制&quot;);</span><br><span class="line">			JProgressBar pb&#x3D;new JProgressBar();</span><br><span class="line">			pb.setMaximum(100);</span><br><span class="line">			pb.setBounds(240,45,120,20);</span><br><span class="line">			pb.setStringPainted(true);</span><br><span class="line">			l1.setBounds(50,0,100,30);</span><br><span class="line">			t1.setBounds(130,0,100,30);</span><br><span class="line">			l2.setBounds(230,0,100,30);</span><br><span class="line">			t2.setBounds(320,0,100,30);</span><br><span class="line">			b.setBounds(50,40,100,30);</span><br><span class="line">			l3.setBounds(150,40,100,30);</span><br><span class="line">			f.add(l1);</span><br><span class="line">			f.add(l2);f.add(pb);</span><br><span class="line">			f.add(t1);f.add(l3);</span><br><span class="line">			f.add(t2);f.add(b);</span><br><span class="line"></span><br><span class="line">			b.addActionListener(new ActionListener() &#123;</span><br><span class="line">				public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">					String srcFolder&#x3D;t1.getText();</span><br><span class="line">					String destFolder&#x3D;t2.getText();</span><br><span class="line">					folderSize(srcFolder);</span><br><span class="line">					Thread t1&#x3D;new Thread() &#123;</span><br><span class="line">						public void run() &#123;</span><br><span class="line">							copyFolder(srcFolder, destFolder);</span><br><span class="line">						&#125;</span><br><span class="line"></span><br><span class="line">					&#125;;</span><br><span class="line">					t1.start();</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">				public void copyFolder(String srcFolder,String destFolder) &#123;</span><br><span class="line">					File file&#x3D;new File(srcFolder);</span><br><span class="line">					dfs(file,destFolder,srcFolder,destFolder);</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">				public void copyFile(File src,String des,String srcFolder,String destFolder) &#123;</span><br><span class="line">					String string&#x3D;des+&quot;\\&quot;+src.getName();</span><br><span class="line">					File file&#x3D;new File(string);</span><br><span class="line">					file.getParentFile().mkdirs();</span><br><span class="line">					try &#123;</span><br><span class="line">						file.createNewFile();</span><br><span class="line">					&#125; catch (IOException e) &#123;</span><br><span class="line">						&#x2F;&#x2F; TODO: handle exception</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					byte[] b&#x3D;null;</span><br><span class="line">					try (FileInputStream fis&#x3D;new FileInputStream(src)</span><br><span class="line">							)&#123;</span><br><span class="line">						b&#x3D;new byte[(int)src.length()];</span><br><span class="line">						fis.read(b);</span><br><span class="line">					&#125; catch (IOException e) &#123;</span><br><span class="line">						&#x2F;&#x2F; TODO: handle exception</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					try (FileOutputStream fos&#x3D;new FileOutputStream(file))&#123;</span><br><span class="line">						fos.write(b);</span><br><span class="line">					&#125; catch (IOException e) &#123;</span><br><span class="line">						&#x2F;&#x2F; TODO: handle exception</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					copySize+&#x3D;src.length();</span><br><span class="line">					long temp&#x3D;copySize*100&#x2F;size;</span><br><span class="line">					pb.setValue((int)temp);</span><br><span class="line">				&#125;</span><br><span class="line">				public void dfs(File file,String destFolder,String srcFolder,String dest) &#123;</span><br><span class="line">					String strtemp&#x3D;destFolder;;</span><br><span class="line">					File[] fs&#x3D;file.listFiles();</span><br><span class="line">					for(File f:fs) &#123;</span><br><span class="line">						if(f.isDirectory())</span><br><span class="line">						&#123;</span><br><span class="line">							String str&#x3D;destFolder+&quot;\\&quot;+f.getName();</span><br><span class="line">							File file2&#x3D;new File(str);</span><br><span class="line">							file2.mkdirs();</span><br><span class="line">							destFolder&#x3D;destFolder+&quot;\\&quot;+file2.getName();</span><br><span class="line">							dfs(f,destFolder,srcFolder,dest);</span><br><span class="line">							destFolder&#x3D;strtemp;</span><br><span class="line">						&#125;</span><br><span class="line">						else &#123;</span><br><span class="line">							copyFile(f, destFolder,srcFolder,dest);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">			f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">			f.setVisible(true);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8、如何在SWING中使用菜单JMENU"><a class="header-anchor" href="#8、如何在SWING中使用菜单JMENU">¶</a>8、如何在SWING中使用菜单JMENU</h2>
<p>GUI的菜单分为 菜单栏，菜单和菜单项</p>
<h3 id="步骤-1-菜单栏和菜单"><a class="header-anchor" href="#步骤-1-菜单栏和菜单">¶</a>步骤 1 : 菜单栏和菜单</h3>
<p>菜单栏和菜单</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/897.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JMenu;</span><br><span class="line">import javax.swing.JMenuBar;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 菜单栏</span><br><span class="line">        JMenuBar mb &#x3D; new JMenuBar();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 菜单</span><br><span class="line">        JMenu mHero &#x3D; new JMenu(&quot;英雄&quot;);</span><br><span class="line">        JMenu mItem &#x3D; new JMenu(&quot;道具&quot;);</span><br><span class="line">        JMenu mWord &#x3D; new JMenu(&quot;符文&quot;);</span><br><span class="line">        JMenu mSummon &#x3D; new JMenu(&quot;召唤师&quot;);</span><br><span class="line">        JMenu mTalent &#x3D; new JMenu(&quot;天赋树&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把菜单加入到菜单栏</span><br><span class="line">        mb.add(mHero);</span><br><span class="line">        mb.add(mItem);</span><br><span class="line">        mb.add(mWord);</span><br><span class="line">        mb.add(mSummon);</span><br><span class="line">        mb.add(mTalent);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把菜单栏加入到frame，这里用的是set而非add</span><br><span class="line">        f.setJMenuBar(mb);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-菜单项"><a class="header-anchor" href="#步骤-2-菜单项">¶</a>步骤 2 : 菜单项</h3>
<p>菜单项</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/898.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JMenu;</span><br><span class="line">import javax.swing.JMenuBar;</span><br><span class="line">import javax.swing.JMenuItem;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 400);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line"> </span><br><span class="line">        JMenuBar mb &#x3D; new JMenuBar();</span><br><span class="line"> </span><br><span class="line">        JMenu mHero &#x3D; new JMenu(&quot;英雄&quot;);</span><br><span class="line">        JMenu mItem &#x3D; new JMenu(&quot;道具&quot;);</span><br><span class="line">        JMenu mWord &#x3D; new JMenu(&quot;符文&quot;);</span><br><span class="line">        JMenu mSummon &#x3D; new JMenu(&quot;召唤师&quot;);</span><br><span class="line">        JMenu mTalent &#x3D; new JMenu(&quot;天赋树&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 菜单项</span><br><span class="line">        mHero.add(new JMenuItem(&quot;近战-Warriar&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;远程-Range&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;物理-physical&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;坦克-Tank&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;法系-Mage&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;辅助-Support&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;打野-Jungle&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;突进-Charge&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;男性-Boy&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;女性-Girl&quot;));</span><br><span class="line">        &#x2F;&#x2F; 分隔符</span><br><span class="line">        mHero.addSeparator();</span><br><span class="line">        mHero.add(new JMenuItem(&quot;所有-All&quot;));</span><br><span class="line"> </span><br><span class="line">        mb.add(mHero);</span><br><span class="line">        mb.add(mItem);</span><br><span class="line">        mb.add(mWord);</span><br><span class="line">        mb.add(mSummon);</span><br><span class="line">        mb.add(mTalent);</span><br><span class="line"> </span><br><span class="line">        f.setJMenuBar(mb);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-完成一个完整的记事本界面"><a class="header-anchor" href="#步骤-3-练习-完成一个完整的记事本界面">¶</a>步骤 3 : 练习-完成一个完整的记事本界面</h3>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2685.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.*;</span><br><span class="line">public class TestGUI &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        JFrame f&#x3D;new JFrame(&quot;记事本&quot;);</span><br><span class="line">        f.setBounds(300, 300, 400, 300);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line">        JMenuBar mb&#x3D;new JMenuBar();</span><br><span class="line">        JMenu m1&#x3D;new JMenu(&quot;文件(F)&quot;);</span><br><span class="line">        JMenu m2&#x3D;new JMenu(&quot;编辑(E)&quot;);</span><br><span class="line">        JMenu m3&#x3D;new JMenu(&quot;格式(O)&quot;);</span><br><span class="line">        JMenu m4&#x3D;new JMenu(&quot;查看(V)&quot;);</span><br><span class="line">        JMenu m5&#x3D;new JMenu(&quot;帮助(H)&quot;);</span><br><span class="line">        String[]str1&#x3D;&#123;&quot;新建(N)&quot;,&quot;打开(O)&quot;,&quot;保存(S)&quot;,&quot;另存为(A)&quot;,&quot;页面设置(U)&quot;,&quot;打印(P)&quot;,&quot;退出(X)&quot;&#125;;</span><br><span class="line">        for (String string : str1) &#123;</span><br><span class="line">            m1.add(new JMenuItem(string));</span><br><span class="line">        &#125;</span><br><span class="line">        String[]str2&#x3D;&#123;&quot;撤销(U)&quot;,&quot;剪切(T)&quot;,&quot;复制(C)&quot;,&quot;粘贴(P)&quot;,&quot;删除(L)&quot;,&quot;查找(F)&quot;,&quot;查找上一个(V)&quot;,&quot;查找下一个(N)&quot;,&quot;替换(R)&quot;,&quot;转到(G)&quot;,&quot;全选(A)&quot;&#125;;</span><br><span class="line">        for (String string : str2) &#123;</span><br><span class="line">            m2.add(new JMenuItem(string));</span><br><span class="line">        &#125;</span><br><span class="line">        String[]str3&#x3D;&#123;&quot;自动换行(W)&quot;,&quot;字体(F)&quot;&#125;;</span><br><span class="line">        for (String string : str3) &#123;</span><br><span class="line">            m3.add(new JMenuItem(string));</span><br><span class="line">        &#125;</span><br><span class="line">        String[]str4&#x3D;&#123;&quot;缩放(Z)&quot;,&quot;状态栏(S)&quot;&#125;;</span><br><span class="line">        for (String string : str4) &#123;</span><br><span class="line">            m4.add(new JMenuItem(string));</span><br><span class="line">        &#125;</span><br><span class="line">        String[]str5&#x3D;&#123;&quot;查看帮助(H)&quot;,&quot;发送反馈(F)&quot;,&quot;关于记事本(A)&quot;&#125;;</span><br><span class="line">        for (String string : str5) &#123;</span><br><span class="line">            m5.add(new JMenuItem(string));</span><br><span class="line">        &#125;</span><br><span class="line">        mb.add(m1);</span><br><span class="line">        mb.add(m2);</span><br><span class="line">        mb.add(m3);</span><br><span class="line">        mb.add(m4);</span><br><span class="line">        mb.add(m5);</span><br><span class="line">        JTextArea ta&#x3D;new JTextArea();</span><br><span class="line">        ta.setPreferredSize(new Dimension(370,240));</span><br><span class="line">        f.add(ta);</span><br><span class="line">        f.setJMenuBar(mb);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9、SWING如何使用工具栏JTOOLBAR"><a class="header-anchor" href="#9、SWING如何使用工具栏JTOOLBAR">¶</a>9、SWING如何使用工具栏JTOOLBAR</h2>
<h3 id="步骤-1-工具栏"><a class="header-anchor" href="#步骤-1-工具栏">¶</a>步骤 1 : 工具栏</h3>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/921.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JMenu;</span><br><span class="line">import javax.swing.JMenuBar;</span><br><span class="line">import javax.swing.JMenuItem;</span><br><span class="line">import javax.swing.JToolBar;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        &#x2F;&#x2F; 菜单</span><br><span class="line">        addMenu(f);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 工具栏</span><br><span class="line">        JToolBar tb &#x3D; new JToolBar();</span><br><span class="line">        &#x2F;&#x2F; 为工具栏增加按钮</span><br><span class="line">        JButton b1 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\1.jpg&quot;));</span><br><span class="line">        JButton b2 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\2.jpg&quot;));</span><br><span class="line">        JButton b3 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\3.jpg&quot;));</span><br><span class="line">        JButton b4 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\4.jpg&quot;));</span><br><span class="line">        JButton b5 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\5.jpg&quot;));</span><br><span class="line">        JButton b6 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\6.jpg&quot;));</span><br><span class="line">        tb.add(b1);</span><br><span class="line">        tb.add(b2);</span><br><span class="line">        tb.add(b3);</span><br><span class="line">        tb.add(b4);</span><br><span class="line">        tb.add(b5);</span><br><span class="line">        tb.add(b6);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把工具栏放在north的位置</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line">        f.add(tb, BorderLayout.NORTH);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void addMenu(JFrame f) &#123;</span><br><span class="line">        JMenuBar mb &#x3D; new JMenuBar();</span><br><span class="line"> </span><br><span class="line">        JMenu mHero &#x3D; new JMenu(&quot;英雄&quot;);</span><br><span class="line">        JMenu mItem &#x3D; new JMenu(&quot;道具&quot;);</span><br><span class="line">        JMenu mWord &#x3D; new JMenu(&quot;符文&quot;);</span><br><span class="line">        JMenu mSummon &#x3D; new JMenu(&quot;召唤师&quot;);</span><br><span class="line">        JMenu mTalent &#x3D; new JMenu(&quot;天赋树&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 菜单项</span><br><span class="line">        mHero.add(new JMenuItem(&quot;近战-Warriar&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;远程-Range&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;物理-physical&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;坦克-Tank&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;法系-Mage&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;辅助-Support&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;打野-Jungle&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;突进-Charge&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;男性-Boy&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;女性-Girl&quot;));</span><br><span class="line"> </span><br><span class="line">        mb.add(mHero);</span><br><span class="line">        mb.add(mItem);</span><br><span class="line">        mb.add(mWord);</span><br><span class="line">        mb.add(mSummon);</span><br><span class="line">        mb.add(mTalent);</span><br><span class="line"> </span><br><span class="line">        f.setJMenuBar(mb);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-给按钮设置提示信息"><a class="header-anchor" href="#步骤-2-给按钮设置提示信息">¶</a>步骤 2 : 给按钮设置提示信息</h3>
<p>当鼠标放在按钮上的时候会出现提示</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/922.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JMenu;</span><br><span class="line">import javax.swing.JMenuBar;</span><br><span class="line">import javax.swing.JMenuItem;</span><br><span class="line">import javax.swing.JToolBar;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        addMenu(f);</span><br><span class="line"> </span><br><span class="line">        JToolBar tb &#x3D; new JToolBar();</span><br><span class="line">        JButton b1 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\1.jpg&quot;));</span><br><span class="line">        JButton b2 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\2.jpg&quot;));</span><br><span class="line">        JButton b3 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\3.jpg&quot;));</span><br><span class="line">        JButton b4 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\4.jpg&quot;));</span><br><span class="line">        JButton b5 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\5.jpg&quot;));</span><br><span class="line">        JButton b6 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\6.jpg&quot;));</span><br><span class="line">        tb.add(b1);</span><br><span class="line">        tb.add(b2);</span><br><span class="line">        tb.add(b3);</span><br><span class="line">        tb.add(b4);</span><br><span class="line">        tb.add(b5);</span><br><span class="line">        tb.add(b6);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 给按钮设置提示信息</span><br><span class="line">        b1.setToolTipText(&quot;坑爹英雄&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把工具栏放在north的位置</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line">        f.add(tb, BorderLayout.NORTH);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void addMenu(JFrame f) &#123;</span><br><span class="line">        JMenuBar mb &#x3D; new JMenuBar();</span><br><span class="line"> </span><br><span class="line">        JMenu mHero &#x3D; new JMenu(&quot;英雄&quot;);</span><br><span class="line">        JMenu mItem &#x3D; new JMenu(&quot;道具&quot;);</span><br><span class="line">        JMenu mWord &#x3D; new JMenu(&quot;符文&quot;);</span><br><span class="line">        JMenu mSummon &#x3D; new JMenu(&quot;召唤师&quot;);</span><br><span class="line">        JMenu mTalent &#x3D; new JMenu(&quot;天赋树&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 菜单项</span><br><span class="line">        mHero.add(new JMenuItem(&quot;近战-Warriar&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;远程-Range&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;物理-physical&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;坦克-Tank&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;法系-Mage&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;辅助-Support&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;打野-Jungle&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;突进-Charge&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;男性-Boy&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;女性-Girl&quot;));</span><br><span class="line"> </span><br><span class="line">        mb.add(mHero);</span><br><span class="line">        mb.add(mItem);</span><br><span class="line">        mb.add(mWord);</span><br><span class="line">        mb.add(mSummon);</span><br><span class="line">        mb.add(mTalent);</span><br><span class="line"> </span><br><span class="line">        f.setJMenuBar(mb);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-禁止工具栏拖动"><a class="header-anchor" href="#步骤-3-禁止工具栏拖动">¶</a>步骤 3 : 禁止工具栏拖动</h3>
<p>默认情况下 工具栏可以通过鼠标拖动</p>
<p>setFloatable(false);</p>
<p>可以禁止鼠标拖动功能</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/923.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JMenu;</span><br><span class="line">import javax.swing.JMenuBar;</span><br><span class="line">import javax.swing.JMenuItem;</span><br><span class="line">import javax.swing.JToolBar;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        addMenu(f);</span><br><span class="line"> </span><br><span class="line">        JToolBar tb &#x3D; new JToolBar();</span><br><span class="line">        JButton b1 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\1.jpg&quot;));</span><br><span class="line">        JButton b2 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\2.jpg&quot;));</span><br><span class="line">        JButton b3 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\3.jpg&quot;));</span><br><span class="line">        JButton b4 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\4.jpg&quot;));</span><br><span class="line">        JButton b5 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\5.jpg&quot;));</span><br><span class="line">        JButton b6 &#x3D; new JButton(new ImageIcon(&quot;D:\\java\\workspace\\6.jpg&quot;));</span><br><span class="line">        tb.add(b1);</span><br><span class="line">        tb.add(b2);</span><br><span class="line">        tb.add(b3);</span><br><span class="line">        tb.add(b4);</span><br><span class="line">        tb.add(b5);</span><br><span class="line">        tb.add(b6);</span><br><span class="line"> </span><br><span class="line">        b1.setToolTipText(&quot;坑爹英雄&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 禁止工具栏拖动</span><br><span class="line">        tb.setFloatable(false);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把工具栏放在north的位置</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line">        f.add(tb, BorderLayout.NORTH);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static void addMenu(JFrame f) &#123;</span><br><span class="line">        JMenuBar mb &#x3D; new JMenuBar();</span><br><span class="line"> </span><br><span class="line">        JMenu mHero &#x3D; new JMenu(&quot;英雄&quot;);</span><br><span class="line">        JMenu mItem &#x3D; new JMenu(&quot;道具&quot;);</span><br><span class="line">        JMenu mWord &#x3D; new JMenu(&quot;符文&quot;);</span><br><span class="line">        JMenu mSummon &#x3D; new JMenu(&quot;召唤师&quot;);</span><br><span class="line">        JMenu mTalent &#x3D; new JMenu(&quot;天赋树&quot;);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 菜单项</span><br><span class="line">        mHero.add(new JMenuItem(&quot;近战-Warriar&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;远程-Range&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;物理-physical&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;坦克-Tank&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;法系-Mage&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;辅助-Support&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;打野-Jungle&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;突进-Charge&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;男性-Boy&quot;));</span><br><span class="line">        mHero.add(new JMenuItem(&quot;女性-Girl&quot;));</span><br><span class="line"> </span><br><span class="line">        mb.add(mHero);</span><br><span class="line">        mb.add(mItem);</span><br><span class="line">        mb.add(mWord);</span><br><span class="line">        mb.add(mSummon);</span><br><span class="line">        mb.add(mTalent);</span><br><span class="line"> </span><br><span class="line">        f.setJMenuBar(mb);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10、SWING-使用-JTABLE详解"><a class="header-anchor" href="#10、SWING-使用-JTABLE详解">¶</a>10、SWING 使用 JTABLE详解</h2>
<h3 id="示例-1-基本表格"><a class="header-anchor" href="#示例-1-基本表格">¶</a>示例 1 : 基本表格</h3>
<p>显示一个Table需要两组数据</p>
<ol>
<li>
<p>一维数组： String[]columnNames 表示表格的标题</p>
</li>
<li>
<p>二维数组： String[][] heros 表格中的内容<br>
默认情况下，表格的标题是不会显示出来了，除非使用了[JScrollPane]</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/899.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JTable;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 表格上的title</span><br><span class="line">        String[] columnNames &#x3D; new String[] &#123; &quot;id&quot;, &quot;name&quot;, &quot;hp&quot;, &quot;damage&quot; &#125;;</span><br><span class="line">        &#x2F;&#x2F; 表格中的内容，是一个二维数组</span><br><span class="line">        String[][] heros &#x3D; new String[][] &#123; &#123; &quot;1&quot;, &quot;盖伦&quot;, &quot;616&quot;, &quot;100&quot; &#125;,</span><br><span class="line">                &#123; &quot;2&quot;, &quot;提莫&quot;, &quot;512&quot;, &quot;102&quot; &#125;, &#123; &quot;3&quot;, &quot;奎因&quot;, &quot;832&quot;, &quot;200&quot; &#125; &#125;;</span><br><span class="line">        JTable t &#x3D; new JTable(heros, columnNames);</span><br><span class="line">        f.add(t, BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2-JScrollPane"><a class="header-anchor" href="#示例-2-JScrollPane">¶</a>示例 2 : JScrollPane</h3>
<p>JScrollPane: 带滚动条的Panel<br>
把table放进去就可以看到table的title<br>
同样的把[textarea]放进去，并且textarea内容够长的话，就会看到滚动条</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/902.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTable;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line"> </span><br><span class="line">        String[] columnNames &#x3D; new String[] &#123; &quot;id&quot;, &quot;name&quot;, &quot;hp&quot;, &quot;damage&quot; &#125;;</span><br><span class="line">        String[][] heros &#x3D; new String[][] &#123; &#123; &quot;1&quot;, &quot;盖伦&quot;, &quot;616&quot;, &quot;100&quot; &#125;,</span><br><span class="line">                &#123; &quot;2&quot;, &quot;提莫&quot;, &quot;512&quot;, &quot;102&quot; &#125;, &#123; &quot;3&quot;, &quot;奎因&quot;, &quot;832&quot;, &quot;200&quot; &#125; &#125;;</span><br><span class="line">        JTable t &#x3D; new JTable(heros, columnNames);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 根据t创建 JScrollPane</span><br><span class="line">        JScrollPane sp &#x3D; new JScrollPane(t);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;或则创建一个空的JScrollPane，再通过setViewportView把table放在JScrollPane中</span><br><span class="line">        &#x2F;&#x2F; JScrollPane sp &#x3D; new JScrollPane(t);</span><br><span class="line">        &#x2F;&#x2F; sp.setViewportView(t);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 把sp而非JTable加入到JFrame上，</span><br><span class="line">        f.add(sp, BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3-列宽"><a class="header-anchor" href="#示例-3-列宽">¶</a>示例 3 : 列宽</h3>
<p>设置列宽度</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/927.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTable;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line"> </span><br><span class="line">        String[] columnNames &#x3D; new String[] &#123; &quot;id&quot;, &quot;name&quot;, &quot;hp&quot;, &quot;damage&quot; &#125;;</span><br><span class="line">        String[][] heros &#x3D; new String[][] &#123; &#123; &quot;1&quot;, &quot;盖伦&quot;, &quot;616&quot;, &quot;100&quot; &#125;,</span><br><span class="line">                &#123; &quot;2&quot;, &quot;提莫&quot;, &quot;512&quot;, &quot;102&quot; &#125;, &#123; &quot;3&quot;, &quot;奎因&quot;, &quot;832&quot;, &quot;200&quot; &#125; &#125;;</span><br><span class="line">        JTable t &#x3D; new JTable(heros, columnNames);</span><br><span class="line"> </span><br><span class="line">        JScrollPane sp &#x3D; new JScrollPane(t);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 设置列宽度</span><br><span class="line">        t.getColumnModel().getColumn(0).setPreferredWidth(10);</span><br><span class="line"> </span><br><span class="line">        f.add(sp, BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-4-TableModel"><a class="header-anchor" href="#示例-4-TableModel">¶</a>示例 4 : TableModel</h3>
<p>首先说下TableModel的设计思想，在Model这种思想的指导下，数据和显示分离开来了。 比如对于JTable而言，有数据部分，也有显示部分(比如列宽等信息)。 数据部分，专门做一个类，叫做TableModel，就用于存放要显示的数据。</p>
<p>使用TableModel的方式存放Table需要显示的数据<br>
HeroTableModel <strong>继承</strong>AbstractTableModel ，进而<strong>实现</strong>了接口TableModel<br>
在HeroTableModel 中提供一个table显示需要的所有信息</p>
<ol>
<li>
<p>getRowCount 返回一共有多少行</p>
</li>
<li>
<p>getColumnCount 返回一共有多少列</p>
</li>
<li>
<p>getColumnName 每一列的名字</p>
</li>
<li>
<p>isCellEditable 单元格是否可以修改</p>
</li>
<li>
<p>getValueAt 每一个单元格里的值</p>
</li>
</ol>
<p>当图形界面需要<strong>渲染</strong>第一个单元格的数据的时候，就会调用方法TabelModel的getValueAt(0,0) ，把返回值拿到并显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.table.AbstractTableModel;</span><br><span class="line"> </span><br><span class="line">public class HeroTableModel extends AbstractTableModel &#123;</span><br><span class="line"> </span><br><span class="line">    String[] columnNames &#x3D; new String[] &#123; &quot;id&quot;, &quot;name&quot;, &quot;hp&quot;, &quot;damage&quot; &#125;;</span><br><span class="line">    String[][] heros &#x3D; new String[][] &#123; &#123; &quot;1&quot;, &quot;盖伦&quot;, &quot;616&quot;, &quot;100&quot; &#125;,</span><br><span class="line">            &#123; &quot;2&quot;, &quot;提莫&quot;, &quot;512&quot;, &quot;102&quot; &#125;, &#123; &quot;3&quot;, &quot;奎因&quot;, &quot;832&quot;, &quot;200&quot; &#125; &#125;;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 返回一共有多少行</span><br><span class="line">    public int getRowCount() &#123;</span><br><span class="line">        &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">        return heros.length;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 返回一共有多少列</span><br><span class="line">    public int getColumnCount() &#123;</span><br><span class="line">        &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">        return columnNames.length;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 获取每一列的名称</span><br><span class="line">    public String getColumnName(int columnIndex) &#123;</span><br><span class="line">        &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">        return columnNames[columnIndex];</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 单元格是否可以修改</span><br><span class="line">    public boolean isCellEditable(int rowIndex, int columnIndex) &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 每一个单元格里的值</span><br><span class="line">    public Object getValueAt(int rowIndex, int columnIndex) &#123;</span><br><span class="line">        &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">        return heros[rowIndex][columnIndex];</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTable;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;创建一个TableModel</span><br><span class="line">        HeroTableModel htm&#x3D; new HeroTableModel();</span><br><span class="line">         </span><br><span class="line">        &#x2F;&#x2F;根据 TableModel来创建 Table</span><br><span class="line">        JTable t &#x3D; new JTable(htm);</span><br><span class="line">  </span><br><span class="line">        JScrollPane sp &#x3D; new JScrollPane(t);</span><br><span class="line">  </span><br><span class="line">        f.add(sp, BorderLayout.CENTER);</span><br><span class="line">  </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-5-进一步理解TableModel"><a class="header-anchor" href="#示例-5-进一步理解TableModel">¶</a>示例 5 : 进一步理解TableModel</h3>
<p>在使用TableModel之前，是使用</p>
<p>String[] columnNames =。。。</p>
<p>String[][] heros = 。。。</p>
<p>JTable t = new JTable(heros, columnNames);</p>
<p>这样的风格创建一个JTable的<br>
所以实际上调用的是如下的构造方法：</p>
<p>JTable(Object[][] rowData, Object[] columnNames)</p>
<p>如图所示，在JTable的的源代码中，它就会根据rowData和columnNames去创建一个TableModel对象</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2724.png" alt></p>
<h3 id="示例-6-TableModel-与DAO结合"><a class="header-anchor" href="#示例-6-TableModel-与DAO结合">¶</a>示例 6 : TableModel 与DAO结合</h3>
<p>通过TableModel与DAO结合显示数据库中Hero信息。<br>
DAO使用[HeroDAO]<br>
在TableModel中，使用从DAO返回的List作为TableModel的数据</p>
<p>只需要修改HeroTableModel，无需修改TestGUI。 这正好演绎了Model设计思想中的数据分离的好处，当只需要数据发生变化的时候，修改Model即可，界面GUI部分，不需要做任何改动</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/928.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">import javax.swing.table.AbstractTableModel;</span><br><span class="line"> </span><br><span class="line">import jdbc.HeroDAO;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class HeroTableModel extends AbstractTableModel &#123;</span><br><span class="line"> </span><br><span class="line">    String[] columnNames &#x3D; new String[] &#123; &quot;id&quot;, &quot;name&quot;, &quot;hp&quot;, &quot;damage&quot; &#125;;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 使用从DAO返回的List作为TableModel的数据</span><br><span class="line"> </span><br><span class="line">    public List&lt;Hero&gt; heros &#x3D; new HeroDAO().list();</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; heros.size返回一共有多少行</span><br><span class="line">    public int getRowCount() &#123;</span><br><span class="line">        &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">        return heros.size();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public int getColumnCount() &#123;</span><br><span class="line">        &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">        return columnNames.length;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public String getColumnName(int columnIndex) &#123;</span><br><span class="line">        &#x2F;&#x2F; TODO Auto-generated method stub</span><br><span class="line">        return columnNames[columnIndex];</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public boolean isCellEditable(int rowIndex, int columnIndex) &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; 先通过heros.get(rowIndex)获取行对应的Hero对象</span><br><span class="line">    &#x2F;&#x2F; 然后根据columnIndex返回对应的属性</span><br><span class="line">    public Object getValueAt(int rowIndex, int columnIndex) &#123;</span><br><span class="line">        Hero h &#x3D; heros.get(rowIndex);</span><br><span class="line">        if (0 &#x3D;&#x3D; columnIndex)</span><br><span class="line">            return h.id;</span><br><span class="line">        if (1 &#x3D;&#x3D; columnIndex)</span><br><span class="line">            return h.name;</span><br><span class="line">        if (2 &#x3D;&#x3D; columnIndex)</span><br><span class="line">            return h.hp;</span><br><span class="line">        if (3 &#x3D;&#x3D; columnIndex)</span><br><span class="line">            return h.damage;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-7-TableSelectionModel"><a class="header-anchor" href="#示例-7-TableSelectionModel">¶</a>示例 7 : TableSelectionModel</h3>
<p>通过table可以获取一个 TableSelectionModel，专门用于监听jtable选中项的变化</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/901.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTable;</span><br><span class="line">import javax.swing.event.ListSelectionEvent;</span><br><span class="line">import javax.swing.event.ListSelectionListener;</span><br><span class="line">  </span><br><span class="line">import charactor.Hero;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line">  </span><br><span class="line">        final HeroTableModel htm &#x3D; new HeroTableModel();</span><br><span class="line">  </span><br><span class="line">        final JTable t &#x3D; new JTable(htm);</span><br><span class="line">        &#x2F;&#x2F; 准备一个Panel上面放一个Label用于显示哪条被选中了</span><br><span class="line">        JPanel p &#x3D; new JPanel();</span><br><span class="line">        final JLabel l &#x3D; new JLabel(&quot;暂时未选中条目&quot;);</span><br><span class="line">        p.add(l);</span><br><span class="line">  </span><br><span class="line">        JScrollPane sp &#x3D; new JScrollPane(t);</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; 使用selection监听器来监听table的哪个条目被选中</span><br><span class="line">        t.getSelectionModel().addListSelectionListener(</span><br><span class="line">                new ListSelectionListener() &#123;</span><br><span class="line">  </span><br><span class="line">                    &#x2F;&#x2F; 当选择了某一行的时候触发该事件</span><br><span class="line">                    public void valueChanged(ListSelectionEvent e) &#123;</span><br><span class="line">                        &#x2F;&#x2F; 获取哪一行被选中了</span><br><span class="line">                        int row &#x3D; t.getSelectedRow();</span><br><span class="line">                        &#x2F;&#x2F; 根据选中的行，到HeroTableModel中获取对应的对象</span><br><span class="line">                        Hero h &#x3D; htm.heros.get(row);</span><br><span class="line">                        &#x2F;&#x2F; 更新标签内容</span><br><span class="line">                        l.setText(&quot;当前选中的英雄是： &quot; + h.name);</span><br><span class="line">  </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">  </span><br><span class="line">        f.add(p, BorderLayout.NORTH);</span><br><span class="line">        f.add(sp, BorderLayout.CENTER);</span><br><span class="line">  </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-8-更新Table"><a class="header-anchor" href="#示例-8-更新Table">¶</a>示例 8 : 更新Table</h3>
<p>以新增数据到数据库中，然后更新Table为例</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/929.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTable;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line">import jdbc.HeroDAO;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line"> </span><br><span class="line">        final HeroTableModel htm &#x3D; new HeroTableModel();</span><br><span class="line"> </span><br><span class="line">        final JTable t &#x3D; new JTable(htm);</span><br><span class="line">        &#x2F;&#x2F; 增加 一个 panel用于放置名称，血量输入框和增加 按钮</span><br><span class="line">        JPanel p &#x3D; new JPanel();</span><br><span class="line"> </span><br><span class="line">        final JLabel lName &#x3D; new JLabel(&quot;名称&quot;);</span><br><span class="line">        final JTextField tfName &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">        final JLabel lHp &#x3D; new JLabel(&quot;血量&quot;);</span><br><span class="line">        final JTextField tfHp &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">        JButton bAdd &#x3D; new JButton(&quot;增加&quot;);</span><br><span class="line">        tfName.setPreferredSize(new Dimension(80, 30));</span><br><span class="line">        tfHp.setPreferredSize(new Dimension(80, 30));</span><br><span class="line"> </span><br><span class="line">        p.add(lName);</span><br><span class="line">        p.add(tfName);</span><br><span class="line">        p.add(lHp);</span><br><span class="line">        p.add(tfHp);</span><br><span class="line">        p.add(bAdd);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 为增加按钮添加监听</span><br><span class="line">        bAdd.addActionListener(new ActionListener() &#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line"> </span><br><span class="line">                HeroDAO dao &#x3D; new HeroDAO();</span><br><span class="line"> </span><br><span class="line">                &#x2F;&#x2F; 根据输入框数据创建一个Hero对象</span><br><span class="line">                Hero h &#x3D; new Hero();</span><br><span class="line">                h.name &#x3D; tfName.getText();</span><br><span class="line">                h.hp &#x3D; Integer.parseInt(tfHp.getText());</span><br><span class="line"> </span><br><span class="line">                &#x2F;&#x2F; 通过dao把该对象加入到数据库</span><br><span class="line">                dao.add(h);</span><br><span class="line"> </span><br><span class="line">                &#x2F;&#x2F; 通过dao更新tablemodel中的数据</span><br><span class="line">                htm.heros &#x3D; dao.list();</span><br><span class="line">                &#x2F;&#x2F; 调用JTable的updateUI，刷新界面。</span><br><span class="line">                &#x2F;&#x2F; 刷新界面的时候，会到tablemodel中去取最新的数据</span><br><span class="line">                &#x2F;&#x2F; 就能看到新加进去的数据了</span><br><span class="line"> </span><br><span class="line">                t.updateUI();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        JScrollPane sp &#x3D; new JScrollPane(t);</span><br><span class="line"> </span><br><span class="line">        f.add(p, BorderLayout.NORTH);</span><br><span class="line">        f.add(sp, BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-9-输入项验证"><a class="header-anchor" href="#示例-9-输入项验证">¶</a>示例 9 : 输入项验证</h3>
<p>如果用户输入的名称为空，或者血量不是小数，在提交数据的时候都会报错。<br>
<strong>“感觉上”</strong> 界面就卡住了。 这是不友好的人机交互行为。<br>
所以需要加上输入项的验证，如果输入的数据不合格，应该[弹出对话框]提示用户具体原因。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/932.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTable;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line"> </span><br><span class="line">import jdbc.HeroDAO;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        final JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line"> </span><br><span class="line">        final HeroTableModel htm &#x3D; new HeroTableModel();</span><br><span class="line"> </span><br><span class="line">        final JTable t &#x3D; new JTable(htm);</span><br><span class="line">        JPanel p &#x3D; new JPanel();</span><br><span class="line"> </span><br><span class="line">        final JLabel lName &#x3D; new JLabel(&quot;名称&quot;);</span><br><span class="line">        final JTextField tfName &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">        final JLabel lHp &#x3D; new JLabel(&quot;血量&quot;);</span><br><span class="line">        final JTextField tfHp &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">        JButton bAdd &#x3D; new JButton(&quot;增加&quot;);</span><br><span class="line">        tfName.setPreferredSize(new Dimension(80, 30));</span><br><span class="line">        tfHp.setPreferredSize(new Dimension(80, 30));</span><br><span class="line"> </span><br><span class="line">        p.add(lName);</span><br><span class="line">        p.add(tfName);</span><br><span class="line">        p.add(lHp);</span><br><span class="line">        p.add(tfHp);</span><br><span class="line">        p.add(bAdd);</span><br><span class="line"> </span><br><span class="line">        bAdd.addActionListener(new ActionListener() &#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line"> </span><br><span class="line">                HeroDAO dao &#x3D; new HeroDAO();</span><br><span class="line"> </span><br><span class="line">                Hero h &#x3D; new Hero();</span><br><span class="line">                String name &#x3D; tfName.getText();</span><br><span class="line"> </span><br><span class="line">                &#x2F;&#x2F; 通过name长度判断 名称是否为空</span><br><span class="line">                if (name.length() &#x3D;&#x3D; 0) &#123;</span><br><span class="line">                    &#x2F;&#x2F; 弹出对话框提示用户</span><br><span class="line">                    JOptionPane.showMessageDialog(f, &quot;名称不能为空&quot;);</span><br><span class="line"> </span><br><span class="line">                    &#x2F;&#x2F; 名称输入框获取焦点</span><br><span class="line">                    tfName.grabFocus();</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                String hp &#x3D; tfHp.getText().trim();</span><br><span class="line"> </span><br><span class="line">                try &#123;</span><br><span class="line">                    &#x2F;&#x2F; 把hp转换为浮点型，如果出现异常NumberFormatException表示不是浮点型格式</span><br><span class="line">                    Float.parseFloat(hp);</span><br><span class="line">                &#125; catch (NumberFormatException e1) &#123;</span><br><span class="line">                    JOptionPane.showMessageDialog(f, &quot;血量只能是小数 &quot;);</span><br><span class="line">                    tfHp.grabFocus();</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                h.name &#x3D; name;</span><br><span class="line"> </span><br><span class="line">                h.hp &#x3D; Float.parseFloat(hp);</span><br><span class="line"> </span><br><span class="line">                dao.add(h);</span><br><span class="line"> </span><br><span class="line">                htm.heros &#x3D; dao.list();</span><br><span class="line"> </span><br><span class="line">                t.updateUI();</span><br><span class="line"> </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        JScrollPane sp &#x3D; new JScrollPane(t);</span><br><span class="line"> </span><br><span class="line">        f.add(p, BorderLayout.NORTH);</span><br><span class="line">        f.add(sp, BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-10-选中指定行"><a class="header-anchor" href="#示例-10-选中指定行">¶</a>示例 10 : 选中指定行</h3>
<ol>
<li>
<p>table初始化后，应该默认选中第一行</p>
</li>
<li>
<p>增加数据后，也应该选中新增的这一条</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/933.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTable;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line">import javax.swing.ListSelectionModel;</span><br><span class="line"> </span><br><span class="line">import jdbc.HeroDAO;</span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        final JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new BorderLayout());</span><br><span class="line"> </span><br><span class="line">        final HeroTableModel htm &#x3D; new HeroTableModel();</span><br><span class="line"> </span><br><span class="line">        final JTable t &#x3D; new JTable(htm);</span><br><span class="line">        &#x2F;&#x2F; 设置选择模式为 只能选中一行</span><br><span class="line">        t.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);</span><br><span class="line">        &#x2F;&#x2F; 选中第一行 （基本0）</span><br><span class="line">        t.getSelectionModel().setSelectionInterval(0, 0);</span><br><span class="line"> </span><br><span class="line">        JPanel p &#x3D; new JPanel();</span><br><span class="line"> </span><br><span class="line">        final JLabel lName &#x3D; new JLabel(&quot;名称&quot;);</span><br><span class="line">        final JTextField tfName &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">        final JLabel lHp &#x3D; new JLabel(&quot;血量&quot;);</span><br><span class="line">        final JTextField tfHp &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">        JButton bAdd &#x3D; new JButton(&quot;增加&quot;);</span><br><span class="line">        tfName.setPreferredSize(new Dimension(80, 30));</span><br><span class="line">        tfHp.setPreferredSize(new Dimension(80, 30));</span><br><span class="line"> </span><br><span class="line">        p.add(lName);</span><br><span class="line">        p.add(tfName);</span><br><span class="line">        p.add(lHp);</span><br><span class="line">        p.add(tfHp);</span><br><span class="line">        p.add(bAdd);</span><br><span class="line"> </span><br><span class="line">        bAdd.addActionListener(new ActionListener() &#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line"> </span><br><span class="line">                HeroDAO dao &#x3D; new HeroDAO();</span><br><span class="line"> </span><br><span class="line">                Hero h &#x3D; new Hero();</span><br><span class="line">                String name &#x3D; tfName.getText();</span><br><span class="line"> </span><br><span class="line">                if (name.length() &#x3D;&#x3D; 0) &#123;</span><br><span class="line"> </span><br><span class="line">                    JOptionPane.showMessageDialog(f, &quot;名称不能为空&quot;);</span><br><span class="line"> </span><br><span class="line">                    tfName.grabFocus();</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                String hp &#x3D; tfHp.getText().trim();</span><br><span class="line"> </span><br><span class="line">                try &#123;</span><br><span class="line"> </span><br><span class="line">                    Float.parseFloat(hp);</span><br><span class="line">                &#125; catch (NumberFormatException e1) &#123;</span><br><span class="line">                    JOptionPane.showMessageDialog(f, &quot;血量只能是小数 &quot;);</span><br><span class="line">                    tfHp.grabFocus();</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                h.name &#x3D; name;</span><br><span class="line"> </span><br><span class="line">                h.hp &#x3D; Float.parseFloat(hp);</span><br><span class="line"> </span><br><span class="line">                dao.add(h);</span><br><span class="line"> </span><br><span class="line">                htm.heros &#x3D; dao.list();</span><br><span class="line"> </span><br><span class="line">                t.updateUI();</span><br><span class="line"> </span><br><span class="line">                &#x2F;&#x2F; 选中 第一行 ，因为 DAO是按照 ID倒排序查询，所以第一行就是新加入的数据</span><br><span class="line">                t.getSelectionModel().setSelectionInterval(0, 0);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        JScrollPane sp &#x3D; new JScrollPane(t);</span><br><span class="line"> </span><br><span class="line">        f.add(p, BorderLayout.NORTH);</span><br><span class="line">        f.add(sp, BorderLayout.CENTER);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11、两种SWING下的日期控件-DATEPICKER-和JXDATEPICKER"><a class="header-anchor" href="#11、两种SWING下的日期控件-DATEPICKER-和JXDATEPICKER">¶</a>11、两种SWING下的日期控件 DATEPICKER 和JXDATEPICKER</h2>
<p>swing没有自带的日期控件，需要第三方的类 jar包</p>
<h3 id="步骤-1-DatePicker"><a class="header-anchor" href="#步骤-1-DatePicker">¶</a>步骤 1 : DatePicker</h3>
<p>本例使用 datepicker.jar 包，有一个缺点，不能设置时间，只能在创建控件的时候传入指定日期。<br>
需要设置日期，请使用[JXDatePicker]</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/943.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">   </span><br><span class="line">import java.awt.Color;</span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.Font;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.Locale;</span><br><span class="line">   </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">  </span><br><span class="line">import com.eltima.components.ui.DatePicker;</span><br><span class="line">   </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">   </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">   </span><br><span class="line">        final DatePicker datepick;</span><br><span class="line">        datepick &#x3D; getDatePicker();</span><br><span class="line">   </span><br><span class="line">        f.add(datepick);</span><br><span class="line">   </span><br><span class="line">        JButton b &#x3D; new JButton(&quot;获取时间&quot;);</span><br><span class="line">        b.setBounds(137, 183, 100, 30);</span><br><span class="line">        f.add(b);</span><br><span class="line">   </span><br><span class="line">        b.addActionListener(new ActionListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                JOptionPane.showMessageDialog(f, &quot;获取控件中的日期：&quot; + datepick.getValue());</span><br><span class="line">                System.out.println(datepick.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">   </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">   </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private static DatePicker getDatePicker() &#123;</span><br><span class="line">        final DatePicker datepick;</span><br><span class="line">        &#x2F;&#x2F; 格式</span><br><span class="line">        String DefaultFormat &#x3D; &quot;yyyy-MM-dd HH:mm:ss&quot;;</span><br><span class="line">        &#x2F;&#x2F; 当前时间</span><br><span class="line">        Date date &#x3D; new Date();</span><br><span class="line">        &#x2F;&#x2F; 字体</span><br><span class="line">        Font font &#x3D; new Font(&quot;Times New Roman&quot;, Font.BOLD, 14);</span><br><span class="line">   </span><br><span class="line">        Dimension dimension &#x3D; new Dimension(177, 24);</span><br><span class="line">   </span><br><span class="line">        int[] hilightDays &#x3D; &#123; 1, 3, 5, 7 &#125;;</span><br><span class="line">   </span><br><span class="line">        int[] disabledDays &#x3D; &#123; 4, 6, 5, 9 &#125;;</span><br><span class="line">   </span><br><span class="line">        datepick &#x3D; new DatePicker(date, DefaultFormat, font, dimension);</span><br><span class="line">   </span><br><span class="line">        datepick.setLocation(137, 83);</span><br><span class="line">        datepick.setBounds(137, 83, 177, 24);</span><br><span class="line">        &#x2F;&#x2F; 设置一个月份中需要高亮显示的日子</span><br><span class="line">        datepick.setHightlightdays(hilightDays, Color.red);</span><br><span class="line">        &#x2F;&#x2F; 设置一个月份中不需要的日子，呈灰色显示</span><br><span class="line">        datepick.setDisableddays(disabledDays);</span><br><span class="line">        &#x2F;&#x2F; 设置国家</span><br><span class="line">        datepick.setLocale(Locale.CHINA);</span><br><span class="line">        &#x2F;&#x2F; 设置时钟面板可见</span><br><span class="line">        datepick.setTimePanleVisible(true);</span><br><span class="line">        return datepick;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-JXDatePicker"><a class="header-anchor" href="#步骤-2-JXDatePicker">¶</a>步骤 2 : JXDatePicker</h3>
<p>本例使用 包swingx-core-1.6.2.jar，界面比较简约，可以设置日期</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/949.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.util.Date;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line"> </span><br><span class="line">import org.jdesktop.swingx.JXDatePicker;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line"> </span><br><span class="line">        Date date &#x3D; new Date();</span><br><span class="line"> </span><br><span class="line">        final JXDatePicker datepick &#x3D; new JXDatePicker();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F; 设置 date日期</span><br><span class="line">        datepick.setDate(date);</span><br><span class="line"> </span><br><span class="line">        datepick.setBounds(137, 83, 177, 24);</span><br><span class="line"> </span><br><span class="line">        f.add(datepick);</span><br><span class="line"> </span><br><span class="line">        JButton b &#x3D; new JButton(&quot;获取时间&quot;);</span><br><span class="line">        b.setBounds(137, 183, 100, 30);</span><br><span class="line">        f.add(b);</span><br><span class="line"> </span><br><span class="line">        b.addActionListener(new ActionListener() &#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                &#x2F;&#x2F; 获取 日期</span><br><span class="line">                Date d &#x3D; datepick.getDate();</span><br><span class="line">                JOptionPane.showMessageDialog(f, &quot;获取控件中的日期 :&quot; + d);</span><br><span class="line"> </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-练习-统计文件数量"><a class="header-anchor" href="#步骤-3-练习-统计文件数量">¶</a>步骤 3 : 练习-统计文件数量</h3>
<p>借助时间控件，选中一个时间，然后根据这个时间，统计e:\project 修改时间大于这个时间的文件，一共有多少</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2697.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.Color;</span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.Font;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.Locale;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line"> </span><br><span class="line">import org.jdesktop.swingx.JXDatePicker;</span><br><span class="line"> </span><br><span class="line">import com.eltima.components.ui.DatePicker;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    static int count;</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">     </span><br><span class="line">    JFrame f &#x3D; new JFrame(&quot;LOL&quot;);</span><br><span class="line">    f.setSize(600,300);</span><br><span class="line">    f.setLocation(200,200);</span><br><span class="line">    f.setLayout(null);</span><br><span class="line">     </span><br><span class="line">    final DatePicker datepick;</span><br><span class="line">    datepick &#x3D; getDatePicker();</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">    f.add(datepick);</span><br><span class="line">     </span><br><span class="line">    JButton b &#x3D; new JButton(&quot;统计在d:&#x2F;java的文件修改时间大于这个时间控件的时间&quot;);</span><br><span class="line">    b.setBounds(10, 183, 450, 30);</span><br><span class="line">    f.add(b);</span><br><span class="line">     </span><br><span class="line">    b.addActionListener(new ActionListener() &#123;</span><br><span class="line"> </span><br><span class="line">        @Override</span><br><span class="line">        public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated method stub9</span><br><span class="line">            Date d &#x3D; (Date)datepick.getValue();</span><br><span class="line">            File File &#x3D; new File(&quot;d:&#x2F;java&quot;);</span><br><span class="line">            countFile(File,d);</span><br><span class="line">            JOptionPane.showMessageDialog(f, &quot;统计完成，一共有&quot;+count+&quot;个文件修改时间晚于时间控件&quot;);</span><br><span class="line">            count &#x3D; 0;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">         </span><br><span class="line">    &#125;);</span><br><span class="line">     </span><br><span class="line">    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    f.setVisible(true);</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">private static DatePicker getDatePicker() &#123;</span><br><span class="line">    final DatePicker datepick ;</span><br><span class="line">     </span><br><span class="line">    String DefaultFormat &#x3D; &quot;yyyy-MM-dd HH:mm:ss&quot;;</span><br><span class="line">     </span><br><span class="line">    Date date &#x3D; new Date();</span><br><span class="line">     </span><br><span class="line">    Font font &#x3D; new Font(&quot;Times New Roman&quot;,Font.BOLD,14);</span><br><span class="line">     </span><br><span class="line">    Dimension dimension &#x3D; new Dimension(177,24);</span><br><span class="line">     </span><br><span class="line">    int[] hilightDays &#x3D; &#123; 1, 3, 5, 7 &#125;;</span><br><span class="line">     </span><br><span class="line">    int[] disabledDays &#x3D; &#123; 4, 6, 5, 9 &#125;;</span><br><span class="line">     </span><br><span class="line">    datepick &#x3D; new DatePicker(date, DefaultFormat, font, dimension);</span><br><span class="line">     </span><br><span class="line">    datepick.setBounds(137,83,177,24);</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F; 设置一个月份中需要高亮显示的日子</span><br><span class="line">    datepick.setHightlightdays(hilightDays, Color.red);</span><br><span class="line">    &#x2F;&#x2F; 设置一个月份中不需要的日子，呈灰色显示</span><br><span class="line">    datepick.setDisableddays(disabledDays);</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F; 设置国家</span><br><span class="line">    datepick.setLocale(Locale.CHINA);</span><br><span class="line">    &#x2F;&#x2F; 设置时钟面板可见</span><br><span class="line">    datepick.setTimePanleVisible(true);</span><br><span class="line">    return datepick;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">private static void countFile(File File,Date d) &#123;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;如果是文件 那么进比较，小于就++</span><br><span class="line">    if(File.isFile())&#123;</span><br><span class="line">            if(File.lastModified()&gt;d.getTime())&#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">                 </span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#x2F;&#x2F;如果是目录那么进行遍历</span><br><span class="line">        if(File.isDirectory())&#123;</span><br><span class="line">            File []fs &#x3D; File.listFiles();</span><br><span class="line">            for(File f :fs )&#123;</span><br><span class="line">                countFile(f.getAbsoluteFile(),d);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="12、表格综合练习"><a class="header-anchor" href="#12、表格综合练习">¶</a>12、表格综合练习</h2>
<h3 id="步骤-1-练习-增加"><a class="header-anchor" href="#步骤-1-练习-增加">¶</a>步骤 1 : 练习-增加</h3>
<p>点击增加按钮，出现一个JDialog，在JDialog中进行增加</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2732.png" alt></p>
<h3 id="步骤-2-练习-删除"><a class="header-anchor" href="#步骤-2-练习-删除">¶</a>步骤 2 : 练习-删除</h3>
<p>提供一个删除按钮，点击删除按钮之后，删除选中的行，并且刷新table中的数据，然后再默认选中第一行。</p>
<p>如果点击删除的时候，没有任何行被选中，则提示“删除前应该选中一行”</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2687.png" alt></p>
<h3 id="步骤-3-练习-编辑"><a class="header-anchor" href="#步骤-3-练习-编辑">¶</a>步骤 3 : 练习-编辑</h3>
<p>提供一个编辑按钮，点击的时候，弹出一个JDialog，显示选中的数据，并且能够修改。</p>
<p>如果点击的时候，没有选中任意一行，则提示 “编辑前请选中一行数据”</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2689.png" alt></p>
<h3 id="步骤-4-练习-修改"><a class="header-anchor" href="#步骤-4-练习-修改">¶</a>步骤 4 : 练习-修改</h3>
<p>接着[练习-编辑]继续完整修改的功能。 点击修改，首选判断数据是否正确，是否为空，是否为数字等。 通过校验后，把数据保存到数据库，然后刷新table中的数据，并且选中第一条。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2691.png" alt></p>
<h3 id="步骤-5-练习-使用按钮分页"><a class="header-anchor" href="#步骤-5-练习-使用按钮分页">¶</a>步骤 5 : 练习-使用按钮分页</h3>
<p>在table中仅仅显示10条数据。<br>
<strong>在下方出现4个按钮</strong><br>
首页 上一页 下一页 末页</p>
<p><strong>最后一页</strong><br>
最后一页需要注意，如果数据库中的总数能够整除10，那么最后一页就显示10个，否则就显示不到除以10的余数。 比如一共是25个，那么最后一页就显示5个。</p>
<p><strong>按钮的状态要求：</strong><br>
如果有下一页的数据，才能点击下一页，否则下一页按钮是不可用的。<br>
通过如下代码设置代码不可用</p>
<p>JButton.setEnable(false)</p>
<p>对首页，上一页和末页也是一样。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2693.png" alt></p>
<h3 id="步骤-6-练习-使用下拉框分页"><a class="header-anchor" href="#步骤-6-练习-使用下拉框分页">¶</a>步骤 6 : 练习-使用下拉框分页</h3>
<p>借助[下拉框]实现下拉框分页</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2699.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"></span><br><span class="line">import java.awt.BorderLayout;</span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"></span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JComboBox;</span><br><span class="line">import javax.swing.JDialog;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JScrollPane;</span><br><span class="line">import javax.swing.JTable;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line">import javax.swing.ListSelectionModel;</span><br><span class="line"></span><br><span class="line">import charactor.Hero;</span><br><span class="line">import jdbc.HeroDAO;</span><br><span class="line"></span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">	private int ITEMS_PER_PAGE &#x3D; 10;</span><br><span class="line">	HeroTableModel htm;</span><br><span class="line">	int currentPageIndex &#x3D; 0;</span><br><span class="line">	int pageNum;</span><br><span class="line">	JTable table;</span><br><span class="line">	JButton firstPageBtn;</span><br><span class="line">	JButton previousPageBtn;</span><br><span class="line">	JComboBox&lt;String&gt; pageCbx;</span><br><span class="line">	JButton nextPageBtn;</span><br><span class="line">	JButton lastPageBtn;</span><br><span class="line">	boolean isPageCbxSelectedByOthers &#x3D; false;</span><br><span class="line">	public TestGUI(int itemsPerPage)</span><br><span class="line">	&#123;</span><br><span class="line">		ITEMS_PER_PAGE &#x3D; itemsPerPage;</span><br><span class="line">		JFrame frame &#x3D; new JFrame(&quot;Hero编辑器&quot;);</span><br><span class="line">		frame.setSize(800, 600);</span><br><span class="line">		frame.setLocation(200, 200);</span><br><span class="line">		frame.setLayout(new BorderLayout());</span><br><span class="line"></span><br><span class="line">		htm &#x3D; new HeroTableModel();</span><br><span class="line">		table &#x3D; new JTable(htm);</span><br><span class="line">		table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);</span><br><span class="line">		table.getSelectionModel().setSelectionInterval(0, 0);</span><br><span class="line">		pageNum &#x3D; getPageNum();</span><br><span class="line">		currentPageIndex &#x3D; 0;</span><br><span class="line"></span><br><span class="line">		JScrollPane tablePane &#x3D; new JScrollPane(table);</span><br><span class="line">		</span><br><span class="line">		JPanel operationPanel &#x3D; new JPanel();</span><br><span class="line">		operationPanel.setLayout(new FlowLayout());</span><br><span class="line">		JButton addBtn &#x3D; new JButton(&quot;增加&quot;);</span><br><span class="line">		JButton delBtn &#x3D; new JButton(&quot;删除&quot;);</span><br><span class="line">		JButton editBtn &#x3D; new JButton(&quot;编辑&quot;);</span><br><span class="line">		operationPanel.add(addBtn);</span><br><span class="line">		operationPanel.add(delBtn);</span><br><span class="line">		operationPanel.add(editBtn);</span><br><span class="line"></span><br><span class="line">		addBtn.addActionListener(new ActionListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public void actionPerformed(ActionEvent e) &#123; </span><br><span class="line">				createOperateDialog(frame, 1, -1);</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		delBtn.addActionListener(new ActionListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">				int row &#x3D; table.getSelectedRow();</span><br><span class="line">				if(row &lt; 0)</span><br><span class="line">				&#123;</span><br><span class="line">					JOptionPane.showMessageDialog(frame, &quot;删除前请先选中一行数据&quot;);</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line">				htm.HeroDao.delete((int)(htm.getValueAt(row, 0)));</span><br><span class="line">				pageNum &#x3D; getPageNum();</span><br><span class="line">				if(currentPageIndex &gt;&#x3D; pageNum)</span><br><span class="line">				&#123;</span><br><span class="line">					currentPageIndex &#x3D; pageNum - 1;</span><br><span class="line">				&#125;</span><br><span class="line">				updateCurrentPage(true);</span><br><span class="line">				table.getSelectionModel().setSelectionInterval(0, 0);</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		editBtn.addActionListener(new ActionListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">				int row &#x3D; table.getSelectedRow();</span><br><span class="line">				if(row &lt; 0)</span><br><span class="line">				&#123;</span><br><span class="line">					JOptionPane.showMessageDialog(frame, &quot;编辑前请先选中一行数据&quot;);</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				createOperateDialog(frame, 2, (int)(htm.getValueAt(row, 0)));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">		JPanel pagePanel &#x3D; new JPanel();</span><br><span class="line">		pagePanel.setLayout(new FlowLayout());</span><br><span class="line">		firstPageBtn &#x3D; new JButton(&quot;首页&quot;);</span><br><span class="line">		previousPageBtn &#x3D; new JButton(&quot;上一页&quot;); </span><br><span class="line">		pageCbx &#x3D; new JComboBox&lt;String&gt;(getPageArray(pageNum));</span><br><span class="line">		pageCbx.setSelectedIndex(0);</span><br><span class="line">		nextPageBtn &#x3D; new JButton(&quot;下一页&quot;);</span><br><span class="line">		lastPageBtn &#x3D; new JButton(&quot;末页&quot;);</span><br><span class="line">		pagePanel.add(firstPageBtn);</span><br><span class="line">		pagePanel.add(previousPageBtn);</span><br><span class="line">		pagePanel.add(pageCbx);</span><br><span class="line">		pagePanel.add(nextPageBtn);</span><br><span class="line">		pagePanel.add(lastPageBtn);</span><br><span class="line"></span><br><span class="line">		firstPageBtn.addActionListener(new ActionListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">				if(currentPageIndex &#x3D;&#x3D; 0)</span><br><span class="line">				&#123;</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line">				currentPageIndex &#x3D; 0;</span><br><span class="line">				updateCurrentPage(true);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		previousPageBtn.addActionListener(new ActionListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">				if(currentPageIndex &#x3D;&#x3D; 0)</span><br><span class="line">				&#123;</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line">				currentPageIndex -&#x3D; 1;</span><br><span class="line">				updateCurrentPage(true);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		pageCbx.addActionListener(new ActionListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">				if(isPageCbxSelectedByOthers)</span><br><span class="line">				&#123;</span><br><span class="line">					isPageCbxSelectedByOthers &#x3D; false;</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(&quot;pageCbx actionPerformed&quot;);</span><br><span class="line">				currentPageIndex &#x3D; pageCbx.getSelectedIndex();</span><br><span class="line">				updateCurrentPage(false);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		nextPageBtn.addActionListener(new ActionListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">				if(currentPageIndex &gt;&#x3D; pageNum - 1)</span><br><span class="line">				&#123;</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line">				currentPageIndex +&#x3D; 1;</span><br><span class="line">				updateCurrentPage(true);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		lastPageBtn.addActionListener(new ActionListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">				if(pageNum &lt;&#x3D; 1)</span><br><span class="line">				&#123;</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line">				if(currentPageIndex &#x3D;&#x3D; pageNum - 1)</span><br><span class="line">				&#123;</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				currentPageIndex &#x3D; pageNum - 1;</span><br><span class="line">				updateCurrentPage(true);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">		updateCurrentPage(true);</span><br><span class="line"></span><br><span class="line">		frame.add(tablePane, BorderLayout.NORTH);</span><br><span class="line">		frame.add(operationPanel, BorderLayout.CENTER);</span><br><span class="line">		frame.add(pagePanel, BorderLayout.SOUTH);</span><br><span class="line"></span><br><span class="line">		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">		frame.setVisible(true);</span><br><span class="line">	&#125;</span><br><span class="line">	void createOperateDialog(JFrame frame, int type, int heroId)</span><br><span class="line">	&#123;</span><br><span class="line">		JDialog dialog &#x3D; new JDialog(frame);</span><br><span class="line">		dialog.setLocation(50, 50);</span><br><span class="line">		dialog.setSize(400, 200);</span><br><span class="line">		dialog.setLayout(new BorderLayout());</span><br><span class="line"></span><br><span class="line">		final JLabel lName &#x3D; new JLabel(&quot;名称&quot;);</span><br><span class="line">		final JTextField tfName &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">		tfName.setPreferredSize(new Dimension(80, 30));</span><br><span class="line">		JPanel namePanel &#x3D; new JPanel();</span><br><span class="line">		namePanel.add(lName);</span><br><span class="line">		namePanel.add(tfName);</span><br><span class="line"></span><br><span class="line">		final JLabel lHp &#x3D; new JLabel(&quot;血量&quot;);</span><br><span class="line">		final JTextField tfHp &#x3D; new JTextField(&quot;&quot;);</span><br><span class="line">		tfHp.setPreferredSize(new Dimension(80, 30));</span><br><span class="line">		JPanel hpPanel &#x3D; new JPanel();</span><br><span class="line">		hpPanel.add(lHp);</span><br><span class="line">		hpPanel.add(tfHp);</span><br><span class="line"></span><br><span class="line">		JButton commitBtn &#x3D; new JButton(&quot;提交&quot;);</span><br><span class="line">		commitBtn.addActionListener(new ActionListener() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">				Hero h &#x3D; new Hero();</span><br><span class="line">				String name &#x3D; tfName.getText().trim();</span><br><span class="line">				&#x2F;&#x2F; 通过name长度判断 名称是否为空</span><br><span class="line">				if (name.length() &#x3D;&#x3D; 0) &#123;</span><br><span class="line">					&#x2F;&#x2F; 弹出对话框提示用户</span><br><span class="line">					JOptionPane.showMessageDialog(dialog, &quot;名称不能为空&quot;);</span><br><span class="line">					&#x2F;&#x2F; 名称输入框获取焦点</span><br><span class="line">					tfName.grabFocus();</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				String hp &#x3D; tfHp.getText().trim();</span><br><span class="line">				float fHp &#x3D; 0.0f;</span><br><span class="line">				try &#123;</span><br><span class="line">					&#x2F;&#x2F; 把hp转换为浮点型，如果出现异常NumberFormatException表示不是浮点型格式</span><br><span class="line">					fHp &#x3D; Float.parseFloat(hp);</span><br><span class="line">				&#125; catch (NumberFormatException e1) &#123;</span><br><span class="line">					JOptionPane.showMessageDialog(dialog, &quot;血量只能是小数 &quot;);</span><br><span class="line">					tfHp.grabFocus();</span><br><span class="line">					return;</span><br><span class="line">				&#125;</span><br><span class="line">				h.name &#x3D; name;</span><br><span class="line">				h.hp &#x3D; fHp;</span><br><span class="line">				HeroDAO dao &#x3D; htm.heroDao;</span><br><span class="line">				if(type &#x3D;&#x3D; 1)&#x2F;&#x2F;新增</span><br><span class="line">				&#123;</span><br><span class="line">					dao.add(h);</span><br><span class="line"></span><br><span class="line">					pageNum &#x3D; getPageNum();</span><br><span class="line">					currentPageIndex &#x3D; pageNum - 1;</span><br><span class="line">					updateCurrentPage(true);</span><br><span class="line">					int rowIndex &#x3D; htm.getRowCount() - 1;</span><br><span class="line">					table.getSelectionModel().setSelectionInterval(rowIndex, rowIndex);</span><br><span class="line">					table.scrollRectToVisible(table.getCellRect(rowIndex, 0, true));</span><br><span class="line">				&#125;</span><br><span class="line">				else if(type &#x3D;&#x3D; 2)&#x2F;&#x2F;更新</span><br><span class="line">				&#123;</span><br><span class="line">					h.id &#x3D; heroId;</span><br><span class="line">					dao.update(h);</span><br><span class="line"></span><br><span class="line">					updateCurrentPage(true);</span><br><span class="line">					table.getSelectionModel().setSelectionInterval(0, 0);</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				dialog.dispose();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">		dialog.add(namePanel, BorderLayout.NORTH);</span><br><span class="line">		dialog.add(hpPanel, BorderLayout.CENTER);</span><br><span class="line">		dialog.add(commitBtn, BorderLayout.SOUTH);</span><br><span class="line"></span><br><span class="line">		dialog.setVisible(true);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	int operateHero(JDialog dialog, String name, String hp, int type, int heroId)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		return 0;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	void updateCurrentPage(boolean pageCbxUpdateByOthers)</span><br><span class="line">	&#123;</span><br><span class="line">		if(pageCbxUpdateByOthers)</span><br><span class="line">		&#123;</span><br><span class="line">			isPageCbxSelectedByOthers &#x3D; pageCbxUpdateByOthers;</span><br><span class="line">		&#125;</span><br><span class="line">		updatePageControls();</span><br><span class="line">		if(pageNum &lt;&#x3D; 1 || currentPageIndex &gt;&#x3D; pageNum)</span><br><span class="line">		&#123;</span><br><span class="line">			return;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		htm.heros &#x3D; htm.heroDao.list(currentPageIndex * ITEMS_PER_PAGE, ITEMS_PER_PAGE);</span><br><span class="line">		table.updateUI();</span><br><span class="line">		table.getSelectionModel().setSelectionInterval(0, 0);</span><br><span class="line">	&#125;</span><br><span class="line">	void updatePageControls()</span><br><span class="line">	&#123;</span><br><span class="line">		firstPageBtn.setEnabled(true);</span><br><span class="line">		previousPageBtn.setEnabled(true);</span><br><span class="line">		nextPageBtn.setEnabled(true);</span><br><span class="line">		lastPageBtn.setEnabled(true);</span><br><span class="line">		if(pageNum &lt;&#x3D; 1)</span><br><span class="line">		&#123;</span><br><span class="line">			return;</span><br><span class="line">		&#125;</span><br><span class="line">		if(currentPageIndex &#x3D;&#x3D; 0)</span><br><span class="line">		&#123;</span><br><span class="line">			firstPageBtn.setEnabled(false);</span><br><span class="line">			previousPageBtn.setEnabled(false);</span><br><span class="line">		&#125;</span><br><span class="line">		if(currentPageIndex &#x3D;&#x3D; pageNum - 1)</span><br><span class="line">		&#123;</span><br><span class="line">			lastPageBtn.setEnabled(false);</span><br><span class="line">			nextPageBtn.setEnabled(false);</span><br><span class="line">		&#125;</span><br><span class="line">		if(pageNum !&#x3D; pageCbx.getItemCount())</span><br><span class="line">		&#123;</span><br><span class="line">			pageCbx.removeAllItems();</span><br><span class="line">			for(String each : getPageArray(pageNum))</span><br><span class="line">			&#123;</span><br><span class="line">				pageCbx.addItem(each);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		pageCbx.setSelectedIndex(currentPageIndex);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	String[] getPageArray(int pageNum)</span><br><span class="line">	&#123;</span><br><span class="line">		int num &#x3D; pageNum;</span><br><span class="line">		if(pageNum &lt;&#x3D; 0)</span><br><span class="line">		&#123;</span><br><span class="line">			num &#x3D; 1;</span><br><span class="line">		&#125;</span><br><span class="line">		String[] pages &#x3D; new String[num];</span><br><span class="line">		for(int i &#x3D; 1; i &lt;&#x3D; num; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			pages[i - 1] &#x3D; Integer.toString(i);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return pages;</span><br><span class="line">	&#125;</span><br><span class="line">	private int getPageNum()</span><br><span class="line">	&#123;</span><br><span class="line">		int rowSum &#x3D; htm.heroDao.list().size();</span><br><span class="line">		int numPage &#x3D; (int)(rowSum &#x2F; ITEMS_PER_PAGE);</span><br><span class="line">		if(rowSum % ITEMS_PER_PAGE !&#x3D; 0)</span><br><span class="line">		&#123;</span><br><span class="line">			numPage +&#x3D; 1;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;pagenum&#x3D;&quot; + numPage);</span><br><span class="line">		return numPage;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="13、SWING中的线程"><a class="header-anchor" href="#13、SWING中的线程">¶</a>13、SWING中的线程</h2>
<h3 id="步骤-1-三种线程"><a class="header-anchor" href="#步骤-1-三种线程">¶</a>步骤 1 : 三种线程</h3>
<p>在Swing程序的开发中，需要建立3种线程的概念</p>
<ol>
<li>
<p>初始化线程<br>
初始化线程用于创建各种[容器]，[组件]并显示他们，一旦创建并显示，初始化线程的任务就结束了。</p>
</li>
<li>
<p>事件调度线程<br>
通过[事件监听]的学习，我们了解到Swing是一个事件驱动的模型，所有和事件相关的操作都放是放在<strong>事件调度线程</strong> (Event Dispatch)中进行的。比如点击一个按钮，对应的<strong>ActionListener.actionPerformed</strong> 方法中的代码，就是在事件调度线程 Event Dispatch Thread中执行的。</p>
</li>
<li>
<p>长耗时任务线程<br>
有时候需要进行一些长时间的操作，比如访问数据库，文件复制，连接网络，统计文件总数等等。 这些操作就不适合放在<strong>事件调度线程</strong>中进行，因为占用时间久了，会让使用者感觉界面响应很<strong>卡顿</strong>。 为了保持界面<strong>响应的流畅性</strong>,所有长耗时任务都应该放在专门的 长耗时任务线程中进行</p>
</li>
</ol>
<h3 id="步骤-2-事件调度线程是单线程的"><a class="header-anchor" href="#步骤-2-事件调度线程是单线程的">¶</a>步骤 2 : 事件调度线程是单线程的</h3>
<p>在开始讲解这3种线程之前， 要建立一个概念： 事件调度线程是单线程的。<br>
为什么呢？<br>
这是因为 Swing里面的各种组件类，比如JTextField,JButton 都<strong>不是线程安全的</strong>，这就意味着，如果有多个线程，那么同一个JTextField的setText方法，可能会被多个线程同时调用，这会导致同步问题以及错误数据的发生。</p>
<p>如果把组件类设计成为线程安全的，由于Swing事件调度的复杂性，就很有可能导致[死锁]的发生。</p>
<p>为了规避同步问题，以及降低整个Swing设计的复杂度，提高Swing的相应速度，Swing中的 事件调度线程被设计成为了单线程模式，即只有一个线程在负责事件的响应工作。</p>
<p>参考阅读：[线程安全的概念]</p>
<h3 id="步骤-3-初始化线程"><a class="header-anchor" href="#步骤-3-初始化线程">¶</a>步骤 3 : 初始化线程</h3>
<p>如代码所示，同时我们在初始化一个图形界面的时候，都会直接在<strong>主方法的主线程</strong>里，直接调用如下代码来进行初始化</p>
<p>new TestFrame().setVisible(true);</p>
<p>如果是小程序这没有什么问题，如果是复杂的程序就有可能产生问题了。因为这里有两个线程在同时访问组件：1. 主线程 2. 事件调度线程。 如果是复杂的图形界面程序，就有可能出现这两个线程同时操作的情况，导致同步问题的产生。</p>
<p>为了规避这个问题的产生，创建和显示界面的工作，最好也交给事件调度线程，这样就保证了<strong>只有一个线程</strong>在访问这些组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SwingUtilities.invokeLater(new Runnable() &#123;</span><br><span class="line"></span><br><span class="line">	public void run() &#123;</span><br><span class="line"></span><br><span class="line">		new TestFrame().setVisible(true);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>像这样，<strong>new TestFrame().setVisible(true);</strong> 这段代码就是在事件调度线程中执行了。</p>
<p>还可以使用SwingUtilities.isEventDispatchThread()来判断当前线程是否是事件调度线程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.SwingUtilities;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        new TestFrame().setVisible(true);</span><br><span class="line">         </span><br><span class="line">&#x2F;&#x2F;      SwingUtilities.invokeLater(new Runnable() &#123;</span><br><span class="line">&#x2F;&#x2F;          public void run() &#123;</span><br><span class="line">&#x2F;&#x2F;              new TestFrame().setVisible(true);</span><br><span class="line">&#x2F;&#x2F;          &#125;</span><br><span class="line">&#x2F;&#x2F;      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    static class TestFrame extends JFrame &#123;</span><br><span class="line">        public TestFrame() &#123;</span><br><span class="line">            setTitle(&quot;LoL&quot;);</span><br><span class="line"> </span><br><span class="line">            setSize(400, 300);</span><br><span class="line"> </span><br><span class="line">            setLocation(200, 200);</span><br><span class="line"> </span><br><span class="line">            setLayout(null);</span><br><span class="line"> </span><br><span class="line">            JButton b &#x3D; new JButton(&quot;一键秒对方基地挂&quot;);</span><br><span class="line"> </span><br><span class="line">            b.setBounds(50, 50, 280, 30);</span><br><span class="line"> </span><br><span class="line">            add(b);</span><br><span class="line"> </span><br><span class="line">            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">            setVisible(true);</span><br><span class="line">             </span><br><span class="line">            System.out.println(&quot;当前线程是否是 事件调度线程: &quot; + SwingUtilities.isEventDispatchThread());</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-事件调度线程"><a class="header-anchor" href="#步骤-4-事件调度线程">¶</a>步骤 4 : 事件调度线程</h3>
<p>以 [按钮监听]中的代码为例，<strong>ActionListener.actionPerformed</strong> 中的代码，就是事件调度线程执行的。</p>
<p>可以借助<strong>SwingUtilities.isEventDispatchThread()</strong> 确认，是事件调度线程在执行相应的代码</p>
<p>那么事件调度线程又是如何去执行这段代码的呢？ <strong>这就不用你操心啦</strong>, 要解释这个问题，就需要<strong>剖析</strong>整个Swing的框架，就不是本章节所能展示的内容啦</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2726.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">   </span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">   </span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.SwingUtilities;</span><br><span class="line">import javax.swing.SwingWorker;</span><br><span class="line">   </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">   </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(580, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">   </span><br><span class="line">        final JLabel l &#x3D; new JLabel();</span><br><span class="line">   </span><br><span class="line">        ImageIcon i &#x3D; new ImageIcon(&quot;D:\\java\\workspace\\shana.png&quot;);</span><br><span class="line">        l.setIcon(i);</span><br><span class="line">        l.setBounds(50, 50, i.getIconWidth(), i.getIconHeight());</span><br><span class="line">   </span><br><span class="line">        JButton b &#x3D; new JButton(&quot;隐藏图片&quot;);</span><br><span class="line">        b.setBounds(150, 200, 100, 30);</span><br><span class="line">   </span><br><span class="line">        b.addActionListener(new ActionListener() &#123;</span><br><span class="line">   </span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                l.setVisible(false);</span><br><span class="line">                 </span><br><span class="line">                System.out.println(&quot;当前使用的是事件调度线程：&quot; + SwingUtilities.isEventDispatchThread());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">   </span><br><span class="line">        f.add(l);</span><br><span class="line">        f.add(b);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">   </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-长耗时任务线程"><a class="header-anchor" href="#步骤-5-长耗时任务线程">¶</a>步骤 5 : 长耗时任务线程</h3>
<p>有时候需要执行长耗时任务，比如数据库查询，文件复制，访问网络等等。</p>
<p>而这些操作一般都会在事件响应后<strong>发起</strong>，就会自动进入[事件调度线程]。 而事件调度线程又是单线程模式，其结果就会是在执行这些长耗时任务的时候，界面就<strong>无响应了</strong>。</p>
<p>如图所示，当点击第一个按钮的时候，会在其中进行一个5秒钟的任务，这个期间，第一个按钮会保持按下状态，其他按钮也无法点击，出现了<strong>无响应了</strong>状态。</p>
<p>为了解决这个问题，Swing提供了一个SwingWorker类来解决。 SwingWorker是一个抽象类，为了使用，必须实现方法 <strong>doInBackground</strong>，在doInBackground中，就可以编写我们的任务，然后执行SwingWorker的execute方法，放在专门的工作线程中去运行。</p>
<p>SwingWorker worker = new SwingWorker() {</p>
<p>​	protected Object doInBackground() throws Exception {</p>
<p>​		//长耗时任务</p>
<p>​		return null;</p>
<p>​	}</p>
<p>};</p>
<p>worker.execute();</p>
<p>SwingWorker又是如何工作的呢？<br>
当SwingWorker执行execute的时候，调用默认有10根线程的线程池，执行doInBackground中的代码，通过如下代码，可以获知执行当前SwingWorder的线程名称</p>
<p>System.out.println(“执行这个SwingWorder的线程是：” + Thread.currentThread().getName());</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2727.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line"> </span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line"> </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.SwingWorker;</span><br><span class="line"> </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(300, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(new FlowLayout());</span><br><span class="line"> </span><br><span class="line">        JButton b1 &#x3D; new JButton(&quot;在事件调度线程中执行长耗时任务&quot;);</span><br><span class="line">        JButton b2 &#x3D; new JButton(&quot;使用SwingWorker执行长耗时任务&quot;);</span><br><span class="line">        JLabel l &#x3D; new JLabel(&quot;任务执行结果&quot;);</span><br><span class="line">        f.add(b1);</span><br><span class="line">        f.add(b2);</span><br><span class="line">        f.add(l);</span><br><span class="line"> </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"> </span><br><span class="line">        b1.addActionListener(new ActionListener() &#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                l.setText(&quot;开始执行完毕&quot;);</span><br><span class="line">                try &#123;</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line">                &#125; catch (InterruptedException e1) &#123;</span><br><span class="line">                    &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                    e1.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                l.setText(&quot;任务执行完毕&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        b2.addActionListener(new ActionListener() &#123;</span><br><span class="line"> </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                SwingWorker&lt;Void, Void&gt; worker &#x3D; new SwingWorker&lt;Void, Void&gt;() &#123;</span><br><span class="line"> </span><br><span class="line">                    @Override</span><br><span class="line">                    protected Void doInBackground() throws Exception &#123;</span><br><span class="line">                        System.out.println(&quot;执行这个SwingWorder的线程是：&quot; + Thread.currentThread().getName());</span><br><span class="line">                        l.setText(&quot;开始执行完毕&quot;);</span><br><span class="line">                        try &#123;</span><br><span class="line">                            Thread.sleep(5000);</span><br><span class="line">                        &#125; catch (InterruptedException e1) &#123;</span><br><span class="line">                            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">                            e1.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                        l.setText(&quot;任务执行完毕&quot;);</span><br><span class="line">                        return null;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">                worker.execute();</span><br><span class="line"> </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-练习-查找文件内容"><a class="header-anchor" href="#步骤-6-练习-查找文件内容">¶</a>步骤 6 : 练习-查找文件内容</h3>
<p>参考 [练习-查找文件内容]中的做法，使用swing来完成这个功能。</p>
<p><strong>查找文件内容</strong>本身是一个比较耗时的任务，采用[长耗时任务线程]的手段，开发这个功能。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import java.awt.GridLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line">import javax.swing.SwingUtilities;</span><br><span class="line">import javax.swing.SwingWorker;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SwingUtilities.invokeLater(()-&gt;new SearchFrame().setVisible(true));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    static class SearchFrame extends JFrame &#123;</span><br><span class="line">        JLabel lLocation &#x3D; new JLabel(&quot;查询目录&quot;);</span><br><span class="line">        JLabel lSearch &#x3D; new JLabel(&quot;文件内容&quot;);</span><br><span class="line">  </span><br><span class="line">        JTextField tfLocation &#x3D; new JTextField(&quot;D:\\java&quot;);</span><br><span class="line">        JTextField tfSearch &#x3D; new JTextField(&quot;java&quot;);</span><br><span class="line">  </span><br><span class="line">        JButton bSubmit &#x3D; new JButton(&quot;搜索&quot;);</span><br><span class="line">  </span><br><span class="line">        private void unfreeze() &#123;</span><br><span class="line">            bSubmit.setText(&quot;搜索&quot;);</span><br><span class="line">            bSubmit.setEnabled(true);</span><br><span class="line">            tfLocation.setEnabled(true);</span><br><span class="line">            tfSearch.setEnabled(true);</span><br><span class="line">              </span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        private void freeze() &#123;</span><br><span class="line">            bSubmit.setText(&quot;正在搜索&quot;);</span><br><span class="line">            bSubmit.setEnabled(false);</span><br><span class="line">            tfLocation.setEnabled(false);</span><br><span class="line">            tfSearch.setEnabled(false);</span><br><span class="line">        &#125;</span><br><span class="line">          </span><br><span class="line">        SearchFrame() &#123;</span><br><span class="line">            int gap &#x3D; 50;</span><br><span class="line">            this.setLayout(null);</span><br><span class="line">  </span><br><span class="line">            JPanel pInput &#x3D; new JPanel();</span><br><span class="line">            JPanel pSubmit &#x3D; new JPanel();</span><br><span class="line">  </span><br><span class="line">            pInput.setLayout(new GridLayout(2, 2, gap, gap));</span><br><span class="line">            pInput.add(lLocation);</span><br><span class="line">            pInput.add(tfLocation);</span><br><span class="line">            pInput.add(lSearch);</span><br><span class="line">            pInput.add(tfSearch);</span><br><span class="line">  </span><br><span class="line">            pSubmit.add(bSubmit);</span><br><span class="line">  </span><br><span class="line">            pInput.setBounds(50, 20, 200, 100);</span><br><span class="line">            pSubmit.setBounds(0, 130, 300, 150);</span><br><span class="line">  </span><br><span class="line">            this.add(pInput);</span><br><span class="line">            this.add(pSubmit);</span><br><span class="line">  </span><br><span class="line">            this.setSize(300, 200);</span><br><span class="line">            this.setLocationRelativeTo(null);</span><br><span class="line">            this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">            bSubmit.addActionListener(new ActionListener() &#123;</span><br><span class="line">  </span><br><span class="line">                @Override</span><br><span class="line">                public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                    foundCount &#x3D; 0;</span><br><span class="line">                    String location &#x3D; tfLocation.getText();</span><br><span class="line">                    String search &#x3D;tfSearch.getText();</span><br><span class="line">                    if(0&#x3D;&#x3D;location.length())&#123;</span><br><span class="line">                        JOptionPane.showMessageDialog(SearchFrame.this, &quot;搜索目录不能为空&quot;);</span><br><span class="line">                        tfLocation.grabFocus();</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if(0&#x3D;&#x3D;search.length())&#123;</span><br><span class="line">                        JOptionPane.showMessageDialog(SearchFrame.this, &quot;搜索目录不能为空&quot;);</span><br><span class="line">                        tfSearch.grabFocus();</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                      </span><br><span class="line">                    File folder &#x3D; new File(location);</span><br><span class="line">                    if(!folder.exists())&#123;</span><br><span class="line">                        JOptionPane.showMessageDialog(SearchFrame.this, &quot;搜索目录不存在&quot;);</span><br><span class="line">                        tfLocation.grabFocus();</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if(!folder.isDirectory())&#123;</span><br><span class="line">                        JOptionPane.showMessageDialog(SearchFrame.this, &quot;搜索目录不是一个文件夹&quot;);</span><br><span class="line">                        tfLocation.grabFocus();</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                      </span><br><span class="line">                    freeze();</span><br><span class="line">                      </span><br><span class="line">                    SwingWorker worker &#x3D; new SwingWorker()&#123;</span><br><span class="line">  </span><br><span class="line">                        @Override</span><br><span class="line">                        protected Object doInBackground() throws Exception &#123;</span><br><span class="line">                            &#x2F;&#x2F;work here</span><br><span class="line">                              </span><br><span class="line">                            search(folder,search);</span><br><span class="line">                            JOptionPane.showMessageDialog(SearchFrame.this, &quot;总共找到满足条件的文件: &quot; + foundCount + &quot; 个&quot;);</span><br><span class="line">                            unfreeze();</span><br><span class="line">                            return null;</span><br><span class="line">                              </span><br><span class="line">                        &#125;</span><br><span class="line">  </span><br><span class="line">                    &#125;;</span><br><span class="line">                      </span><br><span class="line">                    worker.execute();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    private static int foundCount &#x3D; 0;</span><br><span class="line">    public static void search(File file, String search) &#123;</span><br><span class="line">        if (file.isFile()) &#123;</span><br><span class="line">            if(file.getName().toLowerCase().endsWith(&quot;.java&quot;))&#123;</span><br><span class="line">                String fileContent &#x3D; readFileConent(file);</span><br><span class="line">                if(fileContent.contains(search))&#123;</span><br><span class="line">                    foundCount++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (file.isDirectory()) &#123;</span><br><span class="line">            File[] fs &#x3D; file.listFiles();</span><br><span class="line">            for (File f : fs) &#123;</span><br><span class="line">                search(f, search);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    public static String readFileConent(File file)&#123;</span><br><span class="line">        try (FileReader fr &#x3D; new FileReader(file)) &#123;</span><br><span class="line">            char[] all &#x3D; new char[(int) file.length()];</span><br><span class="line">            fr.read(all);</span><br><span class="line">            return new String(all);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="14、SWING-皮肤-LOOK-AND-FEEL"><a class="header-anchor" href="#14、SWING-皮肤-LOOK-AND-FEEL">¶</a>14、SWING 皮肤 LOOK AND FEEL</h2>
<p>Java提供了非常便捷的方式切换界面风格</p>
<h3 id="步骤-1-设置皮肤"><a class="header-anchor" href="#步骤-1-设置皮肤">¶</a>步骤 1 : 设置皮肤</h3>
<p>只需要提供一句代码</p>
<p>javax.swing.UIManager.setLookAndFeel(“com.birosoft.liquid.LiquidLookAndFeel”);</p>
<p>就可以把所有的组件切换成不同的风格。</p>
<p><strong>注：</strong> 这句话需要加在最前面，如果已经创建了界面，再加这个有时候不能正常起作用。</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/916.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package gui;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">  </span><br><span class="line">public class TestGUI &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;设置皮肤</span><br><span class="line">        setLookAndFeel();</span><br><span class="line"> </span><br><span class="line">        JFrame f &#x3D; new JFrame(&quot;LoL&quot;);</span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(200, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">        JButton b &#x3D; new JButton(&quot;一键秒对方基地挂&quot;);</span><br><span class="line">        b.setBounds(50, 50, 280, 30);</span><br><span class="line">  </span><br><span class="line">        f.add(b);</span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">  </span><br><span class="line">        f.setVisible(true);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    private static void setLookAndFeel() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">          javax.swing.UIManager.setLookAndFeel(&quot;com.birosoft.liquid.LiquidLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.smart.SmartLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.mcwin.McWinLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.luna.LunaLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.aluminium.AluminiumLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.bernstein.BernsteinLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.hifi.HiFiLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.mint.MintLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.aero.AeroLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.fast.FastLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.acryl.AcrylLookAndFeel&quot;);</span><br><span class="line">&#x2F;&#x2F;          javax.swing.UIManager.setLookAndFeel(&quot;com.jtattoo.plaf.noire.NoireLookAndFeel&quot;);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            &#x2F;&#x2F; handle exception</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="九、网络编程"><a class="header-anchor" href="#九、网络编程">¶</a>九、网络编程</h1>
<h2 id="1、IP地址与端口概念"><a class="header-anchor" href="#1、IP地址与端口概念">¶</a>1、IP地址与端口概念</h2>
<p>IP地址与端口概念</p>
<h3 id="步骤-1-IP地址"><a class="header-anchor" href="#步骤-1-IP地址">¶</a>步骤 1 : IP地址</h3>
<p>在网络中每台计算机都必须有一个的IP地址；<br>
32位，4个字节，常用点分十进制的格式表示，例如：192.168.1.100<br>
127.0.0.1 是固定ip地址，代表当前计算机，相当于面向对象里的 “<strong>this</strong>”</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/880.png" alt></p>
<h3 id="步骤-2-端口"><a class="header-anchor" href="#步骤-2-端口">¶</a>步骤 2 : 端口</h3>
<p>两台计算机进行连接，总有一台服务器，一台客户端。<br>
服务器和客户端之间的通信通过端口进行。如图：</p>
<p>ip地址是 192.168.1.100的服务器通过端口 8080<br>
与ip地址是192.168.1.189的客户端 的1087端口通信</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/881.png" alt></p>
<h3 id="步骤-3-获取本机IP地址"><a class="header-anchor" href="#步骤-3-获取本机IP地址">¶</a>步骤 3 : 获取本机IP地址</h3>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2716.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.net.InetAddress;</span><br><span class="line">import java.net.UnknownHostException;</span><br><span class="line"> </span><br><span class="line">public class TestSocket &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) throws UnknownHostException &#123;</span><br><span class="line">        InetAddress host &#x3D; InetAddress.getLocalHost();</span><br><span class="line">        String ip &#x3D;host.getHostAddress();</span><br><span class="line">        System.out.println(&quot;本机ip地址：&quot; + ip);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-ping命令"><a class="header-anchor" href="#步骤-4-ping命令">¶</a>步骤 4 : ping命令</h3>
<p>使用ping判断一个地址是否能够到达<br>
ping不是java的api，是windows中的一个小工具，用于判断一个地址的响应时间</p>
<p>如图<br>
ping 192.168.2.106 可以返回这个地址的响应时间 time&lt;1ms表示很快，局域网一般就是这个响应时间</p>
<p>ping 192.168.2.206 返回Request timed out表示时间较久都没有响应返回，基本判断这个地址不可用</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2717.png" alt></p>
<h3 id="步骤-5-使用java-执行ping命令"><a class="header-anchor" href="#步骤-5-使用java-执行ping命令">¶</a>步骤 5 : 使用java 执行ping命令</h3>
<p>借助 Runtime.getRuntime().exec() 可以运行一个windows的exe程序<br>
如图，使用java运行 <strong>ping 192.168.2.106</strong>，返回这样的字符串</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2718.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.BufferedReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStreamReader;</span><br><span class="line"> </span><br><span class="line">public class TestSocket &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) throws IOException &#123;</span><br><span class="line"> </span><br><span class="line">        Process p &#x3D; Runtime.getRuntime().exec(&quot;ping &quot; + &quot;192.168.2.106&quot;);</span><br><span class="line">        BufferedReader br &#x3D; new BufferedReader(new InputStreamReader(p.getInputStream()));</span><br><span class="line">        String line &#x3D; null;</span><br><span class="line">        StringBuilder sb &#x3D; new StringBuilder();</span><br><span class="line">        while ((line &#x3D; br.readLine()) !&#x3D; null) &#123;</span><br><span class="line">            if (line.length() !&#x3D; 0)</span><br><span class="line">                sb.append(line + &quot;\r\n&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;本次指令返回的消息是：&quot;);</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-6-练习-判断本网段有多少可用的ip地址"><a class="header-anchor" href="#步骤-6-练习-判断本网段有多少可用的ip地址">¶</a>步骤 6 : 练习-判断本网段有多少可用的ip地址</h3>
<p>首先获取 [获取本机IP地址]，比如说是192.168.2.100。 那么本网段的ip地址就是从 192.168.2.1 到 192.168.2.255<br>
再通过[使用java 执行ping命令] 判断这些ip地址能否使用，把能够使用的ip打印出来</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2719.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"></span><br><span class="line">import java.io.BufferedReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStreamReader;</span><br><span class="line">import java.net.InetAddress;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line">public class TestSocket &#123;</span><br><span class="line">	public static void main(String[] args) throws IOException &#123;</span><br><span class="line">		InetAddress host &#x3D; InetAddress.getLocalHost();</span><br><span class="line">		String ip &#x3D; host.getHostAddress();&#x2F;&#x2F;获取本机IP</span><br><span class="line">		String head &#x3D; ip.substring(0, ip.lastIndexOf(&#39;.&#39;) + 1);&#x2F;&#x2F;获取本机IP的前三段</span><br><span class="line">		List&lt;String&gt; iplist &#x3D; Collections.synchronizedList(new ArrayList&lt;String&gt;());&#x2F;&#x2F;定义一个线程安全的集合</span><br><span class="line">		final CountDownLatch latch &#x3D; new CountDownLatch(255);&#x2F;&#x2F;信号量</span><br><span class="line">		for (int i &#x3D; 1; i &lt;&#x3D; 255; i++) &#123;</span><br><span class="line">			int j &#x3D; i;</span><br><span class="line">			new Thread(() -&gt; &#123;</span><br><span class="line">				String item &#x3D; head + j;</span><br><span class="line">				boolean flag &#x3D; false;</span><br><span class="line">				Process p &#x3D; null;</span><br><span class="line">				try &#123;</span><br><span class="line">					p &#x3D; Runtime.getRuntime().exec(&quot;ping &quot;+ item);</span><br><span class="line">				&#125; catch (IOException e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				BufferedReader br &#x3D; new BufferedReader(new InputStreamReader(p.getInputStream()));</span><br><span class="line">				String line &#x3D; null;</span><br><span class="line">				try &#123;</span><br><span class="line">					while ((line &#x3D; br.readLine())!&#x3D; null) &#123;</span><br><span class="line">						if (line.contains(&quot;TTL&quot;)) &#123;&#x2F;&#x2F;包含TTL说明可以ping通</span><br><span class="line">							flag &#x3D; true;</span><br><span class="line">						break;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125; catch (IOException e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">				if (flag) &#123;</span><br><span class="line">					iplist.add(item);</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(&quot;已经完成ip地址为：&quot; + item + &quot;测试&quot;);</span><br><span class="line">				latch.countDown();</span><br><span class="line">			&#125;).start();</span><br><span class="line">		&#125;</span><br><span class="line">		try &#123;</span><br><span class="line">			latch.await();&#x2F;&#x2F;等待所有线程执行结束</span><br><span class="line">		&#125; catch (InterruptedException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(&quot;如下ip地址可以连接：&quot;);</span><br><span class="line">		for (int i &#x3D; 0; i &lt; iplist.size(); i++) &#123;</span><br><span class="line">			System.out.println(iplist.get(i));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、JAVA-SOCKET-收发消息入门例子"><a class="header-anchor" href="#2、JAVA-SOCKET-收发消息入门例子">¶</a>2、JAVA SOCKET 收发消息入门例子</h2>
<p>使用 Socket(套接字)进行不同的程序之间的通信</p>
<h3 id="步骤-1-建立连接"><a class="header-anchor" href="#步骤-1-建立连接">¶</a>步骤 1 : 建立连接</h3>
<ol>
<li>
<p>服务端开启8888端口，并监听着，时刻等待着客户端的连接请求</p>
</li>
<li>
<p>客户端知道服务端的ip地址和监听端口号，发出请求到服务端<br>
客户端的端口地址是系统分配的，通常都会大于1024<br>
一旦建立了连接，服务端会得到一个新的Socket对象，该对象负责与客户端进行通信。<br>
<strong>注意：</strong> 在开发调试的过程中，如果修改过了服务器Server代码，要关闭启动的Server,否则新的Server不能启动，因为8888端口被占用了</p>
</li>
</ol>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/882.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line">  </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">   </span><br><span class="line">public class Server &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args)  &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;服务端打开端口8888</span><br><span class="line">            ServerSocket ss &#x3D; new ServerSocket(8888);</span><br><span class="line">               </span><br><span class="line">            &#x2F;&#x2F;在8888端口上监听，看是否有连接请求过来</span><br><span class="line">            System.out.println(&quot;监听在端口号:8888&quot;);</span><br><span class="line">            Socket s &#x3D;  ss.accept();</span><br><span class="line">               </span><br><span class="line">            System.out.println(&quot;有连接过来&quot; + s);</span><br><span class="line">             </span><br><span class="line">            s.close();</span><br><span class="line">            ss.close();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">           </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line">  </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.net.UnknownHostException;</span><br><span class="line">   </span><br><span class="line">public class Client &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args)  &#123;</span><br><span class="line">           </span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;连接到本机的8888端口</span><br><span class="line">            Socket s &#x3D; new Socket(&quot;127.0.0.1&quot;,8888);</span><br><span class="line">            System.out.println(s);</span><br><span class="line">            s.close();</span><br><span class="line">        &#125; catch (UnknownHostException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-收发数字"><a class="header-anchor" href="#步骤-2-收发数字">¶</a>步骤 2 : 收发数字</h3>
<p>一旦建立了连接，服务端和客户端就可以通过Socket进行通信了</p>
<ol>
<li>
<p>客户端打开输出流，并发送数字 110</p>
</li>
<li>
<p>服务端打开输入流，接受数字 110，并打印</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line"> </span><br><span class="line">public class Server &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line"> </span><br><span class="line">            ServerSocket ss &#x3D; new ServerSocket(8888);</span><br><span class="line"> </span><br><span class="line">            System.out.println(&quot;监听在端口号:8888&quot;);</span><br><span class="line">            Socket s &#x3D; ss.accept();</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F;打开输入流</span><br><span class="line">            InputStream is &#x3D; s.getInputStream();</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F;读取客户端发送的数据</span><br><span class="line">            int msg &#x3D; is.read();</span><br><span class="line">            &#x2F;&#x2F;打印出来</span><br><span class="line">            System.out.println(msg);</span><br><span class="line">            is.close();</span><br><span class="line"> </span><br><span class="line">            s.close();</span><br><span class="line">            ss.close();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.net.UnknownHostException;</span><br><span class="line"> </span><br><span class="line">public class Client &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        try &#123;</span><br><span class="line">            Socket s &#x3D; new Socket(&quot;127.0.0.1&quot;, 8888);</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; 打开输出流</span><br><span class="line">            OutputStream os &#x3D; s.getOutputStream();</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; 发送数字110到服务端</span><br><span class="line">            os.write(110);</span><br><span class="line">            os.close();</span><br><span class="line"> </span><br><span class="line">            s.close();</span><br><span class="line">        &#125; catch (UnknownHostException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-3-收发字符串"><a class="header-anchor" href="#步骤-3-收发字符串">¶</a>步骤 3 : 收发字符串</h3>
<p>直接使用字节流收发字符串比较麻烦，使用[数据流]对字节流进行封装，这样收发字符串就容易了</p>
<ol>
<li>
<p>把输出流封装在DataOutputStream中<br>
使用writeUTF发送字符串 “Legendary!”</p>
</li>
<li>
<p>把输入流封装在DataInputStream<br>
使用readUTF读取字符串,并打印</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.DataInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line"> </span><br><span class="line">public class Server &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line"> </span><br><span class="line">            ServerSocket ss &#x3D; new ServerSocket(8888);</span><br><span class="line"> </span><br><span class="line">            System.out.println(&quot;监听在端口号:8888&quot;);</span><br><span class="line">            Socket s &#x3D; ss.accept();</span><br><span class="line"> </span><br><span class="line">            InputStream is &#x3D; s.getInputStream();</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F;把输入流封装在DataInputStream</span><br><span class="line">            DataInputStream dis &#x3D; new DataInputStream(is);</span><br><span class="line">            &#x2F;&#x2F;使用readUTF读取字符串</span><br><span class="line">            String msg &#x3D; dis.readUTF();</span><br><span class="line">            System.out.println(msg);</span><br><span class="line">            dis.close();</span><br><span class="line">            s.close();</span><br><span class="line">            ss.close();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.net.UnknownHostException;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"> </span><br><span class="line">public class Client &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        try &#123;</span><br><span class="line">            Socket s &#x3D; new Socket(&quot;127.0.0.1&quot;, 8888);</span><br><span class="line"> </span><br><span class="line">            OutputStream os &#x3D; s.getOutputStream();</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F;把输出流封装在DataOutputStream中</span><br><span class="line">            DataOutputStream dos &#x3D; new DataOutputStream(os);</span><br><span class="line">            &#x2F;&#x2F;使用writeUTF发送字符串</span><br><span class="line">            dos.writeUTF(&quot;Legendary!&quot;);</span><br><span class="line">            dos.close();</span><br><span class="line">            s.close();</span><br><span class="line">        &#125; catch (UnknownHostException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-4-使用Scanner"><a class="header-anchor" href="#步骤-4-使用Scanner">¶</a>步骤 4 : 使用Scanner</h3>
<p>在上个步骤中，每次要发不同的数据都需要修改代码<br>
可以使用[Scanner]读取控制台的输入，并发送到服务端，这样每次都可以发送不同的数据了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.net.UnknownHostException;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"> </span><br><span class="line">public class Client &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        try &#123;</span><br><span class="line">            Socket s &#x3D; new Socket(&quot;127.0.0.1&quot;, 8888);</span><br><span class="line"> </span><br><span class="line">            OutputStream os &#x3D; s.getOutputStream();</span><br><span class="line">            DataOutputStream dos &#x3D; new DataOutputStream(os);</span><br><span class="line">             </span><br><span class="line">            &#x2F;&#x2F;使用Scanner读取控制台的输入，并发送到服务端</span><br><span class="line">            Scanner sc &#x3D; new Scanner(System.in);</span><br><span class="line">             </span><br><span class="line">            String str &#x3D; sc.next();</span><br><span class="line">            dos.writeUTF(str);</span><br><span class="line">             </span><br><span class="line">            dos.close();</span><br><span class="line">            s.close();</span><br><span class="line">        &#125; catch (UnknownHostException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-5-练习-服务端和客户端互聊"><a class="header-anchor" href="#步骤-5-练习-服务端和客户端互聊">¶</a>步骤 5 : 练习-服务端和客户端互聊</h3>
<p>前面部分的学习效果是服务端接受数据，客户端发送数据。</p>
<p>做相应的改动，使得服务端也能发送数据，客户端也能接受数据，并且可以一直持续下去</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2737.png" alt></p>
<h3 id="步骤-6-练习-聊天机器人数据库"><a class="header-anchor" href="#步骤-6-练习-聊天机器人数据库">¶</a>步骤 6 : 练习-聊天机器人数据库</h3>
<p>首先创建一个数据库android(android现在是手机操作系统，其本意是机器人的意思)</p>
<p>然后创建一个表dictionary，字段：<br>
id int<br>
receive varchar(100)<br>
response varchar(100)</p>
<p>receive 表示受到的信息<br>
response 表示回应的信息</p>
<p>在这个表里准备一些数据：<br>
你好 -&gt; 好你妹！<br>
你叫什么 -&gt; 你想泡我啊？<br>
打你哦 -&gt; 来啊，来打我啊，不打有点挫<br>
等等<br>
等等</p>
<p>开发一个程序，当从scanner读取到消息，发给Server服务端，服务端用这个消息到表dictionary中找到对应的相应，返回出去。 看上去就像在自动回应一样。<br>
如果一个recieve有多条response，则随机返回一条</p>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2658.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">create database android;</span><br><span class="line"> </span><br><span class="line">use android;</span><br><span class="line"> </span><br><span class="line">create table dictionary(</span><br><span class="line">   id int AUTO_INCREMENT,</span><br><span class="line">   receive varchar(100),</span><br><span class="line">   response varchar(100),</span><br><span class="line">   PRIMARY KEY (id)</span><br><span class="line">)  DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"> </span><br><span class="line">insert into dictionary values(null,&#39;你好&#39;,&#39;好你妹！&#39;);</span><br><span class="line">insert into dictionary values(null,&#39;你叫什么&#39;,&#39;你想泡我啊？&#39;);</span><br><span class="line">insert into dictionary values(null,&#39;你叫什么&#39;,&#39;同志，不约&#39;);</span><br><span class="line">insert into dictionary values(null,&#39;打你哦&#39;,&#39;来啊，来打我啊，不打有点挫&#39;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">public class Dictionary &#123;</span><br><span class="line">    int id;</span><br><span class="line">    String receive ;</span><br><span class="line">    String response;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">import charactor.Hero;</span><br><span class="line"> </span><br><span class="line">public class DictionaryDAO &#123;</span><br><span class="line"> </span><br><span class="line">public DictionaryDAO() &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">    &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">    public Connection getConnection() throws SQLException &#123;</span><br><span class="line">        return DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;android?characterEncoding&#x3D;UTF-8&quot;, &quot;root&quot;,</span><br><span class="line">                &quot;admin&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public List&lt;Dictionary&gt; query(String recieve) &#123;</span><br><span class="line">        List&lt;Dictionary&gt; ds &#x3D; new ArrayList&lt;Dictionary&gt;();</span><br><span class="line"> </span><br><span class="line">        String sql &#x3D; &quot;select * from dictionary where receive &#x3D; ? &quot;;</span><br><span class="line"> </span><br><span class="line">        try (Connection c &#x3D; getConnection(); PreparedStatement ps &#x3D; c.prepareStatement(sql);) &#123;</span><br><span class="line">            ps.setString(1, recieve);</span><br><span class="line">            ResultSet rs &#x3D; ps.executeQuery();</span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                Dictionary d &#x3D; new Dictionary();</span><br><span class="line">                int id &#x3D; rs.getInt(1);</span><br><span class="line">                String receive &#x3D; rs.getString(&quot;receive&quot;);</span><br><span class="line">                String response &#x3D; rs.getString(&quot;response&quot;);</span><br><span class="line">                d.id&#x3D;id;</span><br><span class="line">                d.receive&#x3D;receive;</span><br><span class="line">                d.response&#x3D;response;</span><br><span class="line">                ds.add(d);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line"> </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return ds;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.DataInputStream;</span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">public class Server &#123;</span><br><span class="line"> </span><br><span class="line">    private static List&lt;String&gt; cannotUnderstand&#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">    static&#123;</span><br><span class="line">        cannotUnderstand.add(&quot;听求不懂啊&quot;);</span><br><span class="line">        cannotUnderstand.add(&quot;说人话&quot;);</span><br><span class="line">        cannotUnderstand.add(&quot;再说一遍？&quot;);</span><br><span class="line">        cannotUnderstand.add(&quot;大声点&quot;);</span><br><span class="line">        cannotUnderstand.add(&quot;老子在忙，一边玩儿去&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line"> </span><br><span class="line">            ServerSocket ss &#x3D; new ServerSocket(8888);</span><br><span class="line"> </span><br><span class="line">            System.out.println(&quot;监听在端口号:8888&quot;);</span><br><span class="line">            Socket s &#x3D; ss.accept();</span><br><span class="line"> </span><br><span class="line">            InputStream is &#x3D; s.getInputStream();</span><br><span class="line">            DataInputStream dis &#x3D; new DataInputStream(is);</span><br><span class="line">            OutputStream os &#x3D; s.getOutputStream();</span><br><span class="line">            DataOutputStream dos &#x3D; new DataOutputStream(os);</span><br><span class="line"> </span><br><span class="line">            while (true) &#123;</span><br><span class="line">                String msg &#x3D; dis.readUTF();</span><br><span class="line">                System.out.println(msg);</span><br><span class="line">                 </span><br><span class="line">                List&lt;Dictionary&gt; ds&#x3D; new DictionaryDAO().query(msg);</span><br><span class="line">                String response &#x3D; null;</span><br><span class="line">                if(ds.isEmpty())&#123;</span><br><span class="line">                    Collections.shuffle(cannotUnderstand);</span><br><span class="line">                    response &#x3D; cannotUnderstand.get(0);</span><br><span class="line">                &#125;</span><br><span class="line">                else&#123;</span><br><span class="line">                    Collections.shuffle(ds);</span><br><span class="line">                    response &#x3D; ds.get(0).response;</span><br><span class="line">                &#125;</span><br><span class="line">                dos.writeUTF(response);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line">  </span><br><span class="line">import java.io.DataInputStream;</span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.net.UnknownHostException;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line">  </span><br><span class="line">public class Client &#123;</span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">        try &#123;</span><br><span class="line">            Socket s &#x3D; new Socket(&quot;127.0.0.1&quot;, 8888);</span><br><span class="line">  </span><br><span class="line">            OutputStream os &#x3D; s.getOutputStream();</span><br><span class="line">            DataOutputStream dos &#x3D; new DataOutputStream(os);</span><br><span class="line">            InputStream is &#x3D; s.getInputStream();</span><br><span class="line">            DataInputStream dis &#x3D; new DataInputStream(is);</span><br><span class="line">              </span><br><span class="line">            while(true)&#123;</span><br><span class="line">                Scanner sc &#x3D; new Scanner(System.in);</span><br><span class="line">                String str &#x3D; sc.nextLine();</span><br><span class="line">                dos.writeUTF(str);</span><br><span class="line">                String msg &#x3D; dis.readUTF();</span><br><span class="line">                System.out.println(msg);</span><br><span class="line">                System.out.println();</span><br><span class="line"> </span><br><span class="line">            &#125;</span><br><span class="line">              </span><br><span class="line">        &#125; catch (UnknownHostException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、使用-JAVA-SOCKET-开发多线程聊天程序"><a class="header-anchor" href="#3、使用-JAVA-SOCKET-开发多线程聊天程序">¶</a>3、使用 JAVA SOCKET 开发多线程聊天程序</h2>
<p>如果使用单线程开发Socket应用，那么同一时间，要么收消息，要么发消息，不能同时进行。</p>
<p>为了实现<strong>同时收发消息</strong>，就需要用到多线程</p>
<h3 id="步骤-1-同时收发消息"><a class="header-anchor" href="#步骤-1-同时收发消息">¶</a>步骤 1 : 同时收发消息</h3>
<p>在[练习-服务端和客户端互聊]中，只能一人说一句，说了之后，必须等待另一个人的回复，才能说下一句。</p>
<p>这是因为接受和发送都在主线程中，不能同时进行。 为了实现同时收发消息，基本设计思路是把收发分别放在不同的线程中进行</p>
<ol>
<li>
<p>SendThread 发送消息线程</p>
</li>
<li>
<p>RecieveThread 接受消息线程</p>
</li>
<li>
<p>Server一旦接受到连接，就启动收发两个线程</p>
</li>
<li>
<p>Client 一旦建立了连接，就启动收发两个线程</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"> </span><br><span class="line">public class SendThread extends Thread&#123;</span><br><span class="line"> </span><br><span class="line">    private Socket s;</span><br><span class="line"> </span><br><span class="line">    public SendThread(Socket s)&#123;</span><br><span class="line">        this.s &#x3D; s;</span><br><span class="line">    &#125;</span><br><span class="line">    public void run()&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            OutputStream os &#x3D; s.getOutputStream();</span><br><span class="line">            DataOutputStream dos &#x3D; new DataOutputStream(os);</span><br><span class="line"> </span><br><span class="line">            while(true)&#123;</span><br><span class="line">                Scanner sc &#x3D; new Scanner(System.in);</span><br><span class="line">                String str &#x3D; sc.next();</span><br><span class="line">                dos.writeUTF(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.DataInputStream;</span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"> </span><br><span class="line">public class RecieveThread extends Thread &#123;</span><br><span class="line"> </span><br><span class="line">    private Socket s;</span><br><span class="line"> </span><br><span class="line">    public RecieveThread(Socket s) &#123;</span><br><span class="line">        this.s &#x3D; s;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void run() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            InputStream is &#x3D; s.getInputStream();</span><br><span class="line"> </span><br><span class="line">            DataInputStream dis &#x3D; new DataInputStream(is);</span><br><span class="line">            while (true) &#123;</span><br><span class="line">                String msg &#x3D; dis.readUTF();</span><br><span class="line">                System.out.println(msg);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line"> </span><br><span class="line">public class Server &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line"> </span><br><span class="line">            ServerSocket ss &#x3D; new ServerSocket(8888);</span><br><span class="line"> </span><br><span class="line">            System.out.println(&quot;监听在端口号:8888&quot;);</span><br><span class="line">            Socket s &#x3D; ss.accept();</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F;启动发送消息线程</span><br><span class="line">            new SendThread(s).start();</span><br><span class="line">            &#x2F;&#x2F;启动接受消息线程</span><br><span class="line">            new RecieveThread(s).start();</span><br><span class="line"> </span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.net.UnknownHostException;</span><br><span class="line"> </span><br><span class="line">public class Client &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        try &#123;</span><br><span class="line">            Socket s &#x3D; new Socket(&quot;127.0.0.1&quot;, 8888);</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; 启动发送消息线程</span><br><span class="line">            new SendThread(s).start();</span><br><span class="line">            &#x2F;&#x2F; 启动接受消息线程</span><br><span class="line">            new RecieveThread(s).start();</span><br><span class="line"> </span><br><span class="line">        &#125; catch (UnknownHostException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="步骤-2-练习-有图形界面的聊天程序"><a class="header-anchor" href="#步骤-2-练习-有图形界面的聊天程序">¶</a>步骤 2 : 练习-有图形界面的聊天程序</h3>
<p><img src="/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/2706.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.io.DataInputStream;</span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JTextArea;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line">   </span><br><span class="line">public class GUIServer &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">           </span><br><span class="line">        JFrame f &#x3D; new JFrame();</span><br><span class="line">        f.setTitle(&quot;server&quot;);</span><br><span class="line">           </span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(100, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">           </span><br><span class="line">        JButton b &#x3D; new JButton(&quot;send&quot;);</span><br><span class="line">        b.setBounds(10, 10, 80, 30);</span><br><span class="line">        f.add(b);</span><br><span class="line">          </span><br><span class="line">        final JTextField tf &#x3D; new JTextField();</span><br><span class="line">        tf.setBounds(10, 110, 80, 30);</span><br><span class="line">        f.add(tf);</span><br><span class="line">           </span><br><span class="line">        final JTextArea ta &#x3D; new JTextArea();</span><br><span class="line">        ta.setBounds(110,10, 200, 300);</span><br><span class="line">        f.add(ta);</span><br><span class="line">           </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line"> </span><br><span class="line">        ServerSocket ss &#x3D; new ServerSocket(8888);</span><br><span class="line">         </span><br><span class="line">        System.out.println(&quot;listenning on port:8888&quot;);</span><br><span class="line">        final Socket s &#x3D;  ss.accept();       </span><br><span class="line">        new Thread() &#123;</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                while (true) &#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        DataInputStream dis &#x3D; new DataInputStream(</span><br><span class="line">                                s.getInputStream());</span><br><span class="line">                        String text &#x3D; dis.readUTF();</span><br><span class="line">                        ta.append(text+&quot;\r\n&quot;);</span><br><span class="line">                    &#125; catch (Exception e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">          </span><br><span class="line">        b.addActionListener(new ActionListener() &#123;</span><br><span class="line">              </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                  </span><br><span class="line">                String text &#x3D; tf.getText();</span><br><span class="line">                ta.append(text+&quot;\r\n&quot;);</span><br><span class="line">                  </span><br><span class="line">                try &#123;</span><br><span class="line">                    DataOutputStream dos &#x3D; new DataOutputStream(</span><br><span class="line">                            s.getOutputStream());</span><br><span class="line">                    dos.writeUTF(text);</span><br><span class="line">                &#125; catch (Exception ex) &#123;</span><br><span class="line">                    ex.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">package socket;</span><br><span class="line"> </span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.io.DataInputStream;</span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.net.UnknownHostException;</span><br><span class="line">  </span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JTextArea;</span><br><span class="line">import javax.swing.JTextField;</span><br><span class="line">   </span><br><span class="line">public class GUIClient &#123;</span><br><span class="line">   </span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">           </span><br><span class="line">        JFrame f &#x3D; new JFrame();</span><br><span class="line">        f.setTitle(&quot;client&quot;);</span><br><span class="line">           </span><br><span class="line">        f.setSize(400, 300);</span><br><span class="line">        f.setLocation(600, 200);</span><br><span class="line">        f.setLayout(null);</span><br><span class="line">           </span><br><span class="line">        JButton b &#x3D; new JButton(&quot;send&quot;);</span><br><span class="line">        b.setBounds(10, 10, 80, 30);</span><br><span class="line">        f.add(b);</span><br><span class="line">          </span><br><span class="line">        final JTextField tf &#x3D; new JTextField();</span><br><span class="line">        tf.setBounds(10, 110, 80, 30);</span><br><span class="line">        f.add(tf);</span><br><span class="line">           </span><br><span class="line">        final JTextArea ta &#x3D; new JTextArea();</span><br><span class="line">        ta.setBounds(110,10, 200, 300);</span><br><span class="line">        f.add(ta);</span><br><span class="line">           </span><br><span class="line">        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        f.setVisible(true);</span><br><span class="line">           </span><br><span class="line">        final Socket s &#x3D; new Socket(&quot;127.0.0.1&quot;, 8888);</span><br><span class="line">          </span><br><span class="line">        new Thread() &#123;</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                while (true) &#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        DataInputStream dis &#x3D; new DataInputStream(</span><br><span class="line">                                s.getInputStream());</span><br><span class="line">                        String text &#x3D; dis.readUTF();</span><br><span class="line">                        ta.append(text+&quot;\r\n&quot;);</span><br><span class="line">                    &#125; catch (Exception e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">          </span><br><span class="line">        b.addActionListener(new ActionListener() &#123;</span><br><span class="line">              </span><br><span class="line">            @Override</span><br><span class="line">            public void actionPerformed(ActionEvent e) &#123;</span><br><span class="line">                  </span><br><span class="line">                String text &#x3D; tf.getText();</span><br><span class="line">                ta.append(text+&quot;\r\n&quot;);</span><br><span class="line">                  </span><br><span class="line">                try &#123;</span><br><span class="line">                    DataOutputStream dos &#x3D; new DataOutputStream(</span><br><span class="line">                            s.getOutputStream());</span><br><span class="line">                    dos.writeUTF(text);</span><br><span class="line">                &#125; catch (Exception ex) &#123;</span><br><span class="line">                    ex.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="十、实践项目"><a class="header-anchor" href="#十、实践项目">¶</a>十、实践项目</h1>
<p>学习了那么多知识，接下来就需要一个实践项目来把这些知识点都融会贯通。</p>
<p>[一本糊涂账-完整的J2SE项目]</p>

      
    </div>
    
    
    

    <div>
     
         <div>
 
  <div style="text-align:center;color:#bfbfbf;font-size:16px;">
   <span>-------- 本文结束 </span>
   <i class="fa fa-paw"></i>
   <span> 感谢阅读 --------</span>
  </div>
 
</div>
     
    </div>

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="潇 卟 甸 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="潇 卟 甸 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <!-- JS库 clipboard 拷贝内容到粘贴板-->
<script src="https://cdn.bootcss.com/clipboard.js/2.0.1/clipboard.min.js"></script>

<!-- JS库 sweetalert 显示提示信息-->
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<ul class="post-copyright">
<!-- 本文标题 -->
<li>
  <strong>本文标题： </strong>
  Java中级【HOW2J】
</li>

<!-- 本文作者 -->
<li class="post-copyright-author">
  <strong>本文作者： </strong>
  
</li>

<!-- 创建时间 -->
<li>
  <strong>创建时间： </strong>
  2020年06月30日 - 20时06分
</li>

<!-- 修改时间 -->
<li>
  <strong>修改时间： </strong>
  2020年08月23日 - 16时08分
</li>

<!-- 引用链接 -->
<li class="post-copyright-link">
  <strong>本文链接：</strong>
  <a href="http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/" title="Java中级【HOW2J】"
    >http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/</a
  >
  <span class="copy-path" title="点击复制引用链接"
    ><i
      style="cursor: pointer"
      class="fa fa-clipboard"
      data-clipboard-text="['s Blog | Java中级【HOW2J】](http://yoursite.com/2020/06/30/Java%E4%B8%AD%E7%BA%A7%E3%80%90HOW2J%E3%80%91/)"
      aria-label="复制成功"
    ></i
  ></span>
</li>

<!-- 版权声明 -->
<li class="post-copyright-license">
  <strong
    >版权声明：
  </strong>
  本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！
</li>
</ul>

<script>
var clipboard = new ClipboardJS(".fa-clipboard");
clipboard.on("success", function(target) {
  var message = document.createElement("div");
  message.innerHTML =
    '<i class="fa fa-check-circle message-icon"></i><span class="message-content">' +
    target.trigger.getAttribute("aria-label") +
    "</span>";
  swal({
    content: message,
    className: "copy-success-message",
    timer: 1000,
    button: false
  });
});
</script>
      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
          
            <a href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag"><i class="fa fa-tag"></i> 编程</a>
          
            <a href="/tags/%E4%B8%AD%E7%BA%A7/" rel="tag"><i class="fa fa-tag"></i> 中级</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div id="needsharebutton-postbottom">
            <span class="btn">
              <i class="fa fa-share-alt" aria-hidden="true"></i>
            </span>
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/06/27/Java%E5%9F%BA%E7%A1%80%E3%80%90HOW2J%E3%80%91/" rel="next" title="Java基础【HOW2J】">
                <i class="fa fa-chevron-left"></i> Java基础【HOW2J】
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/07/09/%E7%94%B5%E5%AD%90%E4%BF%A1%E6%81%AF%E7%B1%BB%E8%AF%BE%E4%BB%B6%E8%A7%86%E9%A2%91%E5%88%86%E4%BA%AB/" rel="prev" title="电子信息类课件视频分享">
                电子信息类课件视频分享 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <a href="/">
              <img class="site-author-image" itemprop="image"
                src="/uploads/picture.jpg"
                alt="潇 卟 甸" />
              </a>
            
              <p class="site-author-name" itemprop="name">潇 卟 甸</p>
              <p class="site-description motion-element" itemprop="description">总结自己一些知识，一些事</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">76</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

			
				<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
				<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
				<div class="widget-wrap">
					<div id="myCanvasContainer" class="widget tagcloud">
						<canvas width="250" height="250" id="resCanvas" style="width=100%">
							<ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">50</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%AE%9E%E8%B7%B5/" rel="tag">Java实践</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/b%E7%AB%99%E8%A7%86%E9%A2%91/" rel="tag">b站视频</a><span class="tag-list-count">33</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E7%BA%A7/" rel="tag">中级</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85/" rel="tag">喜马拉雅</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E8%AF%AD/" rel="tag">日语</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E4%BB%A3%E7%A0%81/" rel="tag">源代码</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%B5%E5%AD%90%E4%B9%A6/" rel="tag">电子书</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a><span class="tag-list-count">64</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BE%8E%E5%8C%96/" rel="tag">美化</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" rel="tag">计算机</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E6%8E%A8%E8%8D%90/" rel="tag">读书推荐</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E9%98%B6/" rel="tag">进阶</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a><span class="tag-list-count">5</span></li></ul>
						</canvas>
					</div>
				</div>
			

          </nav>

          

          
		  
		  <!-- 添加近期文章 -->
			
				<div class="links-of-blogroll motion-element links-of-blogroll-block">
				<div class="links-of-blogroll-title">
				<!-- modify icon to fire by szw -->
				<i class="fa fa-history fa-" aria-hidden="true"></i>
				近期文章
				</div>
				<ul class="links-of-blogroll-list">
				
				
					<li>
					<a href="/2021/08/15/Java%E9%9D%A2%E8%AF%95300%E9%A2%98/" title="Java面试300题" target="_blank">Java面试300题</a>
					</li>
				
					<li>
					<a href="/2021/08/13/80%E4%B8%AAJava%E9%9D%A2%E8%AF%95%E5%BF%85%E8%80%83%E9%A2%98/" title="80个Java面试必考题" target="_blank">80个Java面试必考题</a>
					</li>
				
					<li>
					<a href="/2021/08/10/%E5%B0%9A%E7%A1%85%E8%B0%B7-%E7%AC%AC3%E5%AD%A3%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%90Java%E5%AD%A6%E7%A7%91%E3%80%91/" title="尚硅谷-第3季面试题【Java学科】" target="_blank">尚硅谷-第3季面试题【Java学科】</a>
					</li>
				
					<li>
					<a href="/2021/08/05/%E5%B0%9A%E7%A1%85%E8%B0%B7-%E7%AC%AC2%E5%AD%A3%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%90Java%E5%AD%A6%E7%A7%91%E3%80%91/" title="尚硅谷-第2季面试题【Java学科】" target="_blank">尚硅谷-第2季面试题【Java学科】</a>
					</li>
				
					<li>
					<a href="/2021/08/04/%E5%B0%9A%E7%A1%85%E8%B0%B7-%E7%AC%AC1%E5%AD%A3%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%90Java%E5%AD%A6%E7%A7%91%E3%80%91/" title="尚硅谷-第1季面试题【Java学科】" target="_blank">尚硅谷-第1季面试题【Java学科】</a>
					</li>
				
				</ul>
			</div>
			

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                推荐阅读
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://sushan102.top/posts/1410804403/" title="博客搭建" target="_blank">博客搭建</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://how2j.cn?p=154642" title="HOW2J" target="_blank">HOW2J</a>
                  </li>
                
              </ul>
            </div>
          
		  
		  
			
		  
		  <div style="">
  <canvas id="canvas" style="width:60%;">当前浏览器不支持canvas，请更换浏览器后再试</canvas>
</div>
<script>
(function(){

   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //声明canvas的宽高
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //存储时间数据
    var data = [];
    //存储运动的小球
    var balls = [];
    //设置粒子半径
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //存储时间数字，由十位小时、个位小时、冒号、十位分钟、个位分钟、冒号、十位秒钟、个位秒钟这7个数字组成
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*生成点阵数字*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*更新时钟*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //时间发生变化
            if(NewData[i] !== data[i]){
                //将变化的数字值和在data数组中的索引存储在changeNumArray数组中
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //增加小球
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*更新小球状态*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*增加要运动的小球*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*渲染*/
    function render(){
        //重置画布宽度，达到清空画布的效果
        canvas.height = 100;
        //渲染时钟
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //渲染小球
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //更新时钟
        updateDigitTime();
        //更新小球状态
        updateBalls();
        //渲染
        render();
    },50);
}

})();
</script>


        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、异常处理"><span class="nav-text">一、异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、JAVA-异常-EXCEPTION"><span class="nav-text">1、JAVA 异常 EXCEPTION</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-文件不存在异常"><span class="nav-text">步骤 1 : 文件不存在异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-异常"><span class="nav-text">步骤 2 : 练习-异常</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、JAVA的异常处理办法-TRY-CATCH-THROWS"><span class="nav-text">2、JAVA的异常处理办法 TRY CATCH THROWS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-try-catch"><span class="nav-text">步骤 1 : try catch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-使用异常的父类进行catch"><span class="nav-text">步骤 2 : 使用异常的父类进行catch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-多异常捕捉办法1"><span class="nav-text">步骤 3 : 多异常捕捉办法1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-多异常捕捉办法2"><span class="nav-text">步骤 4 : 多异常捕捉办法2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-finally"><span class="nav-text">步骤 5 : finally</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-throws"><span class="nav-text">步骤 6 : throws</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-throw和throws的区别"><span class="nav-text">步骤 7 : throw和throws的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-8-练习-异常处理"><span class="nav-text">步骤 8 : 练习-异常处理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、JAVA-中异常的分类"><span class="nav-text">3、JAVA 中异常的分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-可查异常"><span class="nav-text">步骤 1 : 可查异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-运行时异常"><span class="nav-text">步骤 2 : 运行时异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-错误"><span class="nav-text">步骤 3 : 错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-三种分类"><span class="nav-text">步骤 4 : 三种分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-异常分类"><span class="nav-text">步骤 5 : 练习-异常分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、JAVA-THROWABLE接口"><span class="nav-text">4、JAVA THROWABLE接口</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-Throwable"><span class="nav-text">步骤 1 : Throwable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-Throwable"><span class="nav-text">步骤 2 : 练习-Throwable</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、JAVA-自定义异常"><span class="nav-text">5、JAVA 自定义异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-创建自定义异常"><span class="nav-text">示例 1 : 创建自定义异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-抛出自定义异常"><span class="nav-text">示例 2 : 抛出自定义异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-练习-自定义异常"><span class="nav-text">示例 3 : 练习-自定义异常</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、JAVA-异常综合练习题"><span class="nav-text">6、JAVA 异常综合练习题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-练习-异常综合1"><span class="nav-text">步骤 1 : 练习-异常综合1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-异常综合2"><span class="nav-text">步骤 2 : 练习-异常综合2</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、I-O"><span class="nav-text">二、I&#x2F;O</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、JAVA-的FILE类，以及常用方法"><span class="nav-text">1、JAVA 的FILE类，以及常用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-创建一个文件对象"><span class="nav-text">步骤 1 : 创建一个文件对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-文件常用方法1"><span class="nav-text">步骤 2 : 文件常用方法1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-文件常用方法2"><span class="nav-text">步骤 3 : 文件常用方法2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-遍历文件夹"><span class="nav-text">步骤 4 : 练习-遍历文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-遍历子文件夹"><span class="nav-text">步骤 5 : 练习-遍历子文件夹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、什么JAVA-的流-STREAM？"><span class="nav-text">2、什么JAVA 的流 STREAM？</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-什么是流"><span class="nav-text">步骤 1 : 什么是流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-文件输入流"><span class="nav-text">步骤 2 : 文件输入流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-流"><span class="nav-text">步骤 3 : 练习-流</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、JAVA-字节流-INPUTSTREAM-OUTPUTSTREAM"><span class="nav-text">3、JAVA 字节流 INPUTSTREAM OUTPUTSTREAM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-ASCII码-概念"><span class="nav-text">步骤 1 : ASCII码 概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-以字节流的形式读取文件内容"><span class="nav-text">步骤 2 : 以字节流的形式读取文件内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-以字节流的形式向文件写入数据"><span class="nav-text">步骤 3 : 以字节流的形式向文件写入数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-写入数据到文件"><span class="nav-text">步骤 4 : 练习-写入数据到文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-拆分文件"><span class="nav-text">步骤 5 : 练习-拆分文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-合并文件"><span class="nav-text">步骤 6 : 练习-合并文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、关闭流的方式"><span class="nav-text">4、关闭流的方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-在try中关闭"><span class="nav-text">步骤 1 : 在try中关闭</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-在finally中关闭"><span class="nav-text">步骤 2 : 在finally中关闭</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-使用try-的方式"><span class="nav-text">步骤 3 : 使用try()的方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-关闭流"><span class="nav-text">步骤 4 : 练习-关闭流</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、JAVA的字符流-READER-WRITER"><span class="nav-text">5、JAVA的字符流 READER WRITER</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-使用字符流读取文件"><span class="nav-text">步骤 1 : 使用字符流读取文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-使用字符流把字符串写入到文件"><span class="nav-text">步骤 2 : 使用字符流把字符串写入到文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-文件加密"><span class="nav-text">步骤 3 : 练习-文件加密</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-文件解密"><span class="nav-text">步骤 4 : 练习-文件解密</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、JAVA-编码中文问题系统透彻讲解-UNICODE-GBK-UTF-8-ISO-8859-1-之间的区别"><span class="nav-text">6、JAVA 编码中文问题系统透彻讲解 UNICODE GBK UTF-8 ISO-8859-1 之间的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-编码概念"><span class="nav-text">步骤 1 : 编码概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-常见编码"><span class="nav-text">步骤 2 : 常见编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-UNICODE和UTF"><span class="nav-text">步骤 3 : UNICODE和UTF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-Java采用的是Unicode"><span class="nav-text">步骤 4 : Java采用的是Unicode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-一个汉字使用不同编码方式的表现"><span class="nav-text">步骤 5 : 一个汉字使用不同编码方式的表现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-文件的编码方式-记事本"><span class="nav-text">步骤 6 : 文件的编码方式-记事本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-文件的编码方式-eclipse"><span class="nav-text">步骤 7 : 文件的编码方式-eclipse</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-8-用FileInputStream-字节流正确读取中文"><span class="nav-text">步骤 8 : 用FileInputStream 字节流正确读取中文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-9-用FileReader-字符流正确读取中文"><span class="nav-text">步骤 9 : 用FileReader 字符流正确读取中文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-10-练习-数字对应的中文"><span class="nav-text">步骤 10 : 练习-数字对应的中文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-11-练习-移除BOM"><span class="nav-text">步骤 11 : 练习-移除BOM</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、JAVA-缓存流BUFFEREDREADER，PRINTWRITER"><span class="nav-text">7、JAVA 缓存流BUFFEREDREADER，PRINTWRITER</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-使用缓存流读取数据"><span class="nav-text">示例 1 : 使用缓存流读取数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-使用缓存流写出数据"><span class="nav-text">示例 2 : 使用缓存流写出数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-flush"><span class="nav-text">示例 3 : flush</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-练习-移除注释"><span class="nav-text">示例 4 : 练习-移除注释</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、JAVA-数据流DATAINPUTSTREAM-，DATAOUTPUTSTREAM"><span class="nav-text">8、JAVA 数据流DATAINPUTSTREAM ，DATAOUTPUTSTREAM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-直接进行字符串的读写"><span class="nav-text">步骤 1 : 直接进行字符串的读写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-向文件中写入两个数字，然后把这两个数字分别读取出来"><span class="nav-text">步骤 2 : 练习-向文件中写入两个数字，然后把这两个数字分别读取出来</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、JAVA-对象流-OBJECTINPUTSTREAM-OBJECTOUTPUTSTREAM"><span class="nav-text">9、JAVA 对象流 OBJECTINPUTSTREAM,OBJECTOUTPUTSTREAM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-序列化一个对象"><span class="nav-text">步骤 1 : 序列化一个对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-序列化数组"><span class="nav-text">步骤 2 : 练习-序列化数组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10、JAVA-控制台输入流SYSTEM-IN和SCANNER"><span class="nav-text">10、JAVA 控制台输入流SYSTEM.IN和SCANNER</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-System-in"><span class="nav-text">步骤 1 : System.in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-Scanner读取字符串"><span class="nav-text">步骤 2 : Scanner读取字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-Scanner从控制台读取整数"><span class="nav-text">步骤 3 : Scanner从控制台读取整数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-自动创建类"><span class="nav-text">步骤 4 : 练习-自动创建类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11、JAVA-复制文件，复制文件夹"><span class="nav-text">11、JAVA 复制文件，复制文件夹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-练习-复制文件"><span class="nav-text">步骤 1 : 练习-复制文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-复制文件夹"><span class="nav-text">步骤 2 : 练习-复制文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-查找文件内容"><span class="nav-text">步骤 3 : 练习-查找文件内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12、流关系图"><span class="nav-text">12、流关系图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-流关系图"><span class="nav-text">步骤 1 : 流关系图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-其他流"><span class="nav-text">步骤 2 : 其他流</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、集合框架"><span class="nav-text">三、集合框架</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、ARRAYLIST-JAVA-ARRAYLIST-完整教程"><span class="nav-text">1、ARRAYLIST - JAVA ARRAYLIST 完整教程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-使用数组的局限性"><span class="nav-text">示例 1 : 使用数组的局限性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-ArrayList存放对象"><span class="nav-text">示例 2 : ArrayList存放对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、ARRAYLIST-ARRAYLIST-常用方法"><span class="nav-text">2、ARRAYLIST - ARRAYLIST 常用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-增加"><span class="nav-text">步骤 1 : 增加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-判断是否存在"><span class="nav-text">步骤 2 : 判断是否存在</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-获取指定位置的对象"><span class="nav-text">步骤 3 : 获取指定位置的对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-获取对象所处的位置"><span class="nav-text">步骤 4 : 获取对象所处的位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-删除"><span class="nav-text">步骤 5 : 删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-替换"><span class="nav-text">步骤 6 : 替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-获取大小"><span class="nav-text">步骤 7 : 获取大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-8-转换为数组"><span class="nav-text">步骤 8 : 转换为数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-9-把另一个容器所有对象都加进来"><span class="nav-text">步骤 9 : 把另一个容器所有对象都加进来</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-10-清空"><span class="nav-text">步骤 10 : 清空</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-11-练习-判断是否相同"><span class="nav-text">步骤 11 : 练习-判断是否相同</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-12-练习-MyStringBuffer"><span class="nav-text">步骤 12 : 练习-MyStringBuffer</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、ARRAYLIST-ARRAYLIST与LIST接口"><span class="nav-text">3、ARRAYLIST - ARRAYLIST与LIST接口</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-ArrayList和List"><span class="nav-text">步骤 1 : ArrayList和List</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-List接口的方法"><span class="nav-text">步骤 2 : List接口的方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、ARRAYLIST-ARRAYLIST上使用泛型"><span class="nav-text">4、ARRAYLIST - ARRAYLIST上使用泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-泛型-Generic"><span class="nav-text">步骤 1 : 泛型 Generic</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-泛型的简写"><span class="nav-text">步骤 2 : 泛型的简写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-泛型的系统学习"><span class="nav-text">步骤 3 : 泛型的系统学习</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-支持泛型的ArrayList"><span class="nav-text">步骤 4 : 练习-支持泛型的ArrayList</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、ARRAYLIST-遍历ARRAYLIST的三种方法"><span class="nav-text">5、ARRAYLIST - 遍历ARRAYLIST的三种方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-用for循环遍历"><span class="nav-text">步骤 1 : 用for循环遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-迭代器遍历"><span class="nav-text">步骤 2 : 迭代器遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-用增强型for循环"><span class="nav-text">步骤 3 : 用增强型for循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-删除ArrayList中的数据"><span class="nav-text">步骤 4 : 练习-删除ArrayList中的数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、其他集合-JAVA-LINKEDLIST"><span class="nav-text">6、其他集合 - JAVA LINKEDLIST</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-LinkedList-与-List接口"><span class="nav-text">示例 1 : LinkedList 与 List接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-双向链表-Deque"><span class="nav-text">示例 2 : 双向链表 - Deque</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-队列-Queue"><span class="nav-text">示例 3 : 队列 - Queue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-ArrayList-与-LinkedList的区别"><span class="nav-text">示例 4 : ArrayList 与 LinkedList的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-练习-使用LinkedList实现Stack栈"><span class="nav-text">示例 5 : 练习-使用LinkedList实现Stack栈</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、其他集合-JAVA-二叉树"><span class="nav-text">7、其他集合 - JAVA 二叉树</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-二叉树概念"><span class="nav-text">示例 1 : 二叉树概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-二叉树排序-插入数据"><span class="nav-text">示例 2 : 二叉树排序-插入数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-二叉树排序-遍历"><span class="nav-text">示例 3 : 二叉树排序-遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-练习-英雄二叉树"><span class="nav-text">示例 4 : 练习-英雄二叉树</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-练习-比较冒泡法，选择法以及二叉树排序的性能区别"><span class="nav-text">示例 5 : 练习-比较冒泡法，选择法以及二叉树排序的性能区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、其他集合-JAVA-HASHMAP"><span class="nav-text">8、其他集合 - JAVA HASHMAP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-HashMap的键值对"><span class="nav-text">示例 1 : HashMap的键值对</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-键不能重复，值可以重复"><span class="nav-text">示例 2 : 键不能重复，值可以重复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-练习-查找内容性能比较"><span class="nav-text">示例 3 : 练习-查找内容性能比较</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、其他集合-JAVA-HASHSET-详解"><span class="nav-text">9、其他集合 - JAVA HASHSET 详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-元素不能重复"><span class="nav-text">示例 1 : 元素不能重复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-没有顺序"><span class="nav-text">示例 2 : 没有顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-遍历"><span class="nav-text">示例 3 : 遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-HashSet和HashMap的关系"><span class="nav-text">示例 4 : HashSet和HashMap的关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-练习-HashSet"><span class="nav-text">示例 5 : 练习-HashSet</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10、其他集合-JAVA-集合框架-COLLECTION"><span class="nav-text">10、其他集合 - JAVA 集合框架 COLLECTION</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-Collection"><span class="nav-text">步骤 1 : Collection</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11、其他集合-JAVA-工具类-COLLECTIONS"><span class="nav-text">11、其他集合 - JAVA 工具类 COLLECTIONS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-反转"><span class="nav-text">步骤 1 : 反转</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-混淆"><span class="nav-text">步骤 2 : 混淆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-排序"><span class="nav-text">步骤 3 : 排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-交换"><span class="nav-text">步骤 4 : 交换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-滚动"><span class="nav-text">步骤 5 : 滚动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-线程安全化"><span class="nav-text">步骤 6 : 线程安全化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-练习-统计概率"><span class="nav-text">步骤 7 : 练习-统计概率</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12、关系与区别-JAVA-ARRAYLIST和HASHSET的区别"><span class="nav-text">12、关系与区别 - JAVA ARRAYLIST和HASHSET的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-是否有顺序"><span class="nav-text">示例 1 : 是否有顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-能否重复"><span class="nav-text">示例 2 : 能否重复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-练习-不重复的随机数"><span class="nav-text">示例 3 : 练习-不重复的随机数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13、关系与区别-ARRAYLIST和LINKEDLIST的区别详解"><span class="nav-text">13、关系与区别 - ARRAYLIST和LINKEDLIST的区别详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-ArrayList和LinkedList的区别"><span class="nav-text">步骤 1 : ArrayList和LinkedList的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-插入数据"><span class="nav-text">步骤 2 : 插入数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-定位数据"><span class="nav-text">步骤 3 : 定位数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-在后面插入数据"><span class="nav-text">步骤 4 : 练习-在后面插入数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-在中间插入数据"><span class="nav-text">步骤 5 : 练习-在中间插入数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14、关系与区别-HASHMAP和HASHTABLE之间的区别"><span class="nav-text">14、关系与区别 - HASHMAP和HASHTABLE之间的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-HashMap和Hashtable的区别"><span class="nav-text">步骤 1 : HashMap和Hashtable的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-反转key和value"><span class="nav-text">步骤 2 : 练习-反转key和value</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15、关系与区别-HASHSET、-LINKEDHASHSET、TREESET之间的区别"><span class="nav-text">15、关系与区别 - HASHSET、 LINKEDHASHSET、TREESET之间的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-HashSet-LinkedHashSet-TreeSet"><span class="nav-text">步骤 1 : HashSet LinkedHashSet TreeSet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-既不重复，又有顺序"><span class="nav-text">步骤 2 : 练习-既不重复，又有顺序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16、其他-JAVA-HASHCODE原理详解"><span class="nav-text">16、其他 - JAVA HASHCODE原理详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-List查找的低效率"><span class="nav-text">步骤 1 : List查找的低效率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-HashMap的性能表现"><span class="nav-text">步骤 2 : HashMap的性能表现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-HashMap原理与字典"><span class="nav-text">步骤 3 : HashMap原理与字典</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-分析HashMap性能卓越的原因"><span class="nav-text">步骤 4 : 分析HashMap性能卓越的原因</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-HashSet判断是否重复"><span class="nav-text">步骤 5 : HashSet判断是否重复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-自定义字符串的hashcode"><span class="nav-text">步骤 6 : 练习-自定义字符串的hashcode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-练习-自定义MyHashMap"><span class="nav-text">步骤 7 : 练习-自定义MyHashMap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-8-练习-内容查找性能比较"><span class="nav-text">步骤 8 : 练习-内容查找性能比较</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17、其他-JAVA-COMPARATOR和COMPARABLE-比较器"><span class="nav-text">17、其他 - JAVA COMPARATOR和COMPARABLE 比较器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-Comparator"><span class="nav-text">步骤 1 : Comparator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-Comparable"><span class="nav-text">步骤 2 : Comparable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-自定义顺序的TreeSet"><span class="nav-text">步骤 3 : 练习-自定义顺序的TreeSet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-Comparable"><span class="nav-text">步骤 4 : 练习-Comparable</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18、其他-聚合操作"><span class="nav-text">18、其他 - 聚合操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-聚合操作"><span class="nav-text">步骤 1 : 聚合操作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、泛型"><span class="nav-text">四、泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、JAVA-什么是-泛型？"><span class="nav-text">1、JAVA 什么是 泛型？</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-不使用泛型"><span class="nav-text">示例 1 : 不使用泛型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-使用泛型"><span class="nav-text">示例 2 : 使用泛型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-子类对象"><span class="nav-text">示例 3 : 子类对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-泛型的简写"><span class="nav-text">示例 4 : 泛型的简写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-练习-泛型"><span class="nav-text">示例 5 : 练习-泛型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、JAVA-如何设计支持泛型的类"><span class="nav-text">2、JAVA 如何设计支持泛型的类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-不支持泛型的Stack"><span class="nav-text">步骤 1 : 不支持泛型的Stack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-支持泛型的Stack"><span class="nav-text">步骤 2 : 支持泛型的Stack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-支持泛型的二叉树"><span class="nav-text">步骤 3 : 练习-支持泛型的二叉树</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、JAVA-泛型通配符-EXTENDS-SUPER-的用法"><span class="nav-text">3、JAVA 泛型通配符 ? EXTENDS SUPER 的用法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-extends"><span class="nav-text">示例 1 : ? extends</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-super"><span class="nav-text">示例 2 : ? super</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-泛型通配符"><span class="nav-text">示例 3 : 泛型通配符?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-总结"><span class="nav-text">示例 4 : 总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-练习-extends"><span class="nav-text">示例 5 : 练习- extends</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-6-练习-二叉树"><span class="nav-text">示例 6 : 练习-二叉树</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、JAVA-中的子类泛型-转型-成父类泛型"><span class="nav-text">4、JAVA 中的子类泛型 转型 成父类泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-对象转型"><span class="nav-text">步骤 1 : 对象转型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-子类泛型转父类泛型"><span class="nav-text">步骤 2 : 子类泛型转父类泛型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-假设可以转型成功"><span class="nav-text">步骤 3 : 假设可以转型成功</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-父类泛型能否转换为子类泛型？"><span class="nav-text">步骤 4 : 练习-父类泛型能否转换为子类泛型？</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、Lambda"><span class="nav-text">五、Lambda</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、JAVA-LAMBDA-表达式教程"><span class="nav-text">1、JAVA LAMBDA 表达式教程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-普通方法"><span class="nav-text">步骤 1 : 普通方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-匿名类方式"><span class="nav-text">步骤 2 : 匿名类方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-Lambda方式"><span class="nav-text">步骤 3 : Lambda方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-设置eclipse以支持Lambda"><span class="nav-text">步骤 4 : 设置eclipse以支持Lambda</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-从匿名类演变成Lambda表达式"><span class="nav-text">步骤 5 : 从匿名类演变成Lambda表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-匿名方法"><span class="nav-text">步骤 6 : 匿名方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-Lambda的弊端"><span class="nav-text">步骤 7 : Lambda的弊端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-8-练习-Comparator"><span class="nav-text">步骤 8 : 练习-Comparator</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、方法引用"><span class="nav-text">2、方法引用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-引用静态方法"><span class="nav-text">步骤 1 : 引用静态方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-引用对象方法"><span class="nav-text">步骤 2 : 引用对象方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-引用容器中的对象的方法"><span class="nav-text">步骤 3 : 引用容器中的对象的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-引用构造器"><span class="nav-text">步骤 4 : 引用构造器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-引用静态方法"><span class="nav-text">步骤 5 : 练习-引用静态方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-引用容器中的对象的方法"><span class="nav-text">步骤 6 : 练习-引用容器中的对象的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-练习-引用构造器"><span class="nav-text">步骤 7 : 练习-引用构造器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、JAVA-集合的聚合操作"><span class="nav-text">3、JAVA 集合的聚合操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-传统方式与聚合操作方式遍历数据"><span class="nav-text">步骤 1 : 传统方式与聚合操作方式遍历数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-Stream和管道的概念"><span class="nav-text">步骤 2 : Stream和管道的概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-管道源"><span class="nav-text">步骤 3 : 管道源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-中间操作"><span class="nav-text">步骤 4 : 中间操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-结束操作"><span class="nav-text">步骤 5 : 结束操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-聚合操作"><span class="nav-text">步骤 6 : 练习-聚合操作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、多线程"><span class="nav-text">六、多线程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、JAVA-创建一个线程的三种方式"><span class="nav-text">1、JAVA 创建一个线程的三种方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-线程概念"><span class="nav-text">步骤 1 : 线程概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-创建多线程-继承线程类"><span class="nav-text">步骤 2 : 创建多线程-继承线程类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-创建多线程-实现Runnable接口"><span class="nav-text">步骤 3 : 创建多线程-实现Runnable接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-创建多线程-匿名类"><span class="nav-text">步骤 4 : 创建多线程-匿名类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-创建多线程的三种方式"><span class="nav-text">步骤 5 : 创建多线程的三种方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-同步查找文件内容"><span class="nav-text">步骤 6 : 练习-同步查找文件内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、JAVA-常见的线程方法"><span class="nav-text">2、JAVA 常见的线程方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-当前线程暂停"><span class="nav-text">示例 1 : 当前线程暂停</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-加入到当前线程中"><span class="nav-text">示例 2 : 加入到当前线程中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-线程优先级"><span class="nav-text">示例 3 : 线程优先级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-临时暂停"><span class="nav-text">示例 4 : 临时暂停</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-守护线程"><span class="nav-text">示例 5 : 守护线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-6-练习-英雄充能"><span class="nav-text">示例 6 : 练习-英雄充能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-7-练习-破解密码"><span class="nav-text">示例 7 : 练习-破解密码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、JAVA-多线程同步-SYNCHRONIZED-详解"><span class="nav-text">3、JAVA 多线程同步 SYNCHRONIZED 详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-演示同步问题"><span class="nav-text">步骤 1 : 演示同步问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-分析同步问题产生的原因"><span class="nav-text">步骤 2 : 分析同步问题产生的原因</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-解决思路"><span class="nav-text">步骤 3 : 解决思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-synchronized-同步对象概念"><span class="nav-text">步骤 4 : synchronized 同步对象概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-使用synchronized-解决同步问题"><span class="nav-text">步骤 5 : 使用synchronized 解决同步问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-使用hero对象作为同步对象"><span class="nav-text">步骤 6 : 使用hero对象作为同步对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-在方法前，加上修饰符synchronized"><span class="nav-text">步骤 7 : 在方法前，加上修饰符synchronized</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-8-线程安全的类"><span class="nav-text">步骤 8 : 线程安全的类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-9-练习-在类方法前面加修饰符synchronized"><span class="nav-text">步骤 9 : 练习-在类方法前面加修饰符synchronized</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-10-练习-线程安全的MyStack"><span class="nav-text">步骤 10 : 练习-线程安全的MyStack</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、常见的线程安全相关的面试题"><span class="nav-text">4、常见的线程安全相关的面试题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-HashMap和Hashtable的区别-v2"><span class="nav-text">步骤 1 : HashMap和Hashtable的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-StringBuffer和StringBuilder的区别"><span class="nav-text">步骤 2 : StringBuffer和StringBuilder的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-ArrayList和Vector的区别"><span class="nav-text">步骤 3 : ArrayList和Vector的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-把非线程安全的集合转换为线程安全"><span class="nav-text">步骤 4 : 把非线程安全的集合转换为线程安全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-线程安全的MyStack"><span class="nav-text">步骤 5 : 练习-线程安全的MyStack</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、JAVA-演示多线程死锁"><span class="nav-text">5、JAVA 演示多线程死锁</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-演示死锁"><span class="nav-text">步骤 1 : 演示死锁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-死锁"><span class="nav-text">步骤 2 : 练习-死锁</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、JAVA-线程之间的交互-WAIT和NOTIFY"><span class="nav-text">6、JAVA 线程之间的交互 WAIT和NOTIFY</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-不好的解决方式"><span class="nav-text">步骤 1 : 不好的解决方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-使用wait和notify进行线程交互"><span class="nav-text">步骤 2 : 使用wait和notify进行线程交互</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-关于wait、notify和notifyAll"><span class="nav-text">步骤 3 : 关于wait、notify和notifyAll</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-线程交互"><span class="nav-text">步骤 4 : 练习-线程交互</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-多线程交互"><span class="nav-text">步骤 5 : 练习-多线程交互</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-生产者消费者问题"><span class="nav-text">步骤 6 : 练习-生产者消费者问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、JAVA-如何开发一个自定义线程池"><span class="nav-text">7、JAVA 如何开发一个自定义线程池</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-线程池设计思路"><span class="nav-text">步骤 1 : 线程池设计思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-开发一个自定义线程池"><span class="nav-text">步骤 2 : 开发一个自定义线程池</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-测试线程池"><span class="nav-text">步骤 3 : 测试线程池</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-使用java自带线程池"><span class="nav-text">步骤 4 : 使用java自带线程池</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-借助线程池同步查找文件内容"><span class="nav-text">步骤 5 : 练习- 借助线程池同步查找文件内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、LOCK对象"><span class="nav-text">8、LOCK对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-回忆-synchronized-同步的方式"><span class="nav-text">步骤 1 : 回忆 synchronized 同步的方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-使用Lock对象实现同步效果"><span class="nav-text">步骤 2 : 使用Lock对象实现同步效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-trylock方法"><span class="nav-text">步骤 3 : trylock方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-线程交互"><span class="nav-text">步骤 4 : 线程交互</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-总结Lock和synchronized的区别"><span class="nav-text">步骤 5 : 总结Lock和synchronized的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-借助Lock，把MyStack修改为线程安全的类"><span class="nav-text">步骤 6 : 练习-借助Lock，把MyStack修改为线程安全的类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-练习-借助tryLock-解决死锁问题"><span class="nav-text">步骤 7 : 练习-借助tryLock 解决死锁问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-8-练习-生产者消费者问题"><span class="nav-text">步骤 8 : 练习-生产者消费者问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、原子访问"><span class="nav-text">9、原子访问</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-原子性操作概念"><span class="nav-text">步骤 1 : 原子性操作概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-AtomicInteger"><span class="nav-text">步骤 2 : AtomicInteger</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-同步测试"><span class="nav-text">步骤 3 : 同步测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-使用AtomicInteger来替换Hero类中的synchronized"><span class="nav-text">步骤 4 : 练习-使用AtomicInteger来替换Hero类中的synchronized</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七、JDBC"><span class="nav-text">七、JDBC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、JAVA-使用JDBC之前，先要准备MYSQL"><span class="nav-text">1、JAVA 使用JDBC之前，先要准备MYSQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-MySQL"><span class="nav-text">步骤 1 : MySQL</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、教程"><span class="nav-text">2、教程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-为项目导入mysql-jdbc的jar包"><span class="nav-text">步骤 1 : 为项目导入mysql-jdbc的jar包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-初始化驱动"><span class="nav-text">步骤 2 : 初始化驱动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-建立与数据库的连接"><span class="nav-text">步骤 3 : 建立与数据库的连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-创建Statement"><span class="nav-text">步骤 4 : 创建Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-执行SQL语句"><span class="nav-text">步骤 5 : 执行SQL语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-关闭连接"><span class="nav-text">步骤 6 : 关闭连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-使用try-with-resource的方式自动关闭连接"><span class="nav-text">步骤 7 : 使用try-with-resource的方式自动关闭连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-8-练习-一次性-插入100条数据"><span class="nav-text">步骤 8 : 练习-一次性 插入100条数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、增、删、改"><span class="nav-text">3、增、删、改</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-增加-v2"><span class="nav-text">步骤 1 : 增加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-删除"><span class="nav-text">步骤 2 : 删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-修改"><span class="nav-text">步骤 3 : 修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-增-删-改"><span class="nav-text">步骤 4 : 练习-增 删 改</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、在JDBC中使用RESULTSET查询SQL语句"><span class="nav-text">4、在JDBC中使用RESULTSET查询SQL语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-查询语句"><span class="nav-text">步骤 1 : 查询语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-SQL语句判断账号密码是否正确"><span class="nav-text">步骤 2 : SQL语句判断账号密码是否正确</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-获取总数"><span class="nav-text">步骤 3 : 获取总数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-分页查询"><span class="nav-text">步骤 4 : 练习-分页查询</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、在JDBC中使用预编译STATEMENT-以及它的优点"><span class="nav-text">5、在JDBC中使用预编译STATEMENT 以及它的优点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-使用PreparedStatement"><span class="nav-text">步骤 1 : 使用PreparedStatement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-PreparedStatement的优点1-参数设置"><span class="nav-text">步骤 2 : PreparedStatement的优点1-参数设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-PreparedStatement的优点2-性能表现"><span class="nav-text">步骤 3 : PreparedStatement的优点2-性能表现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-PreparedStatement的优点3-防止SQL注入式攻击"><span class="nav-text">步骤 4 : PreparedStatement的优点3-防止SQL注入式攻击</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-性能比较"><span class="nav-text">步骤 5 : 练习-性能比较</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、EXECUTE与EXECUTEUPDATE的区别"><span class="nav-text">6、EXECUTE与EXECUTEUPDATE的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-相同点"><span class="nav-text">步骤 1 : 相同点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-不同点"><span class="nav-text">步骤 2 : 不同点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-分页查询"><span class="nav-text">步骤 3 : 练习-分页查询</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、获取自增长ID以及表的元数据"><span class="nav-text">7、获取自增长ID以及表的元数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-获取自增长id"><span class="nav-text">步骤 1 : 获取自增长id</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-获取表的元数据"><span class="nav-text">步骤 2 : 获取表的元数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-自增长id"><span class="nav-text">步骤 3 : 练习-自增长id</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、如何在JDBC中使用事务"><span class="nav-text">8、如何在JDBC中使用事务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-不使用事务的情况"><span class="nav-text">步骤 1 : 不使用事务的情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-使用事务"><span class="nav-text">步骤 2 : 使用事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-MYSQL-表的类型必须是INNODB才支持事务"><span class="nav-text">步骤 3 : MYSQL 表的类型必须是INNODB才支持事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-事务"><span class="nav-text">步骤 4 : 练习-事务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、使用JDBC做一个ORM例子"><span class="nav-text">9、使用JDBC做一个ORM例子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-根据id返回一个Hero对象"><span class="nav-text">步骤 1 : 根据id返回一个Hero对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-ORM"><span class="nav-text">步骤 2 : 练习-ORM</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10、基于JDBC设计DAO的实例"><span class="nav-text">10、基于JDBC设计DAO的实例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-DAO接口"><span class="nav-text">步骤 1 : DAO接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-HeroDAO"><span class="nav-text">步骤 2 : HeroDAO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-ItemDAO"><span class="nav-text">步骤 3 : 练习-ItemDAO</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11、数据库连接池"><span class="nav-text">11、数据库连接池</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-数据库连接池原理-传统方式"><span class="nav-text">步骤 1 : 数据库连接池原理-传统方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-数据库连接池原理-使用池"><span class="nav-text">步骤 2 : 数据库连接池原理-使用池</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-ConnectionPool构造方法和初始化"><span class="nav-text">步骤 3 : ConnectionPool构造方法和初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-测试类"><span class="nav-text">步骤 4 : 测试类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-数据库连接池"><span class="nav-text">步骤 5 : 练习-数据库连接池</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#八、图形界面"><span class="nav-text">八、图形界面</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、一个简单的-SWING-例子"><span class="nav-text">1、一个简单的 SWING 例子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-简单的例子"><span class="nav-text">步骤 1 : 简单的例子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-在上次关闭位置启动窗口"><span class="nav-text">步骤 2 : 练习-在上次关闭位置启动窗口</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、SWING-如何进行事件监听"><span class="nav-text">2、SWING 如何进行事件监听</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-按钮监听"><span class="nav-text">示例 1 : 按钮监听</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-键盘监听"><span class="nav-text">示例 2 : 键盘监听</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-鼠标监听"><span class="nav-text">示例 3 : 鼠标监听</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-适配器"><span class="nav-text">示例 4 : 适配器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-练习-切换显示"><span class="nav-text">示例 5 : 练习-切换显示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-6-练习-上下左右移动"><span class="nav-text">示例 6 : 练习-上下左右移动</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、SWING-的容器-JFRAME和JDIALOG"><span class="nav-text">3、SWING 的容器 JFRAME和JDIALOG</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-JFrame"><span class="nav-text">步骤 1 : JFrame</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-JDialog"><span class="nav-text">步骤 2 : JDialog</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-模态JDialog"><span class="nav-text">步骤 3 : 模态JDialog</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-窗体大小不可变化"><span class="nav-text">步骤 4 : 窗体大小不可变化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-模态与大小变化"><span class="nav-text">步骤 5 : 练习-模态与大小变化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、SWING五种常见的布局器"><span class="nav-text">4、SWING五种常见的布局器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-绝对定位"><span class="nav-text">示例 1 : 绝对定位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-FlowLayout"><span class="nav-text">示例 2 : FlowLayout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-BorderLayout"><span class="nav-text">示例 3 : BorderLayout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-GridLayout"><span class="nav-text">示例 4 : GridLayout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-setPreferredSize"><span class="nav-text">示例 5 : setPreferredSize</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-6-CardLayout"><span class="nav-text">示例 6 : CardLayout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-7-练习-计算器上的按钮"><span class="nav-text">示例 7 : 练习-计算器上的按钮</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、SWING-中的组件列表"><span class="nav-text">5、SWING 中的组件列表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-标签"><span class="nav-text">示例 1 : 标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-使用JLabel显示图片"><span class="nav-text">示例 2 : 使用JLabel显示图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-按钮"><span class="nav-text">示例 3 : 按钮</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-复选框"><span class="nav-text">示例 4 : 复选框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-单选框"><span class="nav-text">示例 5 : 单选框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-6-按钮组"><span class="nav-text">示例 6 : 按钮组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-7-下拉框"><span class="nav-text">示例 7 : 下拉框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-8-对话框"><span class="nav-text">示例 8 : 对话框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-9-文本框"><span class="nav-text">示例 9 : 文本框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-10-密码框"><span class="nav-text">示例 10 : 密码框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-11-文本域"><span class="nav-text">示例 11 : 文本域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-12-进度条"><span class="nav-text">示例 12 : 进度条</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-13-文件选择器"><span class="nav-text">示例 13 : 文件选择器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、SWING-四种常见面板"><span class="nav-text">6、SWING 四种常见面板</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-基本面板"><span class="nav-text">示例 1 : 基本面板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-ContentPane"><span class="nav-text">示例 2 : ContentPane</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-SplitPanel"><span class="nav-text">示例 3 : SplitPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-JScrollPanel"><span class="nav-text">示例 4 : JScrollPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-TabbedPanel"><span class="nav-text">示例 5 : TabbedPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-6-CardLayerout"><span class="nav-text">示例 6 : CardLayerout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-7-练习-SplitPanel"><span class="nav-text">示例 7 : 练习-SplitPanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-8-练习-按照eclipse的风格显示多个java文件"><span class="nav-text">示例 8 : 练习-按照eclipse的风格显示多个java文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、组件综合练习"><span class="nav-text">7、组件综合练习</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-练习-为空判断"><span class="nav-text">步骤 1 : 练习-为空判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-数字校验"><span class="nav-text">步骤 2 : 练习-数字校验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-账号密码验证"><span class="nav-text">步骤 3 : 练习-账号密码验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-黄鹤"><span class="nav-text">步骤 4 : 练习-黄鹤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-复利计算器"><span class="nav-text">步骤 5 : 练习-复利计算器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-进度条"><span class="nav-text">步骤 6 : 练习-进度条</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-7-练习-显示文件夹复制进度条"><span class="nav-text">步骤 7 : 练习-显示文件夹复制进度条</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、如何在SWING中使用菜单JMENU"><span class="nav-text">8、如何在SWING中使用菜单JMENU</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-菜单栏和菜单"><span class="nav-text">步骤 1 : 菜单栏和菜单</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-菜单项"><span class="nav-text">步骤 2 : 菜单项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-完成一个完整的记事本界面"><span class="nav-text">步骤 3 : 练习-完成一个完整的记事本界面</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、SWING如何使用工具栏JTOOLBAR"><span class="nav-text">9、SWING如何使用工具栏JTOOLBAR</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-工具栏"><span class="nav-text">步骤 1 : 工具栏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-给按钮设置提示信息"><span class="nav-text">步骤 2 : 给按钮设置提示信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-禁止工具栏拖动"><span class="nav-text">步骤 3 : 禁止工具栏拖动</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10、SWING-使用-JTABLE详解"><span class="nav-text">10、SWING 使用 JTABLE详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-1-基本表格"><span class="nav-text">示例 1 : 基本表格</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-2-JScrollPane"><span class="nav-text">示例 2 : JScrollPane</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-3-列宽"><span class="nav-text">示例 3 : 列宽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-4-TableModel"><span class="nav-text">示例 4 : TableModel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-5-进一步理解TableModel"><span class="nav-text">示例 5 : 进一步理解TableModel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-6-TableModel-与DAO结合"><span class="nav-text">示例 6 : TableModel 与DAO结合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-7-TableSelectionModel"><span class="nav-text">示例 7 : TableSelectionModel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-8-更新Table"><span class="nav-text">示例 8 : 更新Table</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-9-输入项验证"><span class="nav-text">示例 9 : 输入项验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例-10-选中指定行"><span class="nav-text">示例 10 : 选中指定行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11、两种SWING下的日期控件-DATEPICKER-和JXDATEPICKER"><span class="nav-text">11、两种SWING下的日期控件 DATEPICKER 和JXDATEPICKER</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-DatePicker"><span class="nav-text">步骤 1 : DatePicker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-JXDatePicker"><span class="nav-text">步骤 2 : JXDatePicker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-统计文件数量"><span class="nav-text">步骤 3 : 练习-统计文件数量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12、表格综合练习"><span class="nav-text">12、表格综合练习</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-练习-增加"><span class="nav-text">步骤 1 : 练习-增加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-删除"><span class="nav-text">步骤 2 : 练习-删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-练习-编辑"><span class="nav-text">步骤 3 : 练习-编辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-练习-修改"><span class="nav-text">步骤 4 : 练习-修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-使用按钮分页"><span class="nav-text">步骤 5 : 练习-使用按钮分页</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-使用下拉框分页"><span class="nav-text">步骤 6 : 练习-使用下拉框分页</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13、SWING中的线程"><span class="nav-text">13、SWING中的线程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-三种线程"><span class="nav-text">步骤 1 : 三种线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-事件调度线程是单线程的"><span class="nav-text">步骤 2 : 事件调度线程是单线程的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-初始化线程"><span class="nav-text">步骤 3 : 初始化线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-事件调度线程"><span class="nav-text">步骤 4 : 事件调度线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-长耗时任务线程"><span class="nav-text">步骤 5 : 长耗时任务线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-查找文件内容"><span class="nav-text">步骤 6 : 练习-查找文件内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14、SWING-皮肤-LOOK-AND-FEEL"><span class="nav-text">14、SWING 皮肤 LOOK AND FEEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-设置皮肤"><span class="nav-text">步骤 1 : 设置皮肤</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#九、网络编程"><span class="nav-text">九、网络编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、IP地址与端口概念"><span class="nav-text">1、IP地址与端口概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-IP地址"><span class="nav-text">步骤 1 : IP地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-端口"><span class="nav-text">步骤 2 : 端口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-获取本机IP地址"><span class="nav-text">步骤 3 : 获取本机IP地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-ping命令"><span class="nav-text">步骤 4 : ping命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-使用java-执行ping命令"><span class="nav-text">步骤 5 : 使用java 执行ping命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-判断本网段有多少可用的ip地址"><span class="nav-text">步骤 6 : 练习-判断本网段有多少可用的ip地址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、JAVA-SOCKET-收发消息入门例子"><span class="nav-text">2、JAVA SOCKET 收发消息入门例子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-建立连接"><span class="nav-text">步骤 1 : 建立连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-收发数字"><span class="nav-text">步骤 2 : 收发数字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-3-收发字符串"><span class="nav-text">步骤 3 : 收发字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-4-使用Scanner"><span class="nav-text">步骤 4 : 使用Scanner</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-5-练习-服务端和客户端互聊"><span class="nav-text">步骤 5 : 练习-服务端和客户端互聊</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-6-练习-聊天机器人数据库"><span class="nav-text">步骤 6 : 练习-聊天机器人数据库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、使用-JAVA-SOCKET-开发多线程聊天程序"><span class="nav-text">3、使用 JAVA SOCKET 开发多线程聊天程序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-1-同时收发消息"><span class="nav-text">步骤 1 : 同时收发消息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#步骤-2-练习-有图形界面的聊天程序"><span class="nav-text">步骤 2 : 练习-有图形界面的聊天程序</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#十、实践项目"><span class="nav-text">十、实践项目</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script
  async
  src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"
></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">潇 卟 甸</span>

  
</div>

<!--

  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>

-->



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
     我的第 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 位朋友，
    </span>
  

  
    <span class="site-pv">
     历经 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次回眸才与你相遇
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: true,
        appId: 'w1mVK8MFY7n2fWIKlq2t9EJn-gzGzoHsz',
        appKey: 'NMGzUaGqmpzSiSItkHBQGUaA',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("w1mVK8MFY7n2fWIKlq2t9EJn-gzGzoHsz", "NMGzUaGqmpzSiSItkHBQGUaA");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">

  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  

  

  


  

 <script src="/js/src/activate-power-mode.js"></script>
 <script>
   POWERMODE.colorful = true;
   POWERMODE.shake = false;
   document.body.addEventListener('input', POWERMODE);
 </script>




<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script>
<script>
  function timer() {
    var ages = moment.preciseDiff(moment(),moment(20200610,"YYYYMMDD"));
    ages = ages.replace(/years?/, "年");
    ages = ages.replace(/months?/, "月");
    ages = ages.replace(/days?/, "天");
    ages = ages.replace(/hours?/, "小时");
    ages = ages.replace(/minutes?/, "分");
    ages = ages.replace(/seconds?/, "秒");
    ages = ages.replace(/\d+/g, '<span style="color:#1890ff">$&</span>');
    div.innerHTML = `我已在此等候你 ${ages}`;
  }
  var div = document.createElement("div");
  //插入到copyright之后
  var copyright = document.querySelector(".copyright");
  document.querySelector(".footer-inner").insertBefore(div, copyright.nextSibling);
  timer();
  setInterval("timer()",1000)
</script>




<script>
  var OriginTitile = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function() {
    if (document.hidden) {
      document.title = "(つェ⊂)我藏好了哦~" + OriginTitile;
      clearTimeout(titleTime);
    } else {
      document.title = "(*´∇｀*) 被你发现啦~" + OriginTitile;
      titleTime = setTimeout(function() {
        document.title = OriginTitile;
      }, 2000);
    }
  });
</script>


  
</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
<!-- 代码块复制功能 -->
<script type="text/javascript" src="/js/src/clipboard.min.js"></script>  
<script type="text/javascript" src="/js/src/clipboard-use.js"></script>
